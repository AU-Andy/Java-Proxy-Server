{"version":3,"sources":["../js/ext/jquery.backgroundcolor.js","jsx/post-options.js","jsx/recommendations.js","jsx/gallery/grid.js","../js/promoted/promoted.js","../js/ext/react-motion-0.4.2.js","../js/ext/jquery.autogrow.js","../js/ext/jquery.combobox.js","../js/ext/jquery.fullscreen.js","../js/ext/jquery.validate.js","../js/ext/polyfill/requestanimationframe.js","../js/utils/imgur-history.js","../js/utils/imgur-scroll.js","../js/utils/colorbox-confirm.js","../js/utils/base64.js","../js/utils/embed.js","../js/next-image-receiver.js","../js/album.js","jsx/elements/tag/view.js","jsx/promoted-spotlight.js","../js/ext/zeroclipboard.js","jsx/sidegallery.js","jsx/sidegalleryitem.js","jsx/report-bad-ads.js","../js/share-buttons.js","../js/caption.js","../js/elements/combobox.js","jsx/elements/confirm.js","../js/elements/popupmenu.js","../js/comment.js","../js/commenttree.js","../js/commentlist.js","../js/insidecommentsarea.js","jsx/insidenav.js","../js/fullscreen.js","../js/caption/reply.js","../js/gallery.js","../js/gallery/inside.js","../js/gallery/outside.js","../js/gallery/mainoutside.js","jsx/gallery/header.js","jsx/gallery/downloadpost.js","jsx/gallery/embed.js","jsx/gallery/postactionbar.js","jsx/gallery/privacy.js","jsx/gallery/shareimage.js","jsx/gallery/sharepost.js","../js/gallery/sourcebar.js","jsx/gallery/post.js","jsx/gallery/TitleDesc.js","jsx/gallery/TagSuggest.js","jsx/gallery/DescriptionTagSuggestContainer.js","../js/gallery/store/saving.js","jsx/gallery/store/tag.js","../js/factory/gallery.js","jsx/factory/gallery/inside.js","../js/factory/gallery/outside.js","../js/favorite.js","../js/shareonimgur.js","../js/gallerypost.js","../js/elements/share/title.js","../js/elements/share/publish.js","../js/elements/sortedlist/sortedlist.js","../js/elements/sortedlist/sortedlist-emptyable.js","../js/elements/sortedlist/sortedlist-emptyable-outside.js","../js/elements/tag/follow.js","../js/elements/tag/groupselector.js","../js/elements/tag/groupselector-main.js","../js/elements/tag/group.js","../js/elements/tag/usergroup.js","../js/elements/tag/groupmodel.js","../js/elements/tag/tag.js","../js/elements/tag/removabletag.js","../js/elements/tag/outsidewidget.js","../js/elements/tag/model.js","../js/elements/tag/model/suggest.js","../js/elements/tag/model/suggest-noprovider.js","../js/elements/tag/autocompletecomponent.js","../js/elements/tag/comparator.js","../js/elements/tag/share-tag-component.js","../js/elements/tag/taglist-component.js","../js/elements/tag/validator/tag.js","../js/elements/tag/validator/group.js","../js/elements/tag/sentence.js","../js/elements/tag/store/suggestion.js","../js/elements/tag/store/currentimage.js","../js/elements/tag/store/group.js","../js/elements/tag/store/tagimage.js","../js/elements/tag/store/tag.js","../js/elements/tag/store/taggroup.js","../js/elements/tag/store/outsideactivetag.js","../js/elements/tag/controller/outsidecomponent.js","../js/elements/tag/controller/usergroup.js","../js/elements/tag/controller/groupselectorlimits.js","../js/elements/tag/suggestedtag.js","../js/elements/copy.js","../js/elements/flash.js","jsx/elements/pressbutton.js","jsx/elements/nanoscroller.js","jsx/elements/socialicons.js","jsx/elements/report.js","jsx/elements/RadioBox.js","../js/ext/jquery.smoothscroll.js","templates/favoriteBar.js","../js/promoted/promotedEvents.js","../js/promoted/promotedPost.js","../js/promoted/promotedSource.js","../js/promoted/promotedSourceAdzerk.js","../js/generatelinks.js","../js/album/images.js","../js/images.js","../js/utils/titledesc.js","../js/gallery/gallerybundleloaded.js"],"names":["flashElement","element","speed","bgColor","flashColor","style","backgroundColor","setTimeout","checkEmailVerification","code","callback","$","post","response","data","verified","colorbox","close","invalid","humanMsg","displayMsg","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","prototype","Object","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","reinsert","arr","from","to","_arr","slice","val","splice","clamp","n","min","max","Math","onYouTubeIframeAPIReady","iframe","youtube_iframes","dom","player","YT","Player","events","onReady","_","partial","onPlayerReady","onStateChange","onPlayerStateChange","manuallyPaused","soundOn","mute","seekTo","currentTime","playVideo","hash","getVideoData","video_id","videoLength","getDuration","event","PlayerState","PAUSED","PLAYING","root","factory","exports","module","require","define","amd","this","__WEBPACK_EXTERNAL_MODULE_9__","modules","__webpack_require__","moduleId","installedModules","id","loaded","m","c","p","_interopRequire","obj","__esModule","_Motion","Motion","_StaggeredMotion","StaggeredMotion","_TransitionMotion","TransitionMotion","_spring","spring","_presets","presets","_reorderKeys","reorderKeys","_interopRequireDefault","default","_extends","assign","target","i","arguments","length","source","key","hasOwnProperty","_mapToZero","_mapToZero2","_stripStyle","_stripStyle2","_stepper3","_stepper4","_performanceNow","_performanceNow2","_raf","_raf2","_shouldStopAnimation","_shouldStopAnimation2","_react","_react2","msPerFrame","createClass","displayName","propTypes","defaultStyle","PropTypes","objectOf","number","oneOfType","object","isRequired","children","func","onRest","getInitialState","_props","props","currentStyle","currentVelocity","lastIdealStyle","lastIdealVelocity","wasAnimating","animationID","prevTime","accumulatedTime","unreadPropStyle","clearUnreadPropStyle","destStyle","dirty","_state","state","styleValue","setState","startAnimationIfNecessary","_this","propsStyle","timeDelta","currentFrameCompletion","floor","framesToCatchUp","newLastIdealStyle","newLastIdealVelocity","newCurrentStyle","newCurrentVelocity","newLastIdealStyleValue","newLastIdealVelocityValue","_stepper","stiffness","damping","precision","_stepper2","nextIdealX","nextIdealV","componentDidMount","componentWillReceiveProps","componentWillUnmount","cancel","render","renderedChildren","Children","only","mapToZero","ret","stripStyle","stepper","secondPerFrame","x","v","destX","k","b","Fspring","Fdamper","a","newV","newX","abs","reusedTuple","process","getNanoSeconds","hrtime","loadTime","performance","now","hr","Date","getTime","undefined","cleanUpNextTick","draining","currentQueue","queue","concat","queueIndex","drainQueue","timeout","len","run","clearTimeout","Item","fun","array","noop","nextTick","args","Array","push","apply","title","browser","env","argv","version","versions","on","addListener","once","off","removeListener","removeAllListeners","emit","binding","name","Error","cwd","chdir","dir","umask","global","window","vendors","suffix","raf","caf","last","frameDuration","_now","next","cp","cancelled","e","round","handle","fn","shouldStopAnimation","shouldStopAnimationAll","currentStyles","styles","currentVelocities","defaultStyles","arrayOf","map","lastIdealStyles","lastIdealVelocities","unreadPropStyles","someDirty","destStyles","newLastIdealStyles","newLastIdealVelocities","newCurrentStyles","newCurrentVelocities","j","rehydrateStyles","mergedPropsStyles","plainStyles","mergedPropsStyle","mergeAndSync","willEnter","willLeave","oldMergedPropsStyles","oldCurrentStyles","oldCurrentVelocities","oldLastIdealStyles","oldLastIdealVelocities","newMergedPropsStyles","_mergeDiff2","oldIndex","oldMergedPropsStyle","leavingStyle","newMergedPropsStyleCell","foundOldIndex","plainStyle","velocity","_mergeDiff","shape","string","any","getDefaultProps","styleThatEntered","defaultStyleCell","s","_mergeAndSync","_mergeAndSync2","propStyles","_mergeAndSync3","newMergedPropsStyle","hydratedStyles","mergeDiff","prev","onRemove","prevKeyIndex","nextKeyIndex","fill","sort","nextOrderA","nextOrderB","prevOrderA","prevOrderB","pivot","config","defaultConfig","_presets2","noWobble","gentle","wobbly","stiff","NODE_ENV","hasWarned","console","error","autoResize","options","settings","extend","onResize","animate","animateDuration","animateCallback","extraSpace","limit","filter","each","textarea","css","resize","overflow-y","origHeight","height","clone","propOb","prop","removeAttr","position","top","left","attr","insertBefore","lastScrollTop","updateSize","scrollTop","toChange","add","stop","unbind","bind","jQuery","combobox","selection","input","triangle","vectorIcons","onChange","toggleOptions","opening","hasClass","removeClass","closeAll","addClass","calculateHeight","$nano","maxHeight","parseInt","nanoScroller","preventPageScrolling","alwaysVisible","hide","show","trigger","find","focus","stopEvents","stopPropagation","cancelBubble","preventDefault","returnValue","defaultFilter","text","textContent","toLowerCase","indexOf","emptyFilter","$this","outerHeight","replace","prepend","append","click","lazyload","maybe","html","init","setupFilter","placeholder_text","_options","_original_options","filter_input","document","createElement","type","class","keyup","filterKeyUp","Imgur","getInstance","runPlaceholder","setFilter","filter_text","applyFilter","remove","methods","inst","$that","placeholder","method","fullScreenApi","supportsFullScreen","isFullScreen","requestFullScreen","cancelFullScreen","fullScreenEventName","prefix","browserPrefixes","split","il","fullScreen","webkitIsFullScreen","el","validate","debug","warn","validator","onsubmit","cancelSubmit","submitHandler","submitButton","submit","hidden","appendTo","currentForm","form","pendingRequest","formSubmitted","focusInvalid","valid","is","removeAttrs","attributes","result","$element","index","rules","command","argument","staticRules","existingRules","normalizeRule","messages","filtered","normalizeRules","metadataRules","classRules","attributeRules","required","param","expr","blank","trim","filled","unchecked","checked","defaults","format","params","makeArray","unshift","RegExp","groups","errorClass","validClass","errorElement","errorContainer","errorLabelContainer","ignore","ignoreTitle","onfocusin","lastActive","focusCleanup","blockFocusCleanup","unhighlight","addWrapper","errorsFor","onfocusout","checkable","submitted","optional","onkeyup","lastElement","onclick","parentNode","highlight","findByName","setDefaults","remote","email","url","date","dateISO","digits","creditcard","equalTo","accept","maxlength","minlength","rangelength","range","autoCreateRanges","delegate","eventType","labelContainer","errorContext","containers","valueCache","pending","reset","validateDelegate","invalidHandler","checkForm","errorMap","triggerHandler","showErrors","prepareForm","elements","currentElements","check","clean","prepareElement","numberOfInvalids","toHide","errors","errorList","message","successList","grep","defaultShowErrors","resetForm","hideErrors","objectLength","count","size","findLastActive","rulesCache","not","selector","toShow","dependencyMismatch","rule","parameters","formatAndAdd","log","customMetaMessage","metadata","meta","customMessage","String","findDefined","defaultMessage","theregex","test","toToggle","wrapper","parent","showLabel","success","validElements","invalidElements","label","for","idOrName","generated","wrap","errorPlacement","insertAfter","getElementsByName","getLength","nodeName","depend","dependTypes","boolean","function","startRequest","stopRequest","previousValue","old","classRuleSettings","dateDE","numberDE","addClassRules","className","classes","depends","keepRule","parameter","isFunction","Number","transformed","addMethod","previous","originalMessage","ajax","mode","port","dataType","nCheck","nDigit","bEven","cDigit","charAt","match","pendingRequests","ajaxPrefilter","xhr","abort","ajaxSettings","special","focusin","focusout","addEventListener","blur","original","fix","handler","setup","teardown","removeEventListener","lastTime","requestAnimationFrame","cancelAnimationFrame","nextTime","Namespace","History","Class","popStates","onPopState","onpopstate","exception","addPopState","cb","removePopState","addWindowState","history","replaceState","location","href","previousState","newState","pushState","$event","Event","currentState","addSingleton","InfiniteScroll","cont","calcRight","levelReached","pageHeight","body","scrollHeight","offsetHeight","viewportHeight","innerHeight","documentElement","clientHeight","pageYOffset","stopInfiniteScroll","continueInfiniteScroll","infiniteScroll","pollLevel","Utilities","ColorboxConfirm","$confirmation","$noConfirm","confirmed","setupHandlers","open","inline","transition","scrolling","onComplete","onClosed","onClose","getSelection","removeAllRanges","empty","$confirmed","Util","Base64","PADCHAR","ALPHA","getbyte64","idx","getbyte","charCodeAt","encode","b10","padchar","alpha","imax","join","decode","pads","fromCharCode","Embed","elColorboxEmbed","checkbox","embedCodeInput","clipboardLink","clipboardContainer","preview","oldEmbed","elEmbedAlbumForm","embedCodePreview","newEmbed","hashRegex","embedModal","setupEmbedImage","colorboxEmbed","embedAlbumForm","change","onEmbedCheckboxClick","width","bindEmbedImage","getPostMetadata","imgurInsideNav","getHash","item","sideGallery","getImage","image","album","is_album","jafoLog","inGallery","isNumber","comment_count","isAlbum","nsfw","control","description","getSnippet","showContext","logAnalytics","host","Environment","context","analytics","escape","postData","snippet","initEmbedClipboard","vars","newEmbedAlbumFormLoaded","defer","selectAll","embedClipboard","glue","setText","viewOldEmbed","baseURL","setEmbedUrl","setEmbedCode","embedAlbumFormLoaded","eventMethod","receiveMessage","messageEvent","eventData","JSON","parse","view","initEmbed","setupEmbedCss","layout","thumbsCarouselContainer","initThumbsCarousel","initMainCarousel","setupEmbedScreen","bodyHeight","cssParams","getQueryParams","search","$dom","templates","background","link","chooseLogoColor","embed","offsite","tHeight","thumbs","thumbsCarousel","container","lineHeight","images","imageHeight","setEmbedUrlAlbumId","albumId","embedUrl","clipboardClick","siblings","tipsy","clipboardIconElement","ZeroClipboard","Client","gravity","opacity","ImgurIface","NextImageReceiver","Iface","Album","cover","cdnUrl","preloadCount","operation","mobile","initialImage","links","createAlbum","changeSettings","nonAuthorChangeSettings","changeImages","changeCover","deleteAlbum","embedAlbum","downloadAlbum","hideAlbum","downloadAlbumForm","emailInput","save","loader","createAlbumForm","header","titleInput","descriptionInput","layoutInput","privacyInput","hiddenIcon","secretIcon","exlanationPublic","exlanationHidden","exlanationSecret","privacyTitle","errorbox","changeLayout","layoutButton","layoutForm","albumImagesForm","selectHeader","coverHeader","menuFirstItemId","imagesMenu","mainColumn","deleteAlbumForm","yes","no","hideAlbumForm","mainImage","thumbsCarouselNext","thumbsCarouselPrev","thumbsCarouselTop","thumbsCarouselBottom","nextImage","prevImage","imageHoverIconClass","actionOptionsClass","actionOptionsItems","blog","leftPanel","sidebar","subdomain","albumClass","editButton","editOptionsClass","editOptionsItems","layouts","operations","albumSettings","switchLayout","updateSettings","updateImages","updateCover","privateGalleryMessage","privateGalleryError","currentImageIndex","ajaxURL","albumImages","interval","loadingViewport","thumbsSpeed","creatingAlbum","scrolledPage","bindings","del","main","currentTheme","needCaptchaToProceed","themes","dark","light","custom","getSettings","findImageIndex","getStartingIndex","getPageHash","isNaN","loadImage","img","Image","src","onload","substring","lastIndexOf","onerror","hash_len","initAlbumImages","showMessage","skipImageSetup","getJSON","order","page","perPage","setupAlbumImages","albumImageMode","albumImagesSettings","totalCounter","totalCounterSuffix","imagesPerPage","onSubmitComplete","self_","pathname","reload","Images","bindchangeImages","albumID","bindDeleteAlbum","disable","msid","enable","fadeOut","self__","signed","protocol","auth","bindHideAlbum","bindCreateAlbum","createAlbumSubmitHandler","hideAlbumPrivacy","showAlbumPrivacy","initCreateAlbum","album_privacy","showPlaceholder","initChangeSettings","callingElement","parents","coverUrl","basename","resizeCreateAlbumForm","innerWidth","formData","serializeObject","recaptcha_challenge_field","recaptcha_response_field","Recaptcha","url1","serialize","parseJSON","privacy","errorstr","responseText","status","getScript","recaptcha_key","theme","openCreateAlbumColorbox","clean_up_id","preloading","onCleanup","carouselItemFirstIn","carousel","carouselItemLastIn","jcarousel","shrinkThumbsCarousel","getThumbsCarouselScroll","thumbSize","album_layout","horizontal","thumbsCarouselScroll","scroll","thumbsCarouselBind","scrollMainImage","setPageHash","live","shrink","thumbsCarouselItemVisibleIn","animation","getImageSrc","ext","$container","thumbsize","animated","largestDimension","ReactDOM","React","ImageViewer","discarding_referrer","get","zoomed","mainCarouselItemVisible","mainCarouselSetup","autoNS","offset","delayOut","actionButtonOpenClass","keydown","ctrlKey","altKey","metaKey","keyCode","mousewheel","delta","detla","originalEvent","wheelDeltaY","detail","substr","prefer_video","sanitizedDescription","htmlEntity","linkify","encodeURIComponent","preloadImages","hexcolor","r","g","yiq","initDownloadForm","albumSortStop","albums","sortable","toggleEditButton","button","toggleClass","toggle","editButtonClickHandler","setAlbumID","closest","published","destroy","generalInit","Fullscreen","profileInit","items","Elements","Tag","View","redirectTo","redirectAnalytics","classNames","removeWidget","allowRemoval","onClick","removeTag","tagName","bool","PostOptions","embedcoder","saving","saved","optionsPos","albumInGalleryMessage","MAX_TAG_LENGTH","tagSuggestPosition","right","initialHash","initialIsPublished","showAllLinks","LocalStorage","fixed","deletehash","showingGrid","tags","suggestedTags","tagError","tagSuggestFlag","componentWillMount","LinkGenerator","setThumbSize","deletionEmailSubmitHandler","emitter","resetTags","calcOptionsPosition","throttle","checkStickyOptions","TitleDesc","bindTitleDescriptionSubmit","refs","componentDidUpdate","prevProps","prevState","tagInputActive","addtag","bounds","findDOMNode","tagsuggest","getBoundingClientRect","tagStore","getTags","pos","initRearrangeIfUnpublished","closeRearrange","handleEmbed","Gallery","in_gallery","getElementById","handlePrivacy","Privacy","handleSuccess","newPrivacy","handleDelete","deleteAction","yesButtonText","Confirm","yesButtonClass","handleNo","handleYes","handleShare","signin","invokedRegisterSigninBy","imageStore","getImages","tagNameList","tagAddedVia","tagsViaModule","tagsViaHashtag","tagsTotal","addedVia","matureToggle","mature","imageCount","uploadStore","$postHeader","$postTitle","eq","fail","sec","statMessage","time","pluralize","showModalIfUnpublished","showUploadModal","addTag","tagText","innerText","err","tagToRemove","renderTagInput","_this2","_$tagSuggestPosition$","contentEditable","autoFocus","ref","onKeyUp","getSuggestions","onBlur","onFocus","onPaste","noHTML","TagSuggest","onSelect","onHighlightedKeyDown","handleHighlighted","showingSuggestions","_this3","_this4","which","query","tagValidator","getTagValidator","isValidTag","whyNot","createRange","selectNodeContents","collapse","sel","addRange","createTextRange","textRange","moveToElementText","select","_this5","display","new-panel","post-options-panel","setItem","saveStatus","album-images-link","saveClasses","post-saving-container","fade","inputClasses","copyflash","copy-input-post","copy-input-post--saving","showShareButton","tag","htmlFor","Copy","imageLink","inputClass","copyClass","Socialicons","showRearrange","PromotedSpotlight","staticUrl","clients","moviePath","nextId","thingy","setMoviePath","path","dispatch","eventName","client","receiveEvent","register","getDOMObjectPosition","stopObj","info","offsetWidth","offsetLeft","offsetTop","offsetParent","elem","handlers","movieId","ready","movie","clipText","handCursorEnabled","cssEffects","appendElem","stylesToAdd","domElement","zIndex","getElementsByTagName","box","div","addedStyle","appendChild","innerHTML","getHTML","flashvars","navigator","userAgent","reposition","removeChild","newText","toString","setHandCursor","enabled","setCSSEffects","recoverActive","SideGallery","HEIGHT","ROW_HEIGHT","list","grid","ITEMS_PER_ROW","RENDER_BUFFER","FETCH_MORE_BUFFER","SELECTED_OFFSET","BREAK_HEIGHT","GRID_MARGIN","isLoading","currentInserted","cxensePageViewCount","$sideGallery","$content","sectionTitles","hot","new","favorites","random","sortTitles","viral","newest","oldest","rising","windowTitles","day","week","month","year","all","getGalleryEnvironment","selectedHash","endReached","section","cookie","referer","referrer","topic","searchQuery","newScrollPosition","ajaxSuccess","results","isMounted","prevLength","uniq","checkEndReached","captionsEnabled","insertSingleItem","variation","Experiments","isActive","recommendations","fetchControl","onScroll","scrollPos","checkScrollPageNeeded","resultsLength","listHeight","loadPage","ceil","itemOffset","zeroIndex","generateURL","switchToViral","is_ad","getSearchUrl","cache","votedFavedRecently","showMature","nthFromHash","distance","startHash","hashPosition","shouldSelectImage","selectImage","recommended","selectedPosition","isPopState","direction","scrollToHash","itemPos","sendCxensePageView","cX","initializePage","setSiteId","sendPageViewEvent","getNextImage","skip","nextIndex","vote","nextable","getPrevImage","prevIndex","getSection","bindMouseMove","throttledScroll","partialRight","nav","y","imageContainer","getBrowserScrollbarWidth","move","$target","inScrollArea","xDelta","clientX","yDelta","clientY","overflowY","mousemove","action","updatePoints","ups","downs","points","updateVote","updateFavorite","favorited","shouldComponentUpdate","DOMitem","itemProps","shouldRender","endMarkup","thumb","prevItem","subtitle","renderBounds","subreddit","username","favs_account_url","usernameWithInflection","album_cover","selected","SideGalleryItem","layout-button","mixins","addons","PureRenderMixin","handleClick","getWidePromotedThumb","getThumbClasses","getThumbId","getThumbStyles","thumbnail_json","getHref","getVoteMarkup","account_url","thumbUrl","backgroundImage","customClasses","sg-item","base","up","down","promoted","isAd","isCta","sg-cta","voteClass","sg-item-vote","icon-upvote-fill","icon-downvote-fill","renderItemStats","isUndefined","numberFormat","isWidePromoted","isGrid","imageTagMarkup","num_images","ReportBadAds","thanksMessage","runSlots","adRefresh","adInfoAtTimeOfReport","stringify","currentAdInfo","handleSubmit","slotname","adInfo","slot_name","qqid","adid","bidder","cpm","oxb","comments","res","unmount","unmountComponentAtNode","onSubmit","_createClass","defineProperties","descriptor","defineProperty","protoProps","staticProps","ImgurRecommendations","_React$Component","_ref","_temp","_ret","_len","_key","getPrototypeOf","recs","fetchRecommendations","fetchLiftIgniter","shuffle","$p","querySelectorAll","widgetId","initial","widget","rec","looping","place","_place","opts","allowMature","show_mature","insPosition","recBoxPosition","recosMarkup","navToRecommendation","Component","Recommendations","ShareButtons","resetUrl","shareButtonClass","addthisTimeout","shareData","jafoMeta","globalShareData","_super","bindButtons","$social","getAddthisConfig","pubid","ui_click","ui_header_color","ui_header_background","ui_offset_top","ui_open_windows","data_ga_property","data_ga_tracker","_gaq","data_track_clickback","data_ga_social","services_compact","services_exclude","share","getShareTitle","initAddthis","openMenu","addthis_config","setupAddthis","openFunc","addthis","setShareData","merge","_setShareData","resetShareData","_setJafoMeta","_setShareTitle","_setUrl","update","currentTarget","getAttribute","shareTwitter","shareFacebook","shareReddit","shareDigg","shareTumblr","shareStumbleupon","shareGoogleplus","sharePinterest","shareEmail","shareAddthis","bindAddthisButton","ost","addthisOpen","logSharePostAddthis","service","logShare","addthis_share","track","shareTo","getGoogleTracker","__ga","newWindow","Caption","sid","auth_id","popEventState","$captions","counterClass","captionBarClass","commentName","userCommentsClass","showRepliesCount","captions","addDownvoteLimit","removeDownvoteLimit","haveCaptionVotes","haveCaptions","deleteCaption","caption_id","set","deleted","just_deleted","undeleteCaption","getCaptionDepthById","visited","level","current_id","depth","countComments","keys","getCaptionRepliesById","values","parent_id","getCaptionById","getCaptionPropertyById","property","getCaptionParentById","getParentIds","getCaptionChildrenIds","getCaptionIdsByFilter","accum","caption","mergeCaptions","votes","visible_points","just_inserted","mergeCaption","mergeVotes","getVotes","setVote","comment_id","old_vote","vote_points","veto","points_before_original_vote","new_points","getVoteByCaptionId","isCaptionOrItsSubtreeNSFW","childrenNsfw","InsideNav","setCaptionVoteState","directions","$vote_btns","other_direction","$vote_btn","$other_vote_btn","purgeCaptionData","retain_hashes","delete_keys","Combobox","DOM","defaultValue","data-value","noButtonText","dangerouslySetInnerHTML","__html","PopupMenu","handleBodyClick","opened","handleMenuClick","menuClick","handleChildClick","span","afterNameIcon","Comment","_isMounted","childmap","contextids","comment","votable","votemap","expanded","haveChildren","touchEnabled","contextTypes","onContextChange","linkifier","onVoteChange","showingReply","reported","handleReplyClicked","parentId","handleReplySuccess","handlePermalinkClick","commentId","on_album","handleContextClick","handleShareClick","author","getGalleryMetadata","handleMobileIconClick","platform","handleDeleteClick","msg","confirm","forceUpdate","handleReportClick","Report","dimensions","preventReportCloseAnalytics","resetReportCloseAnalytics","handleUpvoteClick","current_vote","_vote","handleDownvoteClick","gallery","jafoData","readonly","_nthIfy","handleUserProfileClick","accountId","author_id","closeReply","expand_replies","replies","icon","upvoted","downvoted","upvoteClasses","comment-vote","green","downvoteClasses","red","actions","PressButton","onPress","best_comment_of_the_day","best_comment","pointer","caption--haschildren","caption-deleted","caption-deleted--noreply","unvotable","contexted","userTextClasses","usertext","cf","comment-upvoted","comment-downvoted","grab","point_inflection","via","mobile_platform_strings","iphone","android","mobile_platforms","data-id","account_id","Timestamp","shouldUpdate","timestamp","datetime","isGalleryAdmin","Reply","autofocus","parentAuthorId","onSuccess","CommentTree","statics","EXPAND_MODE_FORCE_COLLAPSED","EXPAND_MODE_DEFAULT_COLLAPSED","EXPAND_MODE_FORCE_EXPANDED","expandMode","expandedFromPermalink","groupingBadReplies","maxLevel","removing","nextProps","handleCommentClick","have_children","handleLoadMoreClicked","subtree","CommentList","onKeyDown","handleKeyDown","data-level","collapsing","CSSTransitionGroup","transitionName","transitionEnter","transitionLeaveTimeout","RENDERED_AT_A_TIME","rendered","bad_comments","truncatingForRecommendations","_getChildrenIds","_checkNeedToRenderMore","_mounted","_listener","toggleShowingBadComments","children_ids","$last_rendered","_handleBadCaptionsContainerClick","good_comments","has_bad_comments","showMoreMarkup","inRecommendationsExperiment","margin","transitionEnterTimeout","transitionLeave","transitionAppear","transitionAppearTimeout","InsideCommentsArea","loading","defaultExpandMode","commentSort","onCommentSortChange","contextId","contextLevels","permalink","handleClickPermalinkViewRestBanner","commentReplyNumber","forceCollapsed","maxTouchPoints","$parentNode","handleDocumentKeyUp","handleClickToggleForceExpanded","handleCommentSuccess","root_comment","permalink_comment","filtered_captions","unixTimeCreated","moment","utc","unix","isDescendentComment","isAuthorComment","isUnread","timeLastRead","cap_id","bucket","getUserBucket","_typeof","Symbol","iterator","sidegallery","albumImageStore","postSavingStore","ad","URL","timeTillRefresh","nextImageLoadRefreshesAd","injectAd","closed","currentTimeout","abpAdId","tallAdParams","sqWidth","sqHeight","recWidth","recHeight","rightContentHeight","skyPopMarginTop","captionLayout","insideCommentsArea","autoBrowse","autoBrowseTimeout","autoBrowseWait","isHotImage","adType","captionInstance","fetchQueue","fetchingCaptions","fetchPageEventCount","checkFetchQueueInterval","fetchInterval","isPromoted","headerFixed","scrollPosition","postTitleMaxHeight","vwUnderImage","padding","lastHash","vwTime","msec","vwUnderComments","postContents","$metadataLink","$window","$inside","$postContainer","$navPrev","$navNext","$postJump","$nicetime","$voteUp","$voteDown","$image","$embed","$postActionBar","$postTitleContainer","$captions_count","$actionTabs","$shareLink","imageContainers","adframe","adWrapper","promoCompanion","albumTruncated","albumDescription","$favoritedImage","$randomButton","$sideFooterLinks","skyPopYPos","insideCommentsAreaWithContext","childContextTypes","getChildContext","loadmore","onvotechange","reportBadAds","setHash","updateCaptionHash","updateShare","hasImage","shareUrl","getURL","imageJafoMeta","getCurrentImage","checkFetchQueue","fetchOp","shift","checkAdTime","one","setAttribute","hasAccess","bindAutoBrowse","bindHotKeys","setupHistoryState","forceAdRefresh","setInterval","triggerPerformanceCheckpoint","forceScrollToCaption","$link","checkStickyHeader","logNavigation","checkViewabilityTime","postLoadingQueueContents","bindViewabilityScroll","checkViewabilityScroll","bindViewabilityJafo","bindSkyPopScroll","bindPostJump","$skyPop","skyPopPos","skyPopFixed","skyPopYPosition","positionSkyPopX","outerWidth","debounce","belowSkypopFold","trailing","postJumpInComments","belowCommentFold","scrollToCaptions","ms","tPos","isAnimated","$contents","iter","$iEle","$kid","imgHash","first","postLoadingCheckVideo","postLoadingCheckImg","postLoadedContentHash","postLoadingVerifyHash","$img","complete","postLoadingHandleImg","ev","dive","isString","$vid","readyState","postLoadingHandleVideo","threshold","postHeaderHeight","inviewport","isObject","valueOf","$commentContainer","commentBottom","rD","enablePrevButton","enableNextButton","disablePrevButton","disableNextButton","changeSection","changeSort","changeWindow","historyState","cdnURL","imageVotesJSON","captionsJSON","fetchImage","callbackImage","callbackCaption","fetchImages","preloadImage","fetchCaptions","cb_finished","retry","captionsUrl","votesUrl","displayGenericError","done","scrollTo","processCaptions","sorter","getCaptionSorter","parent_ids","transform","raw_children_ids","is_nsfw","url_regex","contains_link","aid","bid","comment_a","comment_b","levels","pushWindowState","context_id","onsortchange","setCaptionSort","expires","getPermalinkIfExists","current_context_parent_id","current_context_comment_id","context_level","getparams","MAX_SAFE_INTEGER","insideCommentsProps","InsideCommentsAreaWithContext","isPermalink","commentPathParts","handlePopStateComment","handlePopStateImage","url_parts","sort_name","ucw_sort_name","toUpperCase","sorts","sortCaptionsByMineJustSubmitted","sortCaptionsByIdDesc","sort_result","sortCaptionsByTop","score_a","score_b","sortCaptionsByBest","best_score","sortCaptionsByNew","date_a","date_b","sortCaptionsById","blankPage","l_ads","removeAds","removePromotedCompanion","removeMsg","pushToFetchQueue","cbImage","cbCaption","setupReportLink","noDisplay","promoId","inside","reportImageLink","handleAds","isSafe","is_hot","showAds","is_safe","nsfw_tag","is_moderated","updateSponsoredInfo","updateSubmissionInfo","updatePage","oldHash","comments_disabled","galleryInstance","galleryDefaults","galleryNav","cNEkDpHAxP","api","recordPV","triggerView","discard","unescape","Notification","setTitle","galleryTitle","insertPost","newProps","googleTrackPageview","purgeCommentData","showsAds","adConfig","galleryEntry","reddit","hot_datetime","hashes","isImageNearby","currentIndex","hashIndex","_promotedTag","ppBlog","_promotedWrap","component","load_all","isOwner","globalAlbumUploadProps","Upload","recachePostElements","postProps","all_loaded","album_image_store","has_access","showEditTools","hide_points","hide_views","hide_tags","hide_report","Post","showingVideo","video","video_source","canPlayType","bindGoogleForceRefresh","contentDocument","usesABP","abp_ad","googletag","pubads","refresh","dfp_adslot","contentWindow","tagRefresh","leaderboard_slot","setTargeting","_taboola","placement","target_type","flush","custHtml","callBack","isPro","ad_div","panelAd","custAd","addedEle","adBox","after","injectLeaderboardAd","clearTargeting","cmd","defineSlot","addService","enableSingleRequest","collapseEmptyDivs","enableServices","blocked","hideZoomedImage","timeoutNextImage","timeoutPeriod","navToImage","pageDepth","used","memory","usedJSHeapSize","total","totalJSHeapSize","jsHeapSizeLimit","recommendationsBox","targeted","visibleTooltip","tooltip","showing","isInvalidKeyContext","block","hotKeysBlocked","keyCodes","ARROW_LEFT","ARROW_RIGHT","ENTER","MINUS","PLUS","NINE","ZERO","R","S","$vote","MouseEvent","bubbles","cancelable","dispatchEvent","loadAll","$fav","isRandom","getSideGallery","$el","scrollToCaption","$child","$fullscreenBox","$fullscreenLink","$userActionLinks","viewFullscreen","line-height","font-size","embedElement","focusOverlayAfterOpen","checkIfFullscreen","showOverlayIfOpen","checkIfExitedFullscreen","closeOverlayIfExited","intervalID","clearInterval","maxLength","showingLoader","getValue","_submit","handleError","responseJSON","parent_author","redirect","jqx","always","handleTextChanged","counter","cx","formCls","caption-create","counter-exceeded","handleKeyUp","handleFocus","disabled","maxPage","jafoPage","nextHash","prevHash","showPast","comment_sort","indexName","gallery_type","tagsCookie","isIPad","arrows","randomButton","outside","pageDivider","noMorePagesID","tagLoaderClass","loaderID","extendedImagelist","loadMoreID","$sortOptions","content","messagebox","comboboxes","$toggleViral","$toggleUserSub","galleryNewInfo","$okay","$no","$shareTabButton","$optionsButton","zoom","submitCaptionButton","commentExpand","$comments","reCaptionLink","user","notorietyLink","notorietyList","buttonComments","buttonFavorites","buttonSubmitted","buttonReplies","pmButton","pmWrapper","pmBody","pmSendButton","pmForm","pmSent","updateLevelTable","$carousel","past","previewContent","slider","days","ticker","positiveTickClass","negativeTickClass","calendar","colorboxConfirmForm","$headerSearch","$headerSearchInput","$advanced","$advancedForm","$advancedAllInput","imageCard","$sizePx","$sizeMpx","$sizeFmt","$sizeToggle","$pxCombo","$mpxCombo","side","imagePanels","pastPage","scrolledImageSet","pastTickerTimer","getEmitter","getCacheValue","file","pop","isNumberKey","charCode","ungallery","kill","spamPost","ban","postParms","offending_url","obfuscate","spam","reference_data","trophy","$targ","tType","tName","reportImage","bindDeleteImage","deleteImage","reCaption","insertAd","rand","outer","inner","frame","fadeInLoader","$loaders","fadeIn","fadeOutLoader","initialPopState","initTipsy","$thumbs","initZoom","imageZoom","showPastPreview","maxDays","domain","pastOnLoad","hideAds","DatePicker","current","starts","onBeforeShow","today","setUTCHours","setUTCMinutes","setUTCSeconds","setUTCMilliseconds","diffMilli","then","formatted","getUTCMonth","getUTCDate","getUTCFullYear","DatePickerSetDate","onHide","dates","diff","DatePickerHide","pastClickHandler","onLoad","pastDaysChangeHandler","isFinite","pastDaysKeypressHandler","pastTickerClickHandler","showPreview","pastSubmitClickHandler","gallerySort","galleryWindow","galleryType","topicTag","getBaseUrl","overRideUrl","getSectionUrl","getUrl","time_window","inSearch","handleResponse","retrievedUrl","responseImgs","$extendedImagelist","$loader","initOutsideComboboxes","searchHighlight","loadMore","pageNum","itemCount","showLoadMore","clicked","notorietyLinkClickHandler","slideDown","slideUp","userButtonCommentsClickHandler","userButtonFavoritesClickHandler","userButtonSubmittedClickHandler","userButtonRepliesClickHandler","setupUserCaptions","Linkifier","addGrabber","Linkify","ImgurGrabber","PlainGrabber","UsernameGrabber","HashtagGrabber","addViewer","YoutubeViewer","Html5VideoViewer","ImgurGifvViewer","ImgurViewer","UserCommentsAreaWithContext","UserCommentsArea","setupUserFavorites","setupUserReplies","UserRepliesAreaWithContext","UserRepliesArea","setupUserSubmitted","userPmButtonClickHandler","userPmSendButton","inputs","userInit","toggleShowViral","removeCookie","initOutsideInfScroll","bindOutsideSortOptions","previousSort","previousType","searchAdvancedHandleSubmit","$tmp","tmpName","tmpVal","loc","$advInputs","getVars","qAllOnly","qVal","destination","qs","q_all","searchAdvancedToggleHandler","syncSearchSimpleAndAdvanced","searchAdvancedToggleSizeType","txt","exact","sploded","$cards","advSearch","strEle","q_exactly","q_any","_syncSearchSimpleAndAdvancedElements","$from","$to","tmpNewVal","outsideInit","tooltipster","interactive","offsetX","keypress","showGalleryNewInfo","$choice","insideInit","maybeComboboxCb","$item","startDownload","album_images","toggleTab","wasOpened","PERFORMANCE_CHECKPOINT_USER_AGENT","webkitSetResourceTimingBufferSize","getInsideNav","Inside","insideNav","Outside","MainOutside","outsideActiveTagStore","handleTagChanged","fromPopState","getIsActive","_handleTagSelect","_handleTagDeselect","refetchPage","getActiveTag","tagNameUrlEncoded","getActiveTagEncoded","_updatePageOnTagChange","$sort","$section","$rising","activeEl","Header","MAX_ALBUM_TITLE","MAX_IMAGE_TITLE","noNav","_next","_prev","navTrigger","max_length","no_enter","tabindex","SourceBar","slim","DownloadPost","messageClassName","getEmbedScript","isDev","getEmbedCode","_slicedToArray","sliceIterator","_n","_d","_e","_s","_i","isArray","scaleSpring","positionSpring","Grid","COLUMN_COUNT","gridImageClasses","lastPressKey","row","col","row_count","mouse","lastPressIndex","isPressed","container_height","scrolltop","window_height","handleScroll","findIndexByHash","handleMouseMove","pageX","pageY","_state$delta","dx","dy","endIndex","startIndex","newOrder","handleMouseDown","_ref2","_ref3","_ref4","pressX","pressY","handleMouseUp","mouseUp","createRearrangeComponent","_state$mouse","translateX","translateY","scale","ReactMotion","_state$layout$findInd","_ref5","onMouseDown","onMouseUp","data-href","data-title","WebkitTransform","rendered_images","_state2","row_buffer","top_row","bottom_row","top_row_index_start","bottom_row_index_start","onMouseMove","allowRearrange","PostActionBar","actionType","UPVOTE","DOWNVOTE","FAVORITE","voteType","UP","DOWN","postOptionsOpened","signupTooltipOptions","galleryTags","componentWillUpdate","nextState","classList","hideSignupTooltip","logCreateSignupTooltip","invokedToolTipBy","createSignupTooltip","imageUrl","favGallerySuffix","invokedBy","ActionCard","createAction","showSignupTooltip","handleVote","force","handleFavorite","currentFavoriteStatus","showAnalytics","Analytics","thumbhash","views","galleryHash","handleReport","handleDownload","handleMarkMature","togglePostOptions","handleHideAlbumFromAccount","logTopicClick","isHot","handleRemoveTag","galleryTag","renderTags","handleTagClick","postOption","linkText","singleRow","team","apocalypse_active","post-action-icon","post-action-upvote","icon-upvote-outline","icon-human-upvote","icon-human-upvote-filled","icon-zombie-upvote","icon-zombie-upvote-filled","post-action-downvote","icon-downvote-outline","icon-human-downvote","icon-human-downvote-filled","icon-zombie-downvote","icon-zombie-downvote-filled","favoriteClasses","post-action-favorite","icon-favorite-outline","icon-favorite-fill","icon-human-favorite","icon-human-favorite-filled","icon-zombie-favorite","icon-zombie-favorite-filled","aqua","pointsProps","pointsClasses","post-action-stats-points","nodisplay","viewsClasses","postOptionsClasses","post-action-options","post-action-options--opened","postOptions","actionsCard","add_border","PUBLIC","HIDDEN","publicPrivacy","handleChange","privacyForm","handleSave","privacyMessage","privacyClass","ShareImage","bbcode","markdown","SharePost","topics","validTitle","topicSelected","topics_request","handleTopicSelect","handleTitleValidation","handleFail","showTerms","savePreview","showEmailVerification","validTopic","shareClasses","btn","btn-grey","btn-action","shareText","NanoScroller","Share","Title","limitClasses","viaAppIconClick","_redditSource","redditLink","sourceText","anon","INITIAL_LOAD","MAX_WIDTH","MAX_NON_GALLERY_TITLE","MAX_TEXTAREA","ADD_IMAGE_ROW_HEIGHT","RENDER_STATE","PRE","POST","updatingState","gridType","force_grid","render_state","thumb_size","localStorage","getItem","isLoadingTags","_calculateContainerHeights","_handleScroll","is_viral","showTitles","_scaleWidth","origW","origH","maxW","ratio","updateTagsFromText","containerIndex","tagRegex","Constants","MIN_TAG_LENGTH","matches","exec","forEach","_setContainerHeightByIndex","prevHeight","containerHeight","reactKey","_calculateElementHeight","image_count","recalcReady","needsRecalc","computedStyle","defaultView","getComputedStyle","getPropertyValue","elmHeight","parseFloat","elmMargin","_createRenderedImage","minHeight","wrap_with_direct_link","poster","showShareLinks","shown","firing_pixel","handleRemove","album_hash","_createComponent","imgView","visible_image_count","isLastVisibleImage","containerClasses","post-image-container","post-image-container--spacer","metaClasses","post-image-meta","post-image-meta--last","titleTabindex","descriptionTabindex","triggerSave","triggerSaveTitleDesc","dont_protect","updateContainer","editKeyHandler","DescriptionTagSuggestContainer","_getThumbSize","image_hash","currentTabIndex","shiftKey","node","handleGridColorbox","rel","maxWidth","onOpen","uncalculated_images","truncation","last_image_title_desc","postActionBar","insideTagController","$postImages","padTop","renderedHeight","padBot","thumbnail","rearrangeImages","image_top","image_bottom","showAddImageButton","addImage","album_description","downScale","singleImage","autoSuggestTags","promotedPostCustomTags","customTags","iframeWrapper","TYPING_SPEED","savedRequest","savedText","placeCaretAtEnd","handlePaste","clipboardData","getData","insertText","getRangeAt","rangeCount","deleteContents","lastNode","frag","createDocumentFragment","firstChild","insertNode","cloneRange","setStartAfter","_save","wait","retries","textLength","typingTimer","textStatus","pow","baseProps","tabIndex","onInput","MAX_HEIGHT","highlightedTag","updatePosition","titleCase","firstChar","highlightedTagIndex","highlightedTagName","suggest","mouseEnter","mouseDown","renderTagRow","onMouseEnter","suggestedTagsLength","taginfo","Nanoscroll","contentClassNames","contentStyle","nanoStyle","TRANSITION_TIMEOUT","TAG_SUGGEST_CARRET_DISTANCE_FROM_LEFT","suggestKeyword","textNode","tagSelected","keywordLength","startContainer","getCaretPosition","setStart","startOffset","setEnd","caretPosition","lastWord","fetchSuggestions","updateCoords","keyword","coords","getSelectionCoords","cursorTop","cursorLeft","formatTagSuggestionResponse","editableDiv","caretPos","commonAncestorContainer","endOffset","win","rects","rect","doc","boundingLeft","boundingTop","getClientRects","hideSuggestions","Store","Saving","posts","onbeforeunload","maxTags","queries","pendingRequestUrl","tagNameNormalized","is_duplicate","some","removedTag","successCallback","setSuggestions","q","normalizedQuery","addQuery","Factory","_getDefaultPredicates","kindOfTag","providerFilterByLevDistancePredicate","SuggestedTag","providerByLevDistance","_getAjaxGetWithLoader","_standardDataResponsePost","success_aware","jqXHR","fail_aware","json","_getStandardPostAuthorized","postProvider","_getStandardPostAuthorizedWithLoader","postAuthorized","_getPostAuthorizedWithLoader","_produceEmptyMessageProviderForQuery","_produceUserGroupProvider","groupModel","currentGroupId","cboxConfirm","$confirmMessage","$confirmTitle","comparator","Comparator","userGroupControllerProvider","compare","_produceUserGroupController","userGroupToDomFromData","_produceUserGroupFromData","newUserGroupFromDom","_produceUserGroupFromDom","newUserGroupProvider","compose","current_group_id","group","tag_list_structure","Controller","UserGroup","comparer","groupControllerProvider","Element","SortedListEmptyable","groupController","get$RemoveButton","handleRemoveEvent","handleRemoveEventOther","adapter","InsideGallery","parent_factory","gallery_env","stores","produceInsideGallery","TagValidator","MAX_TAGS_PER_POST","postOptionsProps","sideGalleryProps","produceLinkify","AlbumImageGrabber","albumImageViewer","AlbumImageViewer","prependViewer","handleUpdatedImage","defaultText","loadingClass","isReply","NSFWViewer","_instance","AlbumImage","produceInsideNav","producePromoted","attachDelegate","headerProps","initial_load","images_length","last_image_index","last_image","postActionBarProps","accountBio","favoriteImageLink","$a","promoConfig","getConfig","promoEvents","Promoted","Events","promoSource","Source","Adzerk","OutsideGallery","global_env","groups_env","produceOutsideGallery","OutsideActiveTag","imgur","produceOutsideUser","produceOutsideMemes","produceOutsideNonMainSectionChooser","activeGroup","GroupSelector","produceOutsideTaggingWidget","galleryGraph","current_group_type","group_type","$outsideTagging","$outsideTaggingParent","$tagShowHide","tagGroupStore","TagGroup","groupStore","Group","GroupModel","suggestionStore","Suggestion","Dev","DebugVar","addTagToGroup","extractTagGroupData","$existingTagGroupData","tagGroupData","group_hash","isTagInGroup","extractTagData","$existingTagData","tag_obj","_produceGroupModel","renderTagList","getTagsForGroup","_produceEmptyGalleryTagList","_produceUserTagList","outsideWidget","OutsideTaggingWidget","bestCaps","$sentence","sentence","GroupValidator","Sentence","group_selector","MainGroupSelector","setActiveTag","groupLimitsController","GroupSelectorLimits","handleGroupRemove","handleGroupAdd","produceSharePage","tagLimit","default_tags","autoSuggestUrl","suggestModel","SuggestModelNoProvider","$tagInput","renderTitle","renderInsideList","ShareTagComponent","defaultTags","shareOnImgur","ShareOnImgur","hasTitle","hasTopic","outsideController","OutsideComponent","handleChangedQuery","suggestedPost","userTagListProps","groupId","renderUserTagList","TagListComponent","_produceSuggestedTagFromData","cb_choose","subscribers","is_first","urlencoded","get$Add","_produceRemovableTagFromData","subscriptions","produceRemovableTagFromDom","RemovableTag","handleRemovedTagEvent","covers","spot","decorateWithDetailed","_produceComboboxItemFromSomething","$something","addTagContainer","subscribe","Favorite","$favButton","$message","$title","unfavorited","confirmMsg","fav","confirmTitle","_init","_init_click_handler","insideImage","fav_display_msg","ex","favorite","handleKey","showFavorited","showUnfavorited","showConfirm","isFavorited","display_msg","upvote","favoriteSuccess","favoriteError","fav_method","gallerySubmitTermsUrl","galleryVerifyEmailFormUrl","gallerySubmitURL","shareing","terms","postingTooFast","banned","$shareonimgur","$shareAlbum","$preview","$descriptions","$topic_id","$titleDesc","$imageTitles","$deleteContainers","$required","$submit","$terms","$tagbox","$contentContainer","$topicSelect","$publishButtons","$missingFields","$promotedPlatBoxes","$promotedPlatAll","sortHandler","galleryLink","publishCortex","Cortex","submitting","missingFields","renderPublishWidget","Publish","cortex","handlePreview","originalState","checkMissingFields","smoothScroll","scrollTarget","handlePromoPlatformChange","placeShareButtons","sharing","retabindex","$inputs","namedArray","handleValidation","previewWindow","promoPage","newPageContent","allSelector","allNotSelector","allOn","isAll","expected","gotten","$currBox","redirectToGallery","fromPreviewButton","buttonName","missing_fields","acceptTerms","keepColorBoxOpen","declineTerms","sendVerificationEmail","GalleryPost","getInterestingEvents","currentImageStore","matureClass","promotedTag","h1","titleLength","targetLength","countClass","autoComplete","handleRules","publishButton","missingFieldsText","SortedList","initialList","getComparator","getList","get$Container","inserted","existing_index","existing_element","comparison_result","before","removeElementPredicate","cur_el","equals","predicate","clear","contains","other","containsBy","moveToTop","findFirstBy","els","$empty","emptyMessageProvider","setEmptyMessageProvider","provider","getEmptyMessageProvider","_replaceEmptyMessage","replaceWith","hideEmptyMessage","showEmptyMessage","hasEmptyMessage","OutsideSortedListEmptyable","$selectorContainer","Follow","_handleUnsubscribe","unsubscribe","_handleSubscribe","tagFollower","$selection","changeSelectionToTag","$sectionName","getActiveGroupId","getId","getActiveGroup","getActiveGroupName","getName","getActiveTagName","setActiveGroupName","setName","findTagInActiveGroup","findFirstTagBy","cur_tag","$selectionName","$name","getIdFrom$Container","setList","get$Name","getTypeFrom$Container","$remove","group_id","tag_id","removeTagFromGroup","setFailedTag","pushHistory","ACTIONS","REMOVED","ERROR","addPendingTag","removePendingTag","ADDED","BLOCKED","unblock","UNBLOCKED","get$NameFrom$Container","getNameFrom$Container","addSelection","removeSelection","markConfirmed","showBestCommentsCookie","showTagsCookie","isOpen","fadeTo","delay","setBestCommentsCookie","setTagBoxCookie","openTagBox","Model","tagProvider","queryNonce","fetch","queryContext","_handleResponse","_handleError","responseWasSuccessful","nonce","success_callback","_handleResponseSuccess","SuggestModel","chosen_cb","completion","field","fuzzy","edit_distance","_shards","successful","clicked_cb","payload","subscribed","AutocompleteComponent","KEYCODES","KEY_T","KEY_ESC","KEY_DOWN_ARROW","KEY_RIGHT_ARROW","KEY_UP_ARROW","KEY_ENTER","KEY_TAB","moveCursorToEnd","selectionStart","selectionEnd","_getAcInfo","queryDisplayed","down_arrow","up_arrow","right_arrow","enter","tab","modifier","suggestions","curIdx","getAutocompleteIdx","step","setComponentState","selectionActive","autocompleteIdx","acText","setQuery","handleKeyPress","focusDue","temptext","temp","setValidationMode","acInfo","isValid","getIsValidQuery","focused","getQuery","_longestCommonPrefix","getSelectionActive","beta","maybeErrorLabel","maybeAjaxErrorLabel","cls","onKeyPress","readOnly","leftName","rightName","_encode","handleTagClicked","handleRemoveClicked","handleQueryChange","handleChoice","_updateNano","$nanoDiv","nano","contentDiv","_produceTag","lastFinishedQuery","getLastFinishedQuery","isValidQuery","ifNotMessage","getWhyNot","getIsLoading","filteredDefaultTags","tagNames","tagsLength","tagCountClass","tagCountText","stag","lastQuery","em","dtag","activeTag","deactivate","failedTag","getFailedTag","isPending","TAG_REGEX","min_length","minLength","cause","isDuplicate","_validateTag","validationResult","GROUP_REGEX","isValidGroup","_validateGroup","$before","$middle","get$Before","get$Middle","middle_text","validationMode","setIsLoading","isloading","setLastFinishedQuery","addSuggestion","CurrentImage","currentImage","setCurrentImage","getCurrentImageId","getGroups","getGroup","haveGroup","addGroup","removeGroup","markDeleted","TagImage","SOURCE","DEFAULT","GALLERY_PAGE","SUGGESTION","USER","tagsByHash","ajaxErrors","setAjaxError","unsetAjaxError","getAjaxError","isTagOnPost","getTagsForPost","haveTagsForPost","addTagForPost","tag_name","removeTagFromPost","getTag","_getTagProp","_setTagProp","getTagVote","setTagVote","setTagSource","INTERESTING_FIELDS","haveTag","getTagSubscribers","mergeBasis","pick","setFollowing","following","groupsByTag","tagsByGroup","pendingAddTags","groupsEventHistory","getLatestTagGroupEvent","evts","evt","getGroupHashesForTag","cur_hash","suggestionModel","_handleSuggestResponse","_handleSuggestError","activeGroupId","groupList","confirmTarget","handleRemoveConfirmedEvent","removeCoreSet","sortedList","groupSelector","_disableNew","disableNewGroupButton","_enableNew","enableNewGroupButton","removeUserGroup","getRemainingUserGroups","addUserGroup","VOTE_UP","$addBtn","$subscribers","getGroupId","getSubscribers","get$ExternalLink","copy","execCommand","copyButton","queryCommandSupported","Flash","visible","start","_installTimer","_getDuration","_timer","_timerRef","duration","_handleTimerExpired","maxScale","isLeftClick","handleMouseLeave","springScale","motionStyle","onMouseLeave","scrollContainer","socialShare","network","strings","abuse","abuseExplanation","dboi","dboiExplanation","defaultCombobox","explicit","explicitExplanation","matureExplanation","matureSettings","matureWarning","reportHeading","spamExplanation","reportValues","DBOI","SPAM","ABUSE","MATURE","EXPLICIT","setValue","warning","RadioBox","createItem","buttonDisabled","onComponentDidMount","selectedValue","renderItem","escapeSelector","str","exclude","excludeWithin","scrollElement","beforeScroll","afterScroll","easing","autoCoefficent","getScrollable","scrollable","scrolled","scrl","pushStack","firstScrollable","locationPath","filterPath","elCounter","ewlCounter","include","clickOpts","hostMatch","hostname","pathMatch","thisHash","px","$scroller","scrollTargetOffset","scrollerOffset","offPos","scrollDir","aniProps","aniOpts","print","__p","__j","__t","__e","youtube_ready","ele","eventsBound","navs","navHashes","failMode","reservations","ads","pxQueue","rgxSubreddit","rgxPxMacroTimestamp","rgxPxMacroRandom","pxMacroRandomLength","allowedRandomChars","sectSortWindow","thumbnailSizes","wide","normal","safe_tags","youtubeViewabilityTimer","youtubeMinViewTime","handleReservation","handleNewGalleryPage","handleNav","handleDisplay","handleDomEvent","bindGameLink","initYouTubeAutoPlayMute","eventsEval","bindAll","evName","pixel","youtubeViewabilityInterval","resetYouTubeAutoPlayMute","skipPromoNav","onlyUniqueNavs","thresh","navThreshold","populateFirst","populateFirstThreshold","failThreshold","getPlacement","ppData","placeCompanion","flightId","campaignId","thumbnailSize","subSelector","games","handleGameLink","trapFocus","setYouTubeAutoPlayMuteIframes","isPlaying","youtube_videos","isMuted","getPlayerState","getCurrentTime","timeViewed","handleYouTubeAutoPlayMuteUpdate","direct","percViewed","topicIsFiltered","currTopic","filteredTopics","sectionIsFiltered","keyIsObject","filteredSections","keyIsIndexed","subredditIsAllowed","subMatched","allowedSubreddits","handleNewGallery","firstDist","populateFirstDistance","nextLocIsFlushedLeft","placeObj","addToIndex","handlePlacement","parts","insertPlacement","injectedCode","injectEle","fDoc","write","pxType","urls","pixelFire","pxData","imgHandler","pixelData","generateRandomString","randLength","rLen","setLen","retString","clicks","ACTION_IMAGE_UPVOTE","ACTION_IMAGE_DOWNVOTE","ACTION_FAVORITE","ACTION_SHARE","ACTION_SHARE_FACEBOOK","ACTION_SHARE_TWITTER","ACTION_SHARE_PINTEREST","ACTION_SHARE_REDDIT","CLICK_COMPANION","_handleCommentVote","_handleCommentSubmit","_handleVwTime","_handleVwUnderImage","bindClicks","promoEvent","_fireEvent","subEv","getSideImage","commentObj","voteObj","voteEv","PromotedPost","companion","pixels","addPixel","purpose","addCompanionPlacement","addPagePlacement","addThumbPlacement","setData","starting_score","blockedCreatives","espoused","cookieOpts","rgxDomain","pgxProto","evtToPx","10","11","22","101","102","103","20","21","50","51","52","53","54","104","400","401","402","403","404","405","406","407","408","409","410","415","420","425","430","_idFromCookie","reqData","_getUser","placements","adzerk","placementParms","keywords","apiLocation","contentType","_handleApiResponse","_handleApiError","_decodeEncodedResponse","dataset","encs","encIter","encTmp","dataRoot","decisions","contents","customData","decodeURIComponent","_espouse","cookied","userCookie","customPx","conf","placementIds","_setUserFromResponse","compFormatted","_formatCompanionData","_cleanPx","clickUrl","impressionUrl","adData","creativeId","_addEventPixels","_addCustomPixels","pxUrl","responseData","compData","imgSrc","compType","raw","setThreshold","directishLink","directLink","htmlImage","linkedBbcode","deletion","postURL","albumTitle","offsetSelectionInterval","imgurImages","operationQueue","$thumbsContainer","thumbsId","messagesClass","imageDivClass","$modes","$operationLoader","imageSelectedClass","$submitButton","noImages","loadImages","loadPageElements","getPageOptions","noImagesFound","addImageToThumbs","nocache","sext","prependTo","queueOperation","isInQueue","startOperation","toggleOperationsLoader","bindOperationClick","offsetSelection","selectable","makeSelectable","ui","found","adding","addToThumbsFunc","noImagesFunc","noPageHash","setOptions","changePage","bindScrollEvent","setCurrentPage","modeClickHandler","albumMode","thisName","hiddenImagesFunc","currentPage","totalPages","totalImageCount","numImages","changingPage","imageLimit","stopOnPaging","lastScrollPos","$navigationContainer","$totalCounter","$totalCounterSuffix","pageNumbersClass","prevID","nextID","getPage","stopPaging","generatePageLink","generateNavigationLinks","numbers","recalcNavigation","newPageCount","handleJSON","pageNumber","noHash","getCurrentPage","getTotalPages","getImageLimit","getTotalImageCount","increaseImageCount","clearCache","titleDescriptionForm","$form","$titleInput","$descriptionInput","fillTitleDesc","textArea","titleDescriptionSubmitHandler","desc","titledesc","addTitleDescription","getElements","GalleryBundleLoaded"],"mappings":"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","file":"gallery.js","sourceRoot":"/include/minified/","sourcesContent":["function flashElement(element, speed, bgColor, flashColor) {\n    speed = speed || 100;\n    flashColor = flashColor || '#1bb76e';\n\n    var style = element.style || element[0].style;\n    style.backgroundColor = flashColor;\n\n    setTimeout(function() {\n        style.backgroundColor = bgColor;\n    }, speed);\n};\n","Namespace('Imgur.PostOptions');\n\n// top level function because this is a callback for the iframe in colorbox\nfunction checkEmailVerification(code, callback) {\n    if (!code) {\n        code = '';\n    }\n\n    $.post('/ajax/verify_email/' + code, function (response) {\n        if (response.data.verified) {\n            $.colorbox.close();\n\n            if (callback) {\n                callback();\n            }\n        } else {\n            if (response.data.invalid && code) {\n                humanMsg.displayMsg('Verification code is invalid', 'error-msg');\n            }\n\n            setTimeout(function () {\n                checkEmailVerification();\n            }, 1500);\n        }\n    });\n}\n\nImgur.PostOptions = React.createClass({\n    displayName: 'PostOptions',\n\n    _: {\n        embedcoder: null,\n        saving: 'Saving...',\n        saved: 'Saved!',\n        optionsPos: 0,\n        albumInGalleryMessage: 'Please remove this album from the gallery to change its images',\n        MAX_TAG_LENGTH: 5,\n        tagSuggestPosition: {\n            right: {\n                left: 17,\n                top: 16\n            },\n            left: {\n                left: -230,\n                top: 16\n            }\n        }\n    },\n\n    getInitialState: function getInitialState() {\n        return {\n            hash: this.props.initialHash,\n            published: this.props.initialIsPublished,\n            privacy: this.props.privacy,\n            showAllLinks: Imgur.LocalStorage.get('post_options::showAllLinks') || false,\n            save: '',\n            fixed: false,\n            deletehash: this.props.deletehash || Imgur.Environment.image.deletehash,\n            isAlbum: this.props.isAlbum || Imgur.Environment.image.is_album,\n            image: this.props.image || Imgur.Environment.image,\n            showingGrid: false,\n            tags: [],\n            suggestedTags: null,\n            tagError: null,\n            tagSuggestFlag: 'right'\n        };\n    },\n\n    componentWillMount: function componentWillMount() {\n        this._.embedcoder = new Imgur.LinkGenerator();\n        this._.embedcoder.setThumbSize('');\n    },\n\n    componentDidMount: function componentDidMount() {\n        $('#deletion-email').find('form').submit(this.deletionEmailSubmitHandler);\n\n        this.props.emitter.on('saving', this, _.bind(function () {\n            this.setState({\n                save: this._.saving\n            });\n        }, this));\n        this.props.emitter.on('saved', this, _.bind(function () {\n            this.setState({\n                save: this._.saved\n            });\n        }, this));\n\n        this.props.emitter.on('initGrid', this, function () {\n            this.setState({ showingGrid: true });\n        });\n\n        this.props.emitter.on('closeGrid', this, function () {\n            this.setState({ showingGrid: false });\n        });\n\n        this.props.emitter.on('tagAdded', this, this.resetTags);\n        this.props.emitter.on('tagRemoved', this, this.resetTags);\n\n        this.calcOptionsPosition();\n\n        $(window).on('scroll', _.throttle(this.checkStickyOptions, 50));\n        this.checkStickyOptions();\n\n        if (!this.state.isAlbum) {\n            Imgur.TitleDesc.getInstance().bindTitleDescriptionSubmit(null, true);\n        }\n\n        $(this.refs['mature-tipsy']).tipsy({ opacity: 1, gravity: 'ne', html: true });\n\n        if (this.state.published) {\n            $(this.refs['add-images']).tipsy({ opacity: 1, gravity: 's', html: true, offset: 10 });\n            $(this.refs['init-rearrange']).tipsy({ opacity: 1, gravity: 's', html: true, offset: 15 });\n        }\n    },\n\n    componentDidUpdate: function componentDidUpdate(prevProps, prevState) {\n        //Focus new inserted contenteditable\n        if (this.state.tagInputActive && !prevState.tagInputActive) {\n            this.refs.addtag.focus();\n            var bounds = ReactDOM.findDOMNode(this.refs.tagsuggest).getBoundingClientRect();\n\n            if (bounds.right > window.innerWidth) {\n                //Not enough room to show tag suggest widget on screen to the right\n                this.setState({\n                    tagSuggestFlag: 'left'\n                });\n            } else if (bounds.right + bounds.width < window.innerWidth) {\n                //Guaranteed enough room to display tag suggest widget so flag right to not overlap content\n                this.setState({\n                    tagSuggestFlag: 'right'\n                });\n            }\n        }\n    },\n\n    /**\n     * Resets the tags shown based on what is currently in the tag store\n     */\n    resetTags: function resetTags() {\n        this.setState({\n            tags: this.props.tagStore.getTags()\n        });\n    },\n\n    checkStickyOptions: function checkStickyOptions() {\n        var pos = $(window).scrollTop();\n\n        if (pos >= this._.optionsPos) {\n            this.setState({\n                fixed: true\n            });\n        } else {\n            this.setState({\n                fixed: false\n            });\n        }\n    },\n\n    calcOptionsPosition: function calcOptionsPosition() {\n        this._.optionsPos = $(ReactDOM.findDOMNode(this)).offset().top - 20;\n    },\n\n    initRearrangeIfUnpublished: function initRearrangeIfUnpublished() {\n        if (this.state.published) {\n            return;\n        }\n        this.props.emitter.trigger('initGrid', 'rearrange');\n    },\n\n    closeRearrange: function closeRearrange() {\n        this.props.emitter.trigger('closeGrid');\n    },\n\n    handleEmbed: function handleEmbed(e) {\n        e.preventDefault();\n\n        $.colorbox({\n            href: '<div id=\"embed-modal\"></div>',\n            open: true,\n            inline: true,\n            top: '15%',\n            transition: 'none',\n            scrolling: false,\n            width: 593,\n            height: 587,\n            className: 'blurbox blurbox--scroll',\n            title: 'Embed',\n            onComplete: _.bind(function () {\n                ReactDOM.render(React.createElement(Imgur.Gallery.Embed, {\n                    hash: this.state.image.hash,\n                    title: this.state.image.title,\n                    in_gallery: this.state.published,\n                    is_album: this.state.isAlbum,\n                    nsfw: !!this.state.image.nsfw\n                }), document.getElementById('embed-modal'));\n            }, this)\n        });\n    },\n\n    handlePrivacy: function handlePrivacy(e) {\n        e.preventDefault();\n\n        $.colorbox({\n            href: '<div id=\"privacy\"></div>',\n            open: true,\n            inline: true,\n            top: '15%',\n            transition: 'none',\n            scrolling: false,\n            width: 550,\n            className: 'blurbox',\n            title: 'Privacy Settings',\n            onComplete: _.bind(function () {\n                ReactDOM.render(React.createElement(Imgur.Gallery.Privacy, {\n                    privacy: this.state.privacy,\n                    hash: this.state.image.hash,\n                    handleSuccess: function (newPrivacy) {\n                        this.setState({\n                            privacy: newPrivacy\n                        });\n                        humanMsg.displayMsg('Album privacy saved');\n                        $.colorbox.close();\n                    }.bind(this)\n                }), document.getElementById('privacy'), $.colorbox.resize);\n            }, this)\n        });\n    },\n\n    handleDelete: function handleDelete(e) {\n        e.preventDefault();\n\n        if (!this.state.isAlbum) {\n            window.location = '/delete/' + this.props.deletehash;\n            return;\n        } else {\n            var deleteAction = '<span class=\"attention\">also be deleted</span>.';\n            var yesButtonText = 'Delete Post & Images';\n\n            if (Imgur.Environment.auth.id) {\n                deleteAction = '<span class=\"attention\">not be deleted</span> from your account.';\n                yesButtonText = 'Delete Post Only';\n            }\n\n            var message = 'Are you sure you want to delete this post? The images in this post will ' + deleteAction;\n\n            $.colorbox({\n                href: '<div id=\"delete-album-form\"></div>',\n                open: true,\n                inline: true,\n                top: '15%',\n                transition: 'none',\n                scrolling: false,\n                width: 420,\n                height: 245,\n                className: 'blurbox',\n                title: 'Delete Post',\n                onComplete: _.bind(function () {\n                    ReactDOM.render(React.createElement(Imgur.Elements.Confirm, {\n                        message: message,\n                        yesButtonText: yesButtonText,\n                        yesButtonClass: 'btn-danger',\n                        handleNo: $.colorbox.close,\n                        handleYes: _.bind(function () {\n                            $.ajax({\n                                method: 'post',\n                                url: '/ajaxalbums/delete/' + this.state.image.hash,\n                                data: {\n                                    msid: Imgur.Environment.msid\n                                },\n                                success: function success() {\n                                    $.colorbox.close();\n                                    humanMsg.displayMsg('Album has been deleted');\n\n                                    setTimeout(_.bind(function () {\n                                        window.location = !Imgur.Environment.auth.url ? '/' : location.protocol + '//' + Imgur.Environment.auth.url + '.' + Imgur.Environment.host;\n                                    }, this), 1000);\n                                }\n                            });\n                        }, this)\n                    }), document.getElementById('delete-album-form'), $.colorbox.resize);\n                }, this)\n            });\n        }\n    },\n\n    handleShare: function handleShare(e) {\n        e.preventDefault();\n\n        Imgur.Util.jafoLog({\n            event: 'shareOnImgurInvoked',\n            meta: {\n                hash: this.state.hash,\n                location: this.state.isAlbum ? 'albumPostPage' : 'singleImagePostPage'\n            }\n        });\n\n        if (!Imgur.Environment.auth.id) {\n            Imgur.getInstance().signin({ invokedRegisterSigninBy: 'publishAttempt' });\n            return;\n        }\n\n        if (this.props.imageStore && this.props.imageStore.getImages().count == 0) {\n            humanMsg.displayMsg('Please add at least one image to submit to the gallery', 'error-msg');\n            return;\n        }\n\n        var tagNameList = [];\n        var tagAddedVia = void 0;\n        var tagsViaModule = 0;\n        var tagsViaHashtag = 0;\n        var tagsTotal = 0;\n\n        for (var i = 0; i < this.state.tags.length; i++) {\n            tagsTotal++;\n            tagNameList.push(this.state.tags[i].tagName);\n\n            switch (this.state.tags[i].addedVia) {\n                case 'tagModule':\n                    tagsViaModule++;\n                    break;\n                default:\n                    tagsViaHashtag++;\n                    break;\n            }\n        }\n\n        switch (tagsTotal) {\n            case tagsViaModule:\n                tagAddedVia = 'tagModule';\n                break;\n            case tagsViaHashtag:\n                tagAddedVia = 'hashtag';\n                break;\n            case 0:\n                tagAddedVia = null;\n                break;\n            default:\n                tagAddedVia = 'both';\n                break;\n        }\n\n        Imgur.Util.jafoLog({\n            event: 'shareOnImgurButton',\n            meta: {\n                inGallery: true,\n                matureToggle: this.refs.mature.checked,\n                imageCount: this.props.isAlbum ? this.props.uploadStore.getImages().count : 1,\n                tagAddedVia: tagAddedVia,\n                tagsViaHashtag: tagsViaHashtag,\n                tagsViaModule: tagsViaModule,\n                tagsTotal: tagsTotal\n            }\n        });\n\n        if (Imgur.Environment.auth.url == 'ImgurAds') {\n            return window.location = '//' + Imgur.Environment.host + '/share/' + (this.state.isAlbum ? 'a' : 'i') + '/' + this.state.hash;\n        }\n\n        var $postHeader = $('.post-header');\n        var $postTitle = $('.post-title').eq(0);\n\n        if (!$postTitle.text()) {\n            $postHeader.addClass('shake');\n            setTimeout(function () {\n                $postHeader.removeClass('shake');\n            }, 250);\n            $postTitle.focus();\n            return;\n        }\n\n        $.post('/ajax/share', {\n            hash: this.state.hash,\n            title: $postTitle.text(),\n            is_album: this.state.isAlbum ? 1 : 0,\n            mature: this.refs.mature.checked ? 1 : 0,\n            tags: tagNameList\n        }, _.bind(function (response) {\n            window.location = '//' + Imgur.Environment.host + '/gallery/' + this.state.hash;\n        }, this)).fail(_.bind(function (response) {\n            try {\n                if (!response) {\n                    throw 'bad response';\n                }\n\n                if (response.responseText) {\n                    response = $.parseJSON(response.responseText);\n                }\n            } catch (e) {\n                humanMsg.displayMsg('An unknown error occurred. Please try again.', 'error-msg');\n\n                Imgur.Util.jafoLog({\n                    event: 'shareOnImgurError',\n                    meta: {\n                        hash: this.state.hash,\n                        error: 'unparsable',\n                        button: 'share'\n                    }\n                });\n\n                return;\n            }\n\n            if (response.data == null || response.data.error == null || response.data.error.message == null) {\n                humanMsg.displayMsg('An unknown error occurred. Please try again.', 'error-msg');\n\n                Imgur.Util.jafoLog({\n                    event: 'shareOnImgurError',\n                    meta: {\n                        hash: this.state.hash,\n                        error: 'unknown',\n                        button: 'share'\n                    }\n                });\n\n                return;\n            }\n\n            var sec = parseInt(response.data.error.message);\n            var statMessage = 'unknown';\n\n            if (!isNaN(sec) && sec > 0) {\n                statMessage = 'rateLimit';\n                var time = sec > 60 ? Math.round(sec / 60) + Imgur.Util.pluralize(Math.round(sec / 60), ' minute') : sec + Imgur.Util.pluralize(sec, ' second');\n                humanMsg.displayMsg('You\\'re sharing too quickly. Please wait ' + time + '.', 'error-msg');\n            } else if (response.data.error.message == 'Banned') {\n                statMessage = 'banned';\n                humanMsg.displayMsg('You blew it! You have been banned for posting NSFW images to the gallery.', 'error-msg');\n            } else if (response.data.error.message == 'NotVerified') {\n                statMessage = 'notVerified';\n                $.colorbox({\n                    href: '/lightboxes/verifyemail',\n                    open: true,\n                    iframe: true,\n                    top: '15%',\n                    transition: 'none',\n                    scrolling: false,\n                    innerWidth: '520px',\n                    innerHeight: '256px',\n                    onComplete: _.bind(function () {\n                        $.get('/ajax/send_email_verification');\n                        checkEmailVerification('', this.handleShare);\n                    }, this)\n                });\n            } else if (response.data.error.message == 'OP') {\n                humanMsg.displayMsg('OP must exist.', 'error-msg');\n            } else if (response.data.error.message == 'Suspended') {\n                statMessage = 'suspended';\n                humanMsg.displayMsg('Your account is currently suspended', 'error-msg');\n            } else if (response.data.error.message == 'exists') {\n                window.location = '//' + Imgur.Environment.host + '/gallery/' + this.state.hash;\n            } else {\n                humanMsg.displayMsg('An unknown error occurred. Please try again.', 'error-msg');\n            }\n\n            Imgur.Util.jafoLog({\n                event: 'shareOnImgurError',\n                meta: {\n                    hash: this.state.hash,\n                    error: statMessage,\n                    button: 'share'\n                }\n            });\n        }, this));\n    },\n\n    showModalIfUnpublished: function showModalIfUnpublished() {\n        if (this.state.published) {\n            return;\n        }\n        this.props.showUploadModal();\n    },\n\n    /**\n     * Adds tag to the tag store and updates the component\n     *\n     * @param {string=} tagText - optional parameter to force override of what is in the addtag ref such as if selecting from the tag suggestion dropdown\n     */\n    addTag: function addTag(tagText) {\n        var _this = this;\n\n        tagText = tagText || this.refs.addtag.innerText;\n\n        this.props.tagStore.addTag(tagText, 'tagModule', function (success, err) {\n            if (success) {\n                _this.setState({\n                    tagInputActive: false\n                });\n            } else {\n                _this.setState({\n                    tagError: err\n                });\n            }\n        });\n    },\n\n\n    /**\n     * Removes tag from the tag store\n     *\n     * @param {string} tagToRemove - the tag name to remove\n     */\n    removeTag: function removeTag(tagToRemove) {\n        this.props.tagStore.removeTag(tagToRemove);\n    },\n\n\n    /**\n     * Renders the button/input to allow for adding a tag to a post until the max amount of tags has been reached\n     *\n     * @returns {object} returns a react component reflecting the state of the user (max tags added, non-edit state, editable tag state)\n     */\n    renderTagInput: function renderTagInput() {\n        var _this2 = this;\n\n        if (this.state.tags.length >= this._.MAX_TAG_LENGTH) {\n            return React.createElement(\n                'div',\n                { className: 'post-options-tag-limit center' },\n                this._.MAX_TAG_LENGTH + ' tag limit reached'\n            );\n        }\n\n        if (!this.state.tagInputActive) {\n            return React.createElement(\n                'span',\n                { className: 'post-options-tag post-options-tag--add', onClick: function onClick() {\n                        _this2.setState({ tagInputActive: true });\n                    } },\n                'Add Tag'\n            );\n        }\n\n        var _$tagSuggestPosition$ = this._.tagSuggestPosition[this.state.tagSuggestFlag],\n            left = _$tagSuggestPosition$.left,\n            top = _$tagSuggestPosition$.top;\n\n\n        return React.createElement(\n            'div',\n            { className: 'post-options-tag-input-wrapper' },\n            React.createElement('span', { contentEditable: true, autoFocus: true, ref: 'addtag', key: 'addtag', className: 'post-options-tag-input center', onKeyUp: this.getSuggestions, onBlur: function onBlur() {\n                    _this2.setState({ tagInputActive: false });\n                }, onFocus: this.getSuggestions, onPaste: this.noHTML }),\n            React.createElement(Imgur.Gallery.TagSuggest, {\n                ref: 'tagsuggest',\n                onSelect: this.addTag,\n                onHighlightedKeyDown: this.handleHighlighted,\n                left: left,\n                top: top,\n                showingSuggestions: true,\n                suggestedTags: this.state.suggestedTags,\n                error: this.state.tagError,\n                classNames: 'tag-suggest--flag-' + this.state.tagSuggestFlag })\n        );\n    },\n\n\n    /**\n     * Removes HTML characters, excess whitespace, and newlines which makes it easier to work with contenteditable and paste\n     */\n    noHTML: function noHTML() {\n        var _this3 = this;\n\n        setTimeout(function () {\n            _this3.refs.addtag.innerText = _this3.refs.addtag.innerText.replace(/^\\s+|\\s+$|\\n/g, '');\n        }, 1);\n    },\n\n\n    /**\n     * Fetches tag suggestions for valid queries and sets error state for invalid queries\n     *\n     * @param {object} e - native key event\n     */\n    getSuggestions: function getSuggestions(e) {\n        var _this4 = this;\n\n        if ([38, 40, 13].indexOf(e.which) !== -1) {\n            //up, down, enter, or esc keys\n            return;\n        }\n\n        var query = this.refs.addtag.innerText;\n        var tagValidator = this.props.tagStore.getTagValidator();\n\n        if (!tagValidator.isValidTag('', query, false)) {\n            this.setState({ tagError: tagValidator.whyNot('', query, false) });\n            return;\n        }\n\n        this.setState({ tagError: null });\n\n        this.props.tagStore.getSuggestions(query, function (response) {\n            _this4.setState({ suggestedTags: response });\n        });\n    },\n\n    /**\n     * Callback for the tag suggest component to update the input display if a user highlights a tag from the suggestion list\n     *\n     * @param {string} tagText - text to update the tag input with\n     */\n    handleHighlighted: function handleHighlighted(tagText) {\n        this.refs.addtag.innerText = tagText;\n        var el = this.refs.addtag;\n\n        el.focus();\n\n        //Force cursor to the end of the input since resetting innerText puts it back to the beginning\n        if (typeof window.getSelection !== 'undefined' && typeof document.createRange !== 'undefined') {\n            var range = document.createRange();\n            range.selectNodeContents(el);\n            range.collapse(false);\n\n            var sel = window.getSelection();\n            sel.removeAllRanges();\n            sel.addRange(range);\n        } else if (typeof document.body.createTextRange !== 'undefined') {\n            var textRange = document.body.createTextRange();\n            textRange.moveToElementText(el);\n            textRange.collapse(false);\n            textRange.select();\n        }\n    },\n\n    render: function render() {\n        var _this5 = this;\n\n        if (this.props.display === false) {\n            return false;\n        }\n\n        var optionsPanelClasses = classNames({\n            'new-panel': true,\n            'post-options-panel': true\n        });\n\n        this._.embedcoder.setItem(this.state.image);\n\n        var addRemoveOptions = classNames({\n            'album-images-link': true,\n            'published': this.state.published\n        });\n\n        var saveStatus = '';\n        var saveClasses = classNames({\n            'post-saving-container': true,\n            'fade': this.state.save == this._.saved\n        });\n\n        switch (this.state.save) {\n            case this._.saving:\n                saveStatus = React.createElement('span', { className: 'post-saving-status post-saving' });\n                break;\n            case this._.saved:\n                saveStatus = React.createElement('span', { className: 'post-saving-status icon-good' });\n                break;\n        }\n\n        var inputClasses = classNames({\n            'copyflash': true,\n            'copy-input-post': true,\n            'copy-input-post--saving': this.state.save == this._.saving\n        });\n\n        return React.createElement(\n            'div',\n            { className: this.state.fixed ? 'post-options-fixed' : '' },\n            React.createElement(\n                'div',\n                { className: 'post-options-gallery-submit' + (this.props.showShareButton !== false ? ' show' : '') },\n                this.state.published ? React.createElement(\n                    'div',\n                    null,\n                    React.createElement(\n                        'div',\n                        { className: 'post-options-publish published' },\n                        'You shared this post!'\n                    ),\n                    React.createElement(\n                        'a',\n                        { className: 'post-options-view-gallery', href: '/gallery/' + this.state.hash },\n                        'View in gallery'\n                    )\n                ) : React.createElement(\n                    'div',\n                    null,\n                    React.createElement(\n                        'div',\n                        null,\n                        React.createElement(\n                            'a',\n                            { className: 'post-options-publish btn btn-action', onClick: this.handleShare },\n                            'Share to community'\n                        )\n                    ),\n                    React.createElement('div', { className: 'divider' }),\n                    React.createElement(\n                        'div',\n                        null,\n                        React.createElement(\n                            'span',\n                            { className: 'post-options-tags-header' },\n                            'Help people find your post'\n                        ),\n                        React.createElement(\n                            'div',\n                            { className: 'post-options-tags-learn' },\n                            React.createElement(\n                                'a',\n                                { target: '_blank', href: 'https://help.imgur.com/hc/en-us/articles/115000621783' },\n                                'Learn More'\n                            )\n                        ),\n                        React.createElement(\n                            'div',\n                            null,\n                            this.state.tags.map(function (tag) {\n                                return React.createElement(Imgur.Elements.Tag.View, { key: '@tag-' + tag.tagName, tagName: tag.tagName, classNames: 'post-options-tag', allowRemoval: true, removeTag: _this5.removeTag });\n                            }),\n                            this.renderTagInput()\n                        ),\n                        React.createElement(\n                            'div',\n                            { className: 'post-options-tags-mature-wrap' },\n                            React.createElement('input', { ref: 'mature', id: 'post-options-mature', type: 'checkbox', className: 'post-options-mature checkbox-styled' }),\n                            React.createElement(\n                                'label',\n                                { className: 'icon-check', htmlFor: 'post-options-mature' },\n                                ' '\n                            ),\n                            React.createElement(\n                                'label',\n                                { htmlFor: 'post-options-mature' },\n                                ' Mature ',\n                                React.createElement(\n                                    'span',\n                                    { className: 'help', ref: 'mature-tipsy', title: 'Mature content may include content that is suggestive or provocative. Sexually explicit content is not allowed in the Imgur community.' },\n                                    '(?)'\n                                )\n                            )\n                        )\n                    )\n                ),\n                React.createElement('div', { className: 'divider' })\n            ),\n            React.createElement(\n                'div',\n                { className: 'post-copy-options' },\n                React.createElement(\n                    'div',\n                    { className: saveClasses },\n                    saveStatus,\n                    this.state.save\n                ),\n                React.createElement(Imgur.Elements.Copy, { value: this._.embedcoder.imageLink(this.state.isAlbum), inputClass: inputClasses, copyClass: 'copy-post' })\n            ),\n            React.createElement(Imgur.Elements.Socialicons, { classes: 'post-options-social cf' }),\n            React.createElement(\n                'ul',\n                { className: 'post-options-extra' },\n                this.state.isAlbum && this.props.showRearrange ? React.createElement(\n                    'li',\n                    { className: 'extra-option' },\n                    this.state.showingGrid ? React.createElement(\n                        'div',\n                        { onClick: this.closeRearrange },\n                        React.createElement('span', { className: 'extra-option-icon icon-rearrange' }),\n                        'Done rearranging'\n                    ) : React.createElement(\n                        'div',\n                        { ref: 'init-rearrange', onClick: this.initRearrangeIfUnpublished, title: this.state.published ? this._.albumInGalleryMessage : null },\n                        React.createElement('span', { className: 'extra-option-icon icon-rearrange' }),\n                        'Rearrange images'\n                    )\n                ) : null,\n                this.state.isAlbum ? React.createElement(\n                    'li',\n                    { className: 'extra-option', ref: 'add-images', title: this.state.published ? this._.albumInGalleryMessage : null, onClick: this.showModalIfUnpublished },\n                    React.createElement('span', { className: 'extra-option-icon icon-plus-light' }),\n                    'Add more images'\n                ) : null,\n                React.createElement(\n                    'li',\n                    { className: 'extra-option', onClick: this.handleEmbed },\n                    React.createElement('span', { className: 'extra-option-icon icon-embed' }),\n                    'Embed post'\n                ),\n                this.state.isAlbum ? React.createElement(\n                    'li',\n                    { className: 'extra-option', onClick: this.handlePrivacy },\n                    React.createElement('span', { className: 'extra-option-icon icon-post-privacy' }),\n                    'Post privacy'\n                ) : null,\n                React.createElement(\n                    'li',\n                    { className: 'extra-option delete', onClick: this.handleDelete },\n                    React.createElement('span', { className: 'extra-option-icon icon-trash' }),\n                    'Delete post'\n                )\n            )\n        );\n    }\n});\n//# sourceMappingURL=post-options.js.map\n","var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar ImgurRecommendations = function (_React$Component) {\n    _inherits(ImgurRecommendations, _React$Component);\n\n    function ImgurRecommendations() {\n        var _ref;\n\n        var _temp, _this, _ret;\n\n        _classCallCheck(this, ImgurRecommendations);\n\n        for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n            args[_key] = arguments[_key];\n        }\n\n        return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref = ImgurRecommendations.__proto__ || Object.getPrototypeOf(ImgurRecommendations)).call.apply(_ref, [this].concat(args))), _this), _this.state = {\n            recs: []\n        }, _temp), _possibleConstructorReturn(_this, _ret);\n    }\n\n    _createClass(ImgurRecommendations, [{\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n            this.fetchRecommendations();\n        }\n    }, {\n        key: 'fetchRecommendations',\n        value: function fetchRecommendations() {\n            if (this.props.variation == 'cxense-no-pp') {\n                // disabled until they tell us they've got more metadata from posts\n                // this.fetchCxense();\n                return;\n            }\n\n            if (this.props.variation == 'lift-igniter-no-pp') {\n                this.fetchLiftIgniter(true);\n                return;\n            }\n\n            this.fetchControl();\n        }\n    }, {\n        key: 'fetchControl',\n        value: function fetchControl() {\n            // if not populated with items yet, just return.. sidegallery will call this method when it gets items.\n            if (this.props.sideGallery.state.items.length == 0) {\n                return;\n            }\n\n            this.setState({\n                recs: _.shuffle(this.props.sideGallery.state.items).slice(0, 8)\n            }, function () {\n                $p('track', {\n                    elements: document.querySelectorAll('.rec-item'),\n                    name: 'belowContent', // Usually Widget name\n                    source: 'base' });\n            });\n        }\n    }, {\n        key: 'fetchCxense',\n        value: function fetchCxense() {\n            //'http://api.cxense.com/public/widget/data' -d '{\"widgetId\":\"f1560e95a1e119c26121d5bd42190629f6b798e5\",\"user\":{\"ids\":{\"usi\":\"123\"}},\"context\":{\"url\":\"http://www.cxense.com\"}}'\n            $.ajax({\n                type: 'POST',\n                url: 'https://api.cxense.com/public/widget/data',\n                data: JSON.stringify({\n                    widgetId: \"112f680393cc4f871d216c79c9eeb14de5584101\",\n                    context: {\n                        \"url\": \"http://www.imgur.com\"\n                    }\n                }),\n                success: function success(res) {\n                    console.log(res);\n                }\n            });\n        }\n    }, {\n        key: 'fetchLiftIgniter',\n        value: function fetchLiftIgniter(initial) {\n            var _this2 = this;\n\n            if (!initial) {\n                // initial page view event is sent in the experiments.js setup code\n                $p('resetPageview');\n            }\n\n            $p('setRequestFields', ['title', 'url', 'hash', 'account_id', 'account_url', 'album_cover', 'animated', 'comment_count', 'description', 'ext', 'height', 'id', 'is_album', 'looping', 'num_images', 'points', 'prefer_video', 'timestamp', 'views', 'recommended', 'width']);\n            $p('register', {\n                max: 8,\n                widget: 'afterContent', // name of widget\n                callback: function callback(res) {\n                    var recs = res.items.filter(function (rec) {\n                        // filter out any non-gallery URLs and items with is_album undefined\n                        return rec.url.indexOf('/gallery/') > -1 && typeof rec.is_album != 'undefined';\n                    }).map(function (rec) {\n                        rec.recommended = true;\n                        rec.looping = true;\n                        rec.prefer_video = true;\n                        rec.place = runSlots._place; // assume the same ad placement of the item you landed on\n                        rec.ups = rec.points; // this data wasn't sent to lift igniter and isn't ever shown to the user, so just fake it.\n                        rec.downs = 0;\n                        rec.in_gallery = true;\n                        return rec;\n                    });\n\n                    _this2.setState({ recs: recs }, function () {\n                        // send lift igniter tracking data for their own injected recommendations\n                        $p('track', {\n                            elements: document.querySelectorAll('.rec-item'),\n                            name: 'belowContent', // Usually Widget name\n                            source: 'LI' });\n                    });\n                },\n                opts: {\n                    allowMature: (!!(Imgur.Environment.auth && Imgur.Environment.auth.show_mature)).toString()\n                }\n            });\n            // Execute the registered call.\n            $p('fetch');\n        }\n    }, {\n        key: 'navToRecommendation',\n        value: function navToRecommendation(rec, position, event) {\n            var _this3 = this;\n\n            event.preventDefault();\n\n            // load rec into sidegallery after current position, then nav to it.\n            var insPosition = this.props.sideGallery.selectedPosition() + 1;\n            rec.recBoxPosition = position;\n            this.props.sideGallery.insertSingleItem(rec, insPosition, true, 'recommendationClick', function () {\n                _this3.fetchRecommendations();\n            });\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            var _this4 = this;\n\n            var recosMarkup = this.state.recs.map(function (rec, index) {\n                var thumb = Imgur.Environment.cdnUrl + '/' + (rec.is_album ? rec.album_cover : rec.hash) + 'b.jpg';\n                return React.createElement(\n                    'a',\n                    { href: '/gallery/' + rec.hash, key: rec.hash, className: 'rec-item', style: { backgroundImage: 'url(' + thumb + ')' }, onClick: _this4.navToRecommendation.bind(_this4, rec, index) },\n                    React.createElement(\n                        'div',\n                        { className: 'title' },\n                        rec.title\n                    )\n                );\n            });\n\n            if (recosMarkup.length == 0) {\n                // don't render markup until we have recs to show\n                return null;\n            }\n\n            return React.createElement(\n                'div',\n                null,\n                React.createElement(\n                    'h2',\n                    null,\n                    'Recommended On Imgur'\n                ),\n                React.createElement(\n                    'div',\n                    null,\n                    recosMarkup\n                )\n            );\n        }\n    }]);\n\n    return ImgurRecommendations;\n}(React.Component);\n\nImgur.Recommendations = ImgurRecommendations;\n//# sourceMappingURL=recommendations.js.map\n","var _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nNamespace('Imgur.Gallery');\n\nvar scaleSpring = {\n    stiffness: 180,\n    damping: 10\n};\nvar positionSpring = {\n    stiffness: 120,\n    damping: 17\n};\n\nfunction reinsert(arr, from, to) {\n    var _arr = arr.slice(0);\n    var val = _arr[from];\n    _arr.splice(from, 1);\n    _arr.splice(to, 0, val);\n    return _arr;\n}\n\nfunction clamp(n, min, max) {\n    return Math.max(Math.min(n, max), min);\n}\n\nvar width = 189,\n    height = 189;\n\n\nImgur.Gallery.Grid = React.createClass({\n    displayName: 'Gallery-Grid',\n    COLUMN_COUNT: 4,\n\n    _: {\n        onScroll: null,\n        $window: $(window)\n    },\n\n    getDefaultProps: function getDefaultProps() {\n        return {\n            gridImageClasses: ''\n        };\n    },\n    getInitialState: function getInitialState() {\n        var images = this.props.album_image_store.getImages(this.props.hash).images;\n        var count = images.length;\n        var layout = [];\n        var lastPressKey = null;\n\n        for (var i = 0; i < count; i++) {\n            var row = Math.floor(i / this.COLUMN_COUNT);\n            var col = i % this.COLUMN_COUNT;\n            layout.push([width * col, height * row]);\n        }\n\n        return {\n            images: images,\n            count: count,\n            row_count: Math.floor(count / this.COLUMN_COUNT),\n            mouse: [0, 0],\n            delta: [0, 0], // difference between mouse and circle pos, for dragging\n            lastPressKey: lastPressKey, // hash of the last pressed component\n            lastPressIndex: null,\n            isPressed: false,\n            layout: layout, // precalculated (x, y) coordinates\n            container_height: Math.ceil(count / 4) * height,\n            offset: this.props.offset,\n            scrolltop: 0,\n            window_height: 600\n        };\n    },\n    componentWillMount: function componentWillMount() {\n        this._.onScroll = _.throttle(_.bind(this.handleScroll, this), 250);\n        this._.$window.on('scroll', this._.onScroll);\n        this.handleScroll();\n    },\n    findIndexByHash: function findIndexByHash(hash) {\n        for (var i = 0; i < this.state.count; i++) {\n            if (this.state.images[i].hash == hash) {\n                return i;\n            }\n        }\n\n        return -1;\n    },\n    handleScroll: function handleScroll() {\n        this.setState({\n            scrolltop: this._.$window.scrollTop(),\n            window_height: this._.$window.height()\n        });\n    },\n    handleMouseMove: function handleMouseMove(_ref) {\n        var pageX = _ref.pageX,\n            pageY = _ref.pageY;\n\n        var _state = this.state,\n            images = _state.images,\n            lastPressKey = _state.lastPressKey,\n            isPressed = _state.isPressed,\n            _state$delta = _slicedToArray(_state.delta, 2),\n            dx = _state$delta[0],\n            dy = _state$delta[1];\n\n        if (!isPressed) {\n            return;\n        }\n\n        var mouse = [pageX - dx, pageY - dy];\n        var col = clamp(Math.floor(mouse[0] / width), 0, this.COLUMN_COUNT - 1);\n        var row = clamp(Math.floor(mouse[1] / height), 0, this.state.row_count);\n        var endIndex = row * this.COLUMN_COUNT + col;\n        var startIndex = this.findIndexByHash(lastPressKey);\n        var newOrder = reinsert(images, startIndex, endIndex);\n\n        this.setState({\n            mouse: mouse,\n            images: newOrder\n        });\n    },\n    handleMouseDown: function handleMouseDown(key, _ref2, _ref3) {\n        var _ref4 = _slicedToArray(_ref2, 2),\n            pressX = _ref4[0],\n            pressY = _ref4[1];\n\n        var pageX = _ref3.pageX,\n            pageY = _ref3.pageY;\n\n        this.setState({\n            lastPressKey: key,\n            lastPressIndex: this.findIndexByHash(key),\n            isPressed: true,\n            delta: [pageX - pressX, pageY - pressY],\n            mouse: [pressX, pressY]\n        });\n    },\n    handleMouseUp: function handleMouseUp(e) {\n        e.preventDefault();\n        this.props.mouseUp(this.state.images, e);\n        this.setState({\n            isPressed: false,\n            delta: [0, 0]\n        });\n    },\n    createRearrangeComponent: function createRearrangeComponent(image) {\n        var _this = this;\n\n        var style;\n        var x;\n        var y;\n        var key = image.hash;\n        var href = Imgur.Environment.cdnUrl + '/' + (image.hash + image.ext);\n\n        if (key === this.state.lastPressKey && this.state.isPressed) {\n            var _state$mouse = _slicedToArray(this.state.mouse, 2);\n\n            x = _state$mouse[0];\n            y = _state$mouse[1];\n\n            style = {\n                translateX: x,\n                translateY: y,\n                scale: ReactMotion.spring(1.2, scaleSpring)\n            };\n        } else {\n            var _state$layout$findInd = _slicedToArray(this.state.layout[this.findIndexByHash(key)], 2);\n\n            x = _state$layout$findInd[0];\n            y = _state$layout$findInd[1];\n\n            style = {\n                translateX: ReactMotion.spring(x, positionSpring),\n                translateY: ReactMotion.spring(y, positionSpring),\n                scale: ReactMotion.spring(1, scaleSpring)\n            };\n        }\n\n        if (image.ext === '.gif') {\n            href = Imgur.Environment.cdnUrl + '/' + image.hash + '.mp4';\n        }\n\n        return React.createElement(\n            ReactMotion.Motion,\n            { key: key, style: style },\n            function (_ref5) {\n                var translateX = _ref5.translateX,\n                    translateY = _ref5.translateY,\n                    scale = _ref5.scale;\n                return React.createElement('span', {\n                    onMouseDown: _.partial(_this.handleMouseDown, key, [x, y]),\n                    onMouseUp: _this.handleMouseUp,\n                    className: 'post-grid-image ' + _this.props.gridImageClasses,\n                    'data-href': href,\n                    'data-title': image.title,\n                    style: {\n                        backgroundImage: 'url(' + (Imgur.Environment.cdnUrl + '/' + image.hash + 'b.jpg') + ')',\n                        WebkitTransform: 'translate(' + translateX + 'px, ' + translateY + 'px) scale(' + scale + ')',\n                        transform: 'translate(' + translateX + 'px, ' + translateY + 'px) scale(' + scale + ')',\n                        zIndex: key === _this.state.lastPressKey ? 9997 : 0\n                    }\n                });\n            }\n        );\n    },\n\n\n    render: function render() {\n        var rendered_images = [];\n        var _state2 = this.state,\n            window_height = _state2.window_height,\n            scrolltop = _state2.scrolltop,\n            offset = _state2.offset,\n            container_height = _state2.container_height,\n            count = _state2.count,\n            images = _state2.images;\n\n\n        var row_buffer = 5;\n        var top_row = Math.floor((scrolltop - offset) / height) - row_buffer;\n\n        if (top_row < 0) {\n            top_row = 0;\n            ////Multiply by 3 since we're near the top and going to be potentially scrolling. We also lost a few rows by setting top_row to 0\n            row_buffer *= 3;\n        } else {\n            //Multiply by 2 to cancel out the original \"- row_buffer\" used when calculating top_row\n            row_buffer *= 2;\n        }\n\n        var bottom_row = top_row + Math.floor(window_height / height) + row_buffer;\n\n        var top_row_index_start = top_row * this.COLUMN_COUNT;\n        var bottom_row_index_start = bottom_row * this.COLUMN_COUNT;\n\n        for (var i = top_row_index_start; i < bottom_row_index_start && i < count; i++) {\n            rendered_images.push(this.createRearrangeComponent(images[i]));\n        }\n\n        if (this.state.isPressed && (this.state.lastPressIndex < top_row_index_start || this.state.lastPressIndex >= bottom_row_index_start)) {\n            rendered_images.push(this.createRearrangeComponent(images[this.state.lastPressIndex]));\n        }\n\n        return React.createElement(\n            'div',\n            { ref: 'container', className: 'post-grid-images', style: { height: container_height + 'px' }, onMouseMove: this.props.allowRearrange ? this.handleMouseMove : false },\n            rendered_images\n        );\n    }\n});\n//# sourceMappingURL=grid.js.map\n","Namespace('Imgur.Promoted');\n\nvar youtube_ready = false;\nvar youtube_iframes = {};\n\n//Needs to live outside class structure for youtube script to access https://developers.google.com/youtube/iframe_api_reference#Requirements\nfunction onYouTubeIframeAPIReady() {\n    for(var iframe in youtube_iframes) {\n        if (youtube_iframes[iframe].dom && !youtube_iframes[iframe].player) {\n            youtube_iframes[iframe].player = new YT.Player(youtube_iframes[iframe].dom, {\n                events: {\n                    onReady: _.partial(onPlayerReady, iframe),\n                    onStateChange: _.partial(onPlayerStateChange, iframe)\n                }\n            });\n        }\n    }\n}\n\nfunction onPlayerReady(iframe) {\n    if (youtube_iframes[iframe].manuallyPaused) {\n        return;\n    }\n\n    if(!youtube_iframes[iframe].soundOn) {\n        youtube_iframes[iframe].player.mute();\n    }\n\n    youtube_iframes[iframe].player.seekTo(youtube_iframes[iframe].currentTime, true);\n    youtube_iframes[iframe].player.playVideo();\n\n    youtube_iframes[iframe].hash = youtube_iframes[iframe].player.getVideoData().video_id;\n    youtube_iframes[iframe].videoLength = youtube_iframes[iframe].player.getDuration();\n}\n\nfunction onPlayerStateChange(iframe, event) {\n    switch (event.data) {\n        case YT.PlayerState.PAUSED:\n            youtube_iframes[iframe].manuallyPaused = true;\n            break;\n        case YT.PlayerState.PLAYING:\n            youtube_iframes[iframe].manuallyPaused = false;\n            break;\n    }\n}\n\nImgur.Promoted = Class.extend({\n    init: function(config, emitter, insideNav, sideGallery, events, source) {\n        this._ = {\n            'ele': {},\n            'config': config,\n            'emitter': emitter,\n            'events': events,\n            'eventsBound': false,\n            'navs': 0,\n            'navHashes': [],\n            // whether the last attempt to fill failed\n            'failMode': false,\n            'reservations': [],\n            'ads': {},\n            'order':[],\n            'pxQueue': [],\n            'source': source,\n            'rgxSubreddit': /\\/r\\/([^\\/]+)/,\n            'rgxPxMacroTimestamp': /[\\{\\[\\%]+(timestamp|cachebust(er)?)[\\}\\]\\%]+/ig,\n            'rgxPxMacroRandom': /[\\{\\[\\%]+random[\\}\\]\\%]+/ig,\n            'pxMacroRandomLength': 10,\n            'allowedRandomChars': 'abcdefghijklmnopqrstuvwxyz0123456789',\n            'inside': insideNav,\n            'sectSortWindow': '',\n            'sideGallery': sideGallery,\n            'thumbnailSizes': {\n                wide: '288x141',\n                normal: '141x141'\n            },\n            'enabled': Imgur.Gallery.getInstance()._.safe_tags && true, // quickie sloppy sfw vs nsfw logic\n            youtubeViewabilityTimer: 1000, //ms (1000 should be divisible by whatever value this is set to, to make seconds calculation properly)\n            youtubeMinViewTime: 3 //seconds\n        };\n\n        // triggered on ajax return of new promoted post (duh)\n        emitter.on('gotPromoted', this, this.handleReservation);\n\n        // Triggered on each page pulled into sideGallery\n        // We check sectSortWindow in there and if new, call handleNewGallery()\n        emitter.on('sidegalleryPageLoad', this, this.handleNewGalleryPage);\n\n        // triggered for each navigation\n        emitter.on('postRendered', this, this.handleNav);\n\n        // triggered when displaying a promoted post\n        emitter.on('displayPromoted', this, this.handleDisplay);\n\n        // fired by events object\n        emitter.on('promoEvent', this, this.handleDomEvent);\n\n        // this binds direct nav\n        if (Imgur.Environment.image.isAd) {\n            this.bindGameLink(Imgur.Environment.image.hash); // one-off for old spice FB game campaign\n            this.initYouTubeAutoPlayMute();\n        }\n    },\n\n    // decide whether or not we should enable events\n    eventsEval: function(hash) {\n        if(hash in this._.ads) {\n            this._.events.bindAll();\n            this._.eventsBound = true;\n        } else if(this._.eventsBound) {\n            this._.events.bindAll(true);\n            this._.eventsBound = false;\n        }\n    },\n\n    handleDomEvent: function(ev) {\n        var evName = Imgur.Util.dive(ev, 'data.promoEvent'),\n            iter;\n\n        if(evName) {\n            if(!_.isArray(evName)) {\n                evName = [evName];\n            }\n\n            for(iter = 0; iter < evName.length; iter++) {\n                this.pixel(this._.inside.getHash(), evName[iter]);\n            }\n        }\n    },\n\n    handleNav: function(data, force, distance) {\n        var hash = data.hash;\n\n        if(!this._.enabled) {\n            return;\n        }\n\n        if (this._.youtubeViewabilityInterval) {\n            this.resetYouTubeAutoPlayMute();\n        }\n\n        if (data.isAd) {\n            this.initYouTubeAutoPlayMute();\n        }\n\n        this.eventsEval(hash);\n\n        if(isNaN(this._.navs)) {\n            this._.navs = 0;\n        }\n\n        if(this._.config.skipPromoNav && hash in this._.ads) {\n            return;\n        }\n\n        if(this._.config.onlyUniqueNavs && _.indexOf(this._.navHashes, hash) > -1) {\n            return;\n        }\n\n        var thresh = this._.config.navThreshold;\n\n        if(2 > this._.order.length && this._.config.populateFirst) {\n            // config setting can be set to non-positive into to disable and fallback to normal threshold\n            thresh = !isNaN(this._.config.populateFirstThreshold) ? this._.config.populateFirstThreshold : thresh;\n        }\n\n        this._.navHashes.push(hash);\n        this._.navs++;\n\n        if(this._.failMode) {\n            if(this._.navs > this._.config.failThreshold) {\n                this._.failMode = false;\n            }\n        }\n\n        if(this._.failMode) {\n            // still in fail mode? bail.\n            return;\n        }\n\n        // force nav or Nth\n        if(force || (this._.navs > 0 && this._.navs >= thresh)) {\n            this._.navs = 0;\n\n            var after = this._.sideGallery.nthFromHash(!isNaN(distance) ? distance : this._.config.distance, hash);\n            this._.reservations.push(after);\n            // getPlacement() should return the XHR\n            this._.emitter.trigger('wantPromoted', this._.source.getPlacement());\n        }\n    },\n\n    handleDisplay: function(hash) {\n        var ppData;\n\n        this.bindGameLink(hash); // one-off for old spice FB game campaign\n\n        if(hash in this._.ads) {\n            ppData = this._.ads[hash];\n\n            this.pixel(hash, 'IMPRESSION_POST');\n            this.pixel(hash, 'CLICK_THUMB');\n\n            this.placeCompanion(hash);\n\n            Imgur.Util.jafoLog({\n                event: 'ppConv',\n                meta: {\n                  'hash': hash,\n                  'flightId': Imgur.Util.dive(ppData, 'parts.thumb.flightId'),\n                  'campaignId': Imgur.Util.dive(ppData, 'parts.thumb.campaignId'),\n                  'thumbnailSize': Imgur.Util.dive(ppData, 'parts.data.thumbnail_json.size') || this._.thumbnailSizes.normal\n                }\n            });\n        }\n    },\n\n    // one-off for old spice FB game campaign\n    bindGameLink: function(hash) {\n        var subSelector = '.play-the-game';\n        var games = [\n            '0OcVZlb', // dev hash\n            'CZf9o',\n            'sAEyl',\n            'Dj5dm'\n        ];\n        // 0OcVZlb is the dev hash\n        // CZf9o is the prod hash\n        if(games.indexOf(hash) > -1) {\n            // subSelector has to be used because react won't let us directly bind...\n            $('.post-container').off('click', subSelector, this.handleGameLink).on('click', subSelector, this.handleGameLink);\n        }\n    },\n\n    // one-off for old spice FB game campaign\n    handleGameLink: function(ev) {\n        $.colorbox({\n            href: '//www.youroldspicegame.com/',\n            iframe: true,\n            transition: 'fade',\n            width: '1000px',\n            height: '640px',\n            scrolling: false,\n            trapFocus: true,\n            top: '50px',\n            onClose: function() {\n                // fire pixels here\n            },\n            onComplete: function() {\n                // after content loads\n                // fire pixels here\n            },\n            onOpen: function() {\n                // fire pixels here\n            },\n        });\n    },\n\n    setYouTubeAutoPlayMuteIframes: function() {\n        for (var src in youtube_iframes) {\n            if(youtube_iframes[src].dom && !document.body.contains(youtube_iframes[src].dom)) {\n                //Video has been scrolled out of dom\n                youtube_iframes[src].isPlaying = false;\n                youtube_iframes[src].player = null;\n                youtube_iframes[src].dom = null;\n            }\n        }\n\n        var youtube_videos = $('.post-image-description .youtube-autoplay-mute');\n\n        for (var i = 0; i < youtube_videos.length; i++) {\n            var src = youtube_videos[i].src;\n\n            if(youtube_iframes.hasOwnProperty(src)) {\n                if (youtube_iframes[src].player) {\n                    youtube_iframes[src].soundOn = youtube_iframes[src].player.isMuted();\n                    youtube_iframes[src].isPlaying = youtube_iframes[src].player.getPlayerState() != YT.PlayerState.PAUSED;\n                    youtube_iframes[src].currentTime = youtube_iframes[src].player.getCurrentTime()\n\n                    if (youtube_iframes[src].isPlaying) {\n                        youtube_iframes[src].timeViewed += this._.youtubeViewabilityTimer/1000; //Converting ms to s\n\n                        //Min time required to view a video\n                        if (youtube_iframes[src].timeViewed == this._.youtubeMinViewTime) {\n                            Imgur.Util.jafoLog({\n                                event: 'videoView',\n                                meta: {\n                                  hash: youtube_iframes[src].hash\n                                }\n                            });\n                        }\n                    }\n                }\n\n                youtube_iframes[src].dom = youtube_videos[i];\n            } else if (!youtube_iframes.hasOwnProperty(src)) {\n                youtube_iframes[src] = {\n                    soundOn: false,\n                    isPlaying: false,\n                    manuallyPaused: false,\n                    currentTime: 0,\n                    timeViewed: 0,\n                    videoLength: 0,\n                    player: null,\n                    hash: null,\n                    dom: youtube_videos[i]\n                }\n            }\n        }\n    },\n\n    initYouTubeAutoPlayMute: function() {\n        this.setYouTubeAutoPlayMuteIframes();\n\n        if (!youtube_ready && Object.keys(youtube_iframes).length) {\n            $.getScript('//www.youtube.com/iframe_api', _.bind(function() {\n                window.addEventListener('beforeunload', _.bind(function() {\n                    this.resetYouTubeAutoPlayMute();\n                }, this));\n            }, this));\n\n            youtube_ready = true;\n        }\n\n        this._.youtubeViewabilityInterval = clearInterval(this._.youtubeViewabilityInterval);\n        this._.youtubeViewabilityInterval = setInterval(_.bind(this.handleYouTubeAutoPlayMuteUpdate, this), this._.youtubeViewabilityTimer);\n    },\n\n    handleYouTubeAutoPlayMuteUpdate: function() {\n        if (youtube_ready) {\n            this.setYouTubeAutoPlayMuteIframes();\n            onYouTubeIframeAPIReady();\n        } else {\n            this.initYouTubeAutoPlayMute();\n        }\n    },\n\n    resetYouTubeAutoPlayMute: function() {\n        for (var src in youtube_iframes) {\n            Imgur.Util.jafoLog.direct({\n                event: 'videoFinished',\n                meta: {\n                  hash: youtube_iframes[src].hash,\n                  soundOn: youtube_iframes[src].soundOn,\n                  timeViewed: youtube_iframes[src].timeViewed,\n                  videoLength: youtube_iframes[src].videoLength,\n                  percViewed: Math.min(1, youtube_iframes[src].timeViewed/youtube_iframes[src].videoLength) //Cap at 100%\n                }\n            });\n        }\n\n        this._.youtubeViewabilityInterval = clearInterval(this._.youtubeViewabilityInterval);\n        youtube_iframes = {};\n    },\n\n    topicIsFiltered: function() {\n        var currTopic = this._.inside._.section === 'topic'? this._.inside._.topic: null;\n\n        return (currTopic && _.indexOf(this._.config.filteredTopics, currTopic) > -1);\n    },\n\n    sectionIsFiltered: function() {\n        var keyIsObject = this._.config.filteredSections && this._.sideGallery.state.section in this._.config.filteredSections;\n        var keyIsIndexed = _.indexOf(this._.config.filteredSections, this._.sideGallery.state.section) > -1;\n\n        if(this._.sideGallery.state.section === 'subreddit') {\n            return !this.subredditIsAllowed();\n        }\n\n        if(keyIsObject || keyIsIndexed) {\n            if(typeof this._.config.filteredSections[this._.sideGallery.state.section] === 'object') {\n                // array of filtered gallery sorts\n                return _.indexOf(this._.config.filteredSections[this._.sideGallery.state.section], this._.sideGallery.state.sort) > -1;\n            }\n\n            // plain string - whole section filtered\n            return true;\n        }\n\n        return false;\n    },\n\n    subredditIsAllowed: function() {\n        var src = this._.sideGallery.state.source;\n        var subMatched = src ? src.match(this._.rgxSubreddit) : null;\n\n        if(subMatched && subMatched.length === 2) {\n            return _.indexOf(this._.config.allowedSubreddits, subMatched[1].toLowerCase()) > -1;\n        }\n\n        return false;\n    },\n\n    handleNewGallery: function() {\n        // can be set to non-positive int to disable and fall back to normal distance\n        var firstDist = !isNaN(this._.config.populateFirstDistance) ? this._.config.populateFirstDistance: this._.config.distance;\n\n        // Filter out bad topics\n        if(this.topicIsFiltered()) {\n            this._.enabled = false;\n            return;\n        }\n\n        // Filter out bad sections\n        if(this.sectionIsFiltered()) {\n            this._.enabled = false;\n            return;\n        }\n\n        this._.navs = 0;\n\n        if (this._.inside._.image.isAd) {\n            this._.order.push(this._.inside._.image.hash);\n            return;\n        }\n\n        // populateFirstDistance\n        if(this._.config.populateFirst) {\n            var hash = this._.inside.getHash();\n            this.handleNav(this._.inside.getSideGallery().getImage(hash), true, firstDist);\n        }\n    },\n\n    handleNewGalleryPage: function(method) {\n        if (method !== 'initial'){\n            return;\n        }\n        this.handleNewGallery();\n    },\n\n    nextLocIsFlushedLeft: function(hash) {\n        return $('#item-' + hash).position().left === 0;\n    },\n\n    handleReservation: function(placeObj) {\n        var hash = placeObj.getHash(),\n            after = this._.reservations.shift(),\n            addToIndex = 0;\n            thumbnailSize = Imgur.Util.dive(placeObj, 'parts.data.thumbnail_json.size');\n\n        if (thumbnailSize === this._.thumbnailSizes.wide && this.nextLocIsFlushedLeft(after)) {\n            addToIndex++;\n        }\n\n        this.handlePlacement(placeObj, after, addToIndex);\n    },\n\n    handlePlacement: function(placeObj, after, addToIndex) {\n        var hash = placeObj.getHash(),\n            thumbnailSize = Imgur.Util.dive(placeObj, 'parts.data.thumbnail_json.size');\n\n        if(!hash) {\n            this._.failMode = true;\n            return;\n        }\n\n        if(!after) {\n            after = this._.sideGallery.state.items[this._.sideGallery.state.items.length-1];\n        }\n\n        if(hash != this._.inside._.hash && !(hash in this._.ads) && this._.sideGallery.hashPosition(hash) < 0) {\n            this._.ads[hash] = placeObj;\n            this._.order.push(hash);\n\n            if(!('timestamp' in placeObj.parts.data)) {\n                // default to \"now\"\n                // moment is looking for YYYY-MM-DD HH:MM:SS in the template\n                placeObj.parts.data.timestamp = moment().utc().format('YYYY-MM-DD HH:mm:ss');\n            }\n\n            var insertPlacement = this._.sideGallery.hashPosition(after) + 1 + addToIndex;\n            this._.sideGallery.insertSingleItem(placeObj.parts.data, insertPlacement);\n            this.pixel(hash, 'IMPRESSION_THUMB');\n\n            Imgur.Util.jafoLog({\n                event: 'ppImp',\n                meta: {\n                  'hash': hash,\n                  'flightId': Imgur.Util.dive(placeObj, 'parts.thumb.flightId'),\n                  'campaignId': Imgur.Util.dive(placeObj, 'parts.thumb.campaignId'),\n                  'thumbnailSize': thumbnailSize || this._.thumbnailSizes.normal\n                }\n            });\n\n        }\n    },\n\n    placeCompanion: function(hash) {\n        var html = Imgur.Util.dive(this._.ads[hash], 'parts.companion.html');\n        var container = '<div class=\"promoCompanion\"><iframe id=\"promoCompanionFrame\" width=\"300\" height=\"250\" marginwidth=\"0\" marginheight=\"0\" hspace=\"0\" vspace=\"0\" scrolling=\"no\" frameBorder=\"0\" seamless=\"seamless\" sandbox=\"allow-same-origin allow-scripts allow-popups allow-popups-to-escape-sandbox\"></iframe></div>';\n\n        if (hash in this._.ads && html && (''+html).length > 0) {\n            this._.inside.showAds(container, function(injectedCode, injectEle) {\n                var frame = document.getElementById('promoCompanionFrame');\n                var fDoc;\n\n                if (injectedCode && injectEle && frame) {\n                    fDoc = frame.contentWindow.document;\n\n                    fDoc.open();\n                    fDoc.write(html);\n                    fDoc.close();\n                }\n            });\n\n            setTimeout(_.bind(function(){\n                if($('.promoCompanion').is(':visible')) {\n                    this.pixel(hash, 'IMPRESSION_COMPANION');\n                }\n            }, this), 800);\n        }\n    },\n\n    // fire a specific type of pixel for a given hash\n    pixel: function(hash, pxType, callback) {\n        var urls = Imgur.Util.dive(this._.ads, hash+'.pixels.'+pxType),\n            ret = [],\n            iter;\n\n        if(_.isArray(urls)) {\n            for(iter = 0; iter < urls.length; iter++) {\n                ret.push(this.pixelFire(urls[iter], callback, _.extend([], arguments)));\n            }\n        }\n\n        return ret;\n    },\n\n    // fire an arbitrary pixel\n    pixelFire: function(url, callback, pxData) {\n        var promoted = this,\n            idx, img, imgHandler;\n\n        // dammit, what do we have to validate an url that isn't buried?\n        if('string' === typeof url && url.length > 2) {\n            img = document.createElement('img');\n            img.pixelData = pxData;\n\n            // IE<9 has an issue garbage collecting images before loading them\n            // if the scope triggers cleanup. Keep a global-ish reference we\n            // use as a work-around. This technically is a memory leak (at least\n            // for the indexes), but the volume of sponsored pixels *should* be\n            // sane compared to something like JAFO which does not support such a\n            // workaround.\n            idx = this._.pxQueue.push(img) - 1;\n\n            // set up a cleanup handler with some shared scope\n            imgHandler = function() {\n                if('function' === typeof callback) {\n                    // remember the context! \"this\" and \"arguments\" are the event's versions!\n                    callback.apply(this, arguments);\n                }\n\n                promoted._.emitter.trigger('promotedPixel', arguments);\n\n                promoted._.pxQueue[idx] = null;\n            };\n\n            img.onload = imgHandler;\n            img.onerror = imgHandler;\n\n            // handle any \"macros\" in the pixel URL\n            if(this._.rgxPxMacroTimestamp.test(url)) {\n                url = url.replace(this._.rgxPxMacroTimestamp, new Date().getTime());\n            }\n\n            if(this._.rgxPxMacroRandom.test(url)) {\n                url = url.replace(this._.rgxPxMacroRandom, this.generateRandomString(this._.pxMacroRandomLength));\n            }\n\n            img.src = url;\n        }\n\n        return img;\n    },\n\n    generateRandomString: function(randLength) {\n        var rLen = parseInt(randLength, 10);\n\n        if(rLen < 1) {\n            // Bail on bad requested length\n            return;\n        }\n\n        var setLen = this._.allowedRandomChars.length;\n        var retString = '';\n        var iter;\n\n        for(iter = 0; iter < rLen; iter++) {\n            retString += this._.allowedRandomChars.charAt(Math.floor(Math.random() * setLen));\n        }\n\n        return retString;\n    }\n});\n\n","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"react\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"react\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"ReactMotion\"] = factory(require(\"react\"));\n\telse\n\t\troot[\"ReactMotion\"] = factory(root[\"React\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_9__) {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"build/\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\texports.__esModule = true;\n\t\n\tfunction _interopRequire(obj) { return obj && obj.__esModule ? obj['default'] : obj; }\n\t\n\tvar _Motion = __webpack_require__(1);\n\t\n\texports.Motion = _interopRequire(_Motion);\n\t\n\tvar _StaggeredMotion = __webpack_require__(10);\n\t\n\texports.StaggeredMotion = _interopRequire(_StaggeredMotion);\n\t\n\tvar _TransitionMotion = __webpack_require__(11);\n\t\n\texports.TransitionMotion = _interopRequire(_TransitionMotion);\n\t\n\tvar _spring = __webpack_require__(13);\n\t\n\texports.spring = _interopRequire(_spring);\n\t\n\tvar _presets = __webpack_require__(14);\n\t\n\texports.presets = _interopRequire(_presets);\n\t\n\t// deprecated, dummy warning function\n\t\n\tvar _reorderKeys = __webpack_require__(15);\n\t\n\texports.reorderKeys = _interopRequire(_reorderKeys);\n\n/***/ },\n/* 1 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\texports.__esModule = true;\n\t\n\tvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tvar _mapToZero = __webpack_require__(2);\n\t\n\tvar _mapToZero2 = _interopRequireDefault(_mapToZero);\n\t\n\tvar _stripStyle = __webpack_require__(3);\n\t\n\tvar _stripStyle2 = _interopRequireDefault(_stripStyle);\n\t\n\tvar _stepper3 = __webpack_require__(4);\n\t\n\tvar _stepper4 = _interopRequireDefault(_stepper3);\n\t\n\tvar _performanceNow = __webpack_require__(5);\n\t\n\tvar _performanceNow2 = _interopRequireDefault(_performanceNow);\n\t\n\tvar _raf = __webpack_require__(7);\n\t\n\tvar _raf2 = _interopRequireDefault(_raf);\n\t\n\tvar _shouldStopAnimation = __webpack_require__(8);\n\t\n\tvar _shouldStopAnimation2 = _interopRequireDefault(_shouldStopAnimation);\n\t\n\tvar _react = __webpack_require__(9);\n\t\n\tvar _react2 = _interopRequireDefault(_react);\n\t\n\tvar msPerFrame = 1000 / 60;\n\t\n\tvar Motion = _react2['default'].createClass({\n\t  displayName: 'Motion',\n\t\n\t  propTypes: {\n\t    // TOOD: warn against putting a config in here\n\t    defaultStyle: _react.PropTypes.objectOf(_react.PropTypes.number),\n\t    style: _react.PropTypes.objectOf(_react.PropTypes.oneOfType([_react.PropTypes.number, _react.PropTypes.object])).isRequired,\n\t    children: _react.PropTypes.func.isRequired,\n\t    onRest: _react.PropTypes.func\n\t  },\n\t\n\t  getInitialState: function getInitialState() {\n\t    var _props = this.props;\n\t    var defaultStyle = _props.defaultStyle;\n\t    var style = _props.style;\n\t\n\t    var currentStyle = defaultStyle || _stripStyle2['default'](style);\n\t    var currentVelocity = _mapToZero2['default'](currentStyle);\n\t    return {\n\t      currentStyle: currentStyle,\n\t      currentVelocity: currentVelocity,\n\t      lastIdealStyle: currentStyle,\n\t      lastIdealVelocity: currentVelocity\n\t    };\n\t  },\n\t\n\t  wasAnimating: false,\n\t  animationID: null,\n\t  prevTime: 0,\n\t  accumulatedTime: 0,\n\t  // it's possible that currentStyle's value is stale: if props is immediately\n\t  // changed from 0 to 400 to spring(0) again, the async currentStyle is still\n\t  // at 0 (didn't have time to tick and interpolate even once). If we naively\n\t  // compare currentStyle with destVal it'll be 0 === 0 (no animation, stop).\n\t  // In reality currentStyle should be 400\n\t  unreadPropStyle: null,\n\t  // after checking for unreadPropStyle != null, we manually go set the\n\t  // non-interpolating values (those that are a number, without a spring\n\t  // config)\n\t  clearUnreadPropStyle: function clearUnreadPropStyle(destStyle) {\n\t    var dirty = false;\n\t    var _state = this.state;\n\t    var currentStyle = _state.currentStyle;\n\t    var currentVelocity = _state.currentVelocity;\n\t    var lastIdealStyle = _state.lastIdealStyle;\n\t    var lastIdealVelocity = _state.lastIdealVelocity;\n\t\n\t    for (var key in destStyle) {\n\t      if (!destStyle.hasOwnProperty(key)) {\n\t        continue;\n\t      }\n\t\n\t      var styleValue = destStyle[key];\n\t      if (typeof styleValue === 'number') {\n\t        if (!dirty) {\n\t          dirty = true;\n\t          currentStyle = _extends({}, currentStyle);\n\t          currentVelocity = _extends({}, currentVelocity);\n\t          lastIdealStyle = _extends({}, lastIdealStyle);\n\t          lastIdealVelocity = _extends({}, lastIdealVelocity);\n\t        }\n\t\n\t        currentStyle[key] = styleValue;\n\t        currentVelocity[key] = 0;\n\t        lastIdealStyle[key] = styleValue;\n\t        lastIdealVelocity[key] = 0;\n\t      }\n\t    }\n\t\n\t    if (dirty) {\n\t      this.setState({ currentStyle: currentStyle, currentVelocity: currentVelocity, lastIdealStyle: lastIdealStyle, lastIdealVelocity: lastIdealVelocity });\n\t    }\n\t  },\n\t\n\t  startAnimationIfNecessary: function startAnimationIfNecessary() {\n\t    var _this = this;\n\t\n\t    // TODO: when config is {a: 10} and dest is {a: 10} do we raf once and\n\t    // call cb? No, otherwise accidental parent rerender causes cb trigger\n\t    this.animationID = _raf2['default'](function () {\n\t      // check if we need to animate in the first place\n\t      var propsStyle = _this.props.style;\n\t      if (_shouldStopAnimation2['default'](_this.state.currentStyle, propsStyle, _this.state.currentVelocity)) {\n\t        if (_this.wasAnimating && _this.props.onRest) {\n\t          _this.props.onRest();\n\t        }\n\t\n\t        // no need to cancel animationID here; shouldn't have any in flight\n\t        _this.animationID = null;\n\t        _this.wasAnimating = false;\n\t        _this.accumulatedTime = 0;\n\t        return;\n\t      }\n\t\n\t      _this.wasAnimating = true;\n\t\n\t      var currentTime = _performanceNow2['default']();\n\t      var timeDelta = currentTime - _this.prevTime;\n\t      _this.prevTime = currentTime;\n\t      _this.accumulatedTime = _this.accumulatedTime + timeDelta;\n\t      // more than 10 frames? prolly switched browser tab. Restart\n\t      if (_this.accumulatedTime > msPerFrame * 10) {\n\t        _this.accumulatedTime = 0;\n\t      }\n\t\n\t      if (_this.accumulatedTime === 0) {\n\t        // no need to cancel animationID here; shouldn't have any in flight\n\t        _this.animationID = null;\n\t        _this.startAnimationIfNecessary();\n\t        return;\n\t      }\n\t\n\t      var currentFrameCompletion = (_this.accumulatedTime - Math.floor(_this.accumulatedTime / msPerFrame) * msPerFrame) / msPerFrame;\n\t      var framesToCatchUp = Math.floor(_this.accumulatedTime / msPerFrame);\n\t\n\t      var newLastIdealStyle = {};\n\t      var newLastIdealVelocity = {};\n\t      var newCurrentStyle = {};\n\t      var newCurrentVelocity = {};\n\t\n\t      for (var key in propsStyle) {\n\t        if (!propsStyle.hasOwnProperty(key)) {\n\t          continue;\n\t        }\n\t\n\t        var styleValue = propsStyle[key];\n\t        if (typeof styleValue === 'number') {\n\t          newCurrentStyle[key] = styleValue;\n\t          newCurrentVelocity[key] = 0;\n\t          newLastIdealStyle[key] = styleValue;\n\t          newLastIdealVelocity[key] = 0;\n\t        } else {\n\t          var newLastIdealStyleValue = _this.state.lastIdealStyle[key];\n\t          var newLastIdealVelocityValue = _this.state.lastIdealVelocity[key];\n\t          for (var i = 0; i < framesToCatchUp; i++) {\n\t            var _stepper = _stepper4['default'](msPerFrame / 1000, newLastIdealStyleValue, newLastIdealVelocityValue, styleValue.val, styleValue.stiffness, styleValue.damping, styleValue.precision);\n\t\n\t            newLastIdealStyleValue = _stepper[0];\n\t            newLastIdealVelocityValue = _stepper[1];\n\t          }\n\t\n\t          var _stepper2 = _stepper4['default'](msPerFrame / 1000, newLastIdealStyleValue, newLastIdealVelocityValue, styleValue.val, styleValue.stiffness, styleValue.damping, styleValue.precision);\n\t\n\t          var nextIdealX = _stepper2[0];\n\t          var nextIdealV = _stepper2[1];\n\t\n\t          newCurrentStyle[key] = newLastIdealStyleValue + (nextIdealX - newLastIdealStyleValue) * currentFrameCompletion;\n\t          newCurrentVelocity[key] = newLastIdealVelocityValue + (nextIdealV - newLastIdealVelocityValue) * currentFrameCompletion;\n\t          newLastIdealStyle[key] = newLastIdealStyleValue;\n\t          newLastIdealVelocity[key] = newLastIdealVelocityValue;\n\t        }\n\t      }\n\t\n\t      _this.animationID = null;\n\t      // the amount we're looped over above\n\t      _this.accumulatedTime -= framesToCatchUp * msPerFrame;\n\t\n\t      _this.setState({\n\t        currentStyle: newCurrentStyle,\n\t        currentVelocity: newCurrentVelocity,\n\t        lastIdealStyle: newLastIdealStyle,\n\t        lastIdealVelocity: newLastIdealVelocity\n\t      });\n\t\n\t      _this.unreadPropStyle = null;\n\t\n\t      _this.startAnimationIfNecessary();\n\t    });\n\t  },\n\t\n\t  componentDidMount: function componentDidMount() {\n\t    this.prevTime = _performanceNow2['default']();\n\t    this.startAnimationIfNecessary();\n\t  },\n\t\n\t  componentWillReceiveProps: function componentWillReceiveProps(props) {\n\t    if (this.unreadPropStyle != null) {\n\t      // previous props haven't had the chance to be set yet; set them here\n\t      this.clearUnreadPropStyle(this.unreadPropStyle);\n\t    }\n\t\n\t    this.unreadPropStyle = props.style;\n\t    if (this.animationID == null) {\n\t      this.prevTime = _performanceNow2['default']();\n\t      this.startAnimationIfNecessary();\n\t    }\n\t  },\n\t\n\t  componentWillUnmount: function componentWillUnmount() {\n\t    if (this.animationID != null) {\n\t      _raf2['default'].cancel(this.animationID);\n\t      this.animationID = null;\n\t    }\n\t  },\n\t\n\t  render: function render() {\n\t    var renderedChildren = this.props.children(this.state.currentStyle);\n\t    return renderedChildren && _react2['default'].Children.only(renderedChildren);\n\t  }\n\t});\n\t\n\texports['default'] = Motion;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 2 */\n/***/ function(module, exports) {\n\n\t\n\t\n\t// currently used to initiate the velocity style object to 0\n\t'use strict';\n\t\n\texports.__esModule = true;\n\texports['default'] = mapToZero;\n\t\n\tfunction mapToZero(obj) {\n\t  var ret = {};\n\t  for (var key in obj) {\n\t    if (obj.hasOwnProperty(key)) {\n\t      ret[key] = 0;\n\t    }\n\t  }\n\t  return ret;\n\t}\n\t\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 3 */\n/***/ function(module, exports) {\n\n\t\n\t// turn {x: {val: 1, stiffness: 1, damping: 2}, y: 2} generated by\n\t// `{x: spring(1, {stiffness: 1, damping: 2}), y: 2}` into {x: 1, y: 2}\n\t\n\t'use strict';\n\t\n\texports.__esModule = true;\n\texports['default'] = stripStyle;\n\t\n\tfunction stripStyle(style) {\n\t  var ret = {};\n\t  for (var key in style) {\n\t    if (!style.hasOwnProperty(key)) {\n\t      continue;\n\t    }\n\t    ret[key] = typeof style[key] === 'number' ? style[key] : style[key].val;\n\t  }\n\t  return ret;\n\t}\n\t\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 4 */\n/***/ function(module, exports) {\n\n\t\n\t\n\t// stepper is used a lot. Saves allocation to return the same array wrapper.\n\t// This is fine and danger-free against mutations because the callsite\n\t// immediately destructures it and gets the numbers inside without passing the\n\t\"use strict\";\n\t\n\texports.__esModule = true;\n\texports[\"default\"] = stepper;\n\t\n\tvar reusedTuple = [];\n\t\n\tfunction stepper(secondPerFrame, x, v, destX, k, b, precision) {\n\t  // Spring stiffness, in kg / s^2\n\t\n\t  // for animations, destX is really spring length (spring at rest). initial\n\t  // position is considered as the stretched/compressed position of a spring\n\t  var Fspring = -k * (x - destX);\n\t\n\t  // Damping, in kg / s\n\t  var Fdamper = -b * v;\n\t\n\t  // usually we put mass here, but for animation purposes, specifying mass is a\n\t  // bit redundant. you could simply adjust k and b accordingly\n\t  // let a = (Fspring + Fdamper) / mass;\n\t  var a = Fspring + Fdamper;\n\t\n\t  var newV = v + a * secondPerFrame;\n\t  var newX = x + newV * secondPerFrame;\n\t\n\t  if (Math.abs(newV) < precision && Math.abs(newX - destX) < precision) {\n\t    reusedTuple[0] = destX;\n\t    reusedTuple[1] = 0;\n\t    return reusedTuple;\n\t  }\n\t\n\t  reusedTuple[0] = newX;\n\t  reusedTuple[1] = newV;\n\t  return reusedTuple;\n\t}\n\t\n\tmodule.exports = exports[\"default\"];\n\t// array reference around.\n\n/***/ },\n/* 5 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(process) {// Generated by CoffeeScript 1.7.1\n\t\"use strict\";\n\t\n\t(function () {\n\t  var getNanoSeconds, hrtime, loadTime;\n\t\n\t  if (typeof performance !== \"undefined\" && performance !== null && performance.now) {\n\t    module.exports = function () {\n\t      return performance.now();\n\t    };\n\t  } else if (typeof process !== \"undefined\" && process !== null && process.hrtime) {\n\t    module.exports = function () {\n\t      return (getNanoSeconds() - loadTime) / 1e6;\n\t    };\n\t    hrtime = process.hrtime;\n\t    getNanoSeconds = function () {\n\t      var hr;\n\t      hr = hrtime();\n\t      return hr[0] * 1e9 + hr[1];\n\t    };\n\t    loadTime = getNanoSeconds();\n\t  } else if (Date.now) {\n\t    module.exports = function () {\n\t      return Date.now() - loadTime;\n\t    };\n\t    loadTime = Date.now();\n\t  } else {\n\t    module.exports = function () {\n\t      return new Date().getTime() - loadTime;\n\t    };\n\t    loadTime = new Date().getTime();\n\t  }\n\t}).call(undefined);\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(6)))\n\n/***/ },\n/* 6 */\n/***/ function(module, exports) {\n\n\t// shim for using process in browser\n\t\n\t'use strict';\n\t\n\tvar process = module.exports = {};\n\tvar queue = [];\n\tvar draining = false;\n\tvar currentQueue;\n\tvar queueIndex = -1;\n\t\n\tfunction cleanUpNextTick() {\n\t    draining = false;\n\t    if (currentQueue.length) {\n\t        queue = currentQueue.concat(queue);\n\t    } else {\n\t        queueIndex = -1;\n\t    }\n\t    if (queue.length) {\n\t        drainQueue();\n\t    }\n\t}\n\t\n\tfunction drainQueue() {\n\t    if (draining) {\n\t        return;\n\t    }\n\t    var timeout = setTimeout(cleanUpNextTick);\n\t    draining = true;\n\t\n\t    var len = queue.length;\n\t    while (len) {\n\t        currentQueue = queue;\n\t        queue = [];\n\t        while (++queueIndex < len) {\n\t            if (currentQueue) {\n\t                currentQueue[queueIndex].run();\n\t            }\n\t        }\n\t        queueIndex = -1;\n\t        len = queue.length;\n\t    }\n\t    currentQueue = null;\n\t    draining = false;\n\t    clearTimeout(timeout);\n\t}\n\t\n\tprocess.nextTick = function (fun) {\n\t    var args = new Array(arguments.length - 1);\n\t    if (arguments.length > 1) {\n\t        for (var i = 1; i < arguments.length; i++) {\n\t            args[i - 1] = arguments[i];\n\t        }\n\t    }\n\t    queue.push(new Item(fun, args));\n\t    if (queue.length === 1 && !draining) {\n\t        setTimeout(drainQueue, 0);\n\t    }\n\t};\n\t\n\t// v8 likes predictible objects\n\tfunction Item(fun, array) {\n\t    this.fun = fun;\n\t    this.array = array;\n\t}\n\tItem.prototype.run = function () {\n\t    this.fun.apply(null, this.array);\n\t};\n\tprocess.title = 'browser';\n\tprocess.browser = true;\n\tprocess.env = {};\n\tprocess.argv = [];\n\tprocess.version = ''; // empty string to avoid regexp issues\n\tprocess.versions = {};\n\t\n\tfunction noop() {}\n\t\n\tprocess.on = noop;\n\tprocess.addListener = noop;\n\tprocess.once = noop;\n\tprocess.off = noop;\n\tprocess.removeListener = noop;\n\tprocess.removeAllListeners = noop;\n\tprocess.emit = noop;\n\t\n\tprocess.binding = function (name) {\n\t    throw new Error('process.binding is not supported');\n\t};\n\t\n\tprocess.cwd = function () {\n\t    return '/';\n\t};\n\tprocess.chdir = function (dir) {\n\t    throw new Error('process.chdir is not supported');\n\t};\n\tprocess.umask = function () {\n\t    return 0;\n\t};\n\n/***/ },\n/* 7 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar now = __webpack_require__(5),\n\t    global = typeof window === 'undefined' ? {} : window,\n\t    vendors = ['moz', 'webkit'],\n\t    suffix = 'AnimationFrame',\n\t    raf = global['request' + suffix],\n\t    caf = global['cancel' + suffix] || global['cancelRequest' + suffix];\n\t\n\tfor (var i = 0; i < vendors.length && !raf; i++) {\n\t  raf = global[vendors[i] + 'Request' + suffix];\n\t  caf = global[vendors[i] + 'Cancel' + suffix] || global[vendors[i] + 'CancelRequest' + suffix];\n\t}\n\t\n\t// Some versions of FF have rAF but not cAF\n\tif (!raf || !caf) {\n\t  var last = 0,\n\t      id = 0,\n\t      queue = [],\n\t      frameDuration = 1000 / 60;\n\t\n\t  raf = function (callback) {\n\t    if (queue.length === 0) {\n\t      var _now = now(),\n\t          next = Math.max(0, frameDuration - (_now - last));\n\t      last = next + _now;\n\t      setTimeout(function () {\n\t        var cp = queue.slice(0);\n\t        // Clear queue here to prevent\n\t        // callbacks from appending listeners\n\t        // to the current frame's queue\n\t        queue.length = 0;\n\t        for (var i = 0; i < cp.length; i++) {\n\t          if (!cp[i].cancelled) {\n\t            try {\n\t              cp[i].callback(last);\n\t            } catch (e) {\n\t              setTimeout(function () {\n\t                throw e;\n\t              }, 0);\n\t            }\n\t          }\n\t        }\n\t      }, Math.round(next));\n\t    }\n\t    queue.push({\n\t      handle: ++id,\n\t      callback: callback,\n\t      cancelled: false\n\t    });\n\t    return id;\n\t  };\n\t\n\t  caf = function (handle) {\n\t    for (var i = 0; i < queue.length; i++) {\n\t      if (queue[i].handle === handle) {\n\t        queue[i].cancelled = true;\n\t      }\n\t    }\n\t  };\n\t}\n\t\n\tmodule.exports = function (fn) {\n\t  // Wrap in a new function to prevent\n\t  // `cancel` potentially being assigned\n\t  // to the native rAF function\n\t  return raf.call(global, fn);\n\t};\n\tmodule.exports.cancel = function () {\n\t  caf.apply(global, arguments);\n\t};\n\n/***/ },\n/* 8 */\n/***/ function(module, exports) {\n\n\t\n\t\n\t// usage assumption: currentStyle values have already been rendered but it says\n\t// nothing of whether currentStyle is stale (see unreadPropStyle)\n\t'use strict';\n\t\n\texports.__esModule = true;\n\texports['default'] = shouldStopAnimation;\n\t\n\tfunction shouldStopAnimation(currentStyle, style, currentVelocity) {\n\t  for (var key in style) {\n\t    if (!style.hasOwnProperty(key)) {\n\t      continue;\n\t    }\n\t\n\t    if (currentVelocity[key] !== 0) {\n\t      return false;\n\t    }\n\t\n\t    var styleValue = typeof style[key] === 'number' ? style[key] : style[key].val;\n\t    // stepper will have already taken care of rounding precision errors, so\n\t    // won't have such thing as 0.9999 !=== 1\n\t    if (currentStyle[key] !== styleValue) {\n\t      return false;\n\t    }\n\t  }\n\t\n\t  return true;\n\t}\n\t\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 9 */\n/***/ function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_9__;\n\n/***/ },\n/* 10 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\texports.__esModule = true;\n\t\n\tvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tvar _mapToZero = __webpack_require__(2);\n\t\n\tvar _mapToZero2 = _interopRequireDefault(_mapToZero);\n\t\n\tvar _stripStyle = __webpack_require__(3);\n\t\n\tvar _stripStyle2 = _interopRequireDefault(_stripStyle);\n\t\n\tvar _stepper3 = __webpack_require__(4);\n\t\n\tvar _stepper4 = _interopRequireDefault(_stepper3);\n\t\n\tvar _performanceNow = __webpack_require__(5);\n\t\n\tvar _performanceNow2 = _interopRequireDefault(_performanceNow);\n\t\n\tvar _raf = __webpack_require__(7);\n\t\n\tvar _raf2 = _interopRequireDefault(_raf);\n\t\n\tvar _shouldStopAnimation = __webpack_require__(8);\n\t\n\tvar _shouldStopAnimation2 = _interopRequireDefault(_shouldStopAnimation);\n\t\n\tvar _react = __webpack_require__(9);\n\t\n\tvar _react2 = _interopRequireDefault(_react);\n\t\n\tvar msPerFrame = 1000 / 60;\n\t\n\tfunction shouldStopAnimationAll(currentStyles, styles, currentVelocities) {\n\t  for (var i = 0; i < currentStyles.length; i++) {\n\t    if (!_shouldStopAnimation2['default'](currentStyles[i], styles[i], currentVelocities[i])) {\n\t      return false;\n\t    }\n\t  }\n\t  return true;\n\t}\n\t\n\tvar StaggeredMotion = _react2['default'].createClass({\n\t  displayName: 'StaggeredMotion',\n\t\n\t  propTypes: {\n\t    // TOOD: warn against putting a config in here\n\t    defaultStyles: _react.PropTypes.arrayOf(_react.PropTypes.objectOf(_react.PropTypes.number)),\n\t    styles: _react.PropTypes.func.isRequired,\n\t    children: _react.PropTypes.func.isRequired\n\t  },\n\t\n\t  getInitialState: function getInitialState() {\n\t    var _props = this.props;\n\t    var defaultStyles = _props.defaultStyles;\n\t    var styles = _props.styles;\n\t\n\t    var currentStyles = defaultStyles || styles().map(_stripStyle2['default']);\n\t    var currentVelocities = currentStyles.map(function (currentStyle) {\n\t      return _mapToZero2['default'](currentStyle);\n\t    });\n\t    return {\n\t      currentStyles: currentStyles,\n\t      currentVelocities: currentVelocities,\n\t      lastIdealStyles: currentStyles,\n\t      lastIdealVelocities: currentVelocities\n\t    };\n\t  },\n\t\n\t  animationID: null,\n\t  prevTime: 0,\n\t  accumulatedTime: 0,\n\t  // it's possible that currentStyle's value is stale: if props is immediately\n\t  // changed from 0 to 400 to spring(0) again, the async currentStyle is still\n\t  // at 0 (didn't have time to tick and interpolate even once). If we naively\n\t  // compare currentStyle with destVal it'll be 0 === 0 (no animation, stop).\n\t  // In reality currentStyle should be 400\n\t  unreadPropStyles: null,\n\t  // after checking for unreadPropStyles != null, we manually go set the\n\t  // non-interpolating values (those that are a number, without a spring\n\t  // config)\n\t  clearUnreadPropStyle: function clearUnreadPropStyle(unreadPropStyles) {\n\t    var _state = this.state;\n\t    var currentStyles = _state.currentStyles;\n\t    var currentVelocities = _state.currentVelocities;\n\t    var lastIdealStyles = _state.lastIdealStyles;\n\t    var lastIdealVelocities = _state.lastIdealVelocities;\n\t\n\t    var someDirty = false;\n\t    for (var i = 0; i < unreadPropStyles.length; i++) {\n\t      var unreadPropStyle = unreadPropStyles[i];\n\t      var dirty = false;\n\t\n\t      for (var key in unreadPropStyle) {\n\t        if (!unreadPropStyle.hasOwnProperty(key)) {\n\t          continue;\n\t        }\n\t\n\t        var styleValue = unreadPropStyle[key];\n\t        if (typeof styleValue === 'number') {\n\t          if (!dirty) {\n\t            dirty = true;\n\t            someDirty = true;\n\t            currentStyles[i] = _extends({}, currentStyles[i]);\n\t            currentVelocities[i] = _extends({}, currentVelocities[i]);\n\t            lastIdealStyles[i] = _extends({}, lastIdealStyles[i]);\n\t            lastIdealVelocities[i] = _extends({}, lastIdealVelocities[i]);\n\t          }\n\t          currentStyles[i][key] = styleValue;\n\t          currentVelocities[i][key] = 0;\n\t          lastIdealStyles[i][key] = styleValue;\n\t          lastIdealVelocities[i][key] = 0;\n\t        }\n\t      }\n\t    }\n\t\n\t    if (someDirty) {\n\t      this.setState({ currentStyles: currentStyles, currentVelocities: currentVelocities, lastIdealStyles: lastIdealStyles, lastIdealVelocities: lastIdealVelocities });\n\t    }\n\t  },\n\t\n\t  startAnimationIfNecessary: function startAnimationIfNecessary() {\n\t    var _this = this;\n\t\n\t    // TODO: when config is {a: 10} and dest is {a: 10} do we raf once and\n\t    // call cb? No, otherwise accidental parent rerender causes cb trigger\n\t    this.animationID = _raf2['default'](function () {\n\t      var destStyles = _this.props.styles(_this.state.lastIdealStyles);\n\t\n\t      // check if we need to animate in the first place\n\t      if (shouldStopAnimationAll(_this.state.currentStyles, destStyles, _this.state.currentVelocities)) {\n\t        // no need to cancel animationID here; shouldn't have any in flight\n\t        _this.animationID = null;\n\t        _this.accumulatedTime = 0;\n\t        return;\n\t      }\n\t\n\t      var currentTime = _performanceNow2['default']();\n\t      var timeDelta = currentTime - _this.prevTime;\n\t      _this.prevTime = currentTime;\n\t      _this.accumulatedTime = _this.accumulatedTime + timeDelta;\n\t      // more than 10 frames? prolly switched browser tab. Restart\n\t      if (_this.accumulatedTime > msPerFrame * 10) {\n\t        _this.accumulatedTime = 0;\n\t      }\n\t\n\t      if (_this.accumulatedTime === 0) {\n\t        // no need to cancel animationID here; shouldn't have any in flight\n\t        _this.animationID = null;\n\t        _this.startAnimationIfNecessary();\n\t        return;\n\t      }\n\t\n\t      var currentFrameCompletion = (_this.accumulatedTime - Math.floor(_this.accumulatedTime / msPerFrame) * msPerFrame) / msPerFrame;\n\t      var framesToCatchUp = Math.floor(_this.accumulatedTime / msPerFrame);\n\t\n\t      var newLastIdealStyles = [];\n\t      var newLastIdealVelocities = [];\n\t      var newCurrentStyles = [];\n\t      var newCurrentVelocities = [];\n\t\n\t      for (var i = 0; i < destStyles.length; i++) {\n\t        var destStyle = destStyles[i];\n\t        var newCurrentStyle = {};\n\t        var newCurrentVelocity = {};\n\t        var newLastIdealStyle = {};\n\t        var newLastIdealVelocity = {};\n\t\n\t        for (var key in destStyle) {\n\t          if (!destStyle.hasOwnProperty(key)) {\n\t            continue;\n\t          }\n\t\n\t          var styleValue = destStyle[key];\n\t          if (typeof styleValue === 'number') {\n\t            newCurrentStyle[key] = styleValue;\n\t            newCurrentVelocity[key] = 0;\n\t            newLastIdealStyle[key] = styleValue;\n\t            newLastIdealVelocity[key] = 0;\n\t          } else {\n\t            var newLastIdealStyleValue = _this.state.lastIdealStyles[i][key];\n\t            var newLastIdealVelocityValue = _this.state.lastIdealVelocities[i][key];\n\t            for (var j = 0; j < framesToCatchUp; j++) {\n\t              var _stepper = _stepper4['default'](msPerFrame / 1000, newLastIdealStyleValue, newLastIdealVelocityValue, styleValue.val, styleValue.stiffness, styleValue.damping, styleValue.precision);\n\t\n\t              newLastIdealStyleValue = _stepper[0];\n\t              newLastIdealVelocityValue = _stepper[1];\n\t            }\n\t\n\t            var _stepper2 = _stepper4['default'](msPerFrame / 1000, newLastIdealStyleValue, newLastIdealVelocityValue, styleValue.val, styleValue.stiffness, styleValue.damping, styleValue.precision);\n\t\n\t            var nextIdealX = _stepper2[0];\n\t            var nextIdealV = _stepper2[1];\n\t\n\t            newCurrentStyle[key] = newLastIdealStyleValue + (nextIdealX - newLastIdealStyleValue) * currentFrameCompletion;\n\t            newCurrentVelocity[key] = newLastIdealVelocityValue + (nextIdealV - newLastIdealVelocityValue) * currentFrameCompletion;\n\t            newLastIdealStyle[key] = newLastIdealStyleValue;\n\t            newLastIdealVelocity[key] = newLastIdealVelocityValue;\n\t          }\n\t        }\n\t\n\t        newCurrentStyles[i] = newCurrentStyle;\n\t        newCurrentVelocities[i] = newCurrentVelocity;\n\t        newLastIdealStyles[i] = newLastIdealStyle;\n\t        newLastIdealVelocities[i] = newLastIdealVelocity;\n\t      }\n\t\n\t      _this.animationID = null;\n\t      // the amount we're looped over above\n\t      _this.accumulatedTime -= framesToCatchUp * msPerFrame;\n\t\n\t      _this.setState({\n\t        currentStyles: newCurrentStyles,\n\t        currentVelocities: newCurrentVelocities,\n\t        lastIdealStyles: newLastIdealStyles,\n\t        lastIdealVelocities: newLastIdealVelocities\n\t      });\n\t\n\t      _this.unreadPropStyles = null;\n\t\n\t      _this.startAnimationIfNecessary();\n\t    });\n\t  },\n\t\n\t  componentDidMount: function componentDidMount() {\n\t    this.prevTime = _performanceNow2['default']();\n\t    this.startAnimationIfNecessary();\n\t  },\n\t\n\t  componentWillReceiveProps: function componentWillReceiveProps(props) {\n\t    if (this.unreadPropStyles != null) {\n\t      // previous props haven't had the chance to be set yet; set them here\n\t      this.clearUnreadPropStyle(this.unreadPropStyles);\n\t    }\n\t\n\t    this.unreadPropStyles = props.styles(this.state.lastIdealStyles);\n\t    if (this.animationID == null) {\n\t      this.prevTime = _performanceNow2['default']();\n\t      this.startAnimationIfNecessary();\n\t    }\n\t  },\n\t\n\t  componentWillUnmount: function componentWillUnmount() {\n\t    if (this.animationID != null) {\n\t      _raf2['default'].cancel(this.animationID);\n\t      this.animationID = null;\n\t    }\n\t  },\n\t\n\t  render: function render() {\n\t    var renderedChildren = this.props.children(this.state.currentStyles);\n\t    return renderedChildren && _react2['default'].Children.only(renderedChildren);\n\t  }\n\t});\n\t\n\texports['default'] = StaggeredMotion;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 11 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\texports.__esModule = true;\n\t\n\tvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tvar _mapToZero = __webpack_require__(2);\n\t\n\tvar _mapToZero2 = _interopRequireDefault(_mapToZero);\n\t\n\tvar _stripStyle = __webpack_require__(3);\n\t\n\tvar _stripStyle2 = _interopRequireDefault(_stripStyle);\n\t\n\tvar _stepper3 = __webpack_require__(4);\n\t\n\tvar _stepper4 = _interopRequireDefault(_stepper3);\n\t\n\tvar _mergeDiff = __webpack_require__(12);\n\t\n\tvar _mergeDiff2 = _interopRequireDefault(_mergeDiff);\n\t\n\tvar _performanceNow = __webpack_require__(5);\n\t\n\tvar _performanceNow2 = _interopRequireDefault(_performanceNow);\n\t\n\tvar _raf = __webpack_require__(7);\n\t\n\tvar _raf2 = _interopRequireDefault(_raf);\n\t\n\tvar _shouldStopAnimation = __webpack_require__(8);\n\t\n\tvar _shouldStopAnimation2 = _interopRequireDefault(_shouldStopAnimation);\n\t\n\tvar _react = __webpack_require__(9);\n\t\n\tvar _react2 = _interopRequireDefault(_react);\n\t\n\tvar msPerFrame = 1000 / 60;\n\t\n\t// the children function & (potential) styles function asks as param an\n\t// Array<TransitionPlainStyle>, where each TransitionPlainStyle is of the format\n\t// {key: string, data?: any, style: PlainStyle}. However, the way we keep\n\t// internal states doesn't contain such a data structure (check the state and\n\t// TransitionMotionState). So when children function and others ask for such\n\t// data we need to generate them on the fly by combining mergedPropsStyles and\n\t// currentStyles/lastIdealStyles\n\tfunction rehydrateStyles(mergedPropsStyles, unreadPropStyles, plainStyles) {\n\t  if (unreadPropStyles == null) {\n\t    // $FlowFixMe\n\t    return mergedPropsStyles.map(function (mergedPropsStyle, i) {\n\t      return {\n\t        key: mergedPropsStyle.key,\n\t        data: mergedPropsStyle.data,\n\t        style: plainStyles[i]\n\t      };\n\t    });\n\t  }\n\t  return mergedPropsStyles.map(function (mergedPropsStyle, i) {\n\t    // $FlowFixMe\n\t    for (var j = 0; j < unreadPropStyles.length; j++) {\n\t      // $FlowFixMe\n\t      if (unreadPropStyles[j].key === mergedPropsStyle.key) {\n\t        return {\n\t          // $FlowFixMe\n\t          key: unreadPropStyles[j].key,\n\t          data: unreadPropStyles[j].data,\n\t          style: plainStyles[i]\n\t        };\n\t      }\n\t    }\n\t    // $FlowFixMe\n\t    return { key: mergedPropsStyle.key, data: mergedPropsStyle.data, style: plainStyles[i] };\n\t  });\n\t}\n\t\n\tfunction shouldStopAnimationAll(currentStyles, destStyles, currentVelocities, mergedPropsStyles) {\n\t  if (mergedPropsStyles.length !== destStyles.length) {\n\t    return false;\n\t  }\n\t\n\t  for (var i = 0; i < mergedPropsStyles.length; i++) {\n\t    if (mergedPropsStyles[i].key !== destStyles[i].key) {\n\t      return false;\n\t    }\n\t  }\n\t\n\t  // we have the invariant that mergedPropsStyles and\n\t  // currentStyles/currentVelocities/last* are synced in terms of cells, see\n\t  // mergeAndSync comment for more info\n\t  for (var i = 0; i < mergedPropsStyles.length; i++) {\n\t    if (!_shouldStopAnimation2['default'](currentStyles[i], destStyles[i].style, currentVelocities[i])) {\n\t      return false;\n\t    }\n\t  }\n\t\n\t  return true;\n\t}\n\t\n\t// core key merging logic\n\t\n\t// things to do: say previously merged style is {a, b}, dest style (prop) is {b,\n\t// c}, previous current (interpolating) style is {a, b}\n\t// **invariant**: current[i] corresponds to merged[i] in terms of key\n\t\n\t// steps:\n\t// turn merged style into {a?, b, c}\n\t//    add c, value of c is destStyles.c\n\t//    maybe remove a, aka call willLeave(a), then merged is either {b, c} or {a, b, c}\n\t// turn current (interpolating) style from {a, b} into {a?, b, c}\n\t//    maybe remove a\n\t//    certainly add c, value of c is willEnter(c)\n\t// loop over merged and construct new current\n\t// dest doesn't change, that's owner's\n\tfunction mergeAndSync(willEnter, willLeave, oldMergedPropsStyles, destStyles, oldCurrentStyles, oldCurrentVelocities, oldLastIdealStyles, oldLastIdealVelocities) {\n\t  var newMergedPropsStyles = _mergeDiff2['default'](oldMergedPropsStyles, destStyles, function (oldIndex, oldMergedPropsStyle) {\n\t    var leavingStyle = willLeave(oldMergedPropsStyle);\n\t    if (leavingStyle == null) {\n\t      return null;\n\t    }\n\t    if (_shouldStopAnimation2['default'](oldCurrentStyles[oldIndex], leavingStyle, oldCurrentVelocities[oldIndex])) {\n\t      return null;\n\t    }\n\t    return { key: oldMergedPropsStyle.key, data: oldMergedPropsStyle.data, style: leavingStyle };\n\t  });\n\t\n\t  var newCurrentStyles = [];\n\t  var newCurrentVelocities = [];\n\t  var newLastIdealStyles = [];\n\t  var newLastIdealVelocities = [];\n\t  for (var i = 0; i < newMergedPropsStyles.length; i++) {\n\t    var newMergedPropsStyleCell = newMergedPropsStyles[i];\n\t    var foundOldIndex = null;\n\t    for (var j = 0; j < oldMergedPropsStyles.length; j++) {\n\t      if (oldMergedPropsStyles[j].key === newMergedPropsStyleCell.key) {\n\t        foundOldIndex = j;\n\t        break;\n\t      }\n\t    }\n\t    // TODO: key search code\n\t    if (foundOldIndex == null) {\n\t      var plainStyle = willEnter(newMergedPropsStyleCell);\n\t      newCurrentStyles[i] = plainStyle;\n\t      newLastIdealStyles[i] = plainStyle;\n\t\n\t      // $FlowFixMe\n\t      var velocity = _mapToZero2['default'](newMergedPropsStyleCell.style);\n\t      newCurrentVelocities[i] = velocity;\n\t      newLastIdealVelocities[i] = velocity;\n\t    } else {\n\t      newCurrentStyles[i] = oldCurrentStyles[foundOldIndex];\n\t      newLastIdealStyles[i] = oldLastIdealStyles[foundOldIndex];\n\t      newCurrentVelocities[i] = oldCurrentVelocities[foundOldIndex];\n\t      newLastIdealVelocities[i] = oldLastIdealVelocities[foundOldIndex];\n\t    }\n\t  }\n\t\n\t  return [newMergedPropsStyles, newCurrentStyles, newCurrentVelocities, newLastIdealStyles, newLastIdealVelocities];\n\t}\n\t\n\tvar TransitionMotion = _react2['default'].createClass({\n\t  displayName: 'TransitionMotion',\n\t\n\t  propTypes: {\n\t    defaultStyles: _react.PropTypes.arrayOf(_react.PropTypes.shape({\n\t      key: _react.PropTypes.string.isRequired,\n\t      data: _react.PropTypes.any,\n\t      style: _react.PropTypes.objectOf(_react.PropTypes.number).isRequired\n\t    })),\n\t    styles: _react.PropTypes.oneOfType([_react.PropTypes.func, _react.PropTypes.arrayOf(_react.PropTypes.shape({\n\t      key: _react.PropTypes.string.isRequired,\n\t      data: _react.PropTypes.any,\n\t      style: _react.PropTypes.objectOf(_react.PropTypes.oneOfType([_react.PropTypes.number, _react.PropTypes.object])).isRequired\n\t    }))]).isRequired,\n\t    children: _react.PropTypes.func.isRequired,\n\t    willLeave: _react.PropTypes.func,\n\t    willEnter: _react.PropTypes.func\n\t  },\n\t\n\t  getDefaultProps: function getDefaultProps() {\n\t    return {\n\t      willEnter: function willEnter(styleThatEntered) {\n\t        return _stripStyle2['default'](styleThatEntered.style);\n\t      },\n\t      // recall: returning null makes the current unmounting TransitionStyle\n\t      // disappear immediately\n\t      willLeave: function willLeave() {\n\t        return null;\n\t      }\n\t    };\n\t  },\n\t\n\t  getInitialState: function getInitialState() {\n\t    var _props = this.props;\n\t    var defaultStyles = _props.defaultStyles;\n\t    var styles = _props.styles;\n\t    var willEnter = _props.willEnter;\n\t    var willLeave = _props.willLeave;\n\t\n\t    var destStyles = typeof styles === 'function' ? styles() : styles;\n\t\n\t    // this is special. for the first time around, we don't have a comparison\n\t    // between last (no last) and current merged props. we'll compute last so:\n\t    // say default is {a, b} and styles (dest style) is {b, c}, we'll\n\t    // fabricate last as {a, b}\n\t    var oldMergedPropsStyles = undefined;\n\t    if (defaultStyles == null) {\n\t      oldMergedPropsStyles = destStyles;\n\t    } else {\n\t      // $FlowFixMe\n\t      oldMergedPropsStyles = defaultStyles.map(function (defaultStyleCell) {\n\t        // TODO: key search code\n\t        for (var i = 0; i < destStyles.length; i++) {\n\t          if (destStyles[i].key === defaultStyleCell.key) {\n\t            return destStyles[i];\n\t          }\n\t        }\n\t        return defaultStyleCell;\n\t      });\n\t    }\n\t    var oldCurrentStyles = defaultStyles == null ? destStyles.map(function (s) {\n\t      return _stripStyle2['default'](s.style);\n\t    }) : defaultStyles.map(function (s) {\n\t      return _stripStyle2['default'](s.style);\n\t    });\n\t    var oldCurrentVelocities = defaultStyles == null ? destStyles.map(function (s) {\n\t      return _mapToZero2['default'](s.style);\n\t    }) : defaultStyles.map(function (s) {\n\t      return _mapToZero2['default'](s.style);\n\t    });\n\t\n\t    var _mergeAndSync = mergeAndSync(\n\t    // $FlowFixMe\n\t    willEnter,\n\t    // $FlowFixMe\n\t    willLeave, oldMergedPropsStyles, destStyles, oldCurrentStyles, oldCurrentVelocities, oldCurrentStyles, // oldLastIdealStyles really\n\t    oldCurrentVelocities);\n\t\n\t    var mergedPropsStyles = _mergeAndSync[0];\n\t    var currentStyles = _mergeAndSync[1];\n\t    var currentVelocities = _mergeAndSync[2];\n\t    var lastIdealStyles = _mergeAndSync[3];\n\t    var lastIdealVelocities = _mergeAndSync[4];\n\t    // oldLastIdealVelocities really\n\t\n\t    return {\n\t      currentStyles: currentStyles,\n\t      currentVelocities: currentVelocities,\n\t      lastIdealStyles: lastIdealStyles,\n\t      lastIdealVelocities: lastIdealVelocities,\n\t      mergedPropsStyles: mergedPropsStyles\n\t    };\n\t  },\n\t\n\t  animationID: null,\n\t  prevTime: 0,\n\t  accumulatedTime: 0,\n\t  // it's possible that currentStyle's value is stale: if props is immediately\n\t  // changed from 0 to 400 to spring(0) again, the async currentStyle is still\n\t  // at 0 (didn't have time to tick and interpolate even once). If we naively\n\t  // compare currentStyle with destVal it'll be 0 === 0 (no animation, stop).\n\t  // In reality currentStyle should be 400\n\t  unreadPropStyles: null,\n\t  // after checking for unreadPropStyles != null, we manually go set the\n\t  // non-interpolating values (those that are a number, without a spring\n\t  // config)\n\t  clearUnreadPropStyle: function clearUnreadPropStyle(unreadPropStyles) {\n\t    var _mergeAndSync2 = mergeAndSync(\n\t    // $FlowFixMe\n\t    this.props.willEnter,\n\t    // $FlowFixMe\n\t    this.props.willLeave, this.state.mergedPropsStyles, unreadPropStyles, this.state.currentStyles, this.state.currentVelocities, this.state.lastIdealStyles, this.state.lastIdealVelocities);\n\t\n\t    var mergedPropsStyles = _mergeAndSync2[0];\n\t    var currentStyles = _mergeAndSync2[1];\n\t    var currentVelocities = _mergeAndSync2[2];\n\t    var lastIdealStyles = _mergeAndSync2[3];\n\t    var lastIdealVelocities = _mergeAndSync2[4];\n\t\n\t    for (var i = 0; i < unreadPropStyles.length; i++) {\n\t      var unreadPropStyle = unreadPropStyles[i].style;\n\t      var dirty = false;\n\t\n\t      for (var key in unreadPropStyle) {\n\t        if (!unreadPropStyle.hasOwnProperty(key)) {\n\t          continue;\n\t        }\n\t\n\t        var styleValue = unreadPropStyle[key];\n\t        if (typeof styleValue === 'number') {\n\t          if (!dirty) {\n\t            dirty = true;\n\t            currentStyles[i] = _extends({}, currentStyles[i]);\n\t            currentVelocities[i] = _extends({}, currentVelocities[i]);\n\t            lastIdealStyles[i] = _extends({}, lastIdealStyles[i]);\n\t            lastIdealVelocities[i] = _extends({}, lastIdealVelocities[i]);\n\t            mergedPropsStyles[i] = {\n\t              key: mergedPropsStyles[i].key,\n\t              data: mergedPropsStyles[i].data,\n\t              style: _extends({}, mergedPropsStyles[i].style)\n\t            };\n\t          }\n\t          currentStyles[i][key] = styleValue;\n\t          currentVelocities[i][key] = 0;\n\t          lastIdealStyles[i][key] = styleValue;\n\t          lastIdealVelocities[i][key] = 0;\n\t          mergedPropsStyles[i].style[key] = styleValue;\n\t        }\n\t      }\n\t    }\n\t\n\t    // unlike the other 2 components, we can't detect staleness and optionally\n\t    // opt out of setState here. each style object's data might contain new\n\t    // stuff we're not/cannot compare\n\t    this.setState({\n\t      currentStyles: currentStyles,\n\t      currentVelocities: currentVelocities,\n\t      mergedPropsStyles: mergedPropsStyles,\n\t      lastIdealStyles: lastIdealStyles,\n\t      lastIdealVelocities: lastIdealVelocities\n\t    });\n\t  },\n\t\n\t  startAnimationIfNecessary: function startAnimationIfNecessary() {\n\t    var _this = this;\n\t\n\t    // TODO: when config is {a: 10} and dest is {a: 10} do we raf once and\n\t    // call cb? No, otherwise accidental parent rerender causes cb trigger\n\t    this.animationID = _raf2['default'](function () {\n\t      var propStyles = _this.props.styles;\n\t      var destStyles = typeof propStyles === 'function' ? propStyles(rehydrateStyles(_this.state.mergedPropsStyles, _this.unreadPropStyles, _this.state.lastIdealStyles)) : propStyles;\n\t\n\t      // check if we need to animate in the first place\n\t      if (shouldStopAnimationAll(_this.state.currentStyles, destStyles, _this.state.currentVelocities, _this.state.mergedPropsStyles)) {\n\t        // no need to cancel animationID here; shouldn't have any in flight\n\t        _this.animationID = null;\n\t        _this.accumulatedTime = 0;\n\t        return;\n\t      }\n\t\n\t      var currentTime = _performanceNow2['default']();\n\t      var timeDelta = currentTime - _this.prevTime;\n\t      _this.prevTime = currentTime;\n\t      _this.accumulatedTime = _this.accumulatedTime + timeDelta;\n\t      // more than 10 frames? prolly switched browser tab. Restart\n\t      if (_this.accumulatedTime > msPerFrame * 10) {\n\t        _this.accumulatedTime = 0;\n\t      }\n\t\n\t      if (_this.accumulatedTime === 0) {\n\t        // no need to cancel animationID here; shouldn't have any in flight\n\t        _this.animationID = null;\n\t        _this.startAnimationIfNecessary();\n\t        return;\n\t      }\n\t\n\t      var currentFrameCompletion = (_this.accumulatedTime - Math.floor(_this.accumulatedTime / msPerFrame) * msPerFrame) / msPerFrame;\n\t      var framesToCatchUp = Math.floor(_this.accumulatedTime / msPerFrame);\n\t\n\t      var _mergeAndSync3 = mergeAndSync(\n\t      // $FlowFixMe\n\t      _this.props.willEnter,\n\t      // $FlowFixMe\n\t      _this.props.willLeave, _this.state.mergedPropsStyles, destStyles, _this.state.currentStyles, _this.state.currentVelocities, _this.state.lastIdealStyles, _this.state.lastIdealVelocities);\n\t\n\t      var newMergedPropsStyles = _mergeAndSync3[0];\n\t      var newCurrentStyles = _mergeAndSync3[1];\n\t      var newCurrentVelocities = _mergeAndSync3[2];\n\t      var newLastIdealStyles = _mergeAndSync3[3];\n\t      var newLastIdealVelocities = _mergeAndSync3[4];\n\t\n\t      for (var i = 0; i < newMergedPropsStyles.length; i++) {\n\t        var newMergedPropsStyle = newMergedPropsStyles[i].style;\n\t        var newCurrentStyle = {};\n\t        var newCurrentVelocity = {};\n\t        var newLastIdealStyle = {};\n\t        var newLastIdealVelocity = {};\n\t\n\t        for (var key in newMergedPropsStyle) {\n\t          if (!newMergedPropsStyle.hasOwnProperty(key)) {\n\t            continue;\n\t          }\n\t\n\t          var styleValue = newMergedPropsStyle[key];\n\t          if (typeof styleValue === 'number') {\n\t            newCurrentStyle[key] = styleValue;\n\t            newCurrentVelocity[key] = 0;\n\t            newLastIdealStyle[key] = styleValue;\n\t            newLastIdealVelocity[key] = 0;\n\t          } else {\n\t            var newLastIdealStyleValue = newLastIdealStyles[i][key];\n\t            var newLastIdealVelocityValue = newLastIdealVelocities[i][key];\n\t            for (var j = 0; j < framesToCatchUp; j++) {\n\t              var _stepper = _stepper4['default'](msPerFrame / 1000, newLastIdealStyleValue, newLastIdealVelocityValue, styleValue.val, styleValue.stiffness, styleValue.damping, styleValue.precision);\n\t\n\t              newLastIdealStyleValue = _stepper[0];\n\t              newLastIdealVelocityValue = _stepper[1];\n\t            }\n\t\n\t            var _stepper2 = _stepper4['default'](msPerFrame / 1000, newLastIdealStyleValue, newLastIdealVelocityValue, styleValue.val, styleValue.stiffness, styleValue.damping, styleValue.precision);\n\t\n\t            var nextIdealX = _stepper2[0];\n\t            var nextIdealV = _stepper2[1];\n\t\n\t            newCurrentStyle[key] = newLastIdealStyleValue + (nextIdealX - newLastIdealStyleValue) * currentFrameCompletion;\n\t            newCurrentVelocity[key] = newLastIdealVelocityValue + (nextIdealV - newLastIdealVelocityValue) * currentFrameCompletion;\n\t            newLastIdealStyle[key] = newLastIdealStyleValue;\n\t            newLastIdealVelocity[key] = newLastIdealVelocityValue;\n\t          }\n\t        }\n\t\n\t        newLastIdealStyles[i] = newLastIdealStyle;\n\t        newLastIdealVelocities[i] = newLastIdealVelocity;\n\t        newCurrentStyles[i] = newCurrentStyle;\n\t        newCurrentVelocities[i] = newCurrentVelocity;\n\t      }\n\t\n\t      _this.animationID = null;\n\t      // the amount we're looped over above\n\t      _this.accumulatedTime -= framesToCatchUp * msPerFrame;\n\t\n\t      _this.setState({\n\t        currentStyles: newCurrentStyles,\n\t        currentVelocities: newCurrentVelocities,\n\t        lastIdealStyles: newLastIdealStyles,\n\t        lastIdealVelocities: newLastIdealVelocities,\n\t        mergedPropsStyles: newMergedPropsStyles\n\t      });\n\t\n\t      _this.unreadPropStyles = null;\n\t\n\t      _this.startAnimationIfNecessary();\n\t    });\n\t  },\n\t\n\t  componentDidMount: function componentDidMount() {\n\t    this.prevTime = _performanceNow2['default']();\n\t    this.startAnimationIfNecessary();\n\t  },\n\t\n\t  componentWillReceiveProps: function componentWillReceiveProps(props) {\n\t    if (this.unreadPropStyles) {\n\t      // previous props haven't had the chance to be set yet; set them here\n\t      this.clearUnreadPropStyle(this.unreadPropStyles);\n\t    }\n\t\n\t    if (typeof props.styles === 'function') {\n\t      // $FlowFixMe\n\t      this.unreadPropStyles = props.styles(rehydrateStyles(this.state.mergedPropsStyles, this.unreadPropStyles, this.state.lastIdealStyles));\n\t    } else {\n\t      this.unreadPropStyles = props.styles;\n\t    }\n\t\n\t    if (this.animationID == null) {\n\t      this.prevTime = _performanceNow2['default']();\n\t      this.startAnimationIfNecessary();\n\t    }\n\t  },\n\t\n\t  componentWillUnmount: function componentWillUnmount() {\n\t    if (this.animationID != null) {\n\t      _raf2['default'].cancel(this.animationID);\n\t      this.animationID = null;\n\t    }\n\t  },\n\t\n\t  render: function render() {\n\t    var hydratedStyles = rehydrateStyles(this.state.mergedPropsStyles, this.unreadPropStyles, this.state.currentStyles);\n\t    var renderedChildren = this.props.children(hydratedStyles);\n\t    return renderedChildren && _react2['default'].Children.only(renderedChildren);\n\t  }\n\t});\n\t\n\texports['default'] = TransitionMotion;\n\tmodule.exports = exports['default'];\n\n\t// list of styles, each containing interpolating values. Part of what's passed\n\t// to children function. Notice that this is\n\t// Array<ActualInterpolatingStyleObject>, without the wrapper that is {key: ...,\n\t// data: ... style: ActualInterpolatingStyleObject}. Only mergedPropsStyles\n\t// contains the key & data info (so that we only have a single source of truth\n\t// for these, and to save space). Check the comment for `rehydrateStyles` to\n\t// see how we regenerate the entirety of what's passed to children function\n\n\t// the array that keeps track of currently rendered stuff! Including stuff\n\t// that you've unmounted but that's still animating. This is where it lives\n\n/***/ },\n/* 12 */\n/***/ function(module, exports) {\n\n\t\n\t\n\t// core keys merging algorithm. If previous render's keys are [a, b], and the\n\t// next render's [c, b, d], what's the final merged keys and ordering?\n\t\n\t// - c and a must both be before b\n\t// - b before d\n\t// - ordering between a and c ambiguous\n\t\n\t// this reduces to merging two partially ordered lists (e.g. lists where not\n\t// every item has a definite ordering, like comparing a and c above). For the\n\t// ambiguous ordering we deterministically choose to place the next render's\n\t// item after the previous'; so c after a\n\t\n\t// this is called a topological sorting. Except the existing algorithms don't\n\t// work well with js bc of the amount of allocation, and isn't optimized for our\n\t// current use-case bc the runtime is linear in terms of edges (see wiki for\n\t// meaning), which is huge when two lists have many common elements\n\t'use strict';\n\t\n\texports.__esModule = true;\n\texports['default'] = mergeDiff;\n\t\n\tfunction mergeDiff(prev, next, onRemove) {\n\t  // bookkeeping for easier access of a key's index below. This is 2 allocations +\n\t  // potentially triggering chrome hash map mode for objs (so it might be faster\n\t\n\t  var prevKeyIndex = {};\n\t  for (var i = 0; i < prev.length; i++) {\n\t    prevKeyIndex[prev[i].key] = i;\n\t  }\n\t  var nextKeyIndex = {};\n\t  for (var i = 0; i < next.length; i++) {\n\t    nextKeyIndex[next[i].key] = i;\n\t  }\n\t\n\t  // first, an overly elaborate way of merging prev and next, eliminating\n\t  // duplicates (in terms of keys). If there's dupe, keep the item in next).\n\t  // This way of writing it saves allocations\n\t  var ret = [];\n\t  for (var i = 0; i < next.length; i++) {\n\t    ret[i] = next[i];\n\t  }\n\t  for (var i = 0; i < prev.length; i++) {\n\t    if (!nextKeyIndex.hasOwnProperty(prev[i].key)) {\n\t      // this is called my TM's `mergeAndSync`, which calls willLeave. We don't\n\t      // merge in keys that the user desires to kill\n\t      var fill = onRemove(i, prev[i]);\n\t      if (fill != null) {\n\t        ret.push(fill);\n\t      }\n\t    }\n\t  }\n\t\n\t  // now all the items all present. Core sorting logic to have the right order\n\t  return ret.sort(function (a, b) {\n\t    var nextOrderA = nextKeyIndex[a.key];\n\t    var nextOrderB = nextKeyIndex[b.key];\n\t    var prevOrderA = prevKeyIndex[a.key];\n\t    var prevOrderB = prevKeyIndex[b.key];\n\t\n\t    if (nextOrderA != null && nextOrderB != null) {\n\t      // both keys in next\n\t      return nextKeyIndex[a.key] - nextKeyIndex[b.key];\n\t    } else if (prevOrderA != null && prevOrderB != null) {\n\t      // both keys in prev\n\t      return prevKeyIndex[a.key] - prevKeyIndex[b.key];\n\t    } else if (nextOrderA != null) {\n\t      // key a in next, key b in prev\n\t\n\t      // how to determine the order between a and b? We find a \"pivot\" (term\n\t      // abuse), a key present in both prev and next, that is sandwiched between\n\t      // a and b. In the context of our above example, if we're comparing a and\n\t      // d, b's (the only) pivot\n\t      for (var i = 0; i < next.length; i++) {\n\t        var pivot = next[i].key;\n\t        if (!prevKeyIndex.hasOwnProperty(pivot)) {\n\t          continue;\n\t        }\n\t\n\t        if (nextOrderA < nextKeyIndex[pivot] && prevOrderB > prevKeyIndex[pivot]) {\n\t          return -1;\n\t        } else if (nextOrderA > nextKeyIndex[pivot] && prevOrderB < prevKeyIndex[pivot]) {\n\t          return 1;\n\t        }\n\t      }\n\t      // pluggable. default to: next bigger than prev\n\t      return 1;\n\t    }\n\t    // prevOrderA, nextOrderB\n\t    for (var i = 0; i < next.length; i++) {\n\t      var pivot = next[i].key;\n\t      if (!prevKeyIndex.hasOwnProperty(pivot)) {\n\t        continue;\n\t      }\n\t      if (nextOrderB < nextKeyIndex[pivot] && prevOrderA > prevKeyIndex[pivot]) {\n\t        return 1;\n\t      } else if (nextOrderB > nextKeyIndex[pivot] && prevOrderA < prevKeyIndex[pivot]) {\n\t        return -1;\n\t      }\n\t    }\n\t    // pluggable. default to: next bigger than prev\n\t    return -1;\n\t  });\n\t}\n\t\n\tmodule.exports = exports['default'];\n\t// to loop through and find a key's index each time), but I no longer care\n\n/***/ },\n/* 13 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\texports.__esModule = true;\n\t\n\tvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\t\n\texports['default'] = spring;\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tvar _presets = __webpack_require__(14);\n\t\n\tvar _presets2 = _interopRequireDefault(_presets);\n\t\n\tvar defaultConfig = _extends({}, _presets2['default'].noWobble, {\n\t  precision: 0.01\n\t});\n\t\n\tfunction spring(val, config) {\n\t  return _extends({}, defaultConfig, config, { val: val });\n\t}\n\t\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 14 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\texports.__esModule = true;\n\texports[\"default\"] = {\n\t  noWobble: { stiffness: 170, damping: 26 }, // the default, if nothing provided\n\t  gentle: { stiffness: 120, damping: 14 },\n\t  wobbly: { stiffness: 180, damping: 12 },\n\t  stiff: { stiffness: 210, damping: 20 }\n\t};\n\tmodule.exports = exports[\"default\"];\n\n/***/ },\n/* 15 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(process) {'use strict';\n\t\n\texports.__esModule = true;\n\texports['default'] = reorderKeys;\n\t\n\tvar hasWarned = false;\n\t\n\tfunction reorderKeys() {\n\t  if (process.env.NODE_ENV === 'development') {\n\t    if (!hasWarned) {\n\t      hasWarned = true;\n\t      console.error('`reorderKeys` has been removed, since it is no longer needed for TransitionMotion\\'s new styles array API.');\n\t    }\n\t  }\n\t}\n\t\n\tmodule.exports = exports['default'];\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(6)))\n\n/***/ }\n/******/ ])\n});\n;\n//# sourceMappingURL=react-motion.map\n","/*\n * jQuery autoResize (textarea auto-resizer)\n * @copyright James Padolsey http://james.padolsey.com\n * @version 1.04\n */\n\n(function($){\n    \n    $.fn.autoResize = function(options) {\n        \n        // Just some abstracted details,\n        // to make plugin users happy:\n        var settings = $.extend({\n            onResize : function(){},\n            animate : true,\n            animateDuration : 150,\n            animateCallback : function(){},\n            extraSpace : 20,\n            limit: 1000\n        }, options);\n        \n        // Only textarea's auto-resize:\n        this.filter('textarea').each(function(){\n            \n                // Get rid of scrollbars and disable WebKit resizing:\n            var textarea = $(this).css({resize:'none','overflow-y':'hidden'}),\n            \n                // Cache original height, for use later:\n                origHeight = textarea.height(),\n                \n                // Need clone of textarea, hidden off screen:\n                clone = (function(){\n                    \n                    // Properties which may effect space taken up by chracters:\n                    var props = ['height','width','lineHeight','textDecoration','letterSpacing'],\n                        propOb = {};\n                        \n                    // Create object of styles to apply:\n                    $.each(props, function(i, prop){\n                        propOb[prop] = textarea.css(prop);\n                    });\n                    \n                    // Clone the actual textarea removing unique properties\n                    // and insert before original textarea:\n                    return textarea.clone().removeAttr('id').removeAttr('name').css({\n                        position: 'absolute',\n                        top: 0,\n                        left: -9999\n                    }).css(propOb).attr('tabIndex','-1').insertBefore(textarea);\n\t\t\t\t\t\n                })(),\n                lastScrollTop = null,\n                updateSize = function() {\n\t\t\t\t\t\n                    // Prepare the clone:\n                    clone.height(0).val($(this).val()).scrollTop(10000);\n\t\t\t\t\t\n                    // Find the height of text:\n                    var scrollTop = Math.max(clone.scrollTop(), origHeight) + settings.extraSpace,\n                        toChange = $(this).add(clone);\n\t\t\t\t\t\t\n                    // Don't do anything if scrollTip hasen't changed:\n                    if (lastScrollTop === scrollTop) { return; }\n                    lastScrollTop = scrollTop;\n\t\t\t\t\t\n                    // Check for limit:\n                    if ( scrollTop >= settings.limit ) {\n                        $(this).css('overflow-y','');\n                        return;\n                    }\n                    // Fire off callback:\n                    settings.onResize.call(this);\n\t\t\t\t\t\n                    // Either animate or directly apply height:\n                    settings.animate && textarea.css('display') === 'block' ?\n                        toChange.stop().animate({height:scrollTop}, settings.animateDuration, settings.animateCallback)\n                        : toChange.height(scrollTop);\n                };\n            \n            // Bind namespaced handlers to appropriate events:\n            textarea\n                .unbind('.dynSiz')\n                .bind('keyup.dynSiz', updateSize)\n                .bind('keydown.dynSiz', updateSize)\n                .bind('change.dynSiz', updateSize)\n\t\t\t\t.bind('focus.dynSiz', updateSize);\n            \n        });\n        \n        // Chain:\n        return this;\n        \n    };\n    \n    \n    \n})(jQuery);","(function($) {\n    var combobox = function(element) {\n        var cb        = this,\n            selection = $('<div class=\"selection\"></div>'),\n            input     = $('<input type=\"hidden\" name=\"\" value=\"\" />'),\n            triangle  = '<div class=\"triangle {{vector-icon-class}}\"></div>',\n            options   = null,\n            pos       = null,\n            \n            settings = {\n                vectorIcons: false,\n                onChange: function() { return null }\n            },\n            \n            toggleOptions = function() {\n                var opening = false;\n                if(element.hasClass('opened')) {\n                    element.removeClass('opened');\n                    options.css({\n                        'height': ''\n                    });\n                } else {\n                    opening = true;\n                    closeAll();\n                    element.addClass('opened');\n                    \n                    var height    = calculateHeight(options);\n                    var $nano     = element.children('.nano');\n                    var maxHeight = parseInt(options.css('max-height'), 10);\n                    \n                    options.css({\n                        'height': height,\n                    });\n                    \n                    if($nano.length && maxHeight) {\n                        setTimeout(function() {\n                            $nano.css('position','relative');\n                            $nano.nanoScroller({\n                                preventPageScrolling: true,\n                                alwaysVisible: true\n                            });\n                            $nano.css('position','');\n                            element.hide().show(0); //Removing the position doesn't cause a redraw in chrome so force it here\n                        }, 125); //Height animation is 100ms\n                    }\n                    \n                    element.trigger('open');\n                }\n                \n                if(opening) {\n                    var filter;\n                    if(filter = options.find('.filter')) {\n                        filter.focus();\n                    }\n                }\n            },\n            closeAll = function() {\n                var combobox = $('.combobox, .opened');\n                combobox.find('.options').css({\n                    'height': ''\n                });\n                combobox.removeClass('opened');\n            },\n            stopEvents = function(e) {\n                if(!e) {\n                   e = window.event;\n                }\n                \n                if(e.stopPropagation) {\n                    e.stopPropagation();\n                }\n                \n                e.cancelBubble = true;\n                \n                if(e.preventDefault) {\n                    e.preventDefault();\n                }\n                \n                e.returnValue = false;\n                \n                return false;\n             },\n            defaultFilter = function(text, options) {\n                // return only the options that have text contained in its textContent\n                return options.filter(function() {\n                    return (this.textContent.toLowerCase().indexOf(text) !== -1);\n                });\n            },\n            emptyFilter = function(text, options) {\n                return options;\n            },\n            calculateHeight = function(options) {\n                var height = 0;\n                \n                options.children(':not(.pane)').each(function() {\n                    var $this = $(this);\n                    \n                    if ($this.css('display') != 'none') {                            \n                        height += $(this).outerHeight(true);\n                    }\n                });\n                \n                return height;\n            };\n            \n        this.run = function() {\n            options = element.children('.options');            \n            options.removeClass('opened');\n\n            triangle = $(triangle.replace('{{vector-icon-class}}', settings.vectorIcons ? 'icon-arrow-down' : ''));\n\n            if(element.find('.selection').length == 0) {\n                element.prepend(triangle)\n                       .prepend(selection)\n                       .append(input);\n            } else {\n                selection = element.find('.selection');\n                input     = element.find('input[type=\"hidden\"]');\n            }\n            \n            element.find('.triangle').unbind('click');\n            element.find('.triangle').click(function(e) {\n                toggleOptions();\n                this.lazyload();\n                stopEvents(e);\n            }.bind(this));\n            \n            selection.unbind('click');\n            selection.click(function(e) {\n                toggleOptions();\n                this.lazyload();\n                stopEvents(e);\n            }.bind(this));\n            \n            $('body').click(function(e) {\n                if(element.hasClass('opened')) {\n                    toggleOptions();\n                    element.trigger('close');\n                }\n            });\n            \n            options.off('click', '.item');\n            options.on('click', '.item', function() {\n                if(typeof settings.maybe != 'function' || settings.maybe($(this), $(this).attr('data-value'), $(this))) {\n                    $('div[name=\"'+element.attr('name')+'\"]').find('.selection').html($(this).html());\n                    input.attr('value', $(this).attr('data-value'));\n                    \n                    options.find('.item').removeClass('selected');\n                    $(this).addClass('selected');\n\n                    toggleOptions();\n                    settings.onChange(element.attr('name'), $(this).attr('data-value'), $(this));\n                }\n            });\n            \n            selection.html(element.find('.selected').html());\n            \n            input.attr('name', element.attr('name'))\n                 .attr('value', element.find('.selected').attr('value'));\n        };\n        \n        this.lazyload = function() {\n            options.find('img.lazyload').each(function() {\n                $(this).attr('src', $(this).attr('data-src'));\n                $(this).removeClass('lazyload');\n            });\n        };\n\n        this.init = function(options) {\n            if(options) {\n                $.extend(settings, options);\n            }\n\n            this.run();\n        };\n\n        /**\n         * Add the filter element, bind its keyup, etc.\n         */\n        this.setupFilter = function(placeholder_text) {\n            var _options = options.children(\".item[data-value]\").filter(function() {\n                return ($(this).attr('data-value').length);\n            });\n            this._original_options = _options.clone(true);\n            var filter_input = $(document.createElement('input')).attr({\n                'type': 'text',\n                'class': 'filter placeholder-onkeydown',\n                'title': placeholder_text\n            }).keyup(this.filterKeyUp.bind(this)).click(function(e) {\n                e.preventDefault();\n                e.stopPropagation();\n            });\n            Imgur.getInstance().runPlaceholder(filter_input);\n            options.prepend(filter_input);\n        };\n\n        /**\n         * Add a type-as-you-go filter to the combobox. The filter selects and orders the options.\n         *\n         * @param filter : A function that takes the current search text as its first argument, and the\n         *                 list of HTMLOption options as the second argument, and returns an ordered array of\n         *                 the options.\n         */\n        this.setFilter = function(filter, placeholder_text) {\n            if(!filter) {\n                filter = defaultFilter;\n            }\n            if(!this.filter) {\n                this.filter = filter;\n                this.setupFilter(placeholder_text);   \n            } else {\n                this.filter = filter;\n            }\n        };\n\n        this.filterKeyUp = function(e) {\n            var filter_text = $(e.target).val();\n            if(!filter_text.length) {\n                // use the empty filter, don't do more work than necessary\n                var _options = this.applyFilter(filter_text, emptyFilter);\n            } else {\n                var _options = this.applyFilter(filter_text);\n            }\n            options.find('.item').remove();\n            options.append(_options);\n            options.css('height', Math.max(calculateHeight(_options), $(e.target).outerHeight()));\n            this.lazyload();\n        };\n\n        this.applyFilter = function(text, filter) {\n            filter = filter || this.filter;\n            return filter(text, this._original_options);\n        }\n    };\n    \n    methods = {\n        init: function (options) {\n            return this.each(function () {\n                var inst = new combobox($(this));\n                inst.init(options);\n                var $that = $(this);\n                $that.data('combobox', inst);\n            });\n        },\n        filter: function(options) {\n            if(!options) {\n                options = {};\n            }\n            return this.each(function() {\n                var $this = $(this);\n                if($this.data('combobox')) {\n                    var inst = $this.data('combobox');\n                    inst.setFilter(options.filter, options.placeholder);\n                }\n            });\n        }\n    };\n    \n    $.fn.combobox = function (method) {\n        if (methods[method]) {\n            return methods[method].apply(this, Array.prototype.slice.call(arguments, 1));\n        } else if (typeof method === 'object' || !method) {\n            return methods.init.apply(this, arguments);\n        } else {\n            return $.error('Method ' + method + ' does not exist');\n        }\n    };\n}(jQuery));\n","(function() {\n    var\n        fullScreenApi = {\n            supportsFullScreen: false,\n            isFullScreen: function() { return false; },\n            requestFullScreen: function() {},\n            cancelFullScreen: function() {},\n            fullScreenEventName: '',\n            prefix: ''\n        },\n        browserPrefixes = 'webkit moz o ms khtml'.split(' ');\n\n    // check for native support\n    if (typeof document.cancelFullScreen != 'undefined') {\n        fullScreenApi.supportsFullScreen = true;\n    } else {\n        // check for fullscreen support by vendor prefix\n        for (var i = 0, il = browserPrefixes.length; i < il; i++ ) {\n            fullScreenApi.prefix = browserPrefixes[i];\n\n            if (typeof document[fullScreenApi.prefix + 'CancelFullScreen' ] != 'undefined' ) {\n                fullScreenApi.supportsFullScreen = true;\n\n                break;\n            }\n        }\n    }\n\n    // update methods to do something useful\n    if (fullScreenApi.supportsFullScreen) {\n        fullScreenApi.fullScreenEventName = fullScreenApi.prefix + 'fullscreenchange';\n\n        fullScreenApi.isFullScreen = function() {\n            switch (this.prefix) {\n                case '':\n                    return document.fullScreen;\n                case 'webkit':\n                    return document.webkitIsFullScreen;\n                default:\n                    return document[this.prefix + 'FullScreen'];\n            }\n        }\n        fullScreenApi.requestFullScreen = function(el) {\n            return (this.prefix === '') ? el.requestFullScreen() : el[this.prefix + 'RequestFullScreen']();\n        }\n        fullScreenApi.cancelFullScreen = function(el) {\n            return (this.prefix === '') ? document.cancelFullScreen() : document[this.prefix + 'CancelFullScreen']();\n        }\n    }\n\n    // jQuery plugin\n    if (typeof jQuery != 'undefined') {\n        jQuery.fn.requestFullScreen = function() {\n\n            return this.each(function() {\n                if (fullScreenApi.supportsFullScreen) {\n                    fullScreenApi.requestFullScreen(this);\n                }\n            });\n        };\n    }\n\n    // export api\n    window.fullScreenApi = fullScreenApi;\n})();","/**\n * jQuery Validation Plugin 1.8.1\n *\n * http://bassistance.de/jquery-plugins/jquery-plugin-validation/\n * http://docs.jquery.com/Plugins/Validation\n *\n * Copyright (c) 2006 - 2011 Jörn Zaefferer\n *\n * Dual licensed under the MIT and GPL licenses:\n *   http://www.opensource.org/licenses/mit-license.php\n *   http://www.gnu.org/licenses/gpl.html\n */\n\n(function($) {\n\n$.extend($.fn, {\n\t// http://docs.jquery.com/Plugins/Validation/validate\n\tvalidate: function( options ) {\n\n\t\t// if nothing is selected, return nothing; can't chain anyway\n\t\tif (!this.length) {\n\t\t\toptions && options.debug && window.console && console.warn( \"nothing selected, can't validate, returning nothing\" );\n\t\t\treturn;\n\t\t}\n\n\t\t// check if a validator for this form was already created\n\t\tvar validator = $.data(this[0], 'validator');\n\t\tif ( validator ) {\n\t\t\treturn validator;\n\t\t}\n\n\t\tvalidator = new $.validator( options, this[0] );\n\t\t$.data(this[0], 'validator', validator);\n\n\t\tif ( validator.settings.onsubmit ) {\n\n\t\t\t// allow suppresing validation by adding a cancel class to the submit button\n\t\t\tthis.find(\"input, button\").filter(\".cancel\").click(function() {\n\t\t\t\tvalidator.cancelSubmit = true;\n\t\t\t});\n\n\t\t\t// when a submitHandler is used, capture the submitting button\n\t\t\tif (validator.settings.submitHandler) {\n\t\t\t\tthis.find(\"input, button\").filter(\":submit\").click(function() {\n\t\t\t\t\tvalidator.submitButton = this;\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t// validate the form on submit\n\t\t\tthis.submit( function( event ) {\n\t\t\t\tif ( validator.settings.debug )\n\t\t\t\t\t// prevent form submit to be able to see console output\n\t\t\t\t\tevent.preventDefault();\n\n\t\t\t\tfunction handle() {\n\t\t\t\t\tif ( validator.settings.submitHandler ) {\n\t\t\t\t\t\tif (validator.submitButton) {\n\t\t\t\t\t\t\t// insert a hidden input as a replacement for the missing submit button\n\t\t\t\t\t\t\tvar hidden = $(\"<input type='hidden'/>\").attr(\"name\", validator.submitButton.name).val(validator.submitButton.value).appendTo(validator.currentForm);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvalidator.settings.submitHandler.call( validator, validator.currentForm );\n\t\t\t\t\t\tif (validator.submitButton) {\n\t\t\t\t\t\t\t// and clean up afterwards; thanks to no-block-scope, hidden can be referenced\n\t\t\t\t\t\t\thidden.remove();\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\t// prevent submit for invalid forms or custom submit handlers\n\t\t\t\tif ( validator.cancelSubmit ) {\n\t\t\t\t\tvalidator.cancelSubmit = false;\n\t\t\t\t\treturn handle();\n\t\t\t\t}\n\t\t\t\tif ( validator.form() ) {\n\t\t\t\t\tif ( validator.pendingRequest ) {\n\t\t\t\t\t\tvalidator.formSubmitted = true;\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t\treturn handle();\n\t\t\t\t} else {\n\t\t\t\t\tvalidator.focusInvalid();\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\treturn validator;\n\t},\n\t// http://docs.jquery.com/Plugins/Validation/valid\n\tvalid: function() {\n        if ( $(this[0]).is('form')) {\n            return this.validate().form();\n        } else {\n            var valid = true;\n            var validator = $(this[0].form).validate();\n            this.each(function() {\n\t\t\t\tvalid &= validator.element(this);\n            });\n            return valid;\n        }\n    },\n\t// attributes: space seperated list of attributes to retrieve and remove\n\tremoveAttrs: function(attributes) {\n\t\tvar result = {},\n\t\t\t$element = this;\n\t\t$.each(attributes.split(/\\s/), function(index, value) {\n\t\t\tresult[value] = $element.attr(value);\n\t\t\t$element.removeAttr(value);\n\t\t});\n\t\treturn result;\n\t},\n\t// http://docs.jquery.com/Plugins/Validation/rules\n\trules: function(command, argument) {\n\t\tvar element = this[0];\n\n\t\tif (command) {\n\t\t\tvar settings = $.data(element.form, 'validator').settings;\n\t\t\tvar staticRules = settings.rules;\n\t\t\tvar existingRules = $.validator.staticRules(element);\n\t\t\tswitch(command) {\n\t\t\tcase \"add\":\n\t\t\t\t$.extend(existingRules, $.validator.normalizeRule(argument));\n\t\t\t\tstaticRules[element.name] = existingRules;\n\t\t\t\tif (argument.messages)\n\t\t\t\t\tsettings.messages[element.name] = $.extend( settings.messages[element.name], argument.messages );\n\t\t\t\tbreak;\n\t\t\tcase \"remove\":\n\t\t\t\tif (!argument) {\n\t\t\t\t\tdelete staticRules[element.name];\n\t\t\t\t\treturn existingRules;\n\t\t\t\t}\n\t\t\t\tvar filtered = {};\n\t\t\t\t$.each(argument.split(/\\s/), function(index, method) {\n\t\t\t\t\tfiltered[method] = existingRules[method];\n\t\t\t\t\tdelete existingRules[method];\n\t\t\t\t});\n\t\t\t\treturn filtered;\n\t\t\t}\n\t\t}\n\n\t\tvar data = $.validator.normalizeRules(\n\t\t$.extend(\n\t\t\t{},\n\t\t\t$.validator.metadataRules(element),\n\t\t\t$.validator.classRules(element),\n\t\t\t$.validator.attributeRules(element),\n\t\t\t$.validator.staticRules(element)\n\t\t), element);\n\n\t\t// make sure required is at front\n\t\tif (data.required) {\n\t\t\tvar param = data.required;\n\t\t\tdelete data.required;\n\t\t\tdata = $.extend({required: param}, data);\n\t\t}\n\n\t\treturn data;\n\t}\n});\n\n// Custom selectors\n$.extend($.expr[\":\"], {\n\t// http://docs.jquery.com/Plugins/Validation/blank\n\tblank: function(a) {return !$.trim(\"\" + a.value);},\n\t// http://docs.jquery.com/Plugins/Validation/filled\n\tfilled: function(a) {return !!$.trim(\"\" + a.value);},\n\t// http://docs.jquery.com/Plugins/Validation/unchecked\n\tunchecked: function(a) {return !a.checked;}\n});\n\n// constructor for validator\n$.validator = function( options, form ) {\n\tthis.settings = $.extend( true, {}, $.validator.defaults, options );\n\tthis.currentForm = form;\n\tthis.init();\n};\n\n$.validator.format = function(source, params) {\n\tif ( arguments.length == 1 )\n\t\treturn function() {\n\t\t\tvar args = $.makeArray(arguments);\n\t\t\targs.unshift(source);\n\t\t\treturn $.validator.format.apply( this, args );\n\t\t};\n\tif ( arguments.length > 2 && params.constructor != Array  ) {\n\t\tparams = $.makeArray(arguments).slice(1);\n\t}\n\tif ( params.constructor != Array ) {\n\t\tparams = [ params ];\n\t}\n\t$.each(params, function(i, n) {\n\t\tsource = source.replace(new RegExp(\"\\\\{\" + i + \"\\\\}\", \"g\"), n);\n\t});\n\treturn source;\n};\n\n$.extend($.validator, {\n\n\tdefaults: {\n\t\tmessages: {},\n\t\tgroups: {},\n\t\trules: {},\n\t\terrorClass: \"error\",\n\t\tvalidClass: \"valid\",\n\t\terrorElement: \"label\",\n\t\tfocusInvalid: true,\n\t\terrorContainer: $( [] ),\n\t\terrorLabelContainer: $( [] ),\n\t\tonsubmit: true,\n\t\tignore: [],\n\t\tignoreTitle: false,\n\t\tonfocusin: function(element) {\n\t\t\tthis.lastActive = element;\n\n\t\t\t// hide error label and remove error class on focus if enabled\n\t\t\tif ( this.settings.focusCleanup && !this.blockFocusCleanup ) {\n\t\t\t\tthis.settings.unhighlight && this.settings.unhighlight.call( this, element, this.settings.errorClass, this.settings.validClass );\n\t\t\t\tthis.addWrapper(this.errorsFor(element)).hide();\n\t\t\t}\n\t\t},\n\t\tonfocusout: function(element) {\n\t\t\tif ( !this.checkable(element) && (element.name in this.submitted || !this.optional(element)) ) {\n\t\t\t\tthis.element(element);\n\t\t\t}\n\t\t},\n\t\tonkeyup: function(element) {\n\t\t\tif ( element.name in this.submitted || element == this.lastElement ) {\n\t\t\t\tthis.element(element);\n\t\t\t}\n\t\t},\n\t\tonclick: function(element) {\n\t\t\t// click on selects, radiobuttons and checkboxes\n\t\t\tif ( element.name in this.submitted )\n\t\t\t\tthis.element(element);\n\t\t\t// or option elements, check parent select in that case\n\t\t\telse if (element.parentNode.name in this.submitted)\n\t\t\t\tthis.element(element.parentNode);\n\t\t},\n\t\thighlight: function(element, errorClass, validClass) {\n\t\t\tif (element.type === 'radio') {\n\t\t\t\tthis.findByName(element.name).addClass(errorClass).removeClass(validClass);\n\t\t\t} else {\n\t\t\t\t$(element).addClass(errorClass).removeClass(validClass);\n\t\t\t}\n\t\t},\n\t\tunhighlight: function(element, errorClass, validClass) {\n\t\t\tif (element.type === 'radio') {\n\t\t\t\tthis.findByName(element.name).removeClass(errorClass).addClass(validClass);\n\t\t\t} else {\n\t\t\t\t$(element).removeClass(errorClass).addClass(validClass);\n\t\t\t}\n\t\t}\n\t},\n\n\t// http://docs.jquery.com/Plugins/Validation/Validator/setDefaults\n\tsetDefaults: function(settings) {\n\t\t$.extend( $.validator.defaults, settings );\n\t},\n\n\tmessages: {\n\t\trequired: \"This field is required.\",\n\t\tremote: \"Please fix this field.\",\n\t\temail: \"Please enter a valid email address.\",\n\t\turl: \"Please enter a valid URL.\",\n\t\tdate: \"Please enter a valid date.\",\n\t\tdateISO: \"Please enter a valid date (ISO).\",\n\t\tnumber: \"Please enter a valid number.\",\n\t\tdigits: \"Please enter only digits.\",\n\t\tcreditcard: \"Please enter a valid credit card number.\",\n\t\tequalTo: \"Please enter the same value again.\",\n\t\taccept: \"Please enter a value with a valid extension.\",\n\t\tmaxlength: $.validator.format(\"Please enter no more than {0} characters.\"),\n\t\tminlength: $.validator.format(\"Please enter at least {0} characters.\"),\n\t\trangelength: $.validator.format(\"Please enter a value between {0} and {1} characters long.\"),\n\t\trange: $.validator.format(\"Please enter a value between {0} and {1}.\"),\n\t\tmax: $.validator.format(\"Please enter a value less than or equal to {0}.\"),\n\t\tmin: $.validator.format(\"Please enter a value greater than or equal to {0}.\")\n\t},\n\n\tautoCreateRanges: false,\n\n\tprototype: {\n\n\t\tinit: function() {\n\t\t\tthis.labelContainer = $(this.settings.errorLabelContainer);\n\t\t\tthis.errorContext = this.labelContainer.length && this.labelContainer || $(this.currentForm);\n\t\t\tthis.containers = $(this.settings.errorContainer).add( this.settings.errorLabelContainer );\n\t\t\tthis.submitted = {};\n\t\t\tthis.valueCache = {};\n\t\t\tthis.pendingRequest = 0;\n\t\t\tthis.pending = {};\n\t\t\tthis.invalid = {};\n\t\t\tthis.reset();\n\n\t\t\tvar groups = (this.groups = {});\n\t\t\t$.each(this.settings.groups, function(key, value) {\n\t\t\t\t$.each(value.split(/\\s/), function(index, name) {\n\t\t\t\t\tgroups[name] = key;\n\t\t\t\t});\n\t\t\t});\n\t\t\tvar rules = this.settings.rules;\n\t\t\t$.each(rules, function(key, value) {\n\t\t\t\trules[key] = $.validator.normalizeRule(value);\n\t\t\t});\n\n\t\t\tfunction delegate(event) {\n\t\t\t\tvar validator = $.data(this[0].form, \"validator\"),\n\t\t\t\t\teventType = \"on\" + event.type.replace(/^validate/, \"\");\n\t\t\t\tvalidator.settings[eventType] && validator.settings[eventType].call(validator, this[0] );\n\t\t\t}\n\t\t\t$(this.currentForm)\n\t\t\t\t.validateDelegate(\":text, :password, :file, select, textarea\", \"focusin focusout keyup\", delegate)\n\t\t\t\t.validateDelegate(\":radio, :checkbox, select, option\", \"click\", delegate);\n\n\t\t\tif (this.settings.invalidHandler)\n\t\t\t\t$(this.currentForm).bind(\"invalid-form.validate\", this.settings.invalidHandler);\n\t\t},\n\n\t\t// http://docs.jquery.com/Plugins/Validation/Validator/form\n\t\tform: function() {\n\t\t\tthis.checkForm();\n\t\t\t$.extend(this.submitted, this.errorMap);\n\t\t\tthis.invalid = $.extend({}, this.errorMap);\n\t\t\tif (!this.valid())\n\t\t\t\t$(this.currentForm).triggerHandler(\"invalid-form\", [this]);\n\t\t\tthis.showErrors();\n\t\t\treturn this.valid();\n\t\t},\n\n\t\tcheckForm: function() {\n\t\t\tthis.prepareForm();\n\t\t\tfor ( var i = 0, elements = (this.currentElements = this.elements()); elements[i]; i++ ) {\n\t\t\t\tthis.check( elements[i] );\n\t\t\t}\n\t\t\treturn this.valid();\n\t\t},\n\n\t\t// http://docs.jquery.com/Plugins/Validation/Validator/element\n\t\telement: function( element ) {\n\t\t\telement = this.clean( element );\n\t\t\tthis.lastElement = element;\n\t\t\tthis.prepareElement( element );\n\t\t\tthis.currentElements = $(element);\n\t\t\tvar result = this.check( element );\n\t\t\tif ( result ) {\n\t\t\t\tdelete this.invalid[element.name];\n\t\t\t} else {\n\t\t\t\tthis.invalid[element.name] = true;\n\t\t\t}\n\t\t\tif ( !this.numberOfInvalids() ) {\n\t\t\t\t// Hide error containers on last error\n\t\t\t\tthis.toHide = this.toHide.add( this.containers );\n\t\t\t}\n\t\t\tthis.showErrors();\n\t\t\treturn result;\n\t\t},\n\n\t\t// http://docs.jquery.com/Plugins/Validation/Validator/showErrors\n\t\tshowErrors: function(errors) {\n\t\t\tif(errors) {\n\t\t\t\t// add items to error list and map\n\t\t\t\t$.extend( this.errorMap, errors );\n\t\t\t\tthis.errorList = [];\n\t\t\t\tfor ( var name in errors ) {\n\t\t\t\t\tthis.errorList.push({\n\t\t\t\t\t\tmessage: errors[name],\n\t\t\t\t\t\telement: this.findByName(name)[0]\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\t// remove items from success list\n\t\t\t\tthis.successList = $.grep( this.successList, function(element) {\n\t\t\t\t\treturn !(element.name in errors);\n\t\t\t\t});\n\t\t\t}\n\t\t\tthis.settings.showErrors\n\t\t\t\t? this.settings.showErrors.call( this, this.errorMap, this.errorList )\n\t\t\t\t: this.defaultShowErrors();\n\t\t},\n\n\t\t// http://docs.jquery.com/Plugins/Validation/Validator/resetForm\n\t\tresetForm: function() {\n\t\t\tif ( $.fn.resetForm )\n\t\t\t\t$( this.currentForm ).resetForm();\n\t\t\tthis.submitted = {};\n\t\t\tthis.prepareForm();\n\t\t\tthis.hideErrors();\n\t\t\tthis.elements().removeClass( this.settings.errorClass );\n\t\t},\n\n\t\tnumberOfInvalids: function() {\n\t\t\treturn this.objectLength(this.invalid);\n\t\t},\n\n\t\tobjectLength: function( obj ) {\n\t\t\tvar count = 0;\n\t\t\tfor ( var i in obj )\n\t\t\t\tcount++;\n\t\t\treturn count;\n\t\t},\n\n\t\thideErrors: function() {\n\t\t\tthis.addWrapper( this.toHide ).hide();\n\t\t},\n\n\t\tvalid: function() {\n\t\t\treturn this.size() == 0;\n\t\t},\n\n\t\tsize: function() {\n\t\t\treturn this.errorList.length;\n\t\t},\n\n\t\tfocusInvalid: function() {\n\t\t\tif( this.settings.focusInvalid ) {\n\t\t\t\ttry {\n\t\t\t\t\t$(this.findLastActive() || this.errorList.length && this.errorList[0].element || [])\n\t\t\t\t\t.filter(\":visible\")\n\t\t\t\t\t.focus()\n\t\t\t\t\t// manually trigger focusin event; without it, focusin handler isn't called, findLastActive won't have anything to find\n\t\t\t\t\t.trigger(\"focusin\");\n\t\t\t\t} catch(e) {\n\t\t\t\t\t// ignore IE throwing errors when focusing hidden elements\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tfindLastActive: function() {\n\t\t\tvar lastActive = this.lastActive;\n\t\t\treturn lastActive && $.grep(this.errorList, function(n) {\n\t\t\t\treturn n.element.name == lastActive.name;\n\t\t\t}).length == 1 && lastActive;\n\t\t},\n\n\t\telements: function() {\n\t\t\tvar validator = this,\n\t\t\t\trulesCache = {};\n\n\t\t\t// select all valid inputs inside the form (no submit or reset buttons)\n\t\t\treturn $(this.currentForm)\n\t\t\t.find(\"input, select, textarea\")\n\t\t\t.not(\":submit, :reset, :image, [disabled]\")\n\t\t\t.not( this.settings.ignore )\n\t\t\t.filter(function() {\n\t\t\t\t!this.name && validator.settings.debug && window.console && console.error( \"%o has no name assigned\", this);\n\n\t\t\t\t// select only the first element for each name, and only those with rules specified\n\t\t\t\tif ( this.name in rulesCache || !validator.objectLength($(this).rules()) )\n\t\t\t\t\treturn false;\n\n\t\t\t\trulesCache[this.name] = true;\n\t\t\t\treturn true;\n\t\t\t});\n\t\t},\n\n\t\tclean: function( selector ) {\n\t\t\treturn $( selector )[0];\n\t\t},\n\n\t\terrors: function() {\n\t\t\treturn $( this.settings.errorElement + \".\" + this.settings.errorClass, this.errorContext );\n\t\t},\n\n\t\treset: function() {\n\t\t\tthis.successList = [];\n\t\t\tthis.errorList = [];\n\t\t\tthis.errorMap = {};\n\t\t\tthis.toShow = $([]);\n\t\t\tthis.toHide = $([]);\n\t\t\tthis.currentElements = $([]);\n\t\t},\n\n\t\tprepareForm: function() {\n\t\t\tthis.reset();\n\t\t\tthis.toHide = this.errors().add( this.containers );\n\t\t},\n\n\t\tprepareElement: function( element ) {\n\t\t\tthis.reset();\n\t\t\tthis.toHide = this.errorsFor(element);\n\t\t},\n\n\t\tcheck: function( element ) {\n\t\t\telement = this.clean( element );\n\n\t\t\t// if radio/checkbox, validate first element in group instead\n\t\t\tif (this.checkable(element)) {\n\t\t\t\telement = this.findByName( element.name ).not(this.settings.ignore)[0];\n\t\t\t}\n\n\t\t\tvar rules = $(element).rules();\n\t\t\tvar dependencyMismatch = false;\n\t\t\tfor (var method in rules ) {\n\t\t\t\tvar rule = { method: method, parameters: rules[method] };\n\t\t\t\ttry {\n\t\t\t\t\tvar result = $.validator.methods[method].call( this, element.value.replace(/\\r/g, \"\"), element, rule.parameters );\n\n\t\t\t\t\t// if a method indicates that the field is optional and therefore valid,\n\t\t\t\t\t// don't mark it as valid when there are no other rules\n\t\t\t\t\tif ( result == \"dependency-mismatch\" ) {\n\t\t\t\t\t\tdependencyMismatch = true;\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tdependencyMismatch = false;\n\n\t\t\t\t\tif ( result == \"pending\" ) {\n\t\t\t\t\t\tthis.toHide = this.toHide.not( this.errorsFor(element) );\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tif( !result ) {\n\t\t\t\t\t\tthis.formatAndAdd( element, rule );\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t} catch(e) {\n\t\t\t\t\tthis.settings.debug && window.console && console.log(\"exception occured when checking element \" + element.id\n\t\t\t\t\t\t + \", check the '\" + rule.method + \"' method\", e);\n\t\t\t\t\tthrow e;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (dependencyMismatch)\n\t\t\t\treturn;\n\t\t\tif ( this.objectLength(rules) )\n\t\t\t\tthis.successList.push(element);\n\t\t\treturn true;\n\t\t},\n\n\t\t// return the custom message for the given element and validation method\n\t\t// specified in the element's \"messages\" metadata\n\t\tcustomMetaMessage: function(element, method) {\n\t\t\tif (!$.metadata)\n\t\t\t\treturn;\n\n\t\t\tvar meta = this.settings.meta\n\t\t\t\t? $(element).metadata()[this.settings.meta]\n\t\t\t\t: $(element).metadata();\n\n\t\t\treturn meta && meta.messages && meta.messages[method];\n\t\t},\n\n\t\t// return the custom message for the given element name and validation method\n\t\tcustomMessage: function( name, method ) {\n\t\t\tvar m = this.settings.messages[name];\n\t\t\treturn m && (m.constructor == String\n\t\t\t\t? m\n\t\t\t\t: m[method]);\n\t\t},\n\n\t\t// return the first defined argument, allowing empty strings\n\t\tfindDefined: function() {\n\t\t\tfor(var i = 0; i < arguments.length; i++) {\n\t\t\t\tif (arguments[i] !== undefined)\n\t\t\t\t\treturn arguments[i];\n\t\t\t}\n\t\t\treturn undefined;\n\t\t},\n\n\t\tdefaultMessage: function( element, method) {\n\t\t\treturn this.findDefined(\n\t\t\t\tthis.customMessage( element.name, method ),\n\t\t\t\tthis.customMetaMessage( element, method ),\n\t\t\t\t// title is never undefined, so handle empty string as undefined\n\t\t\t\t!this.settings.ignoreTitle && element.title || undefined,\n\t\t\t\t$.validator.messages[method],\n\t\t\t\t\"<strong>Warning: No message defined for \" + element.name + \"</strong>\"\n\t\t\t);\n\t\t},\n\n\t\tformatAndAdd: function( element, rule ) {\n\t\t\tvar message = this.defaultMessage( element, rule.method ),\n\t\t\t\ttheregex = /\\$?\\{(\\d+)\\}/g;\n\t\t\tif ( typeof message == \"function\" ) {\n\t\t\t\tmessage = message.call(this, rule.parameters, element);\n\t\t\t} else if (theregex.test(message)) {\n\t\t\t\tmessage = jQuery.format(message.replace(theregex, '{$1}'), rule.parameters);\n\t\t\t}\n\t\t\tthis.errorList.push({\n\t\t\t\tmessage: message,\n\t\t\t\telement: element\n\t\t\t});\n\n\t\t\tthis.errorMap[element.name] = message;\n\t\t\tthis.submitted[element.name] = message;\n\t\t},\n\n\t\taddWrapper: function(toToggle) {\n\t\t\tif ( this.settings.wrapper )\n\t\t\t\ttoToggle = toToggle.add( toToggle.parent( this.settings.wrapper ) );\n\t\t\treturn toToggle;\n\t\t},\n\n\t\tdefaultShowErrors: function() {\n\t\t\tfor ( var i = 0; this.errorList[i]; i++ ) {\n\t\t\t\tvar error = this.errorList[i];\n\t\t\t\tthis.settings.highlight && this.settings.highlight.call( this, error.element, this.settings.errorClass, this.settings.validClass );\n\t\t\t\tthis.showLabel( error.element, error.message );\n\t\t\t}\n\t\t\tif( this.errorList.length ) {\n\t\t\t\tthis.toShow = this.toShow.add( this.containers );\n\t\t\t}\n\t\t\tif (this.settings.success) {\n\t\t\t\tfor ( var i = 0; this.successList[i]; i++ ) {\n\t\t\t\t\tthis.showLabel( this.successList[i] );\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (this.settings.unhighlight) {\n\t\t\t\tfor ( var i = 0, elements = this.validElements(); elements[i]; i++ ) {\n\t\t\t\t\tthis.settings.unhighlight.call( this, elements[i], this.settings.errorClass, this.settings.validClass );\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.toHide = this.toHide.not( this.toShow );\n\t\t\tthis.hideErrors();\n\t\t\tthis.addWrapper( this.toShow ).show();\n\t\t},\n\n\t\tvalidElements: function() {\n\t\t\treturn this.currentElements.not(this.invalidElements());\n\t\t},\n\n\t\tinvalidElements: function() {\n\t\t\treturn $(this.errorList).map(function() {\n\t\t\t\treturn this.element;\n\t\t\t});\n\t\t},\n\n\t\tshowLabel: function(element, message) {\n\t\t\tvar label = this.errorsFor( element );\n\t\t\tif ( label.length ) {\n\t\t\t\t// refresh error/success class\n\t\t\t\tlabel.removeClass().addClass( this.settings.errorClass );\n\n\t\t\t\t// check if we have a generated label, replace the message then\n\t\t\t\tlabel.attr(\"generated\") && label.html(message);\n\t\t\t} else {\n\t\t\t\t// create label\n\t\t\t\tlabel = $(\"<\" + this.settings.errorElement + \"/>\")\n\t\t\t\t\t.attr({\"for\":  this.idOrName(element), generated: true})\n\t\t\t\t\t.addClass(this.settings.errorClass)\n\t\t\t\t\t.html(message || \"\");\n\t\t\t\tif ( this.settings.wrapper ) {\n\t\t\t\t\t// make sure the element is visible, even in IE\n\t\t\t\t\t// actually showing the wrapped element is handled elsewhere\n\t\t\t\t\tlabel = label.hide().show().wrap(\"<\" + this.settings.wrapper + \"/>\").parent();\n\t\t\t\t}\n\t\t\t\tif ( !this.labelContainer.append(label).length )\n\t\t\t\t\tthis.settings.errorPlacement\n\t\t\t\t\t\t? this.settings.errorPlacement(label, $(element) )\n\t\t\t\t\t\t: label.insertAfter(element);\n\t\t\t}\n\t\t\tif ( !message && this.settings.success ) {\n\t\t\t\tlabel.text(\"\");\n\t\t\t\ttypeof this.settings.success == \"string\"\n\t\t\t\t\t? label.addClass( this.settings.success )\n\t\t\t\t\t: this.settings.success( label );\n\t\t\t}\n\t\t\tthis.toShow = this.toShow.add(label);\n\t\t},\n\n\t\terrorsFor: function(element) {\n\t\t\tvar name = this.idOrName(element);\n    \t\treturn this.errors().filter(function() {\n\t\t\t\treturn $(this).attr('for') == name;\n\t\t\t});\n\t\t},\n\n\t\tidOrName: function(element) {\n\t\t\treturn this.groups[element.name] || (this.checkable(element) ? element.name : element.id || element.name);\n\t\t},\n\n\t\tcheckable: function( element ) {\n\t\t\treturn /radio|checkbox/i.test(element.type);\n\t\t},\n\n\t\tfindByName: function( name ) {\n\t\t\t// select by name and filter by form for performance over form.find(\"[name=...]\")\n\t\t\tvar form = this.currentForm;\n\t\t\treturn $(document.getElementsByName(name)).map(function(index, element) {\n\t\t\t\treturn element.form == form && element.name == name && element  || null;\n\t\t\t});\n\t\t},\n\n\t\tgetLength: function(value, element) {\n\t\t\tswitch( element.nodeName.toLowerCase() ) {\n\t\t\tcase 'select':\n\t\t\t\treturn $(\"option:selected\", element).length;\n\t\t\tcase 'input':\n\t\t\t\tif( this.checkable( element) )\n\t\t\t\t\treturn this.findByName(element.name).filter(':checked').length;\n\t\t\t}\n\t\t\treturn value.length;\n\t\t},\n\n\t\tdepend: function(param, element) {\n\t\t\treturn this.dependTypes[typeof param]\n\t\t\t\t? this.dependTypes[typeof param](param, element)\n\t\t\t\t: true;\n\t\t},\n\n\t\tdependTypes: {\n\t\t\t\"boolean\": function(param, element) {\n\t\t\t\treturn param;\n\t\t\t},\n\t\t\t\"string\": function(param, element) {\n\t\t\t\treturn !!$(param, element.form).length;\n\t\t\t},\n\t\t\t\"function\": function(param, element) {\n\t\t\t\treturn param(element);\n\t\t\t}\n\t\t},\n\n\t\toptional: function(element) {\n\t\t\treturn !$.validator.methods.required.call(this, $.trim(element.value), element) && \"dependency-mismatch\";\n\t\t},\n\n\t\tstartRequest: function(element) {\n\t\t\tif (!this.pending[element.name]) {\n\t\t\t\tthis.pendingRequest++;\n\t\t\t\tthis.pending[element.name] = true;\n\t\t\t}\n\t\t},\n\n\t\tstopRequest: function(element, valid) {\n\t\t\tthis.pendingRequest--;\n\t\t\t// sometimes synchronization fails, make sure pendingRequest is never < 0\n\t\t\tif (this.pendingRequest < 0)\n\t\t\t\tthis.pendingRequest = 0;\n\t\t\tdelete this.pending[element.name];\n\t\t\tif ( valid && this.pendingRequest == 0 && this.formSubmitted && this.form() ) {\n\t\t\t\t$(this.currentForm).submit();\n\t\t\t\tthis.formSubmitted = false;\n\t\t\t} else if (!valid && this.pendingRequest == 0 && this.formSubmitted) {\n\t\t\t\t$(this.currentForm).triggerHandler(\"invalid-form\", [this]);\n\t\t\t\tthis.formSubmitted = false;\n\t\t\t}\n\t\t},\n\n\t\tpreviousValue: function(element) {\n\t\t\treturn $.data(element, \"previousValue\") || $.data(element, \"previousValue\", {\n\t\t\t\told: null,\n\t\t\t\tvalid: true,\n\t\t\t\tmessage: this.defaultMessage( element, \"remote\" )\n\t\t\t});\n\t\t}\n\n\t},\n\n\tclassRuleSettings: {\n\t\trequired: {required: true},\n\t\temail: {email: true},\n\t\turl: {url: true},\n\t\tdate: {date: true},\n\t\tdateISO: {dateISO: true},\n\t\tdateDE: {dateDE: true},\n\t\tnumber: {number: true},\n\t\tnumberDE: {numberDE: true},\n\t\tdigits: {digits: true},\n\t\tcreditcard: {creditcard: true}\n\t},\n\n\taddClassRules: function(className, rules) {\n\t\tclassName.constructor == String ?\n\t\t\tthis.classRuleSettings[className] = rules :\n\t\t\t$.extend(this.classRuleSettings, className);\n\t},\n\n\tclassRules: function(element) {\n\t\tvar rules = {};\n\t\tvar classes = $(element).attr('class');\n\t\tclasses && $.each(classes.split(' '), function() {\n\t\t\tif (this in $.validator.classRuleSettings) {\n\t\t\t\t$.extend(rules, $.validator.classRuleSettings[this]);\n\t\t\t}\n\t\t});\n\t\treturn rules;\n\t},\n\n\tattributeRules: function(element) {\n\t\tvar rules = {};\n\t\tvar $element = $(element);\n\n\t\tfor (var method in $.validator.methods) {\n\t\t\tvar value = $element.attr(method);\n\t\t\tif (value) {\n\t\t\t\trules[method] = value;\n\t\t\t}\n\t\t}\n\n\t\t// maxlength may be returned as -1, 2147483647 (IE) and 524288 (safari) for text inputs\n\t\tif (rules.maxlength && /-1|2147483647|524288/.test(rules.maxlength)) {\n\t\t\tdelete rules.maxlength;\n\t\t}\n\n\t\treturn rules;\n\t},\n\n\tmetadataRules: function(element) {\n\t\tif (!$.metadata) return {};\n\n\t\tvar meta = $.data(element.form, 'validator').settings.meta;\n\t\treturn meta ?\n\t\t\t$(element).metadata()[meta] :\n\t\t\t$(element).metadata();\n\t},\n\n\tstaticRules: function(element) {\n\t\tvar rules = {};\n\t\tvar validator = $.data(element.form, 'validator');\n\t\tif (validator.settings.rules) {\n\t\t\trules = $.validator.normalizeRule(validator.settings.rules[element.name]) || {};\n\t\t}\n\t\treturn rules;\n\t},\n\n\tnormalizeRules: function(rules, element) {\n\t\t// handle dependency check\n\t\t$.each(rules, function(prop, val) {\n\t\t\t// ignore rule when param is explicitly false, eg. required:false\n\t\t\tif (val === false) {\n\t\t\t\tdelete rules[prop];\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (val.param || val.depends) {\n\t\t\t\tvar keepRule = true;\n\t\t\t\tswitch (typeof val.depends) {\n\t\t\t\t\tcase \"string\":\n\t\t\t\t\t\tkeepRule = !!$(val.depends, element.form).length;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"function\":\n\t\t\t\t\t\tkeepRule = val.depends.call(element, element);\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tif (keepRule) {\n\t\t\t\t\trules[prop] = val.param !== undefined ? val.param : true;\n\t\t\t\t} else {\n\t\t\t\t\tdelete rules[prop];\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\t// evaluate parameters\n\t\t$.each(rules, function(rule, parameter) {\n\t\t\trules[rule] = $.isFunction(parameter) ? parameter(element) : parameter;\n\t\t});\n\n\t\t// clean number parameters\n\t\t$.each(['minlength', 'maxlength', 'min', 'max'], function() {\n\t\t\tif (rules[this]) {\n\t\t\t\trules[this] = Number(rules[this]);\n\t\t\t}\n\t\t});\n\t\t$.each(['rangelength', 'range'], function() {\n\t\t\tif (rules[this]) {\n\t\t\t\trules[this] = [Number(rules[this][0]), Number(rules[this][1])];\n\t\t\t}\n\t\t});\n\n\t\tif ($.validator.autoCreateRanges) {\n\t\t\t// auto-create ranges\n\t\t\tif (rules.min && rules.max) {\n\t\t\t\trules.range = [rules.min, rules.max];\n\t\t\t\tdelete rules.min;\n\t\t\t\tdelete rules.max;\n\t\t\t}\n\t\t\tif (rules.minlength && rules.maxlength) {\n\t\t\t\trules.rangelength = [rules.minlength, rules.maxlength];\n\t\t\t\tdelete rules.minlength;\n\t\t\t\tdelete rules.maxlength;\n\t\t\t}\n\t\t}\n\n\t\t// To support custom messages in metadata ignore rule methods titled \"messages\"\n\t\tif (rules.messages) {\n\t\t\tdelete rules.messages;\n\t\t}\n\n\t\treturn rules;\n\t},\n\n\t// Converts a simple string to a {string: true} rule, e.g., \"required\" to {required:true}\n\tnormalizeRule: function(data) {\n\t\tif( typeof data == \"string\" ) {\n\t\t\tvar transformed = {};\n\t\t\t$.each(data.split(/\\s/), function() {\n\t\t\t\ttransformed[this] = true;\n\t\t\t});\n\t\t\tdata = transformed;\n\t\t}\n\t\treturn data;\n\t},\n\n\t// http://docs.jquery.com/Plugins/Validation/Validator/addMethod\n\taddMethod: function(name, method, message) {\n\t\t$.validator.methods[name] = method;\n\t\t$.validator.messages[name] = message != undefined ? message : $.validator.messages[name];\n\t\tif (method.length < 3) {\n\t\t\t$.validator.addClassRules(name, $.validator.normalizeRule(name));\n\t\t}\n\t},\n\n\tmethods: {\n\n\t\t// http://docs.jquery.com/Plugins/Validation/Methods/required\n\t\trequired: function(value, element, param) {\n\t\t\t// check if dependency is met\n\t\t\tif ( !this.depend(param, element) )\n\t\t\t\treturn \"dependency-mismatch\";\n\t\t\tswitch( element.nodeName.toLowerCase() ) {\n\t\t\tcase 'select':\n\t\t\t\t// could be an array for select-multiple or a string, both are fine this way\n\t\t\t\tvar val = $(element).val();\n\t\t\t\treturn val && val.length > 0;\n\t\t\tcase 'input':\n\t\t\t\tif ( this.checkable(element) )\n\t\t\t\t\treturn this.getLength(value, element) > 0;\n\t\t\tdefault:\n\t\t\t\treturn $.trim(value).length > 0;\n\t\t\t}\n\t\t},\n\n\t\t// http://docs.jquery.com/Plugins/Validation/Methods/remote\n\t\tremote: function(value, element, param) {\n\t\t\tif ( this.optional(element) )\n\t\t\t\treturn \"dependency-mismatch\";\n\n\t\t\tvar previous = this.previousValue(element);\n\t\t\tif (!this.settings.messages[element.name] )\n\t\t\t\tthis.settings.messages[element.name] = {};\n\t\t\tprevious.originalMessage = this.settings.messages[element.name].remote;\n\t\t\tthis.settings.messages[element.name].remote = previous.message;\n\n\t\t\tparam = typeof param == \"string\" && {url:param} || param;\n\n\t\t\tif ( this.pending[element.name] ) {\n\t\t\t\treturn \"pending\";\n\t\t\t}\n\t\t\tif ( previous.old === value ) {\n\t\t\t\treturn previous.valid;\n\t\t\t}\n\n\t\t\tprevious.old = value;\n\t\t\tvar validator = this;\n\t\t\tthis.startRequest(element);\n\t\t\tvar data = {};\n\t\t\tdata[element.name] = value;\n\t\t\t$.ajax($.extend(true, {\n\t\t\t\turl: param,\n\t\t\t\tmode: \"abort\",\n\t\t\t\tport: \"validate\" + element.name,\n\t\t\t\tdataType: \"json\",\n\t\t\t\tdata: data,\n\t\t\t\tsuccess: function(response) {\n\t\t\t\t\tvalidator.settings.messages[element.name].remote = previous.originalMessage;\n\t\t\t\t\tvar valid = response === true;\n\t\t\t\t\tif ( valid ) {\n\t\t\t\t\t\tvar submitted = validator.formSubmitted;\n\t\t\t\t\t\tvalidator.prepareElement(element);\n\t\t\t\t\t\tvalidator.formSubmitted = submitted;\n\t\t\t\t\t\tvalidator.successList.push(element);\n\t\t\t\t\t\tvalidator.showErrors();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvar errors = {};\n\t\t\t\t\t\tvar message = response || validator.defaultMessage( element, \"remote\" );\n\t\t\t\t\t\terrors[element.name] = previous.message = $.isFunction(message) ? message(value) : message;\n\t\t\t\t\t\tvalidator.showErrors(errors);\n\t\t\t\t\t}\n\t\t\t\t\tprevious.valid = valid;\n\t\t\t\t\tvalidator.stopRequest(element, valid);\n\t\t\t\t}\n\t\t\t}, param));\n\t\t\treturn \"pending\";\n\t\t},\n\n\t\t// http://docs.jquery.com/Plugins/Validation/Methods/minlength\n\t\tminlength: function(value, element, param) {\n\t\t\treturn this.optional(element) || this.getLength($.trim(value), element) >= param;\n\t\t},\n\n\t\t// http://docs.jquery.com/Plugins/Validation/Methods/maxlength\n\t\tmaxlength: function(value, element, param) {\n\t\t\treturn this.optional(element) || this.getLength($.trim(value), element) <= param;\n\t\t},\n\n\t\t// http://docs.jquery.com/Plugins/Validation/Methods/rangelength\n\t\trangelength: function(value, element, param) {\n\t\t\tvar length = this.getLength($.trim(value), element);\n\t\t\treturn this.optional(element) || ( length >= param[0] && length <= param[1] );\n\t\t},\n\n\t\t// http://docs.jquery.com/Plugins/Validation/Methods/min\n\t\tmin: function( value, element, param ) {\n\t\t\treturn this.optional(element) || value >= param;\n\t\t},\n\n\t\t// http://docs.jquery.com/Plugins/Validation/Methods/max\n\t\tmax: function( value, element, param ) {\n\t\t\treturn this.optional(element) || value <= param;\n\t\t},\n\n\t\t// http://docs.jquery.com/Plugins/Validation/Methods/range\n\t\trange: function( value, element, param ) {\n\t\t\treturn this.optional(element) || ( value >= param[0] && value <= param[1] );\n\t\t},\n\n\t\t// http://docs.jquery.com/Plugins/Validation/Methods/email\n\t\temail: function(value, element) {\n\t\t\t// contributed by Scott Gonzalez: http://projects.scottsplayground.com/email_address_validation/\n\t\t\treturn this.optional(element) || /^((([a-z]|\\d|[!#\\$%&'\\*\\+\\-\\/=\\?\\^_`{\\|}~]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])+(\\.([a-z]|\\d|[!#\\$%&'\\*\\+\\-\\/=\\?\\^_`{\\|}~]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])+)*)|((\\x22)((((\\x20|\\x09)*(\\x0d\\x0a))?(\\x20|\\x09)+)?(([\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x7f]|\\x21|[\\x23-\\x5b]|[\\x5d-\\x7e]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(\\\\([\\x01-\\x09\\x0b\\x0c\\x0d-\\x7f]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]))))*(((\\x20|\\x09)*(\\x0d\\x0a))?(\\x20|\\x09)+)?(\\x22)))@((([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])*([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])))\\.)+(([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])*([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])))\\.?$/i.test(value);\n\t\t},\n\n\t\t// http://docs.jquery.com/Plugins/Validation/Methods/url\n\t\turl: function(value, element) {\n\t\t\t// contributed by Scott Gonzalez: http://projects.scottsplayground.com/iri/\n\t\t\treturn this.optional(element) || /^(https?|ftp):\\/\\/(((([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(%[\\da-f]{2})|[!\\$&'\\(\\)\\*\\+,;=]|:)*@)?(((\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5]))|((([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])*([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])))\\.)+(([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])*([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])))\\.?)(:\\d*)?)(\\/((([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(%[\\da-f]{2})|[!\\$&'\\(\\)\\*\\+,;=]|:|@)+(\\/(([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(%[\\da-f]{2})|[!\\$&'\\(\\)\\*\\+,;=]|:|@)*)*)?)?(\\?((([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(%[\\da-f]{2})|[!\\$&'\\(\\)\\*\\+,;=]|:|@)|[\\uE000-\\uF8FF]|\\/|\\?)*)?(\\#((([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(%[\\da-f]{2})|[!\\$&'\\(\\)\\*\\+,;=]|:|@)|\\/|\\?)*)?$/i.test(value);\n\t\t},\n\n\t\t// http://docs.jquery.com/Plugins/Validation/Methods/date\n\t\tdate: function(value, element) {\n\t\t\treturn this.optional(element) || !/Invalid|NaN/.test(new Date(value));\n\t\t},\n\n\t\t// http://docs.jquery.com/Plugins/Validation/Methods/dateISO\n\t\tdateISO: function(value, element) {\n\t\t\treturn this.optional(element) || /^\\d{4}[\\/-]\\d{1,2}[\\/-]\\d{1,2}$/.test(value);\n\t\t},\n\n\t\t// http://docs.jquery.com/Plugins/Validation/Methods/number\n\t\tnumber: function(value, element) {\n\t\t\treturn this.optional(element) || /^-?(?:\\d+|\\d{1,3}(?:,\\d{3})+)(?:\\.\\d+)?$/.test(value);\n\t\t},\n\n\t\t// http://docs.jquery.com/Plugins/Validation/Methods/digits\n\t\tdigits: function(value, element) {\n\t\t\treturn this.optional(element) || /^\\d+$/.test(value);\n\t\t},\n\n\t\t// http://docs.jquery.com/Plugins/Validation/Methods/creditcard\n\t\t// based on http://en.wikipedia.org/wiki/Luhn\n\t\tcreditcard: function(value, element) {\n\t\t\tif ( this.optional(element) )\n\t\t\t\treturn \"dependency-mismatch\";\n\t\t\t// accept only digits and dashes\n\t\t\tif (/[^0-9-]+/.test(value))\n\t\t\t\treturn false;\n\t\t\tvar nCheck = 0,\n\t\t\t\tnDigit = 0,\n\t\t\t\tbEven = false;\n\n\t\t\tvalue = value.replace(/\\D/g, \"\");\n\n\t\t\tfor (var n = value.length - 1; n >= 0; n--) {\n\t\t\t\tvar cDigit = value.charAt(n);\n\t\t\t\tvar nDigit = parseInt(cDigit, 10);\n\t\t\t\tif (bEven) {\n\t\t\t\t\tif ((nDigit *= 2) > 9)\n\t\t\t\t\t\tnDigit -= 9;\n\t\t\t\t}\n\t\t\t\tnCheck += nDigit;\n\t\t\t\tbEven = !bEven;\n\t\t\t}\n\n\t\t\treturn (nCheck % 10) == 0;\n\t\t},\n\n\t\t// http://docs.jquery.com/Plugins/Validation/Methods/accept\n\t\taccept: function(value, element, param) {\n\t\t\tparam = typeof param == \"string\" ? param.replace(/,/g, '|') : \"png|jpe?g|gif\";\n\t\t\treturn this.optional(element) || value.match(new RegExp(\".(\" + param + \")$\", \"i\"));\n\t\t},\n\n\t\t// http://docs.jquery.com/Plugins/Validation/Methods/equalTo\n\t\tequalTo: function(value, element, param) {\n\t\t\t// bind to the blur event of the target in order to revalidate whenever the target field is updated\n\t\t\t// TODO find a way to bind the event just once, avoiding the unbind-rebind overhead\n\t\t\tvar target = $(param).unbind(\".validate-equalTo\").bind(\"blur.validate-equalTo\", function() {\n\t\t\t\t$(element).valid();\n\t\t\t});\n\t\t\treturn value == target.val();\n\t\t}\n\n\t}\n\n});\n\n// deprecated, use $.validator.format instead\n$.format = $.validator.format;\n\n})(jQuery);\n\n// ajax mode: abort\n// usage: $.ajax({ mode: \"abort\"[, port: \"uniqueport\"]});\n// if mode:\"abort\" is used, the previous request on that port (port can be undefined) is aborted via XMLHttpRequest.abort()\n;(function($) {\n\tvar pendingRequests = {};\n\t// Use a prefilter if available (1.5+)\n\tif ( $.ajaxPrefilter ) {\n\t\t$.ajaxPrefilter(function(settings, _, xhr) {\n\t\t\tvar port = settings.port;\n\t\t\tif (settings.mode == \"abort\") {\n\t\t\t\tif ( pendingRequests[port] ) {\n\t\t\t\t\tpendingRequests[port].abort();\n\t\t\t\t}\n\t\t\t\tpendingRequests[port] = xhr;\n\t\t\t}\n\t\t});\n\t} else {\n\t\t// Proxy ajax\n\t\tvar ajax = $.ajax;\n\t\t$.ajax = function(settings) {\n\t\t\tvar mode = ( \"mode\" in settings ? settings : $.ajaxSettings ).mode,\n\t\t\t\tport = ( \"port\" in settings ? settings : $.ajaxSettings ).port;\n\t\t\tif (mode == \"abort\") {\n\t\t\t\tif ( pendingRequests[port] ) {\n\t\t\t\t\tpendingRequests[port].abort();\n\t\t\t\t}\n\t\t\t\treturn (pendingRequests[port] = ajax.apply(this, arguments));\n\t\t\t}\n\t\t\treturn ajax.apply(this, arguments);\n\t\t};\n\t}\n})(jQuery);\n\n// provides cross-browser focusin and focusout events\n// IE has native support, in other browsers, use event caputuring (neither bubbles)\n\n// provides delegate(type: String, delegate: Selector, handler: Callback) plugin for easier event delegation\n// handler is only called when $(event.target).is(delegate), in the scope of the jquery-object for event.target\n;(function($) {\n\t// only implement if not provided by jQuery core (since 1.4)\n\t// TODO verify if jQuery 1.4's implementation is compatible with older jQuery special-event APIs\n\tif (!jQuery.event.special.focusin && !jQuery.event.special.focusout && document.addEventListener) {\n\t\t$.each({\n\t\t\tfocus: 'focusin',\n\t\t\tblur: 'focusout'\n\t\t}, function( original, fix ){\n\t\t\t$.event.special[fix] = {\n\t\t\t\tsetup:function() {\n\t\t\t\t\tthis.addEventListener( original, handler, true );\n\t\t\t\t},\n\t\t\t\tteardown:function() {\n\t\t\t\t\tthis.removeEventListener( original, handler, true );\n\t\t\t\t},\n\t\t\t\thandler: function(e) {\n\t\t\t\t\targuments[0] = $.event.fix(e);\n\t\t\t\t\targuments[0].type = fix;\n\t\t\t\t\treturn $.event.handle.apply(this, arguments);\n\t\t\t\t}\n\t\t\t};\n\t\t\tfunction handler(e) {\n\t\t\t\te = $.event.fix(e);\n\t\t\t\te.type = fix;\n\t\t\t\treturn $.event.handle.call(this, e);\n\t\t\t}\n\t\t});\n\t};\n\t$.extend($.fn, {\n\t\tvalidateDelegate: function(delegate, type, handler) {\n\t\t\treturn this.bind(type, function(event) {\n\t\t\t\tvar target = $(event.target);\n\t\t\t\tif (target.is(delegate)) {\n\t\t\t\t\treturn handler.apply(target, arguments);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t});\n})(jQuery);","/*\n * raf.js\n * https://github.com/ngryman/raf.js\n *\n * original requestAnimationFrame polyfill by Erik Möller\n * inspired from paul_irish gist and post\n *\n * Copyright (c) 2013 ngryman\n * Licensed under the MIT license.\n */\n\n(function(window) {\n var lastTime = 0,\n vendors = ['webkit', 'moz'],\n requestAnimationFrame = window.requestAnimationFrame,\n cancelAnimationFrame = window.cancelAnimationFrame,\n i = vendors.length;\n\n // try to un-prefix existing raf\n while (--i >= 0 && !requestAnimationFrame) {\n requestAnimationFrame = window[vendors[i] + 'RequestAnimationFrame'];\n cancelAnimationFrame = window[vendors[i] + 'CancelAnimationFrame'];\n }\n\n // polyfill with setTimeout fallback\n // heavily inspired from @darius gist mod: https://gist.github.com/paulirish/1579671#comment-837945\n if (!requestAnimationFrame || !cancelAnimationFrame) {\n requestAnimationFrame = function(callback) {\n var now = +new Date(), nextTime = Math.max(lastTime + 16, now);\n return setTimeout(function() {\n     callback(lastTime = nextTime);\n     }, nextTime - now);\n };\n\n cancelAnimationFrame = clearTimeout;\n }\n\n // export to window\n window.requestAnimationFrame = requestAnimationFrame;\n window.cancelAnimationFrame = cancelAnimationFrame;\n}(window));\n","Namespace('Imgur.History');\nImgur.History = Class.extend({\n    init: function(params) {\n        this._ = $.extend({\n            popStates: {}\n        }, params);\n\n        this.onPopState();\n    },\n\n    onPopState: function() {\n        var self = this;\n\n        window.onpopstate = function(e) {\n            try {\n                self._.popStates[e.state].call(this, e);\n            } catch(exception) { }\n        };\n    },\n\n    addPopState: function(state, cb) {\n        this._.popStates[state] = cb;\n    },\n\n    removePopState: function(state) {\n        delete this._.popStates[state];\n    },\n\n    addWindowState: function(state, title, url) {\n        if(window.history.replaceState) {\n            if(!window.history.state) {\n                window.history.replaceState(state, 'initial', window.location.href);\n            }\n\n            var previousState = {\n                state: window.history.state,\n                title: document.title,\n                url: window.location.href\n            };\n\n            var newState = {\n                state: state,\n                title: title,\n                url: url\n            };\n\n            window.history.pushState(state, title, url);\n\n            var $event = $.Event('pushstate');\n            $event.previousState = previousState;\n            $event.currentState = newState;\n            $(window).trigger($event);\n        }\n    }\n});\n\nClass.addSingleton(Imgur.History);\n","Namespace('Imgur.InfiniteScroll');\n\nImgur.InfiniteScroll = Class.extend({\n    init : function(params) {\n        this._ = $.extend(true, {\n            'speed'    : 200,\n            'height'   : 300,\n            'cont'     : true,\n            'calcRight': true\n        }, params);\n    },\n\n    levelReached : function() {\n        var pageHeight = Math.max(document.body.scrollHeight ||\n            document.body.offsetHeight);\n        var viewportHeight = window.innerHeight  ||\n            document.documentElement.clientHeight  ||\n            document.body.clientHeight || 0;\n        var scrollHeight = window.pageYOffset ||\n            document.documentElement.scrollTop  ||\n            document.body.scrollTop || 0;\n\n        if(!this._.calcRight) {\n            pageHeight -= $('#content').children('.right').height();\n        }\n        \n        if(pageHeight <= 0) {\n            return false;\n        } else {\n            return pageHeight - viewportHeight - scrollHeight < this._.height;\n        }\n    },\n\n    stopInfiniteScroll : function() {\n        this._.cont = false;\n    },\n\n    continueInfiniteScroll : function() {\n        this._.cont = true;\n    },\n\n    infiniteScroll : function(cb) {\n        if(this.levelReached()) {\n            if(this._.cont) { cb.call(); }\n        } else {\n            if(this._.cont) { this.pollLevel(cb); }\n        }\n    },\n\n    pollLevel : function(cb) {\n        var self = this;\n        setTimeout(function() { self.infiniteScroll(cb); }, this._.speed);\n    }\n\n});\n\nClass.addSingleton(Imgur.InfiniteScroll);\n","Namespace('Imgur.Utilities.ColorboxConfirm');\n\nImgur.Utilities.ColorboxConfirm = Class.extend({\n    init : function(params) {\n        this._ = $.extend(true, {\n            'el' : {\n                '$confirmation' : $('.colorbox-confirm'),\n                '$noConfirm'    : $('.colorbox-no-confirm'),\n                'confirmed'     : 'colorbox-confirmed'\n            }\n        }, params);\n\n        this.setupHandlers();\n    },\n\n    setupHandlers : function() {\n        this._.el.$confirmation.unbind('click');\n        this._.el.$noConfirm.unbind('click');\n\n        var self = this;\n        this._.el.$confirmation.click(function() {\n            $('.' + self._.el.confirmed).val(true);\n            $.colorbox.close();\n        });\n\n        this._.el.$noConfirm.click(function() {\n            $.colorbox.close();\n        });\n    },\n\n    show : function(target, cb) {\n        var self = this;\n        $.colorbox({\n            href       : $(target),\n            open       : true,\n            inline     : true,\n            top        : '15%',\n            transition : 'none',\n            scrolling  : false,\n            onComplete : function() { self.onComplete(target); },\n            onClosed   : function() { self.onClose(target, cb); }\n        });\n    },\n\n    onComplete: function(target) {\n        if(window.getSelection) {\n            window.getSelection().removeAllRanges();\n        } else if (document.selection) {\n            document.selection.empty();\n        }\n\n        var $confirmed = $(target).children('.' + this._.el.confirmed);\n        if(!$confirmed.length) {\n            $confirmed = $('<input/>', {\n                'type'  : 'hidden',\n                'class' : this._.el.confirmed\n            });\n\n            $(target).append($confirmed);\n        }\n\n        $confirmed.val(false);\n    },\n\n    onClose : function(target, cb) {\n        var $confirmed = $(target).children('.' + this._.el.confirmed);\n        if($confirmed.val() !== 'false') { cb.call(); }\n    }\n\n});\n\nClass.addSingleton(Imgur.Utilities.ColorboxConfirm);\n","Namespace('Imgur.Util');\n\nImgur.Util.Base64 = {\n    PADCHAR: '=',\n    ALPHA: 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/',\n    getbyte64: function(s, i) {\n        var idx = Imgur.Util.Base64.ALPHA.indexOf(s.charAt(i));\n        if (idx == -1) {\n            throw \"Cannot decode base64\";\n        }\n        return idx;\n    },\n\n    getbyte: function(s, i) {\n        var x = s.charCodeAt(i);\n        if (x > 255) {\n         throw \"INVALID_CHARACTER_ERR: DOM Exception 5\";\n        }\n        return x;\n    },\n\n    encode: function(s) {\n        if (arguments.length != 1) {\n            throw \"SyntaxError: Not enough arguments\";\n        }\n        var padchar = Imgur.Util.Base64.PADCHAR;\n        var alpha   = Imgur.Util.Base64.ALPHA;\n        var getbyte = Imgur.Util.Base64.getbyte;\n\n        var i, b10;\n        var x = [];\n\n        // convert to string\n        s = \"\" + s;\n\n        var imax = s.length - s.length % 3;\n\n        if (s.length == 0) {\n            return s;\n        }\n        for (i = 0; i < imax; i += 3) {\n            b10 = (getbyte(s,i) << 16) | (getbyte(s,i+1) << 8) | getbyte(s,i+2);\n            x.push(alpha.charAt(b10 >> 18));\n            x.push(alpha.charAt((b10 >> 12) & 0x3F));\n            x.push(alpha.charAt((b10 >> 6) & 0x3f));\n            x.push(alpha.charAt(b10 & 0x3f));\n        }\n        switch (s.length - imax) {\n            case 1:\n                b10 = getbyte(s,i) << 16;\n                x.push(alpha.charAt(b10 >> 18) + alpha.charAt((b10 >> 12) & 0x3F) +\n                        padchar + padchar);\n                break;\n            case 2:\n                b10 = (getbyte(s,i) << 16) | (getbyte(s,i+1) << 8);\n                x.push(alpha.charAt(b10 >> 18) + alpha.charAt((b10 >> 12) & 0x3F) +\n                        alpha.charAt((b10 >> 6) & 0x3f) + padchar);\n                break;\n        }\n        return x.join('');\n    },\n\n    decode: function(s) {\n        // convert to string\n        s = \"\" + s;\n        var getbyte64 = Imgur.Util.Base64.getbyte64;\n        var pads, i, b10;\n        var imax = s.length\n            if (imax == 0) {\n                return s;\n            }\n\n        if (imax % 4 != 0) {\n            throw \"Cannot decode base64\";\n        }\n\n        pads = 0\n            if (s.charAt(imax -1) == Imgur.Util.Base64.PADCHAR) {\n                pads = 1;\n                if (s.charAt(imax -2) == Imgur.Util.Base64.PADCHAR) {\n                    pads = 2;\n                }\n                // either way, we want to ignore this last block\n                imax -= 4;\n            }\n\n        var x = [];\n        for (i = 0; i < imax; i += 4) {\n            b10 = (getbyte64(s,i) << 18) | (getbyte64(s,i+1) << 12) |\n                (getbyte64(s,i+2) << 6) | getbyte64(s,i+3);\n            x.push(String.fromCharCode(b10 >> 16, (b10 >> 8) & 0xff, b10 & 0xff));\n        }\n\n        switch (pads) {\n            case 1:\n                b10 = (getbyte64(s,i) << 18) | (getbyte64(s,i+1) << 12) | (getbyte64(s,i+2) << 6)\n                    x.push(String.fromCharCode(b10 >> 16, (b10 >> 8) & 0xff));\n                break;\n            case 2:\n                b10 = (getbyte64(s,i) << 18) | (getbyte64(s,i+1) << 12);\n                x.push(String.fromCharCode(b10 >> 16));\n                break;\n        }\n        return x.join('');\n    }\n}\n","Namespace('Imgur.Utilities.Embed');\n\nImgur.Utilities.Embed = {\n    elColorboxEmbed : function() {\n        return {\n            id                 : '#embed-post',\n            form               : $('#new-embed-post'),\n            checkbox           : $('#data-context'),\n            embedCodeInput     : $('#new-embed-post #embedcode'),\n            clipboardLink      : $('#new-embed-post #embed-clipboard-link'),\n            clipboardContainer : $('#new-embed-post .clipboard-container'),\n            preview            : $('#embed-preview'),\n            oldEmbed           : $('#old-embed-view')\n        };\n    },\n\n    elEmbedAlbumForm : function() {\n        return {\n            id                 : '#embed-album-form',\n            form               : $('#embed-album-form'),\n            embedCodeInput     : $('#embed-album-form #embedcode'),\n            embedCodePreview   : $('#embed-album-form #embedcodePreview a'),\n            clipboardContainer : $('#embed-album-form .clipboard-container'),\n            newEmbed           : $('#new-embed-view'),\n            hashRegex          : new RegExp('/a/(.*?)/')\n\n        }\n    },\n\n    embedModal : function() {\n        Imgur.Utilities.Embed.setupEmbedImage.call(this);\n        this._.el.colorboxEmbed.form.removeClass('nodisplay');\n        this._.el.embedAlbumForm.form.addClass('nodisplay');\n        this._.el.colorboxEmbed.oldEmbed.addClass('nodisplay');\n        this._.el.colorboxEmbed.checkbox.change(_.partial(Imgur.Utilities.Embed.onEmbedCheckboxClick, this));\n\n\n        $.colorbox({\n            href: this._.el.colorboxEmbed.id,\n            open: true,\n            width: '580px',\n            inline: true,\n            top: '15%',\n            className: 'embed-post-colorbox',\n            transition: 'none',\n            scrolling: false,\n            onComplete: _.bind(Imgur.Utilities.Embed.bindEmbedImage, this)\n        });\n    },\n\n    getPostMetadata : function() {\n        var options = {\n            event: 'openEmbedModal'\n        };\n\n        if(this.imgurInsideNav) {\n            var hash = this.imgurInsideNav.getHash();\n\n            if(hash) {\n                var item = this.imgurInsideNav._.sideGallery.getImage(hash);\n\n                //Image not in sidegallery because it came from non-gallery initial page load\n                if (!item) {\n                    item = this._.image;\n                }\n\n                this._.album = item.is_album ? item : {};\n                Imgur.Util.jafoLog(_.extend(options, {\n                    meta: {\n                        inGallery: (_.isNumber(item.comment_count) ? true : false),\n                        hash: hash,\n                        isAlbum: !!item.is_album,\n                        nsfw: !!item.nsfw,\n                        control: 'postOptions'\n                    }\n\n                }));\n\n                return {\n                    id: (item.is_album ? 'a/' : '') + hash,\n                    title: item.is_album ? item.title : item.description\n                };\n            }\n        }\n        Imgur.Util.jafoLog(_.extend(options, {\n            meta: {\n                inGallery: false,\n                hash: (this._.album.id || this._.id),\n                isAlbum: true,\n                nsfw: false,\n                control: 'albumOptions'\n            }\n\n        }));\n        return {\n            id: 'a/' + (this._.album.id || this._.id),\n            title: this._.album.title\n        };\n    },\n\n    getSnippet: function(hash, title, showContext, logAnalytics){\n        var host    = Imgur.Environment.host;\n        var source  = (host === 'imgur.com' ? 's.imgur.com/min' : host + '/include/minified') + '/embed.js';\n        var context = showContext === false ? ' data-context=\"' + showContext + '\"': '';\n        var analytics = logAnalytics ? '': ' data-analytics=\"false\"';\n\n        return '<blockquote class=\"imgur-embed-pub\" lang=\"en\" data-id=\"' + hash + '\"' + context + analytics + '><a href=\"//' +\n            host + '/' + hash + '\">' + _.escape(title) + '</a></blockquote><script async src=\"//' + source + '\" charset=\"utf-8\"></script>';\n    },\n\n    bindEmbedImage : function(showContext) {\n        this._.album = this._.album || {};\n        var postData = Imgur.Utilities.Embed.getPostMetadata.call(this);\n        if(!postData.title) {\n            postData.title = 'View post on imgur.com';\n        }\n\n        var snippet = Imgur.Utilities.Embed.getSnippet(postData.id, postData.title, showContext, true);\n\n        this._.el.colorboxEmbed.preview.html(Imgur.Utilities.Embed.getSnippet(postData.id, postData.title, showContext, false));\n        this._.el.colorboxEmbed.embedCodeInput.val(snippet);\n        flashElement(this._.el.colorboxEmbed.embedCodeInput);\n        Imgur.Utilities.Embed.initEmbedClipboard.call(this, this._.el.colorboxEmbed.clipboardContainer);\n        if (!this._.vars.newEmbedAlbumFormLoaded) {\n            this._.el.colorboxEmbed.embedCodeInput.focus();\n            _.defer(_.bind(this._.el.colorboxEmbed.embedCodeInput.selectAll, this));\n            try {\n                this._.vars.embedClipboard.glue('new-embedcode-clipboard', 'new-embedcode-container');\n                this._.vars.embedClipboard.addEventListener('onMouseUp', _.bind(function() {\n                    this._.vars.embedClipboard.setText(this._.el.colorboxEmbed.embedCodeInput.val());\n                }, this));\n                this._.vars.newEmbedAlbumFormLoaded = true;\n            } catch(e) {}\n        }\n\n        $.colorbox.resize();\n    },\n\n    viewOldEmbed : function() {\n        var hash;\n        this._.el.colorboxEmbed.form.addClass('nodisplay');\n        this._.el.embedAlbumForm.form.removeClass('nodisplay');\n        if(this._.baseURL === '/gallery') {\n            hash = this.imgurInsideNav.getHash();\n        } else {\n            hash = (this._.album.id || this._.id);\n        }\n        Imgur.Utilities.Embed.setEmbedUrl.call(this, '//' + this._.host + '/a/' + hash + '/embed');\n\n        this._.el.embedAlbumForm.newEmbed.click(_.bind(function() {\n            this._.el.colorboxEmbed.form.removeClass('nodisplay');\n            this._.el.embedAlbumForm.form.addClass('nodisplay');\n            Imgur.Utilities.Embed.initEmbedClipboard.call(this, this._.el.colorboxEmbed.clipboardContainer);\n            $.colorbox.resize();\n        }, this));\n\n        Imgur.Utilities.Embed.initEmbedClipboard.call(this, this._.el.embedAlbumForm.clipboardContainer);\n        flashElement(this._.el.embedAlbumForm.embedCodeInput);\n\n        Imgur.Util.jafoLog({\n            event: 'oldEmbed',\n            meta: {\n                hash: this._.id\n            }\n        });\n\n        Imgur.Utilities.Embed.setEmbedCode.call(this);\n\n        if (!this._.vars.embedAlbumFormLoaded) {\n            this._.el.embedAlbumForm.embedCodeInput.focus();\n            setTimeout(_.bind(function(){this._.el.embedAlbumForm.embedCodeInput.selectAll()}, this), 10);\n            try {\n                this._.vars.embedClipboard.glue('embedcode-clipboard', 'embedcode-container');\n                this._.vars.embedClipboard.addEventListener('onMouseUp', _.bind(function() {\n                    this._.vars.embedClipboard.setText(this._.el.embedAlbumForm.embedCodeInput.val());\n                }, this));\n                this._.vars.embedAlbumFormLoaded = true;\n            } catch(e) {}\n        }\n\n        $.colorbox.resize();\n    },\n\n    setupEmbedImage : function() {\n        var eventMethod    = window.addEventListener ? 'addEventListener' : 'attachEvent';\n        var receiveMessage = window[eventMethod];\n        var messageEvent   = eventMethod == 'attachEvent' ? 'onmessage' : 'message';\n\n        // Custom post message event handler\n        receiveMessage(messageEvent, _.bind(function(e) {\n            var eventData = JSON.parse(e.data);\n            if (eventData.message === 'resize_imgur') {\n                if(this._.album.id) {\n                    this._.el.colorboxEmbed.oldEmbed.removeClass('nodisplay');\n                    this._.el.colorboxEmbed.oldEmbed.click(_.bind(Imgur.Utilities.Embed.viewOldEmbed, this));\n                }\n                this._.el.colorboxEmbed.preview.css('height', eventData.height + 'px');\n                $('.imgur-embed-iframe-pub').height = eventData.height + 'px';\n                if($('.cboxIframe').length === 0) { //makes sure we aren't resizing the old embed preview\n                    $.colorbox.resize();\n                }\n            }\n        }, this), false);\n    },\n\n    onEmbedCheckboxClick : function(view) {\n        if($(this).is(':checked')) {\n            Imgur.Utilities.Embed.bindEmbedImage.call(view, false);\n        } else {\n            Imgur.Utilities.Embed.bindEmbedImage.call(view);\n        }\n    },\n\n    initEmbed : function() {\n        Imgur.Utilities.Embed.setupEmbedCss.call(this);\n        //Don't need thumbs carousel if thumbs are hidden\n        if (this._.el.layout.global.thumbsCarouselContainer.length) {\n            this.initThumbsCarousel();\n        }\n        this.initMainCarousel();\n        Imgur.Utilities.Embed.setupEmbedScreen.call(this);\n\n        $(window).resize(_.bind(function() {\n            Imgur.Utilities.Embed.setupEmbedCss.call(this);\n            Imgur.Utilities.Embed.setupEmbedScreen.call(this);\n        }, this));\n    },\n\n    setupEmbedCss : function() {\n        $('head').append('<style>.main-carousel ul li { width: '+$('.embed').parent().width()+'px; }</style>');\n        this._.vars.bodyHeight = $('.embed').parent().height();\n\n\n        var cssParams = Imgur.Util.getQueryParams(window.location.search);\n        var $dom = $(_.templates['album.embedStyles']({\n            background : cssParams.background,\n            text       : cssParams.text,\n            link       : cssParams.link\n        }));\n\n        if(this.chooseLogoColor(cssParams.background)) {\n            this._.el.layout.embed.offsite.addClass('light');\n        }\n\n        $dom.appendTo('head');\n    },\n\n    setupEmbedScreen : function() {\n        var width       = $('.embed').parent().width(),\n            height      = $('.embed').parent().height(),\n            tHeight     = 1,\n            thumbs      = true;\n\n        //Check if thumbs exist before adding bottom padding\n        if (this._.el.layout.global.thumbsCarouselContainer.length) {\n            tHeight += this._.el.layout.global.thumbsCarousel.height()+18;\n        } else {\n            thumbs = false;\n            this._.el.layout.global.description.css('maxHeight', 121);\n        }\n\n        if(this._.el.layout.global.title.is(':visible')) {\n            tHeight += $('#title').height() + 10;\n        }\n\n        this._.el.layout.global.container.css({\n            lineHeight : (height - tHeight) + 'px',\n            height     : this._.vars.bodyHeight - tHeight\n        });\n        \n        $('.embed #thumbs-top').css({\n            width: Math.min(79*this._.images.count, width-65)\n        });\n\n        $('.embed .thumbs-carousel').css({\n            width: Math.min(79*this._.images.count+45, width-20)\n        });\n\n        var imageHeight = $('.embed .image').height();\n\n        //Position the description dialog depending on if there are thumbnails or not\n        this._.el.layout.global.description.css({\n            top : imageHeight - (thumbs ? 48 : Math.min(121, this._.el.layout.global.description.innerHeight()))\n        });\n    },\n\n    setEmbedUrlAlbumId : function(albumId) {\n        Imgur.Utilities.Embed.setEmbedUrl.call(this, this._.embedUrl.replace(this._.el.embedAlbumForm.hashRegex, '/a/' + albumId + '/'));\n    },\n\n    setEmbedUrl : function(embedUrl) {\n        this._.embedUrl = embedUrl;\n    },\n\n    setEmbedCode : function() {\n        this._.el.embedAlbumForm.embedCodeInput.val('<iframe class=\"imgur-album\" width=\"100%\" height=\"550\" frameborder=\"0\" src=\"' + this._.embedUrl + '\"></iframe>');\n        this._.el.embedAlbumForm.embedCodePreview.attr('href', this._.embedUrl);\n    },\n\n    // ***************** EMBED CLIPBOARD FUNCTIONS *****************\n\n    clipboardClick : function(e) {\n        flashElement($(e).siblings('input'));\n\n        $(e).attr('title', 'copied');\n        $(e).tipsy('show');\n        $(e).attr('original-title', 'copy');\n    },\n\n    initEmbedClipboard : function(clipboardIconElement) {\n        this._.vars.embedClipboard = new ZeroClipboard.Client();\n\n        this._.vars.embedClipboard.addEventListener('onMouseUp', _.partial(Imgur.Utilities.Embed.clipboardClick, clipboardIconElement));\n\n        clipboardIconElement.tipsy({\n            gravity: 'e',\n            opacity: 1,\n            html: true\n        });\n    }\n};\n","Namespace('ImgurIface');\n\nImgurIface.NextImageReceiver = new Iface([\n    'handleSelectEvent'\n]);\n","Namespace('Imgur.Album');\n\nImgur.Album = Class.extend({\n    init : function(params) {\n        params = params || {};\n\n        this._ = $.extend(true, {\n            id            : null,\n            album         : null,\n            images        : null,\n            cover         : null,\n            layout        : null,\n            cdnUrl        : null,\n            preloadCount  : 4,\n            operation     : null,\n            mobile        : false,\n            initialImage  : true,\n\n            el: {\n                links: {\n                    createAlbum             : $('.album-create-link'),\n                    changeSettings          : $('.album-settings-link'),\n                    nonAuthorChangeSettings : $('.album-layout-link'),\n                    changeImages            : $('.album-images-link.unpublished'),\n                    changeCover             : $('.album-cover-link'),\n                    deleteAlbum             : $('.album-delete-link'),\n                    embedAlbum              : $('.album-embed-link'),\n                    downloadAlbum           : $('.album-download-link'),\n                    hideAlbum               : $('.album-hide-link')\n                },\n\n                embedAlbumForm: Imgur.Utilities.Embed.elEmbedAlbumForm(),\n\n                colorboxEmbed : Imgur.Utilities.Embed.elColorboxEmbed(),\n\n                downloadAlbumForm: {\n                    id         : '#download-album-form',\n                    emailInput : $('#download-album-form #email'),\n                    form       : $('#download-album-form #download-form'),\n                    message    : $('#message'),\n                    save       : $('#download-album-form #save'),\n                    loader     : $('#download-loader')\n                },\n\n                createAlbumForm: {\n                    id               : '#create-album-form',\n                    form             : $('#create-album-form form'),\n                    header           : $('#create-album-form h1'),\n                    titleInput       : $('#album-title'),\n                    descriptionInput : $('#album-description'),\n                    layoutInput      : $('#album-layout input[type=radio]'),\n                    privacyInput     : $('#album-privacy input[type=radio]'),\n                    loader           : $('#create-album-loader'),\n                    cover            : $('#album-cover'),\n                    hiddenIcon       : $('.privacy-icon.hidden'),\n                    secretIcon       : $('.privacy-icon.secret'),\n                    exlanationPublic : $('.privacy-explanation.public'),\n                    exlanationHidden : $('.privacy-explanation.hidden'),\n                    exlanationSecret : $('.privacy-explanation.secret'),\n                    privacyTitle     : $('.privacy-title'),\n                    errorbox         : $('#create-album-form .error'),\n                    submitButton     : $('#create-album-form input[type=\"submit\"]')\n                },\n\n                changeLayout: {\n                    layoutButton : $('.userSessionLayout'),\n                    layoutForm   : $('#userLayoutForm')\n                },\n\n                albumImagesForm: {\n                    id              : '#album-images',\n                    form            : $('#album-images form'),\n                    selectHeader    : $('#album-images-select-header'),\n                    coverHeader     : $('#album-images-cover-header'),\n                    menuFirstItemId : '#album-images .mode.start',\n                    imagesMenu      : $('#images-menu'),\n                    mainColumn      : $('#main-column')\n                },\n\n                deleteAlbumForm: {\n                    id     : '#delete-album-form',\n                    yes    : $('#delete-album-yes'),\n                    no     : $('#delete-album-no'),\n                    loader : $('#delete-album-form .small-loader')\n                },\n\n                hideAlbumForm: {\n                    id     : '#hide-album-form',\n                    yes    : $('#hide-album-yes'),\n                    no     : $('#hide-album-no'),\n                    loader : $('#hide-album-form .small-loader')\n                },\n\n                layout: {\n                    global: {\n                        title                   : $('#title'),\n                        description             : $('#description'),\n                        container               : $('#image-container'),\n                        mainImage               : null,\n                        thumbsCarousel          : $('#thumbs-top, #thumbs-bottom'),\n                        thumbsCarouselContainer : $('.thumbs-carousel'),\n                        thumbsCarouselNext      : $('.thumbs-carousel .carousel-button.next'),\n                        thumbsCarouselPrev      : $('.thumbs-carousel .carousel-button.prev'),\n                        thumbsCarouselTop       : $('#thumbs-top'),\n                        thumbsCarouselBottom    : $('#thumbs-bottom'),\n                        nextImage               : $('#next'),\n                        prevImage               : $('#prev'),\n                        imageHoverIconClass     : '.image-hover',\n                        actionOptionsClass      : '.action-options',\n                        actionOptionsItems      : $('.image-hover .options .item')\n                    },\n\n                    blog: {\n                        leftPanel : $('#content .main'),\n                        sidebar : $('#scrollpanel')\n                    },\n\n                    embed: {\n                        offsite   : $('#offsite')\n                    }\n                },\n\n                subdomain: {\n                    container         : $('.left .panel'),\n                    albumClass        : '.album',\n                    editButton        : $('.edit-button'),\n                    editOptionsClass  : '.edit-options',\n                    editOptionsItems  : $('.options .item')\n                }\n            },\n\n            layouts: {\n                blog        : 'b'\n            },\n\n            operations: {\n                embed        : 'embed'\n            },\n\n            messages: {\n                createAlbum           : 'Create an album',\n                albumSettings         : 'Change album settings',\n                switchLayout          : 'Switch album layout',\n                updateSettings        : 'Album settings have been updated',\n                updateImages          : 'Album images have been updated',\n                updateCover           : 'Album cover has been updated',\n                deleteAlbum           : 'Album has been deleted',\n                hideAlbum             : 'Album has been hidden',\n                privateGalleryMessage : 'This album is in the gallery, please remove it before making it secret.',\n                privateGalleryError   : 'A gallery album\\'s privacy cannot be set to secret.'\n            },\n\n            vars: {\n                currentImageIndex       : 0,\n                ajaxURL                 : '/ajaxalbums/',\n                albumImages             : null,\n                interval                : null,\n                loadingViewport         : false,\n                bodyHeight              : 0,\n                thumbsSpeed             : 400,\n                embedClipboard          : null,\n                scrolling               : false,\n                creatingAlbum           : false,\n                scrolledPage            : 0,\n                bindings                : {\n                    create : false,\n                    images : false,\n                    del    : false,\n                    thumbs : false,\n                    main   : false\n                },\n                currentTheme            : 'dark',\n                embedAlbumFormLoaded    : false,\n                newEmbedAlbumFormLoaded : false,\n                needCaptchaToProceed    : false\n            },\n            themes: {\n                dark: {\n                    background: '292929',\n                    text      : 'ffffff',\n                    link      : '4e76c9'\n                },\n                light: {\n                    background: 'f2f2f2',\n                    text      : '1a1a1a',\n                    link      : '4e76c9'\n                },\n                custom: {\n                    background: '292929',\n                    text      : 'ffffff',\n                    link      : '4e76c9'\n                }\n            },\n        }, params);\n\n        this._ = $.extend(this._ , Imgur.getInstance().getSettings());\n        this._.el.colorboxEmbed.embedCodeInput.click($(this).selectAll);\n    },\n\n    findImageIndex : function(hash) {\n        for(var i = 0; i < this._.images.count; ++i) {\n            if(this._.images.images[i].hash == hash) {\n                return i;\n            }\n        }\n\n        return 0;\n    },\n\n    getStartingIndex : function() {\n        var hash = Imgur.getInstance().getPageHash();\n\n        if(hash) {\n            if(isNaN(hash)) {\n                return this.findImageIndex(hash);\n            } else {\n                return parseInt(hash);\n            }\n        }\n\n        return 0;\n    },\n\n    loadImage : function(img) {\n        if(!img) return;\n        if(!img.hasClass('unloaded')) return;\n\n        img.attr('src', img.attr('data-src'));\n        img.removeClass('unloaded');\n\n        var loadImage = new Image();\n        loadImage.src = img.attr('src');\n\n        var self = this;\n\n        loadImage.onload = function() {\n            var src  = $(this).attr('src');\n            var hash = src.substring(src.lastIndexOf('/')+1, src.lastIndexOf('.'));\n        };\n\n        // If the thumb fails to load then load the original\n        loadImage.onerror = function() {\n            var src      = $(this).attr('src');\n            var hash_len = src.substring(src.lastIndexOf('/')+1, src.lastIndexOf('.')).length;\n\n            // If the image is a thumbnail\n            if(hash_len === 8 || hash_len === 6) {\n                var url = src.substring(0, src.lastIndexOf('.') - 1);\n\n                if(url) {\n                    url += '.jpg';\n                    this.src = url;\n                    $(img).attr('src', url);\n\n                    if($(img).parent().hasClass('zoom')) {\n                        $(img).parent().attr('href', this.src);\n                    }\n                }\n            }\n        }\n    },\n\n    initAlbumImages : function(changeCover, showMessage, callback, skipImageSetup) {\n        var self = this;\n\n        if(this._.images == null) {\n            $.getJSON(\n                '/ajax/images',\n                {\n                album    : this._.id,\n                sort    : 0,\n                order    : 1,\n                page    : 1,\n                perPage    : 999999\n                },\n                function(response) {\n                    var data = response.data;\n                    self._.images             = {};\n                    self._.images['images']   = data.images;\n                    self._.images['count']    = data.count;\n\n                    if(skipImageSetup) {\n                        if(typeof callback == 'function') {\n                            callback();\n                        }\n                    } else {\n                        self.setupAlbumImages(changeCover, showMessage, callback);\n                    }\n\n                    self._.images = null;\n                }\n            );\n        } else {\n            if(skipImageSetup) {\n                if(typeof callback == 'function') {\n                    callback();\n                }\n            } else {\n                self.setupAlbumImages(changeCover, showMessage, callback);\n            }\n        }\n    },\n\n    setupAlbumImages : function(changeCover, showMessage, callback) {\n        var images = [];\n\n        if(changeCover) {\n            images[this._.cover] = true;\n\n            this._.el.albumImagesForm.coverHeader.show();\n            this._.el.albumImagesForm.selectHeader.hide();\n        } else {\n            for(i = 0; i < this._.images.count; ++i) {\n                images[this._.images.images[i].hash] = true;\n            }\n\n            this._.el.albumImagesForm.coverHeader.hide();\n            this._.el.albumImagesForm.selectHeader.show();\n        }\n\n        var self = this;\n\n        // If the album is empty when we enter this colorbox to add/remove images from it, always show non-album images.\n        var albumImageMode = 1;\n        if( (this._.images.count && this._.images.count>0) ||\n            (this._.images.images && this._.images.images.length && this._.images.images.length>0)\n        ) {\n            albumImageMode = this._.id;\n        }\n\n        var albumImagesSettings =\n            {\n            host               : this._.host,\n            album              : this._.id,\n            images             : images,\n            cdnUrl             : this._.cdnUrl,\n            totalCounter       : $('<div/>'),\n            totalCounterSuffix : $('<div/>'),\n            imagesPerPage      : 64,\n            changeCover        : changeCover,\n            mode               : albumImageMode,\n\n            onSubmitComplete   : function(response) {\n                $.colorbox.close();\n\n                if(showMessage) {\n                    if(changeCover) {\n                        humanMsg.displayMsg(self._.messages.updateCover);\n                    } else {\n                        humanMsg.displayMsg(self._.messages.updateImages);\n                    }\n                }\n\n                var self_ = self;\n\n                if(changeCover) {\n                    $(document).bind(\n                        'cbox_closed',\n                        function() {\n                            $(document).unbind('cbox_closed');\n                            self_._.cover = response.data[0][0];\n\n                            $('#album-'+self._.id).attr('data-cover', response.data[0][0]+'b.jpg')\n                                                  .find('.cover img').attr('src', self_._.cdnUrl+'/'+response.data[0][0]+'s.jpg');\n\n                            self_.changeSettings();\n                        }\n                    );\n                } else {\n                    if(typeof callback == 'function') {\n                        callback(response.data);\n                    } else if(location.pathname != '/' > 0) {\n                        location.reload();\n                    }\n                }\n            }\n        };\n\n        this._.vars.albumImages = Imgur.Album.Images.getInstance();\n        this._.vars.albumImages.init(albumImagesSettings);\n    },\n\n    bindchangeImages : function() {\n        var self = this;\n\n        this._.vars.bindings.images = true;\n\n        var albumID = self._.id;\n\n        this._.el.albumImagesForm.form.submit(function() {\n            self._.vars.albumImages._.album = albumID;\n            self._.vars.albumImages.submit();\n            return false;\n        });\n    },\n\n    // ***************** DELETE ALBUM FUNCTIONS *****************\n\n    bindDeleteAlbum : function(callback) {\n        this._.vars.bindings.del = true;\n\n        this._.el.deleteAlbumForm.no.click(function() {\n            $.colorbox.close();\n        });\n\n        var self = this;\n\n        this._.el.deleteAlbumForm.yes.click(function() {\n            self._.el.deleteAlbumForm.yes.disable();\n            self._.el.deleteAlbumForm.loader.show();\n\n            var self_ = self;\n\n            $.post(self_._.vars.ajaxURL+'delete/'+self_._.id, {msid: Imgur.Environment.msid}, function(data) {\n                self_._.el.deleteAlbumForm.loader.hide();\n                self_._.el.deleteAlbumForm.yes.enable();\n                $.colorbox.close();\n\n                humanMsg.displayMsg(self_._.messages.deleteAlbum);\n\n                if(typeof callback == 'function') {\n                    callback(data);\n                } else {\n                    if(location.pathname == '/') {\n                        $('#album-'+self_._.id).fadeOut();\n                    }\n\n                    if(location.pathname != '/') {\n\n                        var self__ = self_;\n\n                        setTimeout(function() {\n                            if(self__._.signed) {\n                                window.location = location.protocol + '//'+ Imgur.getInstance()._.auth.url + '.' + self__._.host;\n\n                            } else {\n                                window.location = '/';\n                            }\n                        }, 1000);\n                    }\n                }\n\n            }).error(function() {\n                self._.el.deleteAlbumForm.yes.enable();\n                self._.el.deleteAlbumForm.loader.hide();\n            });\n        });\n    },\n\n    bindHideAlbum : function(callback) {\n        this._.vars.bindings.del = true;\n\n        this._.el.hideAlbumForm.no.click(function() {\n            $.colorbox.close();\n        });\n\n        var self = this;\n\n        this._.el.hideAlbumForm.yes.click(function() {\n            self._.el.hideAlbumForm.yes.disable();\n            self._.el.hideAlbumForm.loader.show();\n\n            $.post(self._.vars.ajaxURL+'hide/'+self._.id, {msid: Imgur.Environment.msid}, function(data) {\n                self._.el.hideAlbumForm.loader.hide();\n                self._.el.hideAlbumForm.yes.enable();\n                $.colorbox.close();\n\n                humanMsg.displayMsg(self._.messages.hideAlbum);\n\n                if(typeof callback == 'function') {\n                    callback(data);\n                } else {\n                    if(location.pathname == '/') {\n                        $('#album-'+self._.id).fadeOut();\n                    }\n\n                    if(location.pathname != '/') {\n                        setTimeout(function() {\n                            if(self._.signed) {\n                                window.location = location.protocol + '//'+ Imgur.getInstance()._.auth.url + '.' + self._.host;\n\n                            } else {\n                                window.location = '/';\n                            }\n                        }, 1000);\n                    }\n                }\n\n            }).error(function() {\n                self._.el.hideAlbumForm.yes.enable();\n                self._.el.hideAlbumForm.loader.hide();\n            });\n        });\n    },\n\n\n\n    // ***************** CREATE ALBUM FUNCTIONS *****************\n\n    bindCreateAlbum : function(callback) {\n        this._.vars.bindings.create = true;\n\n        var self = this;\n\n        this._.el.createAlbumForm.form.submit(function() {\n            self.createAlbumSubmitHandler(callback);\n            return false;\n        });\n\n        // when editing the create album form,\n        // mark fields as changed for form submissions\n        // for non-new albums (edits), so we don't have to\n        // send every form value, and so we can track which\n        // fields are actually changed on the backend\n        this._.el.createAlbumForm.form.change(function(e) {\n            $(e.target).attr('data-changed', 'true');\n        });\n\n        this._.el.createAlbumForm.privacyInput.change(function() {\n            self.hideAlbumPrivacy();\n            self.showAlbumPrivacy();\n        });\n\n        this._.el.createAlbumForm.privacyTitle.tipsy({\n            html: false,\n            opacity: 1,\n            gravity: 'w'\n        });\n    },\n\n    initCreateAlbum : function() {\n        this._.vars.creatingAlbum = true;\n\n        $(this._.el.createAlbumForm.id).addClass('create');\n        this._.el.createAlbumForm.header.text(this._.messages.createAlbum);\n        this._.el.createAlbumForm.titleInput.val('');\n        this._.el.createAlbumForm.descriptionInput.val('');\n        this._.el.createAlbumForm.layoutInput.removeAttr('checked').filter(':first').attr('checked', 'checked');\n        this._.el.createAlbumForm.cover.removeAttr('src');\n\n        if(this._.signed && this._.auth) {\n            this._.el.createAlbumForm.privacyInput.removeAttr('checked').filter('[value='+this._.auth.album_privacy+']').attr('checked', 'checked');\n        } else {\n            this._.el.createAlbumForm.privacyInput.removeAttr('checked').filter(':first').attr('checked', 'checked');\n        }\n\n        this._.el.createAlbumForm.titleInput.showPlaceholder();\n        this._.el.createAlbumForm.descriptionInput.showPlaceholder();\n    },\n\n    initChangeSettings : function(callingElement) {\n        // Make sure we know how album change settings is called, so we can get relevant info (e.g. album id)\n        var album = this._.id? $('#album-'+this._.id) : $(callingElement).parents('[data-privacy]');\n        if(!this._.id) {\n            this._.id = $(callingElement).parents('[data-privacy]').attr('id').split('-')[1];\n        }\n\n        this._.vars.creatingAlbum = false;\n\n        if(album.length) {\n            // Set the form data\n            if(!this._.signed) {\n                $(this._.el.createAlbumForm.id).addClass('create');\n            } else {\n                $(this._.el.createAlbumForm.id).removeClass('create');\n            }\n            if(this._.el.createAlbumForm.titleInput.length > 0) {\n                this._.el.createAlbumForm.header.text(this._.messages.albumSettings);\n            } else {\n                this._.el.createAlbumForm.header.text(this._.messages.switchLayout);\n            }\n            this._.el.createAlbumForm.titleInput.val(album.attr('data-title'));\n            this._.el.createAlbumForm.descriptionInput.val(album.attr('data-description'));\n            this._.el.createAlbumForm.privacyInput.removeAttr('checked').filter('[value=\"'+album.attr('data-privacy')+'\"]').attr('checked', 'checked');\n\n            var cover = album.attr('data-cover');\n\n            if(cover) {\n                var coverUrl = this._.cdnUrl+'/'+album.attr('data-cover');\n                // If it's a bare link, get the big thumb to use as the cover.\n                if(Imgur.Util.basename(coverUrl).indexOf('.')==-1) {\n                    coverUrl += 'b.jpg';\n                }\n\n                this._.el.createAlbumForm.cover.attr('src', coverUrl);\n            }\n\n            // Adjust the title placeholder\n            if(this._.el.createAlbumForm.titleInput.val()) {\n                this._.el.createAlbumForm.titleInput.removeClass('placeholder');\n            } else {\n                this._.el.createAlbumForm.titleInput.showPlaceholder();\n            }\n\n            // Adjust the description placeholder\n            if(this._.el.createAlbumForm.descriptionInput.val()) {\n                this._.el.createAlbumForm.descriptionInput.removeClass('placeholder');\n            } else {\n                this._.el.createAlbumForm.descriptionInput.showPlaceholder();\n            }\n        }\n    },\n\n    showAlbumPrivacy : function() {\n        this.hideAlbumPrivacy();\n\n        switch(this._.el.createAlbumForm.privacyInput.filter(':checked').val()) {\n            case \"0\":\n                this._.el.createAlbumForm.exlanationPublic.show();\n                break;\n\n            case \"1\":\n                this._.el.createAlbumForm.hiddenIcon.show();\n                this._.el.createAlbumForm.exlanationHidden.show();\n                break;\n\n            case \"2\":\n                this._.el.createAlbumForm.secretIcon.show();\n                this._.el.createAlbumForm.exlanationSecret.show();\n                break;\n        }\n\n        this.resizeCreateAlbumForm();\n    },\n\n    hideAlbumPrivacy : function() {\n        this._.el.createAlbumForm.hiddenIcon.hide();\n        this._.el.createAlbumForm.secretIcon.hide();\n\n        this._.el.createAlbumForm.exlanationPublic.hide();\n        this._.el.createAlbumForm.exlanationHidden.hide();\n        this._.el.createAlbumForm.exlanationSecret.hide();\n    },\n\n    resizeCreateAlbumForm : function() {\n        var form = $(this._.el.createAlbumForm.id);\n\n        $.colorbox.resize({\n            innerWidth: form.width()+20,\n            innerHeight: form.height()+20\n        });\n    },\n\n    createAlbumSubmitHandler : function(callback) {\n        var self = Imgur.Album.getInstance();\n\n        if(!this._.el.createAlbumForm.errorbox.is(':hidden')) {\n            this._.el.createAlbumForm.errorbox.hide();\n            this.resizeCreateAlbumForm();\n        }\n\n        if( this._.el.createAlbumForm.titleInput.length > 0 &&\n            this._.el.createAlbumForm.titleInput.val().toLowerCase() == 'album title (optional)') {\n            this._.el.createAlbumForm.titleInput.val('');\n        }\n\n        if( this._.el.createAlbumForm.descriptionInput.length > 0 &&\n            this._.el.createAlbumForm.descriptionInput.val().toLowerCase() == 'album description (optional)') {\n            this._.el.createAlbumForm.descriptionInput.val('');\n        }\n\n        if (this._.vars.needCaptchaToProceed) {\n            var formData = self._.el.createAlbumForm.form.serializeObject();\n            $.ajax({\n                url: '//' + Imgur.Environment.host + '/clearprotection',\n                method: 'POST',\n                data: {\n                    recaptcha_challenge_field: formData.recaptcha_challenge_field,\n                    recaptcha_response_field: formData.recaptcha_response_field\n                }\n            }).success(function(response) {\n                if(response.data.error) {\n                    humanMsg.displayMsg(\"Captcha invalid: \" + response.data.error);\n                    Recaptcha.reload();\n                } else {\n                    self._.vars.needCaptchaToProceed = false;\n                    self.createAlbumSubmitHandler(callback);\n                }\n            }).error(function(response) {\n                humanMsg.displayMsg(\"An error occurred when trying to submit the Captcha.\");\n                Recaptcha.reload();\n            });\n\n            // Submission will continue asynchronously if the captcha succeeds\n            return;\n        }\n\n        this._.el.createAlbumForm.submitButton.disable();\n        this._.el.createAlbumForm.loader.show();\n\n        var url1     = this._.vars.creatingAlbum? 'create': 'settings/'+this._.id;\n        var formData = this._.el.createAlbumForm.form.serialize();\n\n        if(this._.el.createAlbumForm.titleInput.length > 0) {\n\n            var self = this;\n\n            $.post(this._.vars.ajaxURL + url1, formData, function(data) {\n                if(typeof(data) !== 'object') {\n                    data = $.parseJSON(data);\n                }\n                data = data.data;\n\n                self._.el.createAlbumForm.submitButton.enable();\n                self._.el.createAlbumForm.loader.hide();\n\n                // Editing an existing one\n                if(!self._.vars.creatingAlbum) {\n                    if(data.id) {\n                        $.colorbox.close();\n\n                        humanMsg.displayMsg(self._.messages.updateSettings);\n\n                        var album = $('#album-'+data.id);\n\n                        album.attr('data-description', data.description)\n                             .attr('data-privacy', data.privacy)\n                             .attr('data-title', data.title);\n\n                        if(typeof callback == 'function') {\n                            callback(data);\n                        } else {\n                            location.reload();\n                        }\n\n                    // There was an error\n                    } else {\n                        var errorstr = '';\n\n                        for(key in errors) {\n                            if(errorstr != '') errorstr += \"\\n\";\n\n                            errorstr += errors[key];\n                        }\n\n                        self._.el.createAlbumForm.errorbox.text(errorstr).show();\n                        self.resizeCreateAlbumForm();\n                    }\n\n                // Creating a new one\n                } else {\n                    $.colorbox.close();\n\n                    if(typeof callback == 'function') {\n                        callback(data);\n                    } else {\n                        if(location.pathname == '/') {\n\n                            var self_ = self;\n\n                            $(document).bind('cbox_closed', function() {\n                                $(document).unbind('cbox_closed');\n\n                                self_._.id     = data.id;\n                                self_._.images = [];\n\n                                self_.changeImages(false, false);\n\n                                $(document).bind('cbox_closed', function() {\n                                    setTimeout(location.reload, 1000);\n                                });\n                            });\n                        } else {\n                            window.location = '/a/'+data.id;\n                        }\n                    }\n                }\n            }).error(function(response) {\n                self._.el.createAlbumForm.submitButton.enable();\n                self._.el.createAlbumForm.loader.hide();\n\n                response = $.parseJSON(response.responseText);\n\n                if(response.data.error == self._.messages.privateGalleryError) {\n                    humanMsg.displayMsg(self._.messages.privateGalleryMessage);\n                } else if(response.status == 429) {\n                    self._.vars.needCaptchaToProceed = true;\n\n                    if (typeof Recaptcha === 'undefined') {\n                        $.getScript('//www.google.com/recaptcha/api/js/recaptcha_ajax.js', function() {\n                            Recaptcha.create(Imgur.Environment.recaptcha_key,\n                                'albumCreateCaptcha',\n                                {\n                                    theme: 'clean',\n                                    callback: function() {\n                                        humanMsg.displayMsg(response.data.error.message);\n                                        $.colorbox.resize();\n                                    }\n                                }\n                            );\n                        });\n                    } else {\n                        Recaptcha.reload();\n                    }\n                }\n            });\n        } else {\n            window.location = window.location.protocol + '//' + Imgur.Environment.host + '/a/' + this._.id + '/layout/' + this._.el.changeLayout.layoutForm.find(':radio:checked').attr('id');\n\n            callback? callback.stopPropagation() : void(0);\n\n            return false;\n        }\n\n        return false;\n    },\n\n    openCreateAlbumColorbox : function(callback, clean_up_id) {\n        var self = this;\n\n        $.colorbox({\n            href        : this._.el.createAlbumForm.id,\n            open        : true,\n            top            : '15%',\n            inline        : true,\n            transition    : 'none',\n            preloading    : false,\n            scrolling    : false,\n            onComplete: function() {\n                if(!self._.vars.bindings.create) {\n                    self.bindCreateAlbum(callback);\n                }\n\n                self.showAlbumPrivacy();\n                self._.el.createAlbumForm.titleInput.focus();\n            },\n            onCleanup: function() {\n                $('.tipsy').remove();\n\n                if(clean_up_id) {\n                    self._.id = null;\n                }\n            }\n        });\n    },\n\n    // ***************** CAROUSEL FUNCTIONS *****************\n\n    carouselItemFirstIn : function(element, carousel, prev) {\n        if(element.index() == 0) {\n            prev.addClass('disabled');\n        } else {\n            prev.removeClass('disabled');\n        }\n    },\n\n    carouselItemLastIn : function(element, carousel, next) {\n        var length = carousel.jcarousel('items').length;\n\n        if(element.index() == length-1) {\n            next.addClass('disabled');\n        } else {\n            next.removeClass('disabled');\n        }\n    },\n\n    // ***************** THUMB CAROUSEL FUNCTIONS *****************\n\n    shrinkThumbsCarousel : function() {\n        this._.el.layout.global.thumbsCarouselBottom.remove();\n        this._.el.layout.global.thumbsCarouselContainer.addClass('shrunk');\n    },\n\n    getThumbsCarouselScroll : function() {\n        var operations = this._.operations,\n            layouts    = this._.layouts;\n\n        if(this._.operation == operations.embed) {\n            var width     = $('.embed').parent().width();\n            var thumbSize = 82;\n\n            return Math.floor(width/thumbSize/2);\n        }\n\n        switch(this._.album.album_layout) {\n            case layouts.blog:\n                return 6;\n\n            case layouts.horizontal:\n                return 5;\n        }\n\n        return 0;\n    },\n\n    thumbsCarouselScroll : function(i, animate) {\n        var operations = this._.operations,\n            layouts    = this._.layouts;\n\n        try {\n            if((!this._.operation && this._.album.album_layout == layouts.horizontal) || this._.operation == operations.embed) {\n                var scroll = this.getThumbsCarouselScroll();\n\n                if(i >= scroll && i < this._.images.count - scroll) {\n                    this._.el.layout.global.thumbsCarousel.jcarousel('scroll', i-scroll, animate);\n                } else {\n                    if(i < scroll) {\n                        this._.el.layout.global.thumbsCarousel.jcarousel('scroll', 0, animate);\n                    } else {\n                        this._.el.layout.global.thumbsCarousel.jcarousel('scroll', this._.images.count-1, animate);\n                    }\n                }\n            }\n        } catch(e) {}\n    },\n\n    thumbsCarouselBind : function() {\n        var operations = this._.operations,\n            layouts    = this._.layouts,\n            self       = this;\n\n        this._.el.layout.global.thumbsCarouselNext.click(function() {\n            var scroll = self.getThumbsCarouselScroll();\n\n            if(self._.operation != operations.embed) {\n                if(self._.album.album_layout == layouts.blog) {\n                    scroll = scroll/2;\n                }\n            }\n\n            self._.el.layout.global.thumbsCarousel.jcarousel('scroll', '+='+scroll);\n            return false;\n        });\n\n        this._.el.layout.global.thumbsCarouselPrev.click(function() {\n            var scroll = self.getThumbsCarouselScroll();\n\n            if(self._.operation != operations.embed) {\n                if(self._.album.album_layout == layouts.blog) {\n                    scroll = scroll/2;\n                }\n            }\n\n            self._.el.layout.global.thumbsCarousel.jcarousel('scroll', '-='+scroll);\n            return false;\n        });\n\n        this._.el.layout.global.thumbsCarousel.find('img').click(function() {\n            var i     = parseInt($(this).attr('data-index'));\n            var image = self._.images.images[i];\n\n            if((!self._.operation && self._.album.album_layout == layouts.horizontal) || self._.operation == operations.embed) {\n                self.scrollMainImage(i);\n            } else if(self._.album.album_layout == layouts.blog) {\n                Imgur.getInstance().setPageHash(image.hash);\n            }\n        });\n\n        $('.thumb-title-embed').tipsy({\n            gravity    : 's',\n            opacity    : 0.95,\n            html    : true,\n            live    : true\n        });\n\n        var shrink = this._.album.album_layout == layouts.blog ? this.getThumbsCarouselScroll()/2 : this.getThumbsCarouselScroll();\n\n        if(this._.images.count <= shrink) {\n            this.shrinkThumbsCarousel();\n        }\n    },\n\n    thumbsCarouselItemVisibleIn : function(carousel) {\n        Imgur.Album.getInstance().loadImage($(this).find('img'));\n    },\n\n    initThumbsCarousel : function() {\n        var self = this;\n\n        this._.el.layout.global.thumbsCarousel.find('li')\n            .bind('jcarouselitemvisiblein', self.thumbsCarouselItemVisibleIn);\n\n        this._.el.layout.global.thumbsCarouselTop.find('li')\n            .bind('jcarouselitemfirstin', function(carousel) {\n                self.carouselItemFirstIn($(this), self._.el.layout.global.thumbsCarouselTop, self._.el.layout.global.thumbsCarouselPrev);\n            })\n            .bind('jcarouselitemlastin', function(carousel) {\n                self.carouselItemLastIn($(this), self._.el.layout.global.thumbsCarouselTop, self._.el.layout.global.thumbsCarouselNext);\n            });\n\n        this._.el.layout.global.thumbsCarousel\n            .jcarousel({\n                animation: this._.vars.thumbsSpeed\n            });\n\n        this.thumbsCarouselBind();\n    },\n\n    // ***************** MAIN CAROUSEL FUNCTIONS *****************\n\n    getImageSrc : function(i) {\n        if(i >= this._.images.count) i = this._.images.count-1;\n        if(i < 0) i = 0;\n\n        var image = this._.images.images[i];\n\n        return this._.cdnUrl+'/'+image.hash+image.ext;\n    },\n\n    scrollMainImage : function(i) {\n        if(this._.images.count == 0) return;\n        if(i >= this._.images.count) i = this._.images.count-1;\n        if(i < 0) i = 0;\n\n        var src   = this.getImageSrc(i),\n            image = this._.images.images[i];\n\n        this._.vars.currentImageIndex = i;\n\n        var $container = $(\"#image-container-inner\"),\n            thumbsize  = '';\n\n        //scale embed album image based on largest dimension of album container\n        if(this._.operation == this._.operations.embed && !image.animated) {\n            var height = this._.el.layout.global.container.height(),\n                width = this._.el.layout.global.container.width(),\n                largestDimension = (height > width) ? height : width;\n\n            if (largestDimension <= 160) {\n                thumbsize = 't';\n            } else if (largestDimension <= 320) {\n                thumbsize = 'm';\n            } else if (largestDimension <= 640) {\n                thumbsize = 'l';\n            } else if (largestDimension <= 1024) {\n                thumbsize = 'h';\n            }\n        }\n\n        this._.el.layout.global.mainImage = ReactDOM.render(React.createElement(Imgur.ImageViewer,{\n            item: image,\n            thumbsize: thumbsize,\n            discarding_referrer: !this._.initialImage\n        }), $container.get(0));\n\n        var zoomed = $('.jquery-image-zoom');\n\n        if(zoomed.length) {\n            zoomed.click();\n        }\n\n        this.mainCarouselItemVisible();\n        Imgur.getInstance().setPageHash(i);\n        this._.initialImage = false;\n    },\n\n    mainCarouselSetup : function() {\n        var self        = this,\n            operations = this._.operations,\n            layouts    = this._.layouts;\n\n        // Description tipsy\n        this._.el.layout.global.description.tipsy({\n            gravity: $.fn.tipsy.autoNS,\n            opacity: 0.95,\n            offset: -10,\n            html: true,\n            delayOut: 1200,\n            live: true\n        });\n\n        // Next button\n        this._.el.layout.global.nextImage.click(function() {\n            self.scrollMainImage(self._.vars.currentImageIndex+1);\n            $('.' + self._.el.layout.global.actionButtonOpenClass).removeClass('opened');\n            return false;\n        });\n\n        // Prev button\n        this._.el.layout.global.prevImage.click(function() {\n            self.scrollMainImage(self._.vars.currentImageIndex-1);\n            $('.' + self._.el.layout.global.actionButtonOpenClass).removeClass('opened');\n            return false;\n        });\n\n        // Bind key up\n        $(document).keydown(function(e) {\n            if(!e.ctrlKey && !e.altKey && !e.metaKey) {\n                if(e.keyCode == 37) {\n                    self.scrollMainImage(self._.vars.currentImageIndex-1);\n                } else if(e.keyCode == 39) {\n                    self.scrollMainImage(self._.vars.currentImageIndex+1);\n                }\n\n                return true;\n            }\n\n            return true;\n        });\n\n        // Bind scroll wheel on embed albums\n        if(this._.operation == operations.embed && this._.el.layout.embed.offsite.length == 0) {\n            this._.el.layout.global.container.parent().mousewheel(function(event, delta) {\n                // Fix mousewheel's delta from zeroing on scroll.\n                delta = delta? detla : event.originalEvent.wheelDeltaY || event.originalEvent.detail;\n\n                if(delta > 0) {\n                    self.scrollMainImage(self._.vars.currentImageIndex-1);\n                } else {\n                    self.scrollMainImage(self._.vars.currentImageIndex+1);\n                }\n\n                event.preventDefault();\n                event.stopPropagation();\n\n                return false;\n            });\n        }\n\n        var index = self.getStartingIndex();\n\n        if(this._.album.album_layout != 'g' || !isNaN(parseInt(window.location.hash.substr(1)))) {\n            self.scrollMainImage(index);\n        }\n    },\n\n    mainCarouselItemVisible : function() {\n        var index      = this._.vars.currentImageIndex,\n            hash       = this._.images.images[index],\n            layouts    = this._.layouts,\n            ext        = hash.prefer_video ? '.gifv' : hash.ext;\n\n        // Remove any previous tipsies\n        $('.tipsy').remove();\n\n        // Display the title\n        if(hash.title) {\n            this._.el.layout.global.title.text(hash.title).show();\n        } else {\n            this._.el.layout.global.title.hide();\n        }\n\n        // Display the description\n        if(hash.description) {\n            var sanitizedDescription = Imgur.Util.htmlEntity(hash.description);\n            this._.el.layout.global.description.html(Imgur.Util.linkify(sanitizedDescription, true, true)).show();\n        } else {\n            this._.el.layout.global.description.hide();\n        }\n\n        // Clear previous tipsy descriptions\n        this._.el.layout.global.description.attr('title','').attr('original-title','');\n\n        // Set the correct height\n        if(this._.operation == this._.operations.embed) {\n            Imgur.Utilities.Embed.setupEmbedScreen.call(this);\n        } else if($(document).height() > this._.vars.bodyHeight) {\n            this._.vars.bodyHeight = $(document).height();\n            $('body').css('height', this._.vars.bodyHeight);\n        }\n\n        // Scroll the thumbnails\n        this.thumbsCarouselScroll(index, false);\n\n        // Select the correct thumb\n        this._.el.layout.global.thumbsCarousel.find('img').removeClass('selected');\n        $('#thumb-'+hash.hash).addClass('selected');\n\n        // Setup the hover icon\n        $(this._.el.layout.global.imageHoverIconClass).find('.album-view-link').html('<a href=\"/a/'+this._.id+'\" target=\"_blank\">View album on Imgur</a>');\n        $(this._.el.layout.global.imageHoverIconClass).find('.album-view-image-link').html('<a href=\"'+this._.cdnUrl+'/'+hash.hash+ext+'\" target=\"_blank\">View full resolution</a>');\n        $(this._.el.layout.global.imageHoverIconClass).find('.download').html('<a href=\"'+'//'+Imgur.Environment.host + '/download/'+hash.hash+(hash.title? '/'+encodeURIComponent(hash.title): '')+'\">Download full resolution</a>');\n        // Disable/Enable the next button\n        if(index == this._.images.count-1) {\n            this._.el.layout.global.nextImage.addClass('disabled');\n        } else {\n            this._.el.layout.global.nextImage.removeClass('disabled');\n        }\n\n        // Disable/Enable the prev button\n        if(index == 0) {\n            this._.el.layout.global.prevImage.addClass('disabled');\n        } else {\n            this._.el.layout.global.prevImage.removeClass('disabled');\n        }\n\n        // Preload the next images\n        for(var p = index-1; p < index + this._.preloadCount && p <= this._.images.count; ++p) {\n            if('undefined' !== typeof this._.images.images[p]) {\n                if (!this._.images.images[p].animated || '.gif' !== this._.images.images[p].ext) {\n                    // don't preload animated GIFs because they get video tags now\n                    $.preloadImages(this.getImageSrc(p));\n                }\n            }\n        }\n    },\n\n    initMainCarousel : function() {\n        this.mainCarouselSetup();\n    },\n\n    // ***************** INIT FUNCTIONS *****************\n\n    chooseLogoColor : function(hexcolor) {\n        if (hexcolor) {\n            var r = parseInt(hexcolor.substr(0,2),16);\n            var g = parseInt(hexcolor.substr(2,2),16);\n            var b = parseInt(hexcolor.substr(4,2),16);\n            var yiq = ((r*299)+(g*587)+(b*114))/1000;\n            return (yiq >= 128) ? true : false;\n        }\n        return false;\n    },\n\n    initDownloadForm : function() {\n        if(Imgur.Environment.auth.email) {\n            this._.el.downloadAlbumForm.emailInput.val(Imgur.Environment.auth.email);\n            this._.el.downloadAlbumForm.emailInput.removeClass('placeholder');\n        }\n\n        if(this._.el.downloadAlbumForm.form.length > 0) {\n            this._.el.downloadAlbumForm.form.validate({\n                onkeyup: false,\n                focusCleanup: true,\n\n                errorPlacement: _.bind(function(error) {\n                    this._.el.downloadAlbumForm.message.html(error);\n                }, this),\n\n                rules: {\n                    email: {\n                        required: true,\n                        email: true\n                    }\n                },\n\n                messages: {\n                    email: 'Enter a valid email address.'\n                }\n            });\n        }\n\n        this._.el.downloadAlbumForm.form.unbind('submit');\n        this._.el.downloadAlbumForm.form.submit(_.bind(function() {\n            if(this._.el.downloadAlbumForm.form.valid()) {\n                $.post(\n                    this._.vars.ajaxURL+'zip/'+this._.id,\n                    this._.el.downloadAlbumForm.save.attr('name')+'=true&email='+this._.el.downloadAlbumForm.emailInput.val(),\n                    _.bind(function(response) {\n                        if(response.data == 'success') {\n                            this._.el.downloadAlbumForm.message.html('<strong><div class=\"green\">Done!</div></strong>');\n                            this._.el.downloadAlbumForm.message.show();\n                            setTimeout($.colorbox.close, 900);\n                            setTimeout(this._.el.downloadAlbumForm.message.hide, 1000);\n\n                        } else {\n                            this._.el.downloadAlbumForm.message.html('<div class=\"error\">Oops! Something went wrong.</div>');\n                            this._.el.downloadAlbumForm.message.show();\n\n                        }\n                    }, this)\n                );\n            }\n        }, this));\n    },\n\n    // ***************** SUBDOMAIN FUNCTIONS *****************\n\n    albumSortStop : function() {\n        var self = Imgur.Album.getInstance();\n\n        if(self._.el.subdomain.container.find(self._.el.subdomain.albumClass).length > 0) {\n            var albums = self._.el.subdomain.container.sortable('toArray');\n            var order  = [];\n\n            for(var i = 0, count = albums.length; i < count; ++i) {\n                order[i] = albums[i].substr(albums[i].indexOf('-')+1);\n            }\n\n            $.post(self._.vars.ajaxURL+'rearrangeAlbums', 'order='+order+'&msid=' + Imgur.Environment.msid);\n        };\n    },\n\n    toggleEditButton : function(button) {\n        button.toggleClass('opened');\n        button.siblings(this._.el.subdomain.editOptionsClass).toggle();\n    },\n\n    editButtonClickHandler : function(e) {\n        $('body').unbind('click');\n\n        var self = Imgur.Album.getInstance();\n\n        if(/album-/.test($(e.target).parent().attr('id'))) {\n            self.setAlbumID( $(e.target).parent().attr('id').replace(/album-/,'') );\n        }\n\n        $('body').click(function(e) {\n\n            var self_ = self;\n\n            $('body').find('.opened').each(function() {\n                self_.toggleEditButton($(this));\n            });\n        });\n\n        self.toggleEditButton($(this));\n\n        if($(e.target).closest('.gallery-submit-link').length == 0) {\n            e.stopPropagation();\n            e.preventDefault();\n            return false;\n        }\n\n        return true;\n    },\n\n    // ***************** PUBLIC FUNCTIONS *****************\n    downloadAlbum : function() {\n        var self = Imgur.Album.getInstance();\n\n        self._.el.downloadAlbumForm.loader.show();\n\n        $.post(self._.vars.ajaxURL+'zipexists/'+self._.id,\n            function(response){\n                if(response == 'available') {\n                    window.location = '//'+Imgur.getInstance()._.host+'/a/'+self._.id+'/zip';\n                    self._.el.downloadAlbumForm.loader.hide();\n                } else {\n                    var self_ = self;\n\n                    $.colorbox({\n                        open: true,\n                        href: self._.el.downloadAlbumForm.id,\n                        transition: 'none',\n                        top: '15%',\n                        inline: true,\n                        onComplete: function() {\n                            self_.initDownloadForm();\n                            self_._.el.downloadAlbumForm.emailInput.focus();\n                            self_._.el.downloadAlbumForm.loader.hide();\n                        }\n                    });\n                }\n            }\n        );\n    },\n\n    createAlbum : function(callback) {\n        var self = Imgur.Album.getInstance();\n        self.initCreateAlbum();\n        self.openCreateAlbumColorbox(callback);\n    },\n\n    changeSettings : function(callback, callingElement) {\n        var self = Imgur.Album.getInstance();\n        var clean_up_id = this._.id === null;\n        self.initChangeSettings(callingElement);\n        self.openCreateAlbumColorbox(callback, clean_up_id);\n    },\n\n    changeImages : function(changeCover, showMessage, callback) {\n        if (Imgur.Environment.published) return false;\n\n        var self = this;\n\n        $.colorbox({\n            href: this._.el.albumImagesForm.id,\n            open: true,\n            inline: true,\n            transition: 'none',\n            scrolling: false,\n            onComplete: function() {\n                if(!self._.vars.bindings.images) {\n                    self.bindchangeImages();\n                }\n\n                if(changeCover) {\n                    self._.el.albumImagesForm.imagesMenu.hide();\n                    $.colorbox.resize({\n                        innerWidth:  self._.el.albumImagesForm.mainColumn.width()+20,\n                        innerHeight: self._.el.albumImagesForm.form.height()+20\n                    });\n                    self._.el.albumImagesForm.coverHeader.width( self._.el.albumImagesForm.mainColumn.width()+20);\n                } else {\n                    self._.el.albumImagesForm.imagesMenu.show();\n                }\n\n                self.initAlbumImages(changeCover, showMessage, callback);\n            },\n            onCleanup: function() {\n                self._.vars.albumImages.destroy();\n                self._.vars.albumImages = null;\n            }\n        });\n    },\n\n    deleteAlbum : function(callback) {\n        var self = Imgur.Album.getInstance();\n\n        $.colorbox({\n            href: self._.el.deleteAlbumForm.id,\n            open: true,\n            inline: true,\n            top: '15%',\n            transition: 'none',\n            scrolling: false,\n            onComplete: function() {\n                if(!self._.vars.bindings.del) {\n                    self.bindDeleteAlbum(callback);\n                }\n            }\n        });\n    },\n\n    hideAlbum : function(callback) {\n        var self = Imgur.Album.getInstance();\n\n        $.colorbox({\n            href: self._.el.hideAlbumForm.id,\n            open: true,\n            inline: true,\n            top: '15%',\n            transition: 'none',\n            scrolling: false,\n            onComplete: function() {\n                if(!self._.vars.bindings.del) {\n                    self.bindHideAlbum(callback);\n                }\n            }\n        });\n    },\n\n    generalInit : function() {\n        var self       = this,\n            operations = this._.operations,\n            layouts    = this._.layouts;\n\n        if(this._.operation === operations.embed) {\n            Imgur.Utilities.Embed.initEmbed.call(this);\n        }\n\n        $('.thumb-title').tipsy({\n            gravity: 'n',\n            opacity: 0.95,\n            offset: -10,\n            html: true\n        });\n\n        this._.el.links.createAlbum.unbind('click');\n        this._.el.links.changeSettings.unbind('click');\n        this._.el.links.deleteAlbum.unbind('click');\n        this._.el.links.hideAlbum.click(this.hideAlbum);\n        this._.el.links.changeImages.unbind('click');\n        this._.el.links.changeCover.unbind('click');\n        this._.el.links.downloadAlbum.unbind('click');\n\n        this._.el.links.createAlbum.click(this.createAlbum);\n        this._.el.links.changeSettings.click(function(){ self.changeSettings(undefined, this); });\n        this._.el.links.deleteAlbum.click(this.deleteAlbum);\n        this._.el.links.changeImages.click(function() { self.changeImages(false, true); });\n        this._.el.links.changeCover.click(function() { self.changeImages(true, true); });\n        this._.el.links.embedAlbum.click(_.bind(Imgur.Utilities.Embed.embedModal, this));\n        this._.el.links.downloadAlbum.click(this.downloadAlbum);\n\n\n        $(\".album-images-link.published\").tipsy({\n            gravity: \"w\"\n        });\n\n        this._.vars.bodyHeight = $('body').height();\n\n        this._.el.embedAlbumForm.embedCodeInput.click($(this).selectAll);\n\n        if(Imgur.Fullscreen) {\n            Imgur.Fullscreen.getInstance();\n        }\n    },\n\n    profileInit : function() {\n        this._.el.subdomain.editButton.unbind('click');\n        this._.el.subdomain.editButton.click(this.editButtonClickHandler);\n\n        this._.el.subdomain.container.sortable({\n            stop: this.albumSortStop,\n            items: '.album'\n        });\n\n        var self = this;\n\n        this._.el.subdomain.editOptionsItems.unbind('click');\n        this._.el.subdomain.editOptionsItems.click(function() {\n            var id = $(this).parent().parent().parent().attr('id');\n            self._.id = id.substr(id.indexOf('-')+1);\n        });\n\n        this.generalInit();\n    },\n\n    setAlbumID : function(id) {\n        this._.id = id;\n    }\n\n});\n\nClass.addSingleton(Imgur.Album);\n","Namespace('Imgur.Elements.Tag.View');\n\nImgur.Elements.Tag.View = React.createClass({\n    displayName: 'TagView',\n\n    getDefaultProps: function getDefaultProps() {\n        return {\n            redirectTo: '#',\n            redirectAnalytics: function redirectAnalytics() {},\n            classNames: ''\n        };\n    },\n    render: function render() {\n        var removeWidget = '';\n\n        if (this.props.allowRemoval) {\n            removeWidget = React.createElement('span', { className: 'post-tag-delete pointer icon-x', onClick: this.props.removeTag.bind(null, this.props.tagName) });\n        }\n\n        return React.createElement(\n            'span',\n            { className: this.props.classNames },\n            React.createElement(\n                'a',\n                { className: 'post-tag-link', onClick: this.props.redirectAnalytics, href: this.props.redirectTo },\n                this.props.tagName\n            ),\n            removeWidget\n        );\n    }\n});\n\nImgur.Elements.Tag.View.propTypes = {\n    tagName: React.PropTypes.string.isRequired,\n    classNames: React.PropTypes.string,\n    redirectTo: React.PropTypes.string,\n    redirectAnalytics: React.PropTypes.func,\n    allowRemoval: React.PropTypes.bool,\n    removeTag: React.PropTypes.func\n};\n//# sourceMappingURL=view.js.map\n","Namespace('Imgur.PromotedSpotlight');\n\nImgur.PromotedSpotlight = React.createClass({\n    displayName: \"PromotedSpotlight\",\n\n    render: function render() {\n        return React.createElement(\n            \"div\",\n            { className: \"spotlight-container\" },\n            React.createElement(\n                \"a\",\n                { href: \"http://blog.imgur.com/2015/05/31/about-promoted-posts/\", target: \"_blank\" },\n                React.createElement(\"img\", { className: \"thumb\", src: Imgur.Environment.staticUrl + '/images/giraffe-promo-spotlight.jpg' })\n            ),\n            React.createElement(\n                \"div\",\n                { className: \"content\" },\n                React.createElement(\n                    \"div\",\n                    { className: \"headline\" },\n                    React.createElement(\n                        \"a\",\n                        { className: \"headline-text\", href: \"http://blog.imgur.com/2015/05/31/about-promoted-posts/\", target: \"_blank\" },\n                        \"What are promoted posts?\"\n                    ),\n                    React.createElement(\n                        \"div\",\n                        { className: \"headline-label\" },\n                        \"imgur blog\"\n                    )\n                ),\n                React.createElement(\n                    \"p\",\n                    { className: \"body\" },\n                    \"And why am I seeing them?\"\n                ),\n                React.createElement(\n                    \"a\",\n                    { className: \"cta\", href: \"http://blog.imgur.com/2015/05/31/about-promoted-posts/\", target: \"_blank\" },\n                    \"Learn More\"\n                )\n            )\n        );\n    }\n});\n//# sourceMappingURL=promoted-spotlight.js.map\n","// Simple Set Clipboard System\n// Author: Joseph Huckaby\n\nvar ZeroClipboard = {\n\t\n\tversion: \"1.0.7\",\n\tclients: {}, // registered upload clients on page, indexed by id\n\tmoviePath: '/include/flash/zeroclipboard.swf', // URL to movie\n\tnextId: 1, // ID of next movie\n\t\n\t$: function(thingy) {\n\t\t// simple DOM lookup utility function\n\t\tif (typeof(thingy) == 'string') thingy = document.getElementById(thingy);\n\t\tif (!thingy.addClass) {\n\t\t\t// extend element with a few useful methods\n\t\t\tthingy.hide = function() { this.style.display = 'none'; };\n\t\t\tthingy.show = function() { this.style.display = ''; };\n\t\t\tthingy.addClass = function(name) { this.removeClass(name); this.className += ' ' + name; };\n\t\t\tthingy.removeClass = function(name) {\n\t\t\t\tvar classes = this.className.split(/\\s+/);\n\t\t\t\tvar idx = -1;\n\t\t\t\tfor (var k = 0; k < classes.length; k++) {\n\t\t\t\t\tif (classes[k] == name) { idx = k; k = classes.length; }\n\t\t\t\t}\n\t\t\t\tif (idx > -1) {\n\t\t\t\t\tclasses.splice( idx, 1 );\n\t\t\t\t\tthis.className = classes.join(' ');\n\t\t\t\t}\n\t\t\t\treturn this;\n\t\t\t};\n\t\t\tthingy.hasClass = function(name) {\n\t\t\t\treturn !!this.className.match( new RegExp(\"\\\\s*\" + name + \"\\\\s*\") );\n\t\t\t};\n\t\t}\n\t\treturn thingy;\n\t},\n\t\n\tsetMoviePath: function(path) {\n\t\t// set path to ZeroClipboard.swf\n\t\tthis.moviePath = path;\n\t},\n\t\n\tdispatch: function(id, eventName, args) {\n\t\t// receive event from flash movie, send to client\t\t\n\t\tvar client = this.clients[id];\n\t\tif (client) {\n\t\t\tclient.receiveEvent(eventName, args);\n\t\t}\n\t},\n\t\n\tregister: function(id, client) {\n\t\t// register new client to receive events\n\t\tthis.clients[id] = client;\n\t},\n\t\n\tgetDOMObjectPosition: function(obj, stopObj) {\n\t\t// get absolute coordinates for dom element\n\t\tvar info = {\n\t\t\tleft: 0, \n\t\t\ttop: 0, \n\t\t\twidth: obj.width ? obj.width : obj.offsetWidth, \n\t\t\theight: obj.height ? obj.height : obj.offsetHeight\n\t\t};\n\n\t\twhile (obj && (obj != stopObj)) {\n\t\t\tinfo.left += obj.offsetLeft;\n\t\t\tinfo.top += obj.offsetTop;\n\t\t\tobj = obj.offsetParent;\n\t\t}\n\n\t\treturn info;\n\t},\n\t\n\tClient: function(elem) {\n\t\t// constructor for new simple upload client\n\t\tthis.handlers = {};\n\t\t\n\t\t// unique ID\n\t\tthis.id = ZeroClipboard.nextId++;\n\t\tthis.movieId = 'ZeroClipboardMovie_' + this.id;\n\t\t\n\t\t// register client with singleton to receive flash events\n\t\tZeroClipboard.register(this.id, this);\n\t\t\n\t\t// create movie\n\t\tif (elem) this.glue(elem);\n\t}\n};\n\nZeroClipboard.Client.prototype = {\n\t\n\tid: 0, // unique ID for us\n\tready: false, // whether movie is ready to receive events or not\n\tmovie: null, // reference to movie object\n\tclipText: '', // text to copy to clipboard\n\thandCursorEnabled: true, // whether to show hand cursor, or default pointer cursor\n\tcssEffects: true, // enable CSS mouse effects on dom container\n\thandlers: null, // user event handlers\n\t\n\tglue: function(elem, appendElem, stylesToAdd) {\n\t\t// glue to DOM element\n\t\t// elem can be ID or actual DOM element object\n\t\tthis.domElement = ZeroClipboard.$(elem);\n\t\t\n\t\t// float just above object, or zIndex 99 if dom element isn't set\n\t\tvar zIndex = 99;\n\t\tif (this.domElement.style.zIndex) {\n\t\t\tzIndex = parseInt(this.domElement.style.zIndex, 10) + 1;\n\t\t}\n\t\t\n\t\tif (typeof(appendElem) == 'string') {\n\t\t\tappendElem = ZeroClipboard.$(appendElem);\n\t\t}\n\t\telse if (typeof(appendElem) == 'undefined') {\n\t\t\tappendElem = document.getElementsByTagName('body')[0];\n\t\t}\n\t\t\n\t\t// find X/Y position of domElement\n\t\tvar box = ZeroClipboard.getDOMObjectPosition(this.domElement, appendElem);\n\t\t\n\t\t// create floating DIV above element\n\t\tthis.div = document.createElement('div');\n\t\tvar style = this.div.style;\n\t\tstyle.position = 'absolute';\n\t\tstyle.left = '' + box.left + 'px';\n\t\tstyle.top = '' + box.top-5 + 'px';\n\t\tstyle.width = '' + box.width + 'px';\n\t\tstyle.height = '' + box.height + 'px';\n\t\tstyle.zIndex = zIndex;\n\t\t\n\t\tif (typeof(stylesToAdd) == 'object') {\n\t\t\tfor (addedStyle in stylesToAdd) {\n\t\t\t\tstyle[addedStyle] = stylesToAdd[addedStyle];\n\t\t\t}\n\t\t}\n\t\t\n\t\t// style.backgroundColor = '#f00'; // debug\n\t\t\n\t\tappendElem.appendChild(this.div);\n\t\t\n\t\tthis.div.innerHTML = this.getHTML( box.width, box.height );\n\t},\n\t\n\tgetHTML: function(width, height) {\n\t\t// return HTML for movie\n\t\tvar html = '';\n\t\tvar flashvars = 'id=' + this.id + \n\t\t\t'&width=' + width + \n\t\t\t'&height=' + height;\n\t\t\t\n\t\tif (navigator.userAgent.match(/MSIE/)) {\n\t\t\t// IE gets an OBJECT tag\n\t\t\tvar protocol = location.href.match(/^https/i) ? 'https://' : 'http://';\n\t\t\thtml += '<object classid=\"clsid:d27cdb6e-ae6d-11cf-96b8-444553540000\" codebase=\"'+protocol+'download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,0,0\" width=\"'+width+'\" height=\"'+height+'\" id=\"'+this.movieId+'\" align=\"middle\"><param name=\"allowScriptAccess\" value=\"always\" /><param name=\"allowFullScreen\" value=\"false\" /><param name=\"movie\" value=\"'+ZeroClipboard.moviePath+'\" /><param name=\"loop\" value=\"false\" /><param name=\"menu\" value=\"false\" /><param name=\"quality\" value=\"best\" /><param name=\"bgcolor\" value=\"#ffffff\" /><param name=\"flashvars\" value=\"'+flashvars+'\"/><param name=\"wmode\" value=\"transparent\"/></object>';\n\t\t}\n\t\telse {\n\t\t\t// all other browsers get an EMBED tag\n\t\t\thtml += '<embed id=\"'+this.movieId+'\" src=\"'+ZeroClipboard.moviePath+'\" loop=\"false\" menu=\"false\" quality=\"best\" bgcolor=\"#ffffff\" width=\"'+width+'\" height=\"'+height+'\" name=\"'+this.movieId+'\" align=\"middle\" allowScriptAccess=\"always\" allowFullScreen=\"false\" type=\"application/x-shockwave-flash\" pluginspage=\"http://www.macromedia.com/go/getflashplayer\" flashvars=\"'+flashvars+'\" wmode=\"transparent\" />';\n\t\t}\n\t\treturn html;\n\t},\n\t\n\thide: function() {\n\t\t// temporarily hide floater offscreen\n\t\tif (this.div) {\n\t\t\tthis.div.style.left = '-2000px';\n\t\t}\n\t},\n\t\n\tshow: function() {\n\t\t// show ourselves after a call to hide()\n\t\tthis.reposition();\n\t},\n\t\n\tdestroy: function() {\n\t\t// destroy control and floater\n\t\tif (this.domElement && this.div) {\n\t\t\tthis.hide();\n\t\t\tthis.div.innerHTML = '';\n\t\t\t\n\t\t\tvar body = document.getElementsByTagName('body')[0];\n\t\t\ttry { body.removeChild( this.div ); } catch(e) {;}\n\t\t\t\n\t\t\tthis.domElement = null;\n\t\t\tthis.div = null;\n\t\t}\n\t},\n\t\n\treposition: function(elem) {\n\t\t// reposition our floating div, optionally to new container\n\t\t// warning: container CANNOT change size, only position\n\t\tif (elem) {\n\t\t\tthis.domElement = ZeroClipboard.$(elem);\n\t\t\tif (!this.domElement) this.hide();\n\t\t}\n\t\t\n\t\tif (this.domElement && this.div) {\n\t\t\tvar box = ZeroClipboard.getDOMObjectPosition(this.domElement);\n\t\t\tvar style = this.div.style;\n\t\t\tstyle.left = '' + box.left + 'px';\n\t\t\tstyle.top = '' + box.top + 'px';\n\t\t}\n\t},\n\t\n\tsetText: function(newText) {\n\t\t// set text to be copied to clipboard\n\t\tthis.clipText = newText;\n\t\tif (this.ready) this.movie.setText(newText);\n\t},\n\t\n\taddEventListener: function(eventName, func) {\n\t\t// add user event listener for event\n\t\t// event types: load, queueStart, fileStart, fileComplete, queueComplete, progress, error, cancel\n\t\teventName = eventName.toString().toLowerCase().replace(/^on/, '');\n\t\tif (!this.handlers[eventName]) this.handlers[eventName] = [];\n\t\tthis.handlers[eventName].push(func);\n\t},\n\t\n\tsetHandCursor: function(enabled) {\n\t\t// enable hand cursor (true), or default arrow cursor (false)\n\t\tthis.handCursorEnabled = enabled;\n\t\tif (this.ready) this.movie.setHandCursor(enabled);\n\t},\n\t\n\tsetCSSEffects: function(enabled) {\n\t\t// enable or disable CSS effects on DOM container\n\t\tthis.cssEffects = !!enabled;\n\t},\n\t\n\treceiveEvent: function(eventName, args) {\n\t\t// receive event from flash\n\t\teventName = eventName.toString().toLowerCase().replace(/^on/, '');\n\t\t\t\t\n\t\t// special behavior for certain events\n\t\tswitch (eventName) {\n\t\t\tcase 'load':\n\t\t\t\t// movie claims it is ready, but in IE this isn't always the case...\n\t\t\t\t// bug fix: Cannot extend EMBED DOM elements in Firefox, must use traditional function\n\t\t\t\tthis.movie = document.getElementById(this.movieId);\n\t\t\t\tif (!this.movie) {\n\t\t\t\t\tvar self = this;\n\t\t\t\t\tsetTimeout( function() { self.receiveEvent('load', null); }, 1 );\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// firefox on pc needs a \"kick\" in order to set these in certain cases\n\t\t\t\tif (!this.ready && navigator.userAgent.match(/Firefox/) && navigator.userAgent.match(/Windows/)) {\n\t\t\t\t\tvar self = this;\n\t\t\t\t\tsetTimeout( function() { self.receiveEvent('load', null); }, 100 );\n\t\t\t\t\tthis.ready = true;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.ready = true;\n\t\t\t\tthis.movie.setText( this.clipText );\n\t\t\t\tthis.movie.setHandCursor( this.handCursorEnabled );\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase 'mouseover':\n\t\t\t\tif (this.domElement && this.cssEffects) {\n\t\t\t\t\tthis.domElement.addClass('hover');\n\t\t\t\t\tif (this.recoverActive) this.domElement.addClass('active');\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase 'mouseout':\n\t\t\t\tif (this.domElement && this.cssEffects) {\n\t\t\t\t\tthis.recoverActive = false;\n\t\t\t\t\tif (this.domElement.hasClass('active')) {\n\t\t\t\t\t\tthis.domElement.removeClass('active');\n\t\t\t\t\t\tthis.recoverActive = true;\n\t\t\t\t\t}\n\t\t\t\t\tthis.domElement.removeClass('hover');\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase 'mousedown':\n\t\t\t\tif (this.domElement && this.cssEffects) {\n\t\t\t\t\tthis.domElement.addClass('active');\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase 'mouseup':\n\t\t\t\tif (this.domElement && this.cssEffects) {\n\t\t\t\t\tthis.domElement.removeClass('active');\n\t\t\t\t\tthis.recoverActive = false;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t} // switch eventName\n\t\t\n\t\tif (this.handlers[eventName]) {\n\t\t\tfor (var idx = 0, len = this.handlers[eventName].length; idx < len; idx++) {\n\t\t\t\tvar func = this.handlers[eventName][idx];\n\t\t\t\n\t\t\t\tif (typeof(func) == 'function') {\n\t\t\t\t\t// actual function reference\n\t\t\t\t\tfunc(this, args);\n\t\t\t\t}\n\t\t\t\telse if ((typeof(func) == 'object') && (func.length == 2)) {\n\t\t\t\t\t// PHP style object + method, i.e. [myObject, 'myMethod']\n\t\t\t\t\tfunc[0][ func[1] ](this, args);\n\t\t\t\t}\n\t\t\t\telse if (typeof(func) == 'string') {\n\t\t\t\t\t// name of function\n\t\t\t\t\twindow[func](this, args);\n\t\t\t\t}\n\t\t\t} // foreach event handler defined\n\t\t} // user defined handler for event\n\t}\n\t\n};\n","var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nNamespace('Imgur.SideGallery');\n\nImgur.SideGallery = React.createClass({\n    displayName: 'SideGallery',\n\n    HEIGHT: 485,\n    ROW_HEIGHT: {\n        list: 85, //includes row height + margin\n        grid: 138 //includes img height + margin\n    },\n    ITEMS_PER_ROW: {\n        list: 1,\n        grid: 2\n    },\n    RENDER_BUFFER: 1000,\n    FETCH_MORE_BUFFER: 3000, //how far from the bottom should we start grabbing a new page\n    SELECTED_OFFSET: 0,\n    BREAK_HEIGHT: 60,\n    GRID_MARGIN: 10,\n\n    isLoading: false,\n    currentInserted: false,\n    cxensePageViewCount: 0,\n    el: {\n        $sideGallery: null,\n        $content: null,\n        $nano: null\n    },\n    sectionTitles: {\n        'hot': 'Most Viral Images',\n        'new': 'User Submitted Images',\n        'top': 'Highest Scoring Images',\n        'custom': 'Custom Gallery Images',\n        'favorites': 'Favorites',\n        'random': 'Random'\n    },\n    sortTitles: {\n        'viral': 'sorted by popularity',\n        'time': 'newest first',\n        'new': 'newest first',\n        'newest': 'newest first',\n        'oldest': 'oldest first',\n        'rising': 'rising',\n        'random': 'sorted by random'\n    },\n    windowTitles: {\n        'day': 'today',\n        'week': 'this week',\n        'month': 'this month',\n        'year': 'this year',\n        'all': 'all time'\n    },\n\n    getInitialState: function getInitialState() {\n        return _.extend(this.getGalleryEnvironment(), {\n            items: [],\n            scrollTop: 0,\n            selectedHash: this.props.env.hash,\n            endReached: false,\n            layout: Imgur.LocalStorage.get('sidegallery_layout_experiment') || 'list'\n        });\n    },\n\n    getGalleryEnvironment: function getGalleryEnvironment() {\n        var section, source;\n\n        if (typeof $.cookie(\"m_section\") === 'undefined') {\n            var referer = document.createElement('a');\n            referer.href = document.referrer;\n            if (referer.host === 'twitch.tv') {\n                section = 'tag';\n                source = '/t/gaming';\n            } else if (Imgur.Environment.image.topic && Imgur.Environment.image.topic !== 'No Topic' && referer.host.match(/imgur(-dev)?.com/g) === null) {\n                section = 'tag';\n                source = '/t/' + Imgur.Environment.image.topic.replace(/ /g, '_');\n            }\n        }\n\n        if (Imgur.Environment.searchQuery) {\n            section = 'search';\n        }\n\n        return {\n            source: source || this.props.env.baseURL,\n            section: section || this.props.env.section || 'hot',\n            sort: this.props.env.sort || 'viral',\n            window: this.props.env.window || 'day',\n            page: this.props.env.page || 0\n        };\n    },\n\n    changeLayout: function changeLayout(layout) {\n        var newScrollPosition = this.state.scrollTop / (this.ROW_HEIGHT[this.state.layout] / this.ITEMS_PER_ROW[this.state.layout]) * (this.ROW_HEIGHT[layout] / this.ITEMS_PER_ROW[layout]);\n        this.setState({\n            layout: layout\n        }, function () {\n            this.el.$content.scrollTop(newScrollPosition);\n        });\n        Imgur.LocalStorage.save('sidegallery_layout_experiment', layout);\n        Imgur.Util.jafoLog({\n            event: 'sideGalleryLayout',\n            meta: {\n                layout: layout\n            }\n        });\n    },\n\n    ajaxSuccess: function ajaxSuccess(results) {\n        this.isLoading = false;\n        if (this.isMounted()) {\n            var prevLength = this.state.items.length;\n            this.setState({\n                items: _.uniq(this.state.items.concat(results.data), false, function (item) {\n                    return item.hash;\n                })\n            }, function () {\n                this.checkEndReached(results.data.length);\n\n                // use captionsEnabled to prevent non-gallery images / albums from being inserted into the sidegallery so users don't get creeped out about privacy\n                if (!this.currentInserted && Imgur.Environment.captionsEnabled && Imgur.Environment.image) {\n                    this.insertSingleItem(Imgur.Environment.image, 0, true);\n                    this.currentInserted = true;\n                }\n\n                if (results.data.length > 0) {\n                    this.props.emitter.trigger('sidegalleryPageLoad', prevLength === 0 ? 'initial' : 'append');\n                }\n\n                if (this.props.variation == 'control-no-pp' && Imgur.Experiments.isActive('expT4377')) {\n                    this.recommendations.fetchControl();\n                }\n            }.bind(this));\n        }\n    },\n\n    onScroll: function onScroll() {\n        var scrollPos = this.el.$content.scrollTop();\n        this.setState({\n            scrollTop: scrollPos\n        }, this.checkScrollPageNeeded);\n    },\n\n    checkEndReached: function checkEndReached(resultsLength) {\n        if (resultsLength === 0 || this.listHeight() < this.HEIGHT) {\n            this.setState({\n                endReached: true\n            });\n        }\n    },\n\n    checkScrollPageNeeded: function checkScrollPageNeeded() {\n        if (this.state.scrollTop > this.listHeight() - this.FETCH_MORE_BUFFER && !this.isLoading) {\n            this.setState({\n                page: this.state.page + 1\n            }, this.loadPage);\n        }\n    },\n\n    listHeight: function listHeight() {\n        return Math.ceil(this.state.items.length / this.ITEMS_PER_ROW[this.state.layout]) * this.ROW_HEIGHT[this.state.layout];\n    },\n\n    itemOffset: function itemOffset(zeroIndex) {\n        // this is approximate - don't use this anywhere you need a reliable offset, because adblock removes some elements from the DOM.\n        // todo: if we can reliably determine if the user is using adblock and know how many ads have been inserted, this can be fixed.\n        return Math.ceil((zeroIndex + 1) / this.ITEMS_PER_ROW[this.state.layout]) * this.ROW_HEIGHT[this.state.layout] - this.ROW_HEIGHT[this.state.layout];\n    },\n\n    loadPage: function loadPage() {\n        if (this.state.endReached) {\n            return false;\n        }\n\n        var params = {};\n        this.isLoading = true;\n\n        $.ajax({\n            url: this.generateURL(),\n            data: params,\n            success: this.ajaxSuccess,\n            error: this.switchToViral\n        });\n    },\n\n    generateURL: function generateURL() {\n        var url;\n\n        if (Imgur.Environment.image.is_ad) {\n            // hard override for Promoted Posts to prevent uncensored UGC from showing up in the right rail\n            return '/t/Staff_Picks/viral/page/0/hit.json';\n        } else if (Imgur.Environment.searchQuery) {\n            var search = Imgur.getInstance().getSearchUrl(Imgur.Environment, this.state.page, true);\n            url = search.url + '?' + search.query;\n        } else {\n            var section = this.state.section && this.state.section != 'group' && this.state.section != 'tag' && this.state.section != 'favorites' && this.state.section != 'topic' && this.state.section != 'subreddit' ? '/' + this.state.section : '';\n            var sort = this.state.section != 'top' ? this.state.sort + '/' : '';\n            var window = this.state.sort == 'top' || this.state.section == 'top' ? this.state.window + '/' : '';\n\n            // override cache value if user is on the default sort, page 0 or 1, and the backend says we haven't voted / faved anything in the past 24 hours\n            var cache = this.props.cache;\n            if (this.state.source + section + '/' + sort + window == '/gallery/hot/viral/' && (this.state.page == 0 || this.state.page == 1) && !this.props.votedFavedRecently) {\n                cache = '/hit.json' + (this.props.showMature ? '?mature' : '');\n            }\n\n            url = this.state.source + section + '/' + sort + window + 'page/' + this.state.page + cache;\n        }\n\n        return url;\n    },\n\n    switchToViral: function switchToViral() {\n        if (this.state.section != 'hot' || this.state.sort != 'viral' || this.state.window != 'day') {\n            this.setState({\n                items: [],\n                page: 0,\n                section: 'hot',\n                sort: 'viral',\n                window: 'day',\n                source: '/gallery',\n                endReached: false,\n                selectedHash: null\n            }, this.loadPage);\n        }\n    },\n\n    nthFromHash: function nthFromHash(distance, startHash) {\n        var pos = this.hashPosition(startHash),\n            target = pos + distance;\n\n        if (pos === -1) return;\n\n        if (target >= this.state.items.length) {\n            target = this.state.items.length - 1;\n        }\n\n        return this.state.items[target].hash;\n    },\n\n    insertSingleItem: function insertSingleItem(item, position, shouldSelectImage, trigger, callback) {\n        trigger = trigger || 'inserted';\n\n        // post is already in sidegallery\n        if (this.hashPosition(item.hash) !== -1) {\n            shouldSelectImage ? this.selectImage(item.hash, null, 'direct', trigger) : null;\n\n            // for recommendations\n            typeof callback == \"function\" && callback();\n\n            return false;\n        }\n\n        while (this.state.items[position] && this.state.items[position].recommended) {\n            position++;\n        }\n\n        this.state.items.splice(position, 0, item);\n        this.setState({\n            items: this.state.items\n        }, function () {\n            if (shouldSelectImage) {\n                this.selectImage(item.hash, null, 'direct', trigger);\n            }\n\n            // for recommendations\n            typeof callback == \"function\" && callback();\n        });\n    },\n\n    selectedPosition: function selectedPosition() {\n        return this.hashPosition(this.state.selectedHash);\n    },\n\n    hashPosition: function hashPosition(hash) {\n        return this.state.items.map(function (item) {\n            return item.hash;\n        }).indexOf(hash);\n    },\n\n    selectImage: function selectImage(hash, isPopState, direction, trigger) {\n        this.setState({\n            selectedHash: hash,\n            scrollToHash: hash\n        }, function () {\n            var itemPos = this.hashPosition(hash);\n\n            if (itemPos === -1) {\n                if (Imgur.Environment.image && hash === Imgur.Environment.image.hash) {\n                    this.props.emitter.trigger('select', Imgur.Environment.image, isPopState, direction, trigger);\n                }\n                return;\n            }\n\n            // for recommendations\n            this.sendCxensePageView();\n\n            var item = this.state.items[itemPos];\n            this.props.emitter.trigger('select', item, isPopState, direction, trigger);\n\n            if (itemPos == 0) {\n                this.props.emitter.trigger('firstImage', item, false);\n            } else if (itemPos == this.state.items.length - 1) {\n                this.props.emitter.trigger('lastImage', item, false);\n            }\n        });\n    },\n\n    // for recommendations\n    sendCxensePageView: function sendCxensePageView() {\n        this.cxensePageViewCount++;\n        if (this.cxensePageViewCount === 1) {\n            // don't report on the first page view as this is done by their script when it loads.\n            return;\n        }\n\n        // wrapped in a try catch in case cX isn't initialized or their script failed to load in some other way\n        try {\n            // Initialize the tracking for this new page\n            cX.initializePage();\n\n            // Send a pageview event for this new page:\n            cX.setSiteId('1141841818742508432'); // imgur site id\n            cX.sendPageViewEvent();\n        } catch (e) {}\n    },\n\n    getImage: function getImage(hash) {\n        if (!this.currentInserted && Imgur.Environment.image && Imgur.Environment.image.hash === hash) {\n            // Image was not inserted into stream\n            return Imgur.Environment.image;\n        }\n\n        return this.state.items[this.hashPosition(hash)];\n    },\n\n    getNextImage: function getNextImage(skip) {\n        var nextIndex = this.hashPosition(this.state.selectedHash) + 1;\n\n        if (skip) {\n            nextIndex += skip;\n        } else {\n            skip = 0;\n        }\n\n        if (nextIndex < this.state.items.length) {\n            var item = this.state.items[nextIndex];\n\n            if (item.vote === 'down' || item.nextable === false) {\n                return this.getNextImage(++skip);\n            } else {\n                return item.hash;\n            }\n        }\n\n        return false;\n    },\n\n    getPrevImage: function getPrevImage(skip) {\n        var prevIndex = this.hashPosition(this.state.selectedHash) - 1;\n\n        if (skip) {\n            prevIndex -= skip;\n        } else {\n            skip = 0;\n        }\n\n        if (prevIndex >= 0) {\n            var item = this.state.items[prevIndex];\n\n            if (item.vote === 'down' || item.nextable === false) {\n                return this.getPrevImage(++skip);\n            } else {\n                return item.hash;\n            }\n        }\n\n        return false;\n    },\n\n    getSection: function getSection() {\n        return this.state.section;\n    },\n\n    componentDidMount: function componentDidMount() {\n        if (this.props.display === false) return;\n        this.loadPage();\n        this.bindMouseMove();\n\n        //bind onScroll event for lazy loading / fetching\n        var throttledScroll = _.throttle(_.bind(this.onScroll, this), 500);\n        this.el.$sideGallery = $(ReactDOM.findDOMNode(this));\n        this.el.$content = this.el.$sideGallery.find('.content');\n        this.el.$nano = this.el.$sideGallery.find('.content');\n        this.el.$content.scroll(throttledScroll);\n\n        //set up emitters\n        this.props.emitter.on('keyboardNav', this, _.partialRight(this.nav, 'keyboard'));\n        this.props.emitter.on('buttonNav', this, _.partialRight(this.nav, 'click'));\n    },\n\n    bindMouseMove: function bindMouseMove() {\n        var x,\n            y = 0;\n        var barWidth = Imgur.Util.getBrowserScrollbarWidth();\n        var imageContainer = $('#side-gallery').find('.content')[0];\n\n        var move = function (e) {\n            var $target = $(e.target);\n            var inScrollArea = $target.closest('.scroll-content').length;\n            var xDelta = Math.abs(e.clientX - x);\n            var yDelta = Math.abs(e.clientY - y);\n\n            if ((xDelta > 5 || yDelta > 5) && inScrollArea) {\n                // If you moved the mouse more than 5px and are in the scroll area\n                imageContainer.style.overflowY = 'scroll';\n            } else if (!inScrollArea) {\n                // If you used the scroll wheel outside of the scroll area\n                imageContainer.style.overflowY = 'hidden';\n            }\n\n            x = e.clientX;\n            y = e.clientY;\n        }.bind(this);\n\n        $('body').mousemove(_.throttle(move, 20));\n    },\n\n    nav: function nav(action, trigger) {\n        var hash;\n        switch (action) {\n            case 'next':\n                hash = this.getNextImage();\n                break;\n            case 'prev':\n                hash = this.getPrevImage();\n                break;\n        }\n\n        if (hash) {\n            this.selectImage(hash, undefined, action, trigger);\n        }\n\n        return false;\n    },\n\n    updatePoints: function updatePoints(hash, ups, downs) {\n        var pos = this.hashPosition(hash);\n\n        if (pos === -1) {\n            return;\n        }\n\n        var item = this.state.items[pos];\n        item.ups = ups;\n        item.downs = downs;\n        item.points = ups - downs;\n        this.setState({\n            items: this.state.items\n        });\n    },\n\n    updateVote: function updateVote(hash, vote, callback) {\n        var pos = this.hashPosition(hash);\n        if (pos === -1) {\n            return false;\n        }\n        var item = this.state.items[pos];\n\n        //cancel out old vote\n        switch (item.vote) {\n            case 'up':\n                item.ups--;break;\n            case 'down':\n                item.downs--;break;\n        }\n\n        //update ups / downs based on new vote\n        switch (vote) {\n            case 'up':\n                item.ups++;break;\n            case 'down':\n                item.downs++;break;\n        }\n\n        item.vote = vote;\n        item.points = item.ups - item.downs;\n        this.setState({\n            items: this.state.items\n        });\n\n        callback(item.points);\n    },\n\n    updateFavorite: function updateFavorite(hash, favorited) {\n        this.state.items[this.hashPosition(hash)].favorited = favorited;\n        this.setState({\n            items: this.state.items\n        });\n    },\n\n    shouldComponentUpdate: function shouldComponentUpdate() {\n        return true; //todo compare scroll pos\n    },\n\n    componentDidUpdate: function componentDidUpdate(prevProps, prevState) {\n        if (prevState.items.length !== this.state.items.length || prevState.layout !== this.state.layout) {\n            this.el.$sideGallery.find('.nano').nanoScroller();\n        }\n        if (prevState.scrollToHash !== this.state.scrollToHash) {\n            this.scrollToHash(this.state.scrollToHash);\n        }\n    },\n\n    scrollToHash: function scrollToHash(hash) {\n        var DOMitem = ReactDOM.findDOMNode(this.refs[hash]);\n        if (DOMitem) {\n            this.el.$content.stop().animate({\n                scrollTop: DOMitem.offsetTop - this.SELECTED_OFFSET\n            });\n        }\n    },\n\n    render: function render() {\n        if (this.props.display === false) return false;\n\n        var items = [];\n        var itemProps;\n        var shouldRender;\n        var itemOffset;\n        var endMarkup;\n        var thumb;\n        var prevItem;\n        var item;\n        var renderBounds = {\n            min: this.state.scrollTop - this.RENDER_BUFFER,\n            max: this.state.scrollTop + this.HEIGHT + this.RENDER_BUFFER\n        };\n\n        //determine sidegallery title and subtitle based on section, sort, and window\n        var title;\n        var subtitle;\n        switch (this.state.section) {\n            case 'subreddit':\n                title = Imgur.Environment.image.subreddit;break;\n            case 'topic':\n                title = Imgur.Environment.image.topic;break;\n            case 'tag':\n                title = Imgur.Environment.tag;break;\n            case 'search':\n                title = 'Searching ' + Imgur.Environment.searchQuery;\n                switch (this.state.sort) {\n                    case 'relevance':\n                        subtitle = 'most relevant from ' + this.windowTitles[this.state.window];break;\n                    case 'score':\n                        subtitle = 'highest scoring from ' + this.windowTitles[this.state.window];break;\n                }\n                break;\n            case 'favorites':\n                var username = Imgur.Environment.favs_account_url || Imgur.Environment.auth.url;\n                var usernameWithInflection = username.substr(-1) == 's' ? username + \"'\" : username + \"'s\";\n                title = React.createElement(\n                    'span',\n                    null,\n                    React.createElement(\n                        'span',\n                        { className: 'sg-username' },\n                        usernameWithInflection\n                    ),\n                    ' Favorites'\n                );\n                subtitle = this.sortTitles[this.state.sort];\n                break;\n            case 'top':\n                title = this.sectionTitles[this.state.section];\n                subtitle = 'from ' + this.windowTitles[this.state.window]; // sort is still 'viral' here, so don't use usual subtitle logic\n                break;\n            default:\n                //hot, new, custom:\n                title = this.sectionTitles[this.state.section];\n                break;\n        }\n        subtitle = subtitle || (this.state.sort == 'top' ? 'from ' + this.windowTitles[this.state.window] : this.sortTitles[this.state.sort]);\n\n        // build a list of items in the sidegallery\n        for (var i = 0; i < this.state.items.length; i++) {\n            item = this.state.items[i];\n            prevItem = this.state.items[i - 1];\n            itemOffset = this.itemOffset(i);\n            shouldRender = itemOffset > renderBounds.min && itemOffset < renderBounds.max;\n\n            if (shouldRender) {\n                if (item.thumb) {\n                    thumb = item.thumb;\n                } else {\n                    thumb = Imgur.Environment.cdnUrl + '/' + (item.is_album ? item.album_cover : item.hash) + 'b.jpg';\n                }\n            } else {\n                thumb = 'data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==';\n            }\n\n            itemProps = _.extend({}, item, {\n                thumb: thumb,\n                selected: item.hash === this.state.selectedHash,\n                selectImage: this.selectImage,\n                shouldRender: shouldRender,\n                layout: this.state.layout,\n                position: i + 1\n            });\n\n            items.push(React.createElement(Imgur.SideGalleryItem, _extends({ ref: this.state.items[i].hash, key: this.state.items[i].hash }, itemProps)));\n        }\n\n        //show loading icon or end prompt\n        endMarkup = this.state.endReached ? React.createElement(\n            'div',\n            { className: 'sidegallery-end' },\n            'You have reached the end of this stream. Continue browsing ',\n            React.createElement(\n                'a',\n                { className: 'link', onClick: this.switchToViral },\n                'Most Viral'\n            )\n        ) : React.createElement('div', { className: 'sidegallery-end loading' });\n\n        // render\n        return React.createElement(\n            'div',\n            null,\n            React.createElement(\n                'div',\n                { className: 'sg-header' },\n                React.createElement(\n                    'a',\n                    { className: 'sg-title-container', href: this.state.source },\n                    React.createElement(\n                        'h2',\n                        { className: 'sg-title' },\n                        title\n                    ),\n                    subtitle ? React.createElement(\n                        'h3',\n                        { className: 'sg-subtitle' },\n                        subtitle\n                    ) : null\n                ),\n                React.createElement(\n                    'div',\n                    { className: 'layout-options' },\n                    React.createElement(\n                        'a',\n                        { className: classNames({ 'layout-button': true, 'selected': this.state.layout == 'list' }), onClick: this.changeLayout.bind(this, 'list') },\n                        React.createElement('span', { className: 'icon-right-list' })\n                    ),\n                    React.createElement(\n                        'a',\n                        { className: classNames({ 'layout-button': true, 'selected': this.state.layout == 'grid' }), onClick: this.changeLayout.bind(this, 'grid') },\n                        React.createElement('span', { className: 'icon-grid' })\n                    )\n                )\n            ),\n            React.createElement(\n                'div',\n                { className: 'nano' },\n                React.createElement(\n                    'div',\n                    { className: 'content scroll-content cf' },\n                    React.createElement(\n                        'div',\n                        { className: classNames({ 'items': true, 'grid': this.state.layout == 'grid', 'list': this.state.layout == 'list' }) },\n                        items\n                    ),\n                    endMarkup\n                )\n            ),\n            React.createElement('div', { className: 'fade-out' })\n        );\n    }\n});\n//# sourceMappingURL=sidegallery.js.map\n","Namespace('Imgur.SideGalleryItem');\n\nImgur.SideGalleryItem = React.createClass({\n    displayName: 'SideGalleryItem',\n\n    mixins: [React.addons.PureRenderMixin],\n\n    handleClick: function handleClick(event) {\n        if (event.button === 1) return; //if middle click, do nothing\n\n        this.props.selectImage(this.props.hash, false, 'targeted', 'click');\n        event.preventDefault();\n    },\n\n    getWidePromotedThumb: function getWidePromotedThumb() {\n        return React.createElement(\n            'a',\n            { className: this.getThumbClasses('PromotedGridItem PromotedGridItem-wide left'), id: this.getThumbId(), style: this.getThumbStyles(this.props.thumbnail_json.hash), onClick: this.handleClick, href: this.getHref(), title: this.props.title },\n            this.getVoteMarkup(),\n            React.createElement(\n                'div',\n                { className: 'PromotedGridItem-textContainer' },\n                React.createElement(\n                    'p',\n                    { className: 'PromotedGridItem-op font-opensans-bold' },\n                    this.props.account_url\n                ),\n                React.createElement(\n                    'p',\n                    { className: 'PromotedGridItem-text' },\n                    this.props.thumbnail_json.title || this.props.title\n                )\n            )\n        );\n    },\n\n    getHref: function getHref() {\n        if (this.props.in_gallery) {\n            return '/gallery/' + this.props.hash;\n        }\n\n        return (this.props.is_album ? '/a/' : '/') + this.props.hash;\n    },\n\n    getThumbStyles: function getThumbStyles(hash) {\n        var thumbUrl = hash ? Imgur.Environment.cdnUrl + '/' + hash + '.jpg' : this.props.thumb;\n        return {\n            backgroundImage: 'url(' + thumbUrl + ')'\n        };\n    },\n\n    getThumbClasses: function getThumbClasses(customClasses) {\n        var classes = {\n            'sg-item': true,\n            'selected': this.props.selected,\n            'recommended': this.props.recommended,\n            'base': !this.props.recommended,\n            'grid': this.props.layout === 'grid',\n            'list': this.props.layout === 'list',\n            'up': this.props.vote === 'up',\n            'down': this.props.vote === 'down',\n            'promoted': this.props.isAd && !this.props.isCta,\n            'sg-cta': this.props.isCta\n        };\n\n        if (this.props.className) {\n            classes[this.props.className] = true;\n        }\n\n        if (customClasses) {\n            classes[customClasses] = true;\n        }\n\n        return classNames(classes);\n    },\n\n    getVoteMarkup: function getVoteMarkup() {\n        var voteClass = classNames({\n            'sg-item-vote': true,\n            'icon-upvote-fill': this.props.vote === 'up',\n            'icon-downvote-fill': this.props.vote === 'down'\n        });\n\n        return this.props.shouldRender && this.props.vote ? React.createElement('div', { className: voteClass }) : null;\n    },\n\n    renderItemStats: function renderItemStats() {\n        return React.createElement(\n            'div',\n            { className: 'sg-item-stats' },\n            !_.isUndefined(this.props.points) ? React.createElement('span', { className: 'icon-upvote-outline' }) : null,\n            !_.isUndefined(this.props.points) ? React.createElement(\n                'span',\n                { className: 'sg-item-count' },\n                Imgur.Util.numberFormat(this.props.points)\n            ) : null,\n            !_.isUndefined(this.props.comment_count) ? React.createElement('span', { className: 'icon-messages' }) : null,\n            !_.isUndefined(this.props.comment_count) ? React.createElement(\n                'span',\n                { className: 'sg-item-count' },\n                Imgur.Util.numberFormat(this.props.comment_count)\n            ) : null\n        );\n    },\n\n    getThumbId: function getThumbId() {\n        return 'item-' + this.props.hash;\n    },\n\n\n    render: function render() {\n        var isWidePromoted = this.props.isAd && this.props.thumbnail_json && this.props.thumbnail_json.size === '288x141',\n            isGrid = this.props.layout === 'grid';\n\n        if (isWidePromoted && isGrid) {\n            return this.getWidePromotedThumb();\n        }\n\n        // Pass in thumbnail hash if Promoted post has a custom hash set.\n        var style = this.getThumbStyles(this.props.isAd && this.props.thumbnail_json && this.props.thumbnail_json.hash);\n        var imageTagMarkup = this.props.isAd ? React.createElement(\n            'div',\n            { className: 'sg-item-tag' },\n            'PROMOTED'\n        ) : this.props.shouldRender && this.props.num_images > 1 ? React.createElement(\n            'div',\n            { className: 'sg-item-tag' },\n            this.props.num_images\n        ) : null;\n\n        if (this.props.isCta) {\n            return React.createElement('a', { className: this.getThumbClasses(), title: this.props.title, style: style, onClick: this.handleClick, href: this.getHref() });\n        } else if (isGrid) {\n            var title = this.props.shouldRender ? React.createElement(\n                'div',\n                { className: 'sg-item-title' },\n                this.props.title\n            ) : null;\n\n            return React.createElement(\n                'a',\n                { className: this.getThumbClasses(), id: this.getThumbId(), title: this.props.title, style: style, onClick: this.handleClick, href: this.getHref() },\n                this.getVoteMarkup(),\n                imageTagMarkup,\n                title\n            );\n        } else {\n            return React.createElement(\n                'a',\n                { className: this.getThumbClasses(), id: this.getThumbId(), onClick: this.handleClick, href: this.getHref() },\n                React.createElement(\n                    'div',\n                    { className: 'sg-list-image', style: style },\n                    imageTagMarkup\n                ),\n                React.createElement(\n                    'div',\n                    { className: 'sg-list-metadata' },\n                    React.createElement(\n                        'div',\n                        { className: 'sg-list-title' },\n                        this.props.title\n                    )\n                )\n            );\n        }\n    }\n});\n//# sourceMappingURL=sidegalleryitem.js.map\n","Namespace('Imgur.ReportBadAds');\n\nImgur.ReportBadAds = React.createClass({\n    displayName: 'Report-Bad-Ads',\n    thanksMessage: 'Thanks! This ad has been reported.',\n\n    componentDidMount: function componentDidMount() {\n        runSlots.adRefresh = false;\n        this.adInfoAtTimeOfReport = JSON.parse(JSON.stringify(runSlots.currentAdInfo)); //deep clone the ad info to preserve data at time of report\n    },\n\n    getInitialState: function getInitialState() {\n        return {\n            name: '',\n            value: '' };\n    },\n\n    handleSubmit: function handleSubmit(e) {\n        e.preventDefault();\n        e.stopPropagation();\n\n        var slotname = this.refs.form.elements[\"slotname\"].value;\n        var adInfo = this.adInfoAtTimeOfReport[slotname] ? this.adInfoAtTimeOfReport[slotname] : 'generic-report-' + slotname;\n\n        $.ajax({\n            url: '/report-badads',\n            method: 'POST',\n            data: {\n                slot_name: slotname,\n                qqid: adInfo.qqid,\n                adid: adInfo.adid,\n                bidder: adInfo.bidder,\n                cpm: adInfo.cpm,\n                oxb: adInfo.oxb,\n                comments: this.refs.comments.value\n            },\n            success: function () {\n                humanMsg.displayMsg(this.thanksMessage);\n            }.bind(this),\n            error: function error(res) {\n                humanMsg.displayMsg(res.error, 'error-msg');\n            }\n        });\n\n        this.unmount();\n    },\n\n    unmount: function unmount() {\n        ReactDOM.unmountComponentAtNode(ReactDOM.findDOMNode(this).parentNode);\n    },\n\n    stopPropagation: function stopPropagation(e) {\n        e.stopPropagation();\n    },\n\n    render: function render() {\n        return React.createElement(\n            'div',\n            { className: 'modal-backdrop', onClick: this.unmount },\n            React.createElement(\n                'form',\n                { onSubmit: this.handleSubmit, onClick: this.stopPropagation, ref: 'form' },\n                React.createElement(\n                    'div',\n                    { className: 'modal bad-ads-modal' },\n                    React.createElement(\n                        'div',\n                        { className: 'bad-ads-modal-header' },\n                        React.createElement(\n                            'h2',\n                            { className: 'headline' },\n                            'Report Ad'\n                        ),\n                        React.createElement('div', { className: 'icon-x', onClick: this.unmount })\n                    ),\n                    React.createElement(\n                        'div',\n                        { className: 'bad-ads-modal-body' },\n                        React.createElement(\n                            'p',\n                            null,\n                            'See an ad that may violate our ',\n                            React.createElement(\n                                'a',\n                                { href: 'https://help.imgur.com/hc/en-us/articles/205107685-Bad-ads' },\n                                'advertising guidelines'\n                            ),\n                            '? It\\u2019s easy to report it using this form.'\n                        ),\n                        React.createElement(\n                            'p',\n                            null,\n                            'Please indicate the location of the ad:'\n                        ),\n                        React.createElement('div', { className: 'bad-ads-layouts' }),\n                        React.createElement(\n                            'radiogroup',\n                            null,\n                            React.createElement(\n                                'label',\n                                { className: 'radio' },\n                                React.createElement('input', { type: 'radio', name: 'slotname', value: 'top_banner' }),\n                                'Upper Left'\n                            ),\n                            React.createElement(\n                                'label',\n                                { className: 'radio' },\n                                React.createElement('input', { type: 'radio', name: 'slotname', value: 'under_sidebar' }),\n                                'Middle Right'\n                            ),\n                            React.createElement(\n                                'label',\n                                { className: 'radio' },\n                                React.createElement('input', { type: 'radio', name: 'slotname', value: 'pop_sky' }),\n                                'Lower Right'\n                            )\n                        ),\n                        React.createElement('textarea', { className: 'bad-ads-comments', ref: 'comments', placeholder: 'Please provide us with additional context for your submission' }),\n                        React.createElement('input', { type: 'submit', value: 'Report', className: 'btn-action btn-large right' })\n                    )\n                )\n            )\n        );\n    }\n});\n//# sourceMappingURL=report-bad-ads.js.map\n","Namespace('Imgur.ShareButtons');\n\nImgur.ShareButtons = Imgur.extend({\n    init: function(params) {\n        this._ = $.extend({\n            resetUrl         : false,\n            shareButtonClass : 'addthis_button',\n            addthisTimeout   : null,\n            shareData: {\n                title: null,\n                url: null,\n                jafoMeta: {}\n            },\n            globalShareData: null\n        }, params);\n        this._super(this._);\n        \n        this.bindButtons();\n    },\n\n    elements : {\n        $social: $(\".social\")\n    },\n\n    getAddthisConfig: function() {\n        return {\n            pubid: 'imgur',\n            username: 'imgur',\n            ui_click: true,\n            ui_header_color: '#181817',\n            ui_header_background: '#ddddd1',\n            ui_offset_top: '0px',\n            ui_open_windows: true,\n            data_ga_property: 'UA-6671908-2',\n            data_ga_tracker: window._gaq,\n            data_track_clickback : false,\n            data_ga_social : true,\n            services_compact: 'stumbleupon,google_plusone_share,pinterest_share,tumblr,email,gmail',\n            services_exclude: 'facebook,reddit',\n            share: {\n                url: this._.shareData.url,\n                title: this.getShareTitle()\n            }\n        };\n    },\n\n    initAddthis: function(openMenu) {\n        if(typeof window.addthis_config === 'undefined') {\n            window.addthis_config = this.getAddthisConfig();\n    \n            $.getScript(location.protocol+'//s7.addthis.com/js/300/addthis_widget.js#pubid=imgur&domready=1', _.bind(function() {\n                this.setupAddthis();\n                \n                if(openMenu) {\n                    var openFunc = function(e) { $('.addthis_button').click(); }\n                    \n                    window.addthis.addEventListener('addthis.ready', openFunc);\n                    this._.addthisTimeout = setTimeout(openFunc, 400);\n                }\n            }, this), true);\n        }\n    },\n\n    setShareData: function(data, options) {\n        options = _.merge({\n            global: false,\n        }, options);\n\n        if (options.global) {\n            this._.globalShareData = data;\n        }\n\n        this._setShareData(data);\n    },\n\n    resetShareData: function() {\n        if (this._.globalShareData) {\n            this._setShareData(this._.globalShareData)\n        }\n\n        if (!this._.shareData.url) {\n            this._.shareData.url = this._.protocol + '//' + this._.host + this._.url;\n        }\n    },\n\n    _setShareData: function(data) {\n        this._setJafoMeta(data.jafoMeta);\n        this._setShareTitle(data.title);\n        this._setUrl(data.url);\n    },\n\n    _setJafoMeta: function(value) {\n        this._.shareData.jafoMeta = value;\n    },\n\n    _setShareTitle: function(title) {\n        if (!title) {\n            title = document.title;\n        }\n        title = title.replace(/\\s*\\- (?:Album on )?Imgur$/, '');\n        this._.shareData.title = title;\n        if('addthis' in window && 'update' in window.addthis) {\n            window.addthis.update('share', 'title', title);\n        }\n    },\n\n    _setUrl: function(url) {\n        this._.shareData.url = url;\n        \n        if('addthis' in window && 'update' in window.addthis) {\n            window.addthis.update('share', 'url', url);\n        }\n    },\n\n    bindButtons: function() {\n        this._.shareData.url = (this._.shareData.url) ? this._.shareData.url : this._.protocol + '//' + this._.host + this._.url;\n        this.elements.$social.unbind('click');\n        this.elements.$social.on('click', 'li span[data-jshook]', _.bind(function(e) {\n            var service;\n\n            // Sharing a comment changes the share data. \n            // Post share buttons should reset to the post share data.\n            this.resetShareData();\n\n            switch (e.currentTarget.getAttribute('data-jshook')) {\n                case 'twitter_custom':\n                    this.shareTwitter();\n                    break;\n                case 'facebook_custom':\n                    this.shareFacebook();\n                    break;\n                case 'reddit_custom':\n                    this.shareReddit();\n                    break;\n                case 'digg_custom':\n                    this.shareDigg();\n                    break;\n                case 'tumblr_custom':\n                    this.shareTumblr();\n                    break;\n                case 'stumbleupon_custom':\n                    this.shareStumbleupon();\n                    break;\n                case 'googleplus_custom':\n                    this.shareGoogleplus();\n                    break;\n                case 'pinterest_custom':\n                    this.sharePinterest();\n                    break;\n                case 'st_email_custom':\n                    this.shareEmail();\n                    break;\n                case 'addthis_custom':\n                    this.shareAddthis();\n                    break;\n            }\n        }, this));\n        \n        $(document.body).on('hover', '.addthis_button', _.bind(function() {\n            this.initAddthis();\n        }, this));\n    },\n\n    bindAddthisButton: function() {\n        try {\n            window.addthis.button('.'+this._.shareButtonClass);\n        } catch(e) {}\n    },\n\n    setupAddthis: function() {\n        try {\n            window.addthis.ost = 0;\n            \n            window.addthis.addEventListener('addthis.menu.open', _.bind(function(e) {\n                this.addthisOpen(e);\n            }, this));\n            \n            window.addthis.addEventListener('addthis.menu.share', _.bind(function(e) {\n                // Handle AddThis's internal share and share.track'd custom shares\n                this.logSharePostAddthis(e.data.service);\n            }, this));\n\n            window.addthis.ready();\n            clearTimeout(this._.addthisTimeout);\n        } catch (e) {\n            this._.addthisTimeout = setTimeout(_.bind(this.setupAddthis, this), 100);\n        }\n    },\n\n    addthisOpen: function(e) {\n        if(!e.data.share) { e.data.share = {}; }\n        e.data.share.url = this._.shareData.url;\n    },\n\n    logShare: function(service) {\n        if (this._.resetUrl) { this.resetShareData(); }\n        try {\n            addthis_share.url = this._.shareData.url;\n            window.addthis.share.track(service, 0, addthis_share, window.addthis_config);\n        } catch (e) {\n            this.logSharePostAddthis(service);\n        }\n    },\n\n    logSharePostAddthis: function(service) {\n        var url = this._.shareData.url;\n\n        switch (service) {\n            case 'google_plusone_share':\n                service = 'googleplus';\n                break;\n            default:\n                // Remove _share suffix, specifically from pinterest\n                service = service.replace(/_share$/, '');\n                break;\n        }\n\n        if(this._.shareData.jafoMeta.hash) {\n            $.post('//'+this._.host+'/share/share', {hash: this._.shareData.jafoMeta.hash});\n        }\n        var url = this._.shareData.url;\n\n        Imgur.Util.jafoLog({\n            event: 'share',\n            meta: _.merge({\n                shareTo: service\n           }, this._.shareData.jafoMeta)\n        });\n\n        try {\n            Imgur.Util.getGoogleTracker();\n            if (typeof __ga === 'function') {\n                __ga('send', 'social', service, 'share', url);\n            }\n        } catch(e) { }\n    },\n\n    getShareTitle: function() {\n        if (!this._.shareData.title) {\n            this._setShareTitle();\n        }\n\n        return this._.shareData.title;\n    },\n    \n    shareTwitter: function() {\n        this.logShare('twitter');\n        Imgur.Util.newWindow('http://twitter.com/share?url=' + encodeURIComponent(this._.shareData.url) + '&text=' + encodeURIComponent(this.getShareTitle()) + '&via=imgur', 550, 425);\n    },\n\n    shareFacebook: function() {\n        this.logShare('facebook');\n        Imgur.Util.newWindow('http://www.facebook.com/sharer.php?u=' + encodeURIComponent(this._.shareData.url), 755, 425);\n    },\n\n    shareReddit: function() {\n        this.logShare('reddit');\n        Imgur.Util.newWindow('http://reddit.com/submit?url=' + encodeURIComponent(this._.shareData.url) + '&title=' + encodeURIComponent(this.getShareTitle()));\n    },\n\n    shareDigg: function() {\n        this.logShare('digg');\n        Imgur.Util.newWindow('http://digg.com/submit?phase=2&url=' + encodeURIComponent(this._.shareData.url), 1060, 655)\n    },\n\n    shareTumblr: function() {\n        this.logShare('tumblr');\n        var image = $('link[rel=\"image_src\"]').attr('href');\n\n        if(image) {\n            var url = 'http://www.tumblr.com/share/photo?source='+encodeURIComponent(image)+'&caption='+encodeURIComponent(this.getShareTitle())+'&click_thru='+encodeURIComponent(this._.shareData.url);\n        } else {\n            var url = 'http://www.tumblr.com/share/link?url='+encodeURIComponent(this._.shareData.url)+'&name='+encodeURIComponent(this.getShareTitle())+'&description='+encodeURIComponent($('meta[name=\"description\"]').attr('content'));\n        }\n\n        Imgur.Util.newWindow(url, 450, 430);\n    },\n\n    shareStumbleupon: function() {\n        this.logShare('stumbleupon');\n        Imgur.Util.newWindow('http://www.stumbleupon.com/submit?url=' + encodeURIComponent(this._.shareData.url), 1060, 500);\n    },\n    \n    shareGoogleplus: function() {\n        this.logShare('googleplus');\n        Imgur.Util.newWindow('https://plus.google.com/share?url=' + encodeURIComponent(this._.shareData.url), 520, 500);\n    },\n\n    sharePinterest: function () {\n        this.logShare('pinterest');\n        var image = $('link[rel=\"image_src\"]').attr('href');\n\n        Imgur.Util.newWindow('http://pinterest.com/pin/create/button/?url=' + encodeURIComponent(this._.shareData.url) + '&description=' + encodeURIComponent(this.getShareTitle()) + '&media=' + image, 800, 340);\n    },\n\n    shareEmail: function() {\n        // Do nothing, AddThis triggers everything\n    },\n\n    shareAddthis: function() {\n        this.initAddthis(true);\n    }\n\n});\n\nClass.addSingleton(Imgur.ShareButtons);\n","Namespace('Imgur.Caption');\n\nImgur.Caption = Imgur.extend({\n    sid : $('#sid').val(),\n\n    init : function(params) {\n        this._ = $.extend({\n            sid                 : Imgur.getInstance()._.sid,\n            auth_id             : Imgur.Environment.auth.id,\n            signed              : Imgur.Environment.signed,\n            baseURL             : '/gallery',\n            hash                : null,\n            popEventState       : 'comment',\n\n            el                      : {\n                $captions        : $('#captions')\n            },\n            $captions           : $('#captions'),\n\n            children            : 'children',\n            counterClass        : '.counter',\n            captionBarClass     : 'caption-bar',\n\n            commentName         : 'comment',\n\n            userCommentsClass   : '.comment-item',\n\n            mobile              : false,\n            showRepliesCount    : false,\n            captions            : { } // map hash -> { 'set': map id -> caption, 'parent': map id -> parent_id, 'votes': map caption id -> vote }\n        }, params);\n\n        this._super(this._);\n    },\n\n    setupHandlers : function() {\n        Imgur.ShareButtons.getInstance().bindButtons();\n    },\n\n    addDownvoteLimit : function() {\n        clearTimeout(this._.timeout);\n\n        $('.caption .arrow.down').unbind('click');\n        $('.caption .arrow.down').attr('title', 'Downvoting on this image has been disabled for one minute because you made a comment.');\n\n        $('.caption .arrow.down').tipsy({\n            'gravity' : 'nw',\n            'opacity' : 1\n        });\n    },\n\n    removeDownvoteLimit : function() {\n        var self = this;\n\n        $('.caption .arrow').unbind('click');\n        $('.caption .arrow.down').unbind('hover');\n        $('.tipsy').remove();\n\n        $('.caption .arrow.down').attr('title', 'dislike');\n        $('.caption .arrow').click(function(e) { self.vote(e); });\n    },\n\n    haveCaptionVotes : function(hash) {\n        return (hash in this._.captions && 'votes' in this._.captions[hash]);\n    },\n\n    haveCaptions : function(hash) {\n        return (hash in this._.captions && 'set' in this._.captions[hash]);\n    },\n\n    deleteCaption: function(hash, caption_id) {\n        if(!this.haveCaptions(hash)) {\n            return;\n        }\n\n        if(!(caption_id in this._.captions[hash].set)) {\n            return;\n        }\n\n        this._.captions[hash].set[caption_id].deleted = true;\n        this._.captions[hash].set[caption_id].just_deleted = true;\n    },\n\n    undeleteCaption: function(hash, caption_id) {\n        this._.captions[hash].set[caption_id].deleted = false;\n        this._.captions[hash].set[caption_id].just_deleted = false;\n    },\n\n    getCaptionDepthById : function(hash, caption_id) {\n        // walk the parent relation upwards\n        caption_id = Number(caption_id);\n        if(this.haveCaptions(hash) && caption_id in this._.captions[hash].set) {\n            var visited = []; // detect circular relations\n            var level = 0;\n            var current_id = caption_id;\n\n            while(current_id != null && !(current_id in visited)) {\n                visited.push(current_id);\n\n                var parent = this._.captions[hash].set[current_id];\n\n                if(parent && parent.hasOwnProperty('depth')) {\n                    // this can be false if e.g. the parent becomes spam\n                    return level + parent.depth;\n                }\n\n                current_id = this._.captions[hash].parent[current_id];\n                level++;\n            }\n\n            return level-1;\n        }\n    },\n\n    countComments: function(hash) {\n        if(this.haveCaptions(hash)) {\n            return Object.keys(this._.captions[hash].set).length;\n        }\n\n        return null;\n    },\n\n    getCaptionRepliesById: function(hash, caption_id) {\n        caption_id = Number(caption_id);\n\n        if(this.haveCaptions(hash) && caption_id in this._.captions[hash].set) {\n            return _.filter(_.values(this._.captions[hash].parent), function(parent_id) {\n                return parent_id === caption_id\n            }).length;\n        }\n    },\n\n    getCaptionById : function(hash, caption_id) {\n        caption_id = Number(caption_id);\n        if(this.haveCaptions(hash) && caption_id in this._.captions[hash].set) {\n            return this._.captions[hash].set[caption_id];\n        }\n        return null;\n    },\n\n    getCaptionPropertyById : function(hash, caption_id, property) {\n        caption_id = Number(caption_id);\n        if(this.haveCaptions(hash) && caption_id in this._.captions[hash].set) {\n            if(property in this._.captions[hash].set[caption_id]) {\n                return this._.captions[hash].set[caption_id][property];\n            }\n        }\n        return null;\n    },\n\n    getCaptionParentById : function(hash, caption_id) {\n        caption_id = Number(caption_id);\n        if(this.haveCaptions(hash) && caption_id in this._.captions[hash].parent) {\n            return this._.captions[hash].parent[caption_id];\n        }\n        return null;\n    },\n\n    getParentIds : function(hash) {\n        if(this.haveCaptions(hash)) {\n            return _.uniq(_.values(this._.captions[hash].parent));\n        } else {\n            return [];\n        }\n    },\n\n    getCaptionChildrenIds : function(hash, caption_id) {\n        caption_id = caption_id;\n\n        if(!this.haveCaptions(hash)) {\n            return [];\n        }\n\n        if(!(caption_id in this._.captions[hash].children)) {\n            return [];\n        }\n\n        return this._.captions[hash].children[caption_id];\n    },\n\n    getCaptionIdsByFilter : function(hash, filter) {\n        if(!this.haveCaptions(hash)) {\n            return [];\n        }\n        var accum = [];\n        jQuery.each(this._.captions[hash].set, function(caption_id, caption) {\n            if(filter(caption)) {\n                accum.push(caption_id);\n            }\n        });\n        return accum;\n    },\n\n    mergeCaptions : function(hash, captions, callback) {\n        var self = this;\n        if (!(hash in this._.captions)) {\n            self._.captions[hash] = {'set': {}, 'parent': {}, 'children': {}, 'votes': {}};\n        } else if (!('set' in this._.captions[hash])) {\n            //Don't overwrite votes object\n            self._.captions[hash].set = {};\n            self._.captions[hash].parent = {};\n            self._.captions[hash].children = {};\n        }\n        jQuery.each(captions, function(i, caption) {\n            caption.parent_id = Number(caption.parent_id);\n            caption.id = Number(caption.id);\n            caption.points = Number(caption.points);\n            // points determines whether it is in bad replies, but visible points is what the user sees\n            caption.visible_points = Number(caption.points);\n\n            if(caption.parent_id === 0) {\n                caption.parent_id = null;\n            }\n            \n            self._.captions[hash].set[caption.id] = caption;\n            self._.captions[hash].parent[caption.id] = caption.parent_id;\n\n            if(!(caption.parent_id in self._.captions[hash].children)) {\n                self._.captions[hash].children[caption.parent_id] = [];\n            }\n\n            if(caption.just_inserted) {\n                self._.captions[hash].children[caption.parent_id].unshift(caption.id);\n            } else {\n                self._.captions[hash].children[caption.parent_id].push(caption.id);\n            }\n        });\n\n        if(callback) {\n            callback();\n        }\n    },\n\n    mergeCaption : function(hash, caption) {\n        this.mergeCaptions(hash, [caption]);\n    },\n\n    /*\n     * Store the initial vote information. Use setVote to update the vote in tandem with the points\n     */\n    mergeVotes : function(hash, votes, callback) {\n        var self = this;\n        if(votes) {\n            if(!this.haveCaptionVotes(hash)) {\n                if(hash in this._.captions) {\n                    this._.captions[hash].votes = {};\n                } else {\n                    this._.captions[hash] = {'parent': {}, 'votes': {}};\n                }\n            }\n            jQuery.each(votes, function(i, vote) {\n                self._.captions[hash].votes[vote.caption_id] = vote.vote;\n            });\n            if(callback) {\n                callback();\n            }\n        }\n    },\n\n    getVotes: function(hash) {\n        if(this.haveCaptionVotes(hash)) {\n            return this._.captions[hash].votes;\n        }\n\n        return {};\n    },\n\n    /**\n     * Store the vote information, and update visible points with respect to the vote that may have been on the image before\n     */\n    setVote: function(hash, comment_id, vote) {\n        var old_vote = this._.captions[hash].votes[comment_id];\n\n        if(old_vote === undefined || old_vote === null) {\n            old_vote = 'veto';\n        }\n\n        this._.captions[hash].votes[comment_id] = vote;\n\n        var points = this._.captions[hash].set[comment_id].visible_points;\n\n        var vote_points = {\n            'up': 1,\n            'veto': 0,\n            'down': -1\n        };\n\n        var points_before_original_vote = points - vote_points[old_vote];\n        var new_points = points_before_original_vote + vote_points[vote];\n\n        this._.captions[hash].set[comment_id].visible_points = new_points;\n    },\n\n    getVoteByCaptionId : function(hash, caption_id) {\n        if(this.haveCaptionVotes(hash) && caption_id in this._.captions[hash].votes) {\n            return this._.captions[hash].votes[caption_id];\n        }\n\n        return null;\n    },\n\n    isCaptionOrItsSubtreeNSFW: function(id) {\n        var captions = this._.captions[this._.hash].set;\n\n        if(captions.hasOwnProperty(id)) {\n            var caption = captions[id];\n\n            var childrenNsfw = _.filter(Object.keys(this._.captions[this._.hash].parent), _.bind(function(caption_id) {\n                // do not trust any comment with a negative score\n                if (this._.captions[this._.hash].set[caption_id].points < 0) {\n                    return false;\n                }\n\n                // do not warn if in mature topic\n                if (Imgur.InsideNav.getInstance()._.topic === 'Mature') {\n                    return false;\n                }\n\n                return this._.captions[this._.hash].parent[caption_id] === id && this._.captions[this._.hash].set[caption_id].caption.match(/nsfw/gi);\n            }, this));\n\n            return (caption.caption.match(/nsfw/gi) || childrenNsfw.length);\n        }\n\n        return false;\n    },\n\n    setCaptionVoteState : function(vote) {\n        var directions = ['up', 'down'];\n        var direction   = vote.vote;\n        var $vote_btns  = $(document.getElementById('caption-' + vote.caption_id)).find(\".arrows *\");\n        if(direction == 'veto') {\n            $vote_btns.removeClass('pushed');\n        } else {\n            var other_direction = directions[1 - directions.indexOf(direction)];\n            var $up  = $vote_btns.filter('.up');\n            var $down = $vote_btns.filter('.down');\n            var $vote_btn = $vote_btns.filter('.' + direction);\n            var $other_vote_btn = $vote_btns.filter('.' + other_direction);\n\n            if(!$vote_btn.hasClass('pushed')) {\n                $vote_btn.addClass('pushed');\n            }\n            $other_vote_btn.removeClass('pushed');\n        }\n        return true;\n    },\n\n    /**\n     * Delete all the caption data not given\n     */\n    purgeCaptionData : function(retain_hashes) {\n        var self = this;\n        var delete_keys = Object.keys(this._.captions).filter(function(key) { \n            return Object.hasOwnProperty.call(self._.captions, key) && retain_hashes.indexOf(key) === -1; \n        });\n        jQuery.each(delete_keys, function(i, key) {\n            delete self._.captions[key];\n        });\n    }\n\n});\n\nClass.addSingleton(Imgur.Caption);\n","Namespace('Imgur.Elements');\n\nImgur.Elements.Combobox = React.createClass({\n    displayName: 'Combobox',\n\n    propTypes: {\n        name:     React.PropTypes.string.isRequired,\n        value:    React.PropTypes.string.isRequired,\n        onChange: React.PropTypes.func.isRequired\n    },\n\n    getInitialState: function() {\n        return {\n            value: this.props.value,\n        };\n    },\n\n    componentDidMount: function() {\n        $(this.refs['base']).combobox({\n            onChange: _.bind(function(element, value) {\n                switch(element) {\n                    case this.props.name:\n                        var text = $(this.refs['base']).find('.selection').text();\n                        this.props.onChange(text, value);\n                        this.setState({\n                            value: text\n                        });\n                        break;\n                }\n            }, this)\n        });\n    },\n\n    render: function() {\n        return React.DOM.div({id: this.props.name, className: 'combobox ' + this.props.className, ref: 'base', name: this.props.name},\n            React.DOM.div({className: 'selection' + ((this.state.value == this.props.defaultValue) ? ' default' : ' green')}, this.state.value),\n            React.DOM.div({className: 'triangle'}, ''),\n            React.DOM.div({className: 'options'},\n                (this.props.defaultValue ? React.DOM.div({className: 'combobox-header'}, this.props.defaultValue) : ''),\n                _.map(this.props.values, _.bind(function(value) {\n                    return React.DOM.div({className: 'item ' + ((this.state.value == value.label) ? 'selected' : ''), 'data-value': value.value, 'key': value.label}, value.label);\n                }, this))\n            )\n        );\n    }\n});\n","Namespace('Imgur.Elements');\n\nImgur.Elements.Confirm = React.createClass({\n    displayName: 'Elements-Confirm',\n\n    handleNo: function handleNo(e) {\n        e.preventDefault();\n        this.props.handleNo();\n    },\n    handleYes: function handleYes(e) {\n        e.preventDefault();\n        this.props.handleYes();\n    },\n    render: function render() {\n        var yesButtonText = this.props.yesButtonText || \"I'm sure\";\n        var noButtonText = this.props.noButtonText || \"Cancel\";\n\n        return React.createElement(\n            'div',\n            { className: 'popup' },\n            React.createElement('div', { className: 'textbox', dangerouslySetInnerHTML: { __html: this.props.message } }),\n            React.createElement(\n                'div',\n                { className: 'margin-top cf' },\n                React.createElement(\n                    'div',\n                    { className: 'right btn-confirm-yes ' + this.props.yesButtonClass },\n                    React.createElement(\n                        'a',\n                        { ref: 'yes', href: '', onClick: this.handleYes },\n                        yesButtonText\n                    )\n                ),\n                React.createElement(\n                    'div',\n                    { className: 'right btn-confirm-no' },\n                    React.createElement(\n                        'a',\n                        { ref: 'no', href: '', onClick: this.handleNo },\n                        noButtonText\n                    )\n                )\n            )\n        );\n    }\n});\n//# sourceMappingURL=confirm.js.map\n","Namespace('Imgur.Elements');\n\nImgur.Elements.PopupMenu = React.createClass({\n    displayName: 'PopupMenu',\n\n    componentWillUnmount: function() {\n        $('body').off('click', this.handleBodyClick);\n    },\n\n    getInitialState: function() {\n        return {\n            opened: false\n        };\n    },\n\n    handleBodyClick: function(e) {\n        this.setState({\n            opened: false\n        });\n    },\n\n    handleMenuClick: function(e) {\n        e.stopPropagation();\n\n        if (typeof this.props.menuClick === 'function') {\n            //Passes the state the component will be in after the click event finishes\n            this.props.menuClick(!this.state.opened);\n        }\n\n        this.setState({\n            opened: !this.state.opened\n        }, _.bind(function() {\n            if(this.state.opened) {\n                $('body').on('click', this.handleBodyClick);\n            } else {\n                $('body').off('click', this.handleBodyClick);\n            }\n        }, this));\n    },\n\n    handleChildClick: function(e) {\n        e.stopPropagation();\n    },\n\n    render: function() {\n        return React.DOM.div({onClick: this.handleMenuClick, className: this.props.className + ' like-combobox-but-not ' + (this.state.opened ? ' opened' : '')},\n            React.DOM.span({}, this.props.name),\n            React.DOM.span({className: this.props.afterNameIcon}),\n            React.DOM.div({className: 'options'},\n                React.DOM.div({onClick: this.handleChildClick},\n                    this.props.children\n                )\n            )\n        );\n    }\n});\n","Namespace('Imgur.Comment');\n\nImgur.Comment = React.createClass({\n    displayName: 'Comment',\n\n    _isMounted: true,\n\n    propTypes: {\n        childmap: React.PropTypes.object.isRequired,\n        contextids: React.PropTypes.object.isRequired,\n        image: React.PropTypes.object.isRequired,\n        comment: React.PropTypes.object.isRequired,\n        votable: React.PropTypes.bool.isRequired,\n        votemap: React.PropTypes.object,\n        onSubmit: React.PropTypes.func,\n        expanded: React.PropTypes.bool,\n        haveChildren: React.PropTypes.bool,\n        touchEnabled: React.PropTypes.bool.isRequired,\n    },\n\n    contextTypes: {\n        msid: React.PropTypes.string.isRequired,\n        onContextChange: React.PropTypes.func.isRequired,\n        linkifier: React.PropTypes.object.isRequired,\n        onVoteChange: React.PropTypes.func\n    },\n\n    getInitialState: function() {\n        return {\n            showingReply: false,\n            reported: false\n        };\n    },\n    \n    componentWillUnmount: function() {\n        this._isMounted = false;\n    },\n\n    handleReplyClicked: function() {\n        Imgur.Util.jafoLog({\n            event: 'newComment',\n            meta: {\n                parentId: this.props.comment.parent_id,\n                hash: this.props.comment.hash,\n                state: 'initiated'\n            }\n        });\n\n        this.setState({\n            showingReply: true\n        });\n    },\n\n    handleReplySuccess: function() {\n        this.setState({\n            showingReply: false\n        });\n\n        if(this.props.onSubmit) {\n            this.props.onSubmit();\n        }\n    },\n\n    handlePermalinkClick: function(e) {\n        e.stopPropagation();\n\n        this.context.onContextChange(e, this.props.comment.id, 0);\n\n        Imgur.Util.jafoLog({\n            event: 'permalinkInvoked',\n            meta: {\n                type: 'comment',\n                commentId: this.props.comment.id,\n                hash: this.props.comment.hash,\n                isAlbum: this.props.comment.on_album,\n                nsfw: this.props.image.nsfw,\n                parentId: this.props.comment.parent_id\n            }\n        });\n\n    },\n\n    handleContextClick: function(e) {\n        e.stopPropagation();\n\n        this.context.onContextChange(e, this.props.comment.id, 1);\n\n        Imgur.Util.jafoLog({\n            event: 'contextInvoked',\n            meta: {\n                type: 'comment',\n                commentId: this.props.comment.id,\n                hash: this.props.comment.hash,\n                isAlbum: this.props.comment.on_album,\n                nsfw: this.props.image.nsfw,\n                parentId: this.props.comment.parent_id\n            }\n        });\n\n\n\n    },\n\n    handleShareClick: function(e) {\n\n        Imgur.Util.jafoLog({\n            event: 'shareInvoked',\n            meta: {\n                type: 'comment',\n                commentId: this.props.comment.id,\n                hash: this.props.comment.hash,\n                isAlbum: this.props.comment.on_album,\n                nsfw: this.props.image.nsfw,\n                parentId: this.props.comment.parent_id\n            }\n        });\n\n\n\n        var url = window.location.protocol + '//' + Imgur.Environment.host + Imgur.Environment.baseURL + '/' + this.props.comment.hash + '/comment/' + this.props.comment.id;\n        var title = this.props.comment.author + ' comments on \\'' + this.props.image.title + '\\' - Imgur';\n\n        var share = Imgur.ShareButtons.getInstance();\n        share.setShareData({\n            jafoMeta: _.extend(Imgur.Gallery.getInstance().getGalleryMetadata(), {\n                type: 'comment',\n                hash: this.props.comment.hash, \n                isAlbum: this.props.comment.on_album,\n                inGallery: true,\n                commentId: this.props.comment.id,\n                parentId: this.props.comment.parent_id\n            }),\n            title: title,\n            url: url\n        });\n    },\n\n    handleMobileIconClick: function(e) {\n        Imgur.Util.jafoLog({\n            event: 'viaAppIcon',\n            meta: {\n                type: 'comment',\n                commentId: this.props.comment.id,\n                platform: this.props.comment.platform\n            }\n        });\n    },\n\n    handleDeleteClick: function(e) {\n        var msg = 'Are you sure you want to delete this comment?';\n\n        if(!confirm(msg)) {\n            return;\n        }\n\n        $.ajax({\n            'url'    : '/gallery/action/delete_caption/' + this.props.comment.id,\n            'type'   : 'POST',\n            'data'   : { 'sid' : this.context.msid }\n        }).fail(_.bind(function() {\n            Imgur.Caption.getInstance().undeleteCaption(this.props.comment.hash, this.props.comment.id);\n            \n            if (this._isMounted) {\n                this.forceUpdate();\n            }            \n        }, this));\n\n        Imgur.Caption.getInstance().deleteCaption(this.props.comment.hash, this.props.comment.id);\n\n        this.forceUpdate();\n    },\n\n    handleReportClick: function(e) {\n        var metadata = {\n            type: 'comment',\n            commentId: this.props.comment.id,\n            hash: this.props.comment.hash,\n            isAlbum: this.props.comment.on_album,\n            nsfw: this.props.image.nsfw\n        };\n\n        Imgur.Util.jafoLog({\n            event: 'reportInvoked',\n            meta: metadata\n        });\n\n        if(!Imgur.Environment.auth.id) {\n            Imgur.getInstance().signin('reportAttempt');\n        } else {\n            $.colorbox({\n                html: '<div id=\"report-container\"></div>',\n                open: true,\n                top: '10%',\n                transition: 'none',\n                scrolling: false,\n                fixed: true,\n                width: Imgur.Elements.Report.dimensions.width,\n                height: Imgur.Elements.Report.dimensions.height,\n                className: 'noBorder',\n                close: '',\n                onComplete: _.bind(function() {\n                    var ReactDOM = window.ReactDOM || window.React;\n                    ReactDOM.render(React.createElement(Imgur.Elements.Report,{\n                        type: 'comment',\n                        url: '/gallery/action/report_caption/' + this.props.comment.id,\n                        metadata: metadata,\n                        cb: _.bind(function() {\n                            this.setState({\n                                reported: true\n                            });\n                        }, this)\n                    }), $('#report-container').get(0));\n                }, this),\n                onClosed: _.bind(function() {\n                    if (!Imgur.Gallery.getInstance()._.preventReportCloseAnalytics) {\n                        Imgur.Util.jafoLog({\n                            event: 'reportCancel',\n                            meta: _.extend({\n                                method: 'modal'\n                            }, metadata)\n                        });\n                    }\n\n                    Imgur.Gallery.getInstance().resetReportCloseAnalytics();\n                }, this)\n            });\n        }\n    },\n\n    handleUpvoteClick: function() {\n        var current_vote = this.props.votemap[this.props.comment.id];\n\n        if(current_vote === 'up') {\n            this._vote('veto');\n        } else {\n            this._vote('up');\n        }\n    },\n\n    handleDownvoteClick: function() {\n        var current_vote = this.props.votemap[this.props.comment.id];\n\n        if(current_vote === 'down') {\n            this._vote('veto');\n        } else {\n            this._vote('down');\n        }\n    },\n\n    _vote: function(direction) {\n        if(!Imgur.Environment.signed) { \n            Imgur.getInstance().signin({ invokedRegisterSigninBy: 'voteAttempt', type: 'comment' }); \n        }\n        var location = Imgur.InsideNav && Imgur.InsideNav.getInstance().getHash() ? 'inside' : 'outside';\n\n        Imgur.Caption.getInstance().setVote(this.props.comment.hash, this.props.comment.id, direction);\n        this.context.onVoteChange(this.props.comment, direction);\n\n        $.ajax({\n            url: '/gallery/action/vote/' + this.props.comment.id,\n            type : 'POST',\n            data : {\n                'vote': direction,\n                'sid' : this.context.msid,\n                'type': 'caption',\n                'location': location,\n                'gallery': Imgur.Gallery.getInstance().getGalleryMetadata()\n            },\n        });\n\n        var jafoData = {\n            event: 'vote' + (this.props.image.readonly ? 'ReadOnly' : ''),\n            meta: _.extend(Imgur.Gallery.getInstance().getGalleryMetadata(), {\n                'type': 'comment',\n                'vote': direction,\n                'location': location,\n                'commentId': this.props.comment.id,\n                'hash': this.props.comment.hash,\n                'parentId': this.props.comment.parent_id\n            })\n        };\n\n        Imgur.Util.jafoLog(jafoData);\n    },\n\n    _nthIfy: function(n) {\n        if(n === 1) {\n            return '1st';\n        } else if(n === 2) {\n            return '2nd';\n        } else if(n === 3) {\n            return '3rd';\n        } else {\n            return String(n) + 'th';\n        }\n    },\n\n    handleUserProfileClick: function() {\n        Imgur.Util.jafoLog({\n            event: 'userProfileNav',\n            meta: {\n                accountId: this.props.comment.author_id,\n                method: 'usernameComment'\n            }\n        });\n    },\n\n    handleMenuClick: function(opening) {\n        if (!opening) {\n            return;\n        }\n\n        Imgur.Util.jafoLog({\n            event: 'moreMenuInvoked',\n            meta: {\n                commentId: this.props.comment.id,\n                hash: this.props.comment.hash,\n                isAlbum: this.props.comment.on_album,\n                nsfw: this.props.image.nsfw,\n                parentId: this.props.comment.parent_id\n            }\n        });\n    },\n\n    closeReply: function() {\n        this.setState({\n            showingReply: false\n        });\n    },\n\n    render: function() {\n        var op = '', replies = 0;\n\n        var expand_replies;\n\n        if(this.props.comment.id in this.props.childmap && this.props.haveChildren) {\n            replies = this.props.childmap[this.props.comment.id].length;\n\n            if (replies > 0) {\n                var icon = React.DOM.span({key: 'reply-vertical', className: 'comment-reply-icon ' + (this.props.expanded ? '' : ' comment-reply-icon--vertical')});\n                var text = this.props.expanded ? ' Collapse' : ' ' + replies + (replies > 1 ? ' replies' : ' reply');\n\n                expand_replies = React.DOM.span({className: 'comment-reply-count'}, React.DOM.span({className: 'comment-reply-icon'}), icon, React.DOM.span({className: 'comment-reply-count-text'}, text));\n            }\n        }\n\n        var upvoted = this.props.votemap[this.props.comment.id] == 'up';\n        var downvoted = this.props.votemap[this.props.comment.id] == 'down';\n\n        var upvoteClasses = classNames({\n            'comment-vote': true,\n            'icon-upvote-fill': true,\n            'green': upvoted\n        });\n\n        var downvoteClasses = classNames({\n            'comment-vote': true,\n            'icon-downvote-fill': true,\n            'red': downvoted\n        });\n\n        var actions = React.DOM.div({className: 'comment-votes' + (this.props.touchEnabled ? ' touch' : '')},\n            (!this.props.comment.deleted ? React.DOM.div({className: 'comment-votes-wrapper'},\n                this.props.votable ? React.createElement(Imgur.Elements.PressButton, {onPress: this.handleUpvoteClick, className: upvoteClasses}) : '',\n                this.props.votable ? React.createElement(Imgur.Elements.PressButton, {onPress: this.handleDownvoteClick, className: downvoteClasses}) : ''\n            ) : '')\n        );\n        \n        var best_comment_of_the_day = this.props.comment.best_comment ? \n            React.DOM.span({className: 'caption-awards right title'}, this._nthIfy(this.props.comment.best_comment)) :\n            null;\n\n        var className = classNames({\n            'caption': true,\n            'pointer': this.props.haveChildren,\n            'caption--haschildren': this.props.haveChildren,\n            'caption-deleted': this.props.comment.deleted,\n            'caption-deleted--noreply': this.props.comment.just_deleted && !this.props.haveChildren,\n            'unvotable': !this.props.votable,\n            'contexted': this.props.comment.id in this.props.contextids\n        });\n        var userTextClasses = classNames({\n            'usertext': true,\n            'cf': true,\n            'comment-upvoted': upvoted,\n            'comment-downvoted': downvoted\n        });\n\n        var body = this.context.linkifier.grab(this.props.comment.caption);\n\n        var point_inflection = this.props.comment.visible_points === 1 ? ' pt' : ' pts';\n\n        var via = null;\n        var mobile_platform_strings = {\n            'iphone': 'iPhone',\n            'android': 'Android',\n        };\n        var mobile_platforms = Object.keys(mobile_platform_strings);\n\n        if (mobile_platforms.indexOf(this.props.comment.platform) > -1) {\n            via = React.DOM.span({className: 'via'},\n                ' via ',\n                React.DOM.a({href: '/apps', target: '_blank', onClick: this.handleMobileIconClick},\n                    mobile_platform_strings[this.props.comment.platform],\n                    React.DOM.span({className: 'icon icon-mobile'}, null)\n                )\n            );\n        }\n\n        return React.DOM.div({className: className, 'data-id': this.props.comment.id},\n            React.DOM.div({className: userTextClasses},\n                best_comment_of_the_day,\n                React.DOM.div({className: 'author'},\n                    React.DOM.a({className: 'comment-username', href: '/user/' + this.props.comment.author, title: this.props.comment.author, onClick: this.handleUserProfileClick}, this.props.comment.author),\n                    (this.props.image.account_id && this.props.image.account_id === this.props.comment.author_id && !this.props.comment.deleted) ? React.DOM.span({className: 'comment-op'}, 'OP') : '',\n                    via,\n                    React.DOM.span({className: this.props.comment.deleted ? '' : 'comment-meta-spacer'}, Imgur.Util.numberFormat(this.props.comment.visible_points) + point_inflection),\n                    React.createElement(Imgur.Elements.Timestamp, {classNames: 'comment-meta-spacer', shouldUpdate: false, timestamp: this.props.comment.datetime}),\n                    React.createElement(Imgur.Elements.PopupMenu,{className: 'icon-ellipses caption-toolbar edit-button comment-meta-spacer', menuClick: this.handleMenuClick},\n                        React.DOM.div({onClick: this.handleShareClick, className: 'addthis_button item share-caption-link'}, 'share'),\n                        ((this.state.reported || $.cookie('c'+this.props.comment.id) == 1) ?\n                                React.DOM.div({className: 'item report-caption-link red'}, 'reported') :\n                                React.DOM.div({onClick: this.handleReportClick, className: 'item report-caption-link'}, 'report')\n                        ),\n                        React.DOM.a({onClick: this.handlePermalinkClick, className: 'item permalink-caption-link', href: '/gallery/' + this.props.comment.hash + '/comment/' + this.props.comment.id}, 'permalink'),\n                        (this.props.comment.parent_id != null ?\n                                React.DOM.a({onClick: this.handleContextClick, className: 'item context-caption-link', href: '/gallery/' + this.props.comment.hash + '/comment/' + this.props.comment.id + '/1'}, 'context')\n                                : ''\n                        ),\n                        (Imgur.Environment.signed && (Number(this.props.comment.author_id) === Imgur.Environment.auth.id || Imgur.Environment.isGalleryAdmin) ?\n                                React.DOM.a({onClick: this.handleDeleteClick, className: 'item delete-caption-link red', href: 'javascript:void(0)'}, 'delete')\n                                : ''\n                        )\n                    )\n                ),\n                body,\n                this.props.comment.deleted ? '' : React.DOM.div({className: 'comment-create-reply', onClick: this.handleReplyClicked},\n                    React.DOM.div({className: 'comment-create-reply-wrapper'},\n                        React.DOM.div({className: 'icon-reply'}),\n                        React.DOM.div({}, 'Reply')\n                    )\n                )\n            ),\n            (this.state.showingReply || !this.props.haveChildren || this.props.expanded) ? '' : React.DOM.div({className: 'caption-gradient-wrapper'}, React.DOM.div({className: 'caption-gradient'})),\n            actions,\n            expand_replies,\n            (this.state.showingReply ?\n                React.createElement(Imgur.Caption.Reply, {\n                    autofocus: true,\n                    ref: 'reply',\n                    image: this.props.image,\n                    parentId: this.props.comment.id, \n                    parentAuthorId: Number(this.props.comment.author_id),\n                    onSuccess: this.handleReplySuccess,\n                    onClose: this.closeReply\n                })\n                : ''\n            )\n        );\n    }\n});\n","Namespace('Imgur.Comment');\n\nImgur.CommentTree = React.createClass({\n    statics: {\n        EXPAND_MODE_FORCE_COLLAPSED: -1,\n        EXPAND_MODE_DEFAULT_COLLAPSED: 0,\n        EXPAND_MODE_FORCE_EXPANDED: 1\n    },\n\n    displayName: 'CommentTree',\n\n    mixins: [React.addons.PureRenderMixin],\n\n    propTypes: {\n        comment: React.PropTypes.object.isRequired,\n        image: React.PropTypes.object.isRequired,\n        expandMode: React.PropTypes.number.isRequired,\n        expandedFromPermalink: React.PropTypes.bool.isRequired,\n        groupingBadReplies: React.PropTypes.bool.isRequired,\n        contextids: React.PropTypes.object.isRequired,\n        childmap: React.PropTypes.object.isRequired,\n        votemap: React.PropTypes.object.isRequired,\n        level: React.PropTypes.number,\n        maxLevel: React.PropTypes.number,\n        votable: React.PropTypes.bool\n    },\n\n    contextTypes: {\n        onContextChange: React.PropTypes.func.isRequired\n    },\n\n    getInitialState: function() {\n        return {\n            removing: false,\n            expanded: this.props.expandMode === Imgur.CommentTree.EXPAND_MODE_FORCE_EXPANDED || this.props.expandedFromPermalink\n        };\n    },\n\n    getDefaultProps: function() {\n        return {\n            level: 0,\n            maxLevel: 7,\n            votable: true\n        };\n    },\n\n    componentWillReceiveProps: function(nextProps) {\n        if (this.props.expandMode != nextProps.expandMode || nextProps.expandedFromPermalink) {\n            if(this.state.expanded && nextProps.expandMode <= Imgur.CommentTree.EXPAND_MODE_FORCE_COLLAPSED) {\n                this.setState({\n                    expanded: false\n                });\n            } else if(!this.state.expanded && nextProps.expandMode === Imgur.CommentTree.EXPAND_MODE_FORCE_EXPANDED || nextProps.expandedFromPermalink) {\n                this.setState({\n                    expanded: true\n                });\n            }\n        }\n    },\n\n    handleCommentClick: function(e) {\n        var $target = $(e.target);\n\n        if(!$target.is('a, button') && !$target.closest('.comment-create-reply').length && $target.closest('.usertext, .comment-reply-count').length) {\n            var have_children = this.props.comment.id in this.props.childmap;\n\n            var metadata = {\n                commentId: this.props.comment.id,\n                hash: this.props.comment.hash,\n                isAlbum: this.props.comment.on_album,\n                nsfw: this.props.image.nsfw,\n                parentId: this.props.comment.parent_id,\n                location: $(e.target).closest('.comment-reply-count').length ? 'collapseLink' : 'commentBox'\n            };\n\n            var metadata = {\n                commentId: this.props.comment.id,\n                hash: this.props.comment.hash,\n                isAlbum: this.props.comment.on_album,\n                nsfw: this.props.image.nsfw,\n                parentId: this.props.comment.parent_id\n            };\n\n            e.stopPropagation();\n\n            this.setState({\n                removing: this.state.expanded\n            }, _.bind(function() {\n                this.setState({\n                    removing: false,\n                    expanded: !this.state.expanded\n                });\n            }, this));\n\n            if(this.state.expanded === false && have_children === true){\n                Imgur.Util.jafoLog({\n                        event: 'commentExpandInvoked',\n                        meta: metadata\n                });\n            } else if(this.state.expanded === true && have_children === true){\n                Imgur.Util.jafoLog({\n                    event: 'commentCollapseInvoked',\n                    meta: metadata\n                });\n            }\n        }\n    },\n    \n    handleSubmit: function() {\n        this.setState({\n            expanded: true\n        });\n    },\n\n    handleLoadMoreClicked: function(e) {\n        this.context.onContextChange(e, this.props.comment.id, 0);\n    },\n\n    render: function() {\n        var subtree;\n\n        var have_children = this.props.comment.id in this.props.childmap;\n        var replies = this.props.childmap[this.props.comment.id] &&\n            this.props.childmap[this.props.comment.id].length || 0;\n\n        if(this.props.level < this.props.maxLevel) {\n            if(this.state.expanded) {\n                subtree = React.createElement(Imgur.CommentList,{\n                    image: this.props.image, \n                    contextids: this.props.contextids,\n                    childmap: this.props.childmap,\n                    votemap: this.props.votemap,\n                    expandMode: this.props.expandMode,\n                    expandedFromPermalink: this.props.expandedFromPermalink,\n                    groupingBadReplies: this.props.groupingBadReplies,\n                    level: this.props.level + 1, \n                    parent_id: this.props.comment.id,\n                    votable: this.props.votable,\n                    removing: this.state.removing,\n                    touchEnabled: this.props.touchEnabled,\n                });\n            }\n        } else if (have_children) {\n            subtree = React.DOM.a({className: 'load-more', href: 'javascript:void(0)', onClick: this.handleLoadMoreClicked}, \"load more\");\n        }\n\n        var className = classNames({\n            'comment': true,\n            'expanded': this.state.expanded\n        });\n\n        return React.DOM.div({onKeyDown: this.handleKeyDown, 'data-level': this.props.level, onClick: this.handleCommentClick, className: className},\n            React.createElement(Imgur.Comment,{\n                childmap: this.props.childmap,\n                contextids: this.props.contextids,\n                votemap: this.props.votemap,\n                image: this.props.image,\n                comment: this.props.comment,\n                votable: this.props.votable,\n                onSubmit: this.handleSubmit,\n                expanded: this.state.expanded,\n                haveChildren: have_children && this.props.level < this.props.maxLevel && replies > 0,\n                level: this.props.level,\n                collapsing: this.state.removing,\n                touchEnabled: this.props.touchEnabled,\n            }),\n            React.createElement(React.addons.CSSTransitionGroup,{\n                key: 'just-collapsed-' + this.props.image.hash,\n                transitionName: \"collapsetree\",\n                transitionEnter: false,\n                transitionLeaveTimeout: 250\n            },\n                subtree\n            )\n        );\n    }\n});\n","Namespace('Imgur');\n\n/**\n * Lazy container that renders comments only when they're $(':in-viewport')\n */\nImgur.CommentList = React.createClass({\n    RENDERED_AT_A_TIME: 20,\n\n    displayName: 'CommentList',\n\n    mixins: [React.addons.PureRenderMixin],\n\n    propTypes: {\n        image: React.PropTypes.object.isRequired,\n        contextids: React.PropTypes.object.isRequired,\n        childmap: React.PropTypes.object.isRequired,\n        votemap: React.PropTypes.object.isRequired,\n        level: React.PropTypes.number.isRequired,\n        expandMode: React.PropTypes.number.isRequired,\n        expandedFromPermalink: React.PropTypes.bool.isRequired,\n        groupingBadReplies: React.PropTypes.bool.isRequired,\n        parent_id: React.PropTypes.number\n    },\n\n    getInitialState: function() {\n        return {\n            rendered: this.RENDERED_AT_A_TIME,\n            bad_comments: false,\n            // for recommendations experiment (expT4377):\n            truncatingForRecommendations: true,\n        };\n    },\n\n    _getChildrenIds: function() {\n        if(this.props.parent_id in this.props.childmap) {\n            return this.props.childmap[this.props.parent_id];\n        } else {\n            return [];\n        }\n    },\n\n    componentDidUpdate: function() {\n        this._checkNeedToRenderMore();\n    },\n\n    componentDidMount: function() {\n        // Scroll events could get fired after the component unmounts if the browser event queue happens to be slow.\n        // We shouldn't use this.isMounted() because it's being deprecated.\n        // https://github.com/facebook/react/issues/3417#issuecomment-121649937\n        this._mounted = true;\n\n        this._listener = _.throttle(this._checkNeedToRenderMore, 50);\n        $(window).on('scroll', this._listener);\n        this._checkNeedToRenderMore();\n    },\n\n    componentWillUnmount: function() {\n        $(window).off('scroll', this._listener);\n        this._mounted = false;\n    },\n\n    toggleShowingBadComments: function(e) {\n        // Prevent propagation up to the CommentTree to prevent this auto-expanding the comment\n        e.stopPropagation();\n\n        this.setState({\n            bad_comments: !this.state.bad_comments\n        });\n    },\n\n    _checkNeedToRenderMore: function() {\n        if(this._mounted) {\n            var children_ids = this._getChildrenIds();\n\n            if(children_ids.length > 0 && children_ids.length > this.state.rendered) {\n                var $last_rendered = $(ReactDOM.findDOMNode(this.refs.last));\n\n                if($last_rendered.is(':in-viewport')) {\n                    this.setState({\n                        rendered: this.state.rendered + this.RENDERED_AT_A_TIME\n                    });\n                }\n            }\n        }\n    },\n\n    _handleBadCaptionsContainerClick: function(e) {\n        // Prevent propagation up to the CommentTree to prevent this auto-expanding the comment\n        e.stopPropagation();\n    },\n\n    render: function() {\n        var hash = this.props.image.hash;\n\n        var good_comments = [], bad_comments = [], just_inserted = [];\n        var children_ids = this._getChildrenIds();\n        var has_bad_comments = false;\n\n        if (!this.props.removing) {\n            for(var i = 0; i < Math.min(children_ids.length, this.state.rendered); i++) {\n                var comment = Imgur.Caption.getInstance().getCaptionById(hash, children_ids[i]);\n\n                var props = {\n                    comment: comment,\n                    image: this.props.image,\n                    key: comment.id,\n                    level: this.props.level,\n                    expandMode: this.props.expandMode,\n                    expandedFromPermalink: this.props.expandedFromPermalink,\n                    contextids: this.props.contextids,\n                    childmap: this.props.childmap,\n                    votemap: this.props.votemap,\n                    votable: true,\n                    groupingBadReplies: this.props.groupingBadReplies,\n                    touchEnabled: this.props.touchEnabled,\n                };\n\n                // last comment\n                if(i == Math.min(children_ids.length, this.state.rendered) - 1) {\n                    props.ref = 'last';\n                }\n\n                if(comment.points >= 0 || !this.props.groupingBadReplies) {\n                    if(comment.just_inserted) {\n                        just_inserted.push(React.createElement(Imgur.CommentTree,props));\n                    } else {\n                        good_comments.push(React.createElement(Imgur.CommentTree,props));\n                    }\n                } else {\n                    bad_comments.push(React.createElement(Imgur.CommentTree,props));\n                    has_bad_comments = true;\n                }\n            }\n        }\n\n        var showMoreMarkup = null;\n        // truncate to 5 comments for recommendations experiment (expT4377)\n        if (this.state.truncatingForRecommendations && this.props.inRecommendationsExperiment && this.props.parent_id === null) {\n            showMoreMarkup = good_comments.length > 5 ? React.DOM.button({\n                className: 'btn btn-grey',\n                style: {\n                    margin: '0 auto',\n                    display: 'block'\n                },\n                onClick: function () {\n                    this.setState({truncatingForRecommendations: false})\n                }.bind(this),\n            }, 'Show More Comments') : null;\n            good_comments = good_comments.slice(0, 5);\n        }\n\n        return React.DOM.div({className: 'children'},\n            React.createElement(React.addons.CSSTransitionGroup,{\n                key: 'just-inserted-' + this.props.image.hash,\n                transitionName: \"newcomment\",\n                transitionEnterTimeout: 500,\n                transitionLeave: false\n            },\n                just_inserted\n            ),\n            React.createElement(React.addons.CSSTransitionGroup,{\n                key: 'just-expanded-' + this.props.image.hash,\n                transitionName: \"expandcomment\",\n                transitionAppear: true,\n                transitionEnter: false,\n                transitionAppearTimeout: 250,\n                transitionLeaveTimeout: 250\n            },\n                good_comments,\n                React.DOM.div({onClick: this._handleBadCaptionsContainerClick, className: 'bad-captions ' + (has_bad_comments ? '' : 'nodisplay')},\n                    React.DOM.a({onClick: this.toggleShowingBadComments, href: 'javascript:void(0)', className: 'link'}, (this.state.bad_comments ? 'hide' : 'show') + ' bad replies'),\n                    React.DOM.div({className: (this.state.bad_comments ? '' : 'nodisplay')},\n                        bad_comments\n                    )\n                ),\n                showMoreMarkup\n            )\n        );\n    }\n});\n","Namespace('Imgur');\n\nImgur.InsideCommentsArea = React.createClass({\n    displayName: 'InsideCommentArea',\n\n    propTypes: {\n        image: React.PropTypes.object.isRequired,\n        loading: React.PropTypes.bool.isRequired,\n        defaultExpandMode: React.PropTypes.number.isRequired,\n        expandedFromPermalink: React.PropTypes.bool.isRequired,\n        childmap: React.PropTypes.object.isRequired,\n        commentSort: React.PropTypes.string.isRequired,\n        onCommentSortChange: React.PropTypes.func.isRequired,\n        contextId: React.PropTypes.number,\n        contextLevels: React.PropTypes.number,\n        permalink: React.PropTypes.object\n    },\n\n    contextTypes: {\n        onContextChange: React.PropTypes.func.isRequired\n    },\n\n    mixins: [React.addons.PureRenderMixin],\n\n    handleClickPermalinkViewRestBanner: function(e) {\n        e.preventDefault();\n        this.context.onContextChange(e, undefined, undefined);\n    },\n\n    getInitialState: function() {\n        return {\n            commentReplyNumber: 0,\n            expandMode: this.props.defaultExpandMode,\n            expandedFromPermalink: this.props.expandedFromPermalink,\n            forceCollapsed: false,\n            touchEnabled: !!this.touchEnabled(),\n        };\n    },\n\n    // from http://stackoverflow.com/a/4819886\n    touchEnabled: function() {\n        return 'ontouchstart' in window        // works on most browsers\n            || navigator.maxTouchPoints;       // works on IE10/11 and Surface\n    },\n\n    componentDidMount: function() {\n        var $parentNode = $(ReactDOM.findDOMNode(this).parentNode);\n\n        if(!$parentNode.hasClass('comments-initialized')) {\n            $parentNode.addClass('comments-initialized');\n        }\n\n        $(document).on('keyup', this.handleDocumentKeyUp);\n    },\n\n    componentWillUnmount: function() {\n        var $parentNode = $(ReactDOM.findDOMNode(this).parentNode);\n        $(document).off('keyup', this.handleDocumentKeyUp);\n    },\n\n    componentWillReceiveProps: function(nextProps) {\n        if(this.props.contextId !== nextProps.contextId && nextProps.contextId) {\n            // When transitioning to a permalink, the comments have already been rendered, so they already\n            // have a default collapsed state. Force them to open.\n            this.setState({\n                expandedFromPermalink: true\n            });\n        } else {\n            this.setState({\n                expandedFromPermalink: false\n            })\n        }\n\n        if(this.props.image.hash !== nextProps.image.hash || this.props.image.is_album !== nextProps.image.is_album) {\n            this.setState({\n                showingReply: true\n            });\n        }\n    },\n\n    handleClickToggleForceExpanded: function(e) {\n        if(this.state.expandMode !== Imgur.CommentTree.EXPAND_MODE_FORCE_EXPANDED) {\n            this.setState({\n                expandMode: Imgur.CommentTree.EXPAND_MODE_FORCE_EXPANDED\n            })\n            Imgur.Util.jafoLog({\n                event: 'expandCollapseAllInvoked',\n                meta: {\n                    state: 'expand',\n                    hash: this.props.image.hash\n                }\n            });\n        } else {\n            this.setState({\n                expandMode: Imgur.CommentTree.EXPAND_MODE_FORCE_COLLAPSED - Math.abs(this.state.expandMode)\n            })\n            Imgur.Util.jafoLog({\n                event: 'expandCollapseAllInvoked',\n                meta: {\n                    state: 'collapse',\n                    hash: this.props.image.hash\n                }\n            });\n        }\n    },\n\n    handleCommentSuccess: function() {\n        // Increment the number so that we flush the state (text, errors, etc.)\n\n        this.setState({\n            commentReplyNumber: this.state.commentReplyNumber + 1\n        });\n    },\n\n    handleDocumentKeyUp: function(e) {\n        if(!e.ctrlKey && !e.altKey && !e.metaKey && !$(e.target).is('input,textarea')) {\n            var meta = {\n                commentId: null,\n                hash: this.props.image.hash,\n                isAlbum: this.props.image.isAlbum,\n                nsfw: this.props.image.nsfw,\n                parentId: null,\n                location: 'hotkey'\n            }\n\n            if(e.keyCode === 219) { // '[' key\n                if(this.state.expandMode === Imgur.CommentTree.EXPAND_MODE_FORCE_EXPANDED) {\n                    Imgur.Util.jafoLog({\n                        event: 'commentCollapseInvoked',\n                        meta: meta\n                    });\n\n                    this.setState({\n                        expandMode: Imgur.CommentTree.EXPAND_MODE_FORCE_COLLAPSED\n                    });\n                } else {\n                    Imgur.Util.jafoLog({\n                        event: 'commentExpandInvoked',\n                        meta: meta\n                    });\n\n                    this.setState({\n                        expandMode: Imgur.CommentTree.EXPAND_MODE_FORCE_EXPANDED\n                    });\n                }\n            } else if(e.keyCode === 221) { // ']' key\n                // Toggle force collapsed\n                //\n                // If the mode was, before they pressed one of the buttons, already FORCE_COLLAPSED e.g. they had pressed ] once prior,\n                // then there will be no change in state as the mode is already FORCE_COLLAPSED, so the Pure Render Mixin will decide not to\n                // re-render the tree, and moreover, even if we called forceUpdate, since the toggling of the internal CommentTree state occurs\n                // in the componentWillReceiveProps lifecycle method, the comment won't get collapsed because the expandMode prop did not change (from FORCE_COLLAPSED to FORCE_COLLAPSED).\n                //\n                // Instead, we define EXPAND_MODE_FORCE_COLLAPSED as any value less than or equal to -1, and each time we force a collapse, we decrement the expandMode.\n                // That way, the first time this code is called the expandMode will be -1, the next time -2, and so on, so that each key press both passes the Pure Render Mixin's test\n                // and also triggers componentWillReceiveProps\n\n                Imgur.Util.jafoLog({\n                    event: 'commentCollapseInvoked',\n                    meta: meta\n                });\n\n                this.setState({\n                    expandMode: Imgur.CommentTree.EXPAND_MODE_FORCE_COLLAPSED - Math.abs(this.state.expandMode)\n                });\n            }\n        }\n    },\n\n    render: function() {\n        var children = [];\n        var expanded = this.state.expandMode === Imgur.CommentTree.EXPAND_MODE_FORCE_EXPANDED;\n\n        children.push(React.createElement(Imgur.Caption.Reply,{\n            key: 'reply:' + String(this.state.commentReplyNumber) + ':' + this.props.image.hash,\n            image: this.props.image,\n            parentId: null,\n            parentAuthorId: null,\n            autofocus: false,\n            onBlur: _.noop,\n            onSuccess: this.handleCommentSuccess\n        }));\n\n        children.push(React.DOM.div({key: 'controls', className: 'comments-info'},\n            React.DOM.div({className: 'left'},\n                React.DOM.div({className: 'inline'},\n                    React.DOM.span({className: 'comments-count'},\n                        (this.props.loading ? 'LOADING' : Imgur.Caption.getInstance().countComments(this.props.image.hash))\n                    ),\n                    ' COMMENTS'\n                )\n            ),\n            React.createElement(Imgur.Elements.PopupMenu,{className: 'comments-sort right', name: this.props.commentSort, afterNameIcon: 'icon-arrow-down'},\n                    React.DOM.div({className: 'item' + (this.props.commentSort == 'best' ? ' selected' : ''), onClick: _.partial(this.props.onCommentSortChange, 'best')}, 'best'),\n                    React.DOM.div({className: 'item' + (this.props.commentSort == 'new' ? ' selected' : ''), onClick: _.partial(this.props.onCommentSortChange, 'new')}, 'new'),\n                    React.DOM.div({className: 'item' + (this.props.commentSort == 'top' ? ' selected' : ''), onClick: _.partial(this.props.onCommentSortChange, 'top')}, 'top')\n            ),\n            React.DOM.span({className: (expanded ? 'icon-collapse-all' : 'icon-expand') + ' comments-expand right pointer', onClick: this.handleClickToggleForceExpanded, href: 'javascript:void(0)'},\n                (expanded ? 'Collapse All' : 'Expand All')\n            ),\n            React.DOM.div({className: 'clear'})\n        ));\n\n\n        if(!this.props.loading) {\n            if(this.props.contextId) {\n                children.push(React.DOM.div({key: 'permalink-banner', className: 'reply-header'},\n                    React.DOM.span(null, 'You are viewing a single comment'),\n                    React.DOM.p(null,\n                        React.DOM.a({className: 'load-more', href: '/gallery/' + this.props.image.hash, onClick: this.handleClickPermalinkViewRestBanner}, 'view the rest of the comments')\n                    )\n                ));\n\n                var contextids = {};\n                var root_comment = Imgur.Caption.getInstance().getCaptionById(this.props.image.hash, this.props.contextId);\n                var permalink_comment = Imgur.Caption.getInstance().getCaptionById(this.props.image.hash, this.props.permalink.commentId);\n\n                if(Imgur.Environment.signed && Imgur.Environment.auth.id == permalink_comment.author_id) {\n                    var filtered_captions = Imgur.Caption.getInstance().getCaptionIdsByFilter(this.props.image.hash, _.bind(function(caption) {\n                        var unixTimeCreated = moment.utc(caption.datetime, 'YYYY-MM-DD HH:mm:ss').unix();\n                        var isDescendentComment = (permalink_comment.id == caption.parent_id);\n                        var isAuthorComment = (Imgur.Environment.auth.id == caption.author_id);\n                        var isUnread = (unixTimeCreated > this.props.timeLastRead);\n                        return isUnread && isDescendentComment && !isAuthorComment;\n                    }, this));\n\n                    _.each(filtered_captions, function(cap_id) {\n                        contextids[cap_id] = true;\n                    });\n                }\n                children.push(React.createElement(Imgur.CommentTree,{\n                    contextids: contextids,\n                    childmap: this.props.childmap,\n                    votemap: this.props.votemap,\n                    image: this.props.image,\n                    key: 'tree:' + this.props.image.hash,\n                    expandMode: this.state.expandMode,\n                    expandedFromPermalink: this.state.expandedFromPermalink,\n                    groupingBadReplies: false,\n                    comment: root_comment,\n                    votable: true,\n                    touchEnabled: this.state.touchEnabled,\n                }));\n            } else {\n                // for recommendations experiment (expT4377)\n                var bucket = Imgur.Experiments.getUserBucket('expT4377');\n                var variation = bucket && bucket.variation;\n                Imgur.Experiments.isActive('expT4377');\n\n                children.push(React.createElement(Imgur.CommentList,{\n                    contextids: {}, // ignore for now\n                    childmap: this.props.childmap,\n                    votemap: this.props.votemap,\n                    image: this.props.image,\n                    key: 'list:' + this.props.image.hash,\n                    expandMode: this.state.expandMode,\n                    expandedFromPermalink: this.state.expandedFromPermalink,\n                    level: 0,\n                    parent_id: null,\n                    groupingBadReplies: true,\n                    votable: true,\n                    touchEnabled: this.state.touchEnabled,\n                    // for recommendations experiment (expT4377)\n                    inRecommendationsExperiment: variation != 'control' && Imgur.Experiments.isActive('expT4377')\n                }));\n            }\n        }\n\n        return React.DOM.div({id: 'comments', className: (!this.props.loading ? 'comments-loaded' : '')},\n            React.DOM.div({id: 'captions', className: 'root-caption-container'},\n                children\n            )\n        );\n    }\n});\n","var _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nNamespace('Imgur.InsideNav');\n\nImgur.InsideNav = Imgur.extend({\n    init: function init(sidegallery, captions, emitter, albumImageStore, postSavingStore, tagStore, params) {\n        params = params || {};\n\n        this._ = $.extend({\n            ad: {\n                URL: undefined,\n                timeTillRefresh: 2000,\n                nextImageLoadRefreshesAd: false,\n                injectAd: $('.advertisement').length ? false : true, //Determine if an ad loaded on initial page load so we can inject next chance we get\n                closed: false,\n                currentTimeout: undefined,\n                abpAdId: $('#div-gpt-ad-1421193579422-0')\n            },\n            tallAdParams: {\n                sqWidth: 821,\n                sqHeight: 599,\n                recWidth: 1294,\n                recHeight: 599,\n                rightContentHeight: $('#right-content').height()\n            },\n            skyPopMarginTop: 40, /* if updating this, also update main-style.css :: #div-gpt-ad-active-pop_sky{margin-top} */\n            captionLayout: {\n                sort: null\n            },\n            depth: 1,\n            insideCommentsArea: null,\n            emitter: emitter,\n            autoBrowse: false,\n            autoBrowseTimeout: null,\n            autoBrowseWait: 7000,\n            isHotImage: true,\n            adType: null,\n            captionInstance: captions,\n            albumImageStore: albumImageStore,\n            postSavingStore: postSavingStore,\n            tagStore: tagStore,\n\n            /**\n             * The purpose of the fetch queue is twofold:\n             *  1. preload the next image's data before we need it, and\n             *  2. rate limit the AJAX requests for image data so that someone holding right-arrow or whatever can't do lots of AJAX unintentionally\n             *\n             * (2) is accomplished by clearing the fetch queue every time the user hits next, before the timeout has a chance to fire.\n             *\n             * It is intentional that the next image's data is not preloaded on the very first page load. That is to avoid AJAX because\n             * of our non-trivial bounce rate\n             */\n            fetchQueue: [],\n            fetchingCaptions: {},\n\n            image: {},\n            fetchPageEventCount: 0,\n            checkFetchQueueInterval: undefined,\n\n            fetchInterval: 250,\n            sideGallery: sidegallery,\n            initialImage: true,\n            isPromoted: false,\n            headerFixed: false,\n            scrollPosition: 0,\n            postTitleMaxHeight: 120,\n\n            /* Viewability stuff */\n            vwUnderImage: {\n                padding: 20, // extra margin for measuring page elements for viewability\n                timeout: 500,\n                lastHash: null\n            },\n            vwTime: {\n                lastHash: null,\n                msec: 0\n            },\n            vwUnderComments: {\n                lastHash: null\n            },\n            postContents: {\n                loading: [],\n                loaded: [],\n                hash: null\n            },\n            post: null,\n\n            elements: {\n                $metadataLink: $('link[rel=\"image_src\"]'),\n                $window: $(window),\n\n                $inside: $('#inside'),\n                $postHeader: $('.post-header'),\n                $postContainer: $('.post-container'),\n                $navPrev: $('.navPrev'),\n                $navNext: $('.navNext'),\n                $postJump: $('#post-jump-container'),\n\n                $nicetime: $('#nicetime'),\n                $voteUp: $('#mainUpArrow'),\n                $voteDown: $('#mainDownArrow'),\n                $image: $('.post-images'),\n                $embed: $('#stats-embed-codes'),\n                $postActionBar: $('.post-action'),\n                $postTitleContainer: $('.post-title-container'),\n                $captions_count: $('#comment-count'),\n                $actionTabs: $('#action-tabs').find('> div'),\n                $shareLink: $('#under-image').find('.share-link'),\n                imageContainers: '.post-images .post-image-container',\n\n                adframe: $('#adiframe')[0],\n                adWrapper: '.advertisement',\n                promoCompanion: '.promoCompanion',\n                albumTruncated: '.js-post-truncated',\n                albumDescription: '.post-description',\n                $favoritedImage: $('.favorite-image'),\n                $randomButton: $('.random-button'),\n                $sideFooterLinks: $('#fixed-side-footer-links')\n\n            },\n\n            skyPopYPos: null,\n            insideCommentsAreaWithContext: React.createClass({\n                displayName: 'insideCommentsAreaWithContext',\n\n                childContextTypes: {\n                    onContextChange: React.PropTypes.func,\n                    msid: React.PropTypes.string,\n                    onSubmit: React.PropTypes.func,\n                    linkifier: React.PropTypes.object,\n                    onVoteChange: React.PropTypes.func\n                },\n\n                getChildContext: function getChildContext() {\n                    return {\n                        onContextChange: this.props.loadmore,\n                        msid: this.props.msid,\n                        onSubmit: this.props.onsubmit,\n                        linkifier: this.props.linkifier,\n                        onVoteChange: this.props.onvotechange\n                    };\n                },\n\n                render: function render() {\n                    return React.createElement(Imgur.InsideCommentsArea, this.props);\n                }\n            })\n        }, params);\n\n        this._super(this._);\n\n        //set up bad ad reporting in footer\n        $('.footerlink-report-ads').removeClass('nodisplay').click(this.reportBadAds);\n    },\n\n    setHash: function setHash(hash) {\n        this._.hash = hash;\n        this.updateCaptionHash();\n        Imgur.getInstance().setHash(hash);\n    },\n\n    getHash: function getHash() {\n        return this._.hash;\n    },\n\n    updateCaptionHash: function updateCaptionHash() {\n        this._.captionInstance.setHash(this._.hash);\n    },\n\n    updateShare: function updateShare() {\n        if (!this.hasImage()) {\n            console.warn('Can\\'t find image when updating share');\n            return;\n        }\n        var image = this.getImage();\n\n        var shareUrl = 'http://' + this._.host + this.getURL({ type: 'historyState', hash: image.hash });\n        if (image.is_album) {\n            shareUrl = shareUrl.replace('/account/favorites/', '/a/');\n        } else {\n            shareUrl = shareUrl.replace('/account/favorites/', '/');\n        }\n\n        var share = Imgur.ShareButtons.getInstance();\n\n        // This should match gallery's metadata\n        share.setShareData({\n            jafoMeta: _.merge(Imgur.Gallery.getInstance().getGalleryMetadata(), {\n                type: 'galleryPost'\n            }, this._.imageJafoMeta),\n            title: image.title,\n            url: shareUrl\n        }, {\n            global: true\n        });\n\n        this._.elements.$shareLink.val(shareUrl).data('value', shareUrl);\n    },\n\n    hasImage: function hasImage(hash) {\n        hash = hash || this._.hash;\n\n        if (hash == this._.image.hash) {\n            return true;\n        }\n\n        return this._.sideGallery.getImage(hash) != null;\n    },\n\n    getImage: function getImage(hash) {\n        hash = hash || this._.hash;\n\n        if (this._.sideGallery == null) {\n            return this._.image;\n        } else if (this.hasImage(hash)) {\n            return this._.sideGallery.getImage(hash);\n        }\n\n        return null;\n    },\n\n    getCurrentImage: function getCurrentImage() {\n        return this._.sideGallery.getImage(this.getHash());\n    },\n\n    checkFetchQueue: function checkFetchQueue() {\n        if (this._.fetchQueue.length === 0) {\n            return;\n        }\n\n        var fetchOp = this._.fetchQueue.shift();\n\n        if (fetchOp) {\n            fetchOp();\n        }\n    },\n\n    generalInit: function generalInit(callback) {\n        var auth_id = this._.signed ? this._.auth.id : null;\n\n        this.checkAdTime();\n\n        //Swap out g or r thumb with full source for copying\n        $('.post-image-placeholder').one('mousedown', function (e) {\n            e.target.setAttribute('src', e.target.parentNode.getAttribute('href'));\n        });\n\n        if (!this._.hasAccess || Imgur.Environment.captionsEnabled) {\n            this.bindAutoBrowse();\n            this.bindHotKeys();\n        }\n\n        this.setupHistoryState();\n\n        callback();\n\n        setTimeout(this.forceAdRefresh.bind(this), 2000);\n\n        this._.checkFetchQueueInterval = window.setInterval(this.checkFetchQueue.bind(this), this._.fetchInterval);\n\n        Imgur.Util.triggerPerformanceCheckpoint('statsbtn');\n\n        if ('onhashchange' in window) {\n            $(window).bind('hashchange', _.bind(this.forceScrollToCaption, this));\n        }\n\n        $('body').on('hover', '.image-id-link', _.bind(function (e) {\n            var $link = $(e.target);\n\n            if (!$link.hasClass('imgur-image')) {\n                $link.addClass('imgur-image');\n\n                $.ajax({\n                    url: '/gallery/action/image/' + this.getHash(),\n                    type: 'GET',\n                    data: {\n                        order: $link.text().match(/\\d+/)[0]\n                    },\n                    success: function success(response) {\n                        if (response.data && response.data.url && response.data.hash) {\n                            $link.attr('href', response.data.url);\n                            $link.attr('data-hash', response.data.hash);\n                        }\n                    }\n                });\n            }\n        }, this));\n\n        $(window).on('scroll', _.throttle(_.bind(this.checkStickyHeader, this), 50));\n        this.checkStickyHeader(); //In case you're refreshing somewhere down the page\n\n        this._.elements.$navPrev.click(_.bind(function () {\n            this._.emitter.trigger('buttonNav', 'prev');\n        }, this));\n\n        this._.elements.$navNext.click(_.bind(function () {\n            this._.emitter.trigger('buttonNav', 'next');\n        }, this));\n\n        this._.emitter.on('select', null, _.bind(function (item, isPopState, direction, trigger) {\n            this.logNavigation(direction, trigger, item);\n        }, this));\n\n        /*\n        * Viewability\n        */\n\n        // vwTime support\n        this._.emitter.on('select', null, _.bind(this.checkViewabilityTime, this));\n        $(window).on('beforeunload', _.bind(this.checkViewabilityTime, this));\n\n        // vwUnderImage support\n        this._.emitter.on('select', null, _.partial(setTimeout, _.bind(this.postLoadingQueueContents, this), this._.vwUnderImage.timeout));\n        // Without the _.once() on 'postContentsLoaded', viewability scroll could fire before the image viewer got height\n        this._.emitter.on('postContentsLoaded', null, _.once(_.bind(this.bindViewabilityScroll, this)));\n        this._.emitter.on('postContentsLoaded', null, _.partial(setTimeout, _.bind(this.checkViewabilityScroll, this), this._.vwUnderImage.timeout));\n\n        this.bindViewabilityJafo();\n        this.bindSkyPopScroll();\n        this.bindPostJump();\n    },\n\n    bindSkyPopScroll: function bindSkyPopScroll() {\n        // bind fixed positioning of skypop to scroll\n        this._.elements.$skyPop = this._.elements.$skyPop || $(\"#div-gpt-ad-sky_pop\");\n        if (this._.elements.$skyPop.length === 0) {\n            return;\n        } //bail early if ad isn't showing\n\n        var skyPopFixed = false;\n        var skyPopPos;\n\n        var skyPopYPosition = _.throttle(function () {\n            if (!skyPopFixed) {\n                skyPopPos = this._.elements.$sideFooterLinks.offset().top + this._.elements.$sideFooterLinks.height() + this._.skyPopMarginTop;\n            }\n            return skyPopPos;\n        }.bind(this), 1000);\n\n        var positionSkyPopX = function () {\n            this._.elements.$skyPop.css({\n                right: this._.elements.$window.width() - (this._.elements.$skyPop.parent().offset().left + this._.elements.$skyPop.parent().outerWidth())\n            });\n        }.bind(this);\n\n        this._.elements.$window.on('scroll.skyPopAdPositioning', _.debounce(function () {\n            var belowSkypopFold = this._.elements.$window.scrollTop() > skyPopYPosition();\n            if (!skyPopFixed && belowSkypopFold) {\n                this._.elements.$skyPop.addClass('fixed');\n                skyPopFixed = true;\n                positionSkyPopX();\n            } else if (skyPopFixed && !belowSkypopFold) {\n                this._.elements.$skyPop.removeClass('fixed');\n                skyPopFixed = false;\n            }\n        }.bind(this), 10, { trailing: true }));\n\n        this._.elements.$window.on('resize.skyPopAdPositioning', _.debounce(positionSkyPopX.bind(this), 200, { trailing: true }));\n    },\n\n    bindPostJump: function bindPostJump() {\n        var postJumpInComments = false;\n\n        this._.elements.$window.on('scroll.postJump', _.debounce(function () {\n            var scrollTop = this._.elements.$window.scrollTop();\n            var belowCommentFold = scrollTop != 0 && scrollTop + this._.elements.$window.height() > this._.elements.$postActionBar.offset().top;\n            if (!postJumpInComments && belowCommentFold) {\n                this._.elements.$postJump.addClass('in-comments');\n                postJumpInComments = true;\n            } else if (postJumpInComments && !belowCommentFold) {\n                this._.elements.$postJump.removeClass('in-comments');\n                postJumpInComments = false;\n            }\n        }.bind(this), 200));\n\n        this._.elements.$postJump.find('.go-to-comments').click(this.scrollToCaptions.bind(this));\n        this._.elements.$postJump.find('.take-me-up').click(function () {\n            $('html, body').animate({ scrollTop: 0 }, 500);\n        }.bind(this));\n    },\n\n    bindViewabilityJafo: function bindViewabilityJafo() {\n        // Only log JAFO for 1% of visitors for now.\n        // The emitter events themselves (vwTime, vwUnderImage, vwUnderComments) are to be used\n        // by more than just JAFO so they still should get fired.\n        if (Math.random() < 0.01) {\n            this._.emitter.on('vwTime', null, _.bind(function (hash, ms) {\n                Imgur.Util.jafoLog({\n                    event: 'vwTime',\n                    meta: {\n                        hash: hash,\n                        sec: Math.floor(parseInt(ms, 10) / 1000)\n                    }\n                });\n            }, this));\n\n            this._.emitter.on('vwUnderImage', null, _.bind(function (hash, pos, tPos) {\n                Imgur.Util.jafoLog({\n                    event: 'vwUnderImage',\n                    meta: {\n                        hash: hash,\n                        pos: pos,\n                        target: tPos\n                    }\n                });\n            }, this));\n\n            this._.emitter.on('vwUnderComments', null, _.bind(function (hash, isAlbum, nsfw, animated) {\n                var meta = {\n                    hash: hash,\n                    isAlbum: isAlbum,\n                    nsfw: nsfw\n                };\n\n                if (!isAlbum) {\n                    meta.isAnimated = animated;\n                }\n\n                Imgur.Util.jafoLog({\n                    event: 'vwUnderComments',\n                    meta: meta\n                });\n            }, this));\n        }\n    },\n\n    // this should only be called once per post\n    postLoadingQueueContents: function postLoadingQueueContents() {\n        var $contents;\n        var iter;\n        var $iEle;\n        var $kid;\n        var imgHash;\n\n        if (!this._.image || this._.image.num_images < 1) {\n            return;\n        }\n\n        this._.postContents.loading = [];\n        this._.postContents.loaded = [];\n        this._.postContents.hash = this._.image.hash;\n\n        $contents = $(this._.elements.imageContainers);\n\n        for (iter = 0; iter < $contents.length; iter++) {\n            $iEle = $($contents[iter]);\n            imgHash = $iEle.attr('id');\n            $kid = $iEle.find('video, img').first();\n\n            if (!imgHash || $kid.length < 1) {\n                continue;\n            }\n\n            this._.postContents.loading.push(imgHash);\n\n            if ($kid.is('video')) {\n                this.postLoadingCheckVideo(imgHash, $kid);\n                continue;\n            }\n\n            this.postLoadingCheckImg(imgHash, $kid);\n        }\n    },\n\n    postLoadedContentHash: function postLoadedContentHash(hash) {\n        if (this.postLoadingVerifyHash(hash)) {\n            this._.postContents.loaded.push(hash);\n\n            if (this._.postContents.loading.length === this._.postContents.loaded.length) {\n                this._.emitter.trigger('postContentsLoaded', this._.image);\n            }\n        }\n    },\n\n    postLoadingVerifyHash: function postLoadingVerifyHash(hash) {\n        return this._.postContents.hash === this._.image.hash && this._.postContents.loaded.indexOf(hash) < 0 && this._.postContents.loading.indexOf(hash) > -1;\n    },\n\n    postLoadingCheckImg: function postLoadingCheckImg(imgHash, $img) {\n        if (!this.postLoadingVerifyHash(imgHash)) {\n            return;\n        }\n\n        if ($img[0].complete) {\n            this.postLoadedContentHash(imgHash);\n        } else {\n            $img.on('load error', { 'imgHash': imgHash }, _.bind(this.postLoadingHandleImg, this));\n        }\n    },\n\n    postLoadingHandleImg: function postLoadingHandleImg(ev) {\n        var imgHash = Imgur.Util.dive(ev, 'data.imgHash');\n\n        if (_.isString(imgHash)) {\n            this.postLoadedContentHash(imgHash);\n        }\n    },\n\n    postLoadingCheckVideo: function postLoadingCheckVideo(imgHash, $vid) {\n        if ($vid[0].readyState < 1) {\n            $vid.on('loadeddata', { 'imgHash': imgHash }, _.bind(this.postLoadingHandleVideo, this));\n\n            return;\n        }\n\n        this.postLoadedContentHash(imgHash);\n    },\n\n    postLoadingHandleVideo: function postLoadingHandleVideo(ev) {\n        var imgHash = Imgur.Util.dive(ev, 'data.imgHash');\n        var $vid = $(ev.target);\n\n        if ($vid[0].readyState > 0) {\n            this.postLoadedContentHash(imgHash);\n        }\n    },\n\n    bindViewabilityScroll: function bindViewabilityScroll() {\n        $(window).on('scroll resize', _.throttle(_.bind(this.checkViewabilityScroll, this), 250));\n    },\n\n    checkStickyHeader: function checkStickyHeader() {\n        var pos = $(window).scrollTop();\n        var $postHeader = $('.post-header');\n        var $postContainer = $('.post-container');\n        var threshold = $postContainer.offset().top;\n        var delta = pos - this._.scrollPosition;\n        this._.scrollPosition = pos;\n\n        if (!this._.headerFixed && pos > threshold) {\n            var postHeaderHeight = $postHeader.outerHeight();\n            $postHeader.addClass('fixed');\n            $postContainer.css('padding-top', postHeaderHeight);\n            this._.headerFixed = true;\n        } else if (this._.headerFixed && pos <= threshold) {\n            $postHeader.removeClass('fixed');\n            $postContainer.css('padding-top', 0);\n            this._.headerFixed = false;\n        }\n\n        if (pos > threshold + this._.postTitleMaxHeight && delta > 10 && !$postHeader.hasClass('animate') && $postHeader.outerHeight() > 80) {\n            $postHeader.addClass('animate');\n            $postHeader.one('webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend', function () {\n                $(this).addClass('animation-finished');\n            });\n        } else if (pos <= threshold + this._.postTitleMaxHeight || delta < -100) {\n            $postHeader.off('webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend');\n            $postHeader.removeClass('animation-finished');\n            $postHeader.removeClass('animate');\n        }\n\n        if (this._.captionsEnabled) {\n            if (!$.inviewport($('#right-content'), { threshold: 0 })) {\n                this._.elements.$postJump.addClass('js-animate');\n            } else {\n                this._.elements.$postJump.removeClass('js-animate');\n            }\n        }\n    },\n\n    checkViewabilityTime: function checkViewabilityTime(ev) {\n        // event ('ev') being an object means we've fired onBeforeUnload\n        if (_.isObject(ev) || this._.vwTime.lastHash !== this._.hash) {\n            if (this._.vwTime.msec > 0) {\n                this._.emitter.trigger('vwTime', this._.vwTime.lastHash, new Date().valueOf() - this._.vwTime.msec);\n            }\n\n            this._.vwTime.lastHash = '' + this._.hash;\n            this._.vwTime.msec = new Date().valueOf();\n        }\n    },\n\n    checkViewabilityScroll: function checkViewabilityScroll() {\n        var pos = parseInt(this._.elements.$window.scrollTop() + this._.elements.$window.height(), 10);\n        var tPos = parseInt(this._.elements.$postActionBar.offset().top + this._.elements.$postActionBar.outerHeight() + this._.vwUnderImage.padding, 10);\n\n        // disable viewability here for comments\n        var $commentContainer = $('#comments-container');\n\n        if (!this._.captionsEnabled) {\n            // no comments to bind to\n            return;\n        }\n\n        var commentBottom = $commentContainer.offset().top + $commentContainer.height();\n\n        if (this._.vwUnderImage.lastHash !== this._.hash && pos >= tPos) {\n            this._.emitter.trigger('vwUnderImage', this._.hash, pos, tPos);\n\n            this._.vwUnderImage.lastHash = this._.hash;\n        }\n\n        //Only check for reaching the bottom of comments in the gallery\n        if (this._.captionsEnabled && this._.vwUnderComments.lastHash !== this._.hash && commentBottom < pos && commentBottom >= this._.elements.$window.scrollTop()) {\n            var rD = this._.sideGallery.getImage(this._.hash) || {};\n            this._.emitter.trigger('vwUnderComments', this._.hash, rD.is_album, rD.nsfw, rD.animated);\n\n            this._.vwUnderComments.lastHash = this._.hash;\n        }\n    },\n\n    enablePrevButton: function enablePrevButton() {\n        this._.elements.$navPrev.removeClass('disabled');\n    },\n\n    enableNextButton: function enableNextButton() {\n        this._.elements.$navNext.removeClass('disabled');\n    },\n\n    disablePrevButton: function disablePrevButton() {\n        this._.elements.$navPrev.addClass('disabled');\n    },\n\n    disableNextButton: function disableNextButton() {\n        this._.elements.$navNext.addClass('disabled');\n    },\n\n    changeSection: function changeSection(section) {\n        this._.section = section;\n    },\n\n    changeSort: function changeSort(sort) {\n        this._.sort = sort;\n    },\n\n    changeWindow: function changeWindow(window) {\n        this._.window = window;\n    },\n\n    updatePoints: function updatePoints(data) {\n        var $pointsDiv;\n        var oldPoints;\n        var newPoints;\n\n        if (data.type === 'comment') {\n            var caption = this._.captionInstance.getCaptionById(this.getHash(), data.comment);\n\n            // only update the caption's \"visible points\" so we don't affect the order / layout of the comments.\n            if (caption && 'visible_points' in caption) {\n                caption.visible_points = data.points;\n            }\n            this._.insideCommentsArea.forceUpdate();\n        }\n    },\n\n    getURL: function getURL(which) {\n        return {\n            'historyState': this._.baseURL + '/' + which.hash,\n            'image': this._.cdnURL + '/' + which.hash + which.ext,\n            'thumb': this._.cdnURL + '/' + which.hash + 'b' + which.ext,\n            'imageVotesJSON': '//' + Imgur.Environment.host + '/gallery/' + which.hash + '/votes.json',\n            'captionsJSON': '//' + Imgur.Environment.host + '/gallery/' + which.hash + '/comment/best/hit.json'\n        }[which.type];\n    },\n\n    fetchImage: function fetchImage(hash, callbackImage, callbackCaption) {\n        var item = this._.sideGallery.getImage(hash);\n\n        if (!item) {\n            return;\n        }\n\n        if (item.is_album && this._.albumImageStore.getImages(item.hash) == null) {\n            this._.albumImageStore.fetchImages(item.hash, _.bind(function (data) {\n                for (var i = 0; i < data.count && i < 5; ++i) {\n                    this.preloadImage(data.images[i]);\n                }\n\n                if (typeof callbackImage == 'function') {\n                    callbackImage(item);\n                }\n            }, this));\n        } else {\n            this.preloadImage(item);\n\n            if (typeof callbackImage == 'function') {\n                callbackImage(item);\n            }\n        }\n\n        this.fetchCaptions(item.hash, callbackCaption || _.noop);\n    },\n\n    /****************************************** Captions ******************************************/\n\n    /**\n     * Retrieve (if necessary) the captions for a given hash.\n     */\n    fetchCaptions: function fetchCaptions(hash, cb_finished, retry) {\n        if (!this._.captionsEnabled) {\n            return;\n        }\n\n        if (this._.captionInstance.haveCaptions(hash)) {\n            cb_finished();\n            return;\n        }\n\n        if (this._.fetchingCaptions[hash]) {\n            return;\n        }\n\n        this._.fetchingCaptions[hash] = true;\n\n        var self = this;\n\n        var captionsUrl = this.getURL({ 'type': 'captionsJSON', 'hash': hash });\n        var votesUrl = this.getURL({ 'type': 'imageVotesJSON', 'hash': hash });\n\n        $.ajax(captionsUrl, { displayGenericError: false }).done(function (data) {\n            if (data && data.data && data.data.captions) {\n                self._.captionInstance.mergeCaptions(hash, data.data.captions);\n                cb_finished();\n                delete self._.fetchingCaptions[hash];\n            } else if (!retry) {\n                //Prevent infinite loop\n                delete self._.fetchingCaptions[hash];\n                self.fetchCaptions(hash, cb_finished, true);\n            }\n        }).fail(function () {\n            delete self._.fetchingCaptions[hash];\n\n            if (!retry) {\n                self.fetchCaptions(hash, cb_finished, true);\n            }\n        });\n\n        if (this._.signed && !retry) {\n            $.ajax(votesUrl, { displayGenericError: false }).done(function (data) {\n                if (data && data.data && data.data.votes) {\n                    self._.captionInstance.mergeVotes(hash, data.data.votes);\n                    cb_finished();\n                }\n            });\n        }\n    },\n\n    scrollToCaptions: function scrollToCaptions(animated) {\n        var y = this._.elements.$postActionBar.offset().top - this._.elements.$postHeader.outerHeight();\n\n        if (animated) {\n            $('html, body').animate({\n                scrollTop: y\n            }, 500, function () {}.bind(this));\n        } else {\n            window.scrollTo(0, y);\n        }\n    },\n\n    processCaptions: function processCaptions() {\n        var self = this;\n\n        var hash = this._.hash;\n\n        var sorter = this.getCaptionSorter();\n\n        var image = hash === this._.image.hash ? this._.image : this._.sideGallery.getImage(hash);\n        var parent_ids = _.clone(this._.captionInstance.getParentIds(hash));\n\n        // map parent id -> [sorted children ids]\n        var childmap = _.transform(parent_ids, function (result, parent_id) {\n            var raw_children_ids = self._.captionInstance.getCaptionChildrenIds(hash, parent_id);\n            var children_ids = [];\n\n            if (!Imgur.Environment.auth.show_mature) {\n                for (var i = 0; i < raw_children_ids.length; i++) {\n                    var comment = self._.captionInstance.getCaptionById(hash, raw_children_ids[i]);\n                    var is_nsfw = comment.caption.match(/nsfw|mature/i);\n                    var url_regex = /(\\b(https?|ftp|file):\\/\\/[-A-Z0-9+&@#\\/%?=~_|!:,.;]*[-A-Z0-9+&@#\\/%=~_|])/ig;\n                    var contains_link = comment.caption.match(url_regex);\n\n                    if (!(is_nsfw && contains_link) || comment.author_id == Imgur.Environment.auth.id) {\n                        children_ids.push(raw_children_ids[i]);\n                    }\n                }\n            } else {\n                children_ids = raw_children_ids;\n            }\n\n            children_ids.sort(function (aid, bid) {\n                var comment_a = self._.captionInstance.getCaptionById(hash, aid),\n                    comment_b = self._.captionInstance.getCaptionById(hash, bid);\n\n                return sorter(comment_a, comment_b);\n            });\n\n            result[parent_id] = children_ids;\n        }, {});\n\n        var loadmore = _.bind(function (e, id, levels) {\n            e.preventDefault();\n\n            this.pushWindowState(id, levels);\n\n            this.processCaptions();\n        }, this);\n\n        var onsubmit = _.bind(function (caption) {\n            this.processCaptions();\n            this._.emitter.trigger('captionSubmit', caption);\n        }, this);\n\n        var commentSort = $.cookie('GCS');\n\n        if (!commentSort) {\n            commentSort = 'best';\n        }\n\n        var onvotechange = _.bind(function (value, direction) {\n            this.processCaptions();\n            this._.emitter.trigger('captionVoted', value, direction);\n        }, this);\n\n        var onsortchange = _.bind(function (value) {\n            this.setCaptionSort(value);\n            $.cookie('GCS', value, { expires: 7, path: '/' });\n\n            Imgur.Util.jafoLog({\n                event: 'commentSort',\n                meta: {\n                    sort: value,\n                    state: 'done',\n                    hash: hash\n                }\n            });\n\n            this.processCaptions();\n        }, this);\n\n        var context_id;\n\n        var permalink = this.getPermalinkIfExists();\n        if (typeof permalink !== 'undefined') {\n            context_id = permalink.commentId;\n            var comment = Imgur.Caption.getInstance().getCaptionById(hash, context_id);\n\n            if (comment !== null) {\n                var current_context_parent_id = comment.parent_id;\n                var current_context_comment_id = comment.id;\n\n                /**\n                 * Normally rendering a tree will render all of its children. This loop below will\n                 * modify the tree in-place for permalinks, rewriting the tree by remove children other than ancestors\n                 * of the permalinked comment.\n                 */\n                for (var context_level = 0; context_level < permalink.contextLevels; context_level++) {\n                    childmap[current_context_parent_id] = [current_context_comment_id];\n\n                    if (current_context_parent_id !== null) {\n                        current_context_comment_id = current_context_parent_id;\n                        current_context_parent_id = Imgur.Caption.getInstance().getCaptionParentById(hash, current_context_parent_id);\n                    } else {\n                        // User tried to get the yth parent but this comment is only i < y levels deep.\n                        // Break out so we can stop at root comments.\n                        break;\n                    }\n                }\n\n                if (permalink.contextLevels > 0) {\n                    context_id = current_context_comment_id;\n                } else {\n                    context_id = comment.id;\n                }\n            } else {\n                // Deleted, spam comment, etc.\n                context_id = undefined;\n            }\n        }\n\n        var expandedFromPermalink = typeof permalink !== 'undefined' && typeof context_id !== 'undefined';\n        var getparams = Imgur.Util.getQueryParams(window.location.search);\n        var timeLastRead = 'lr' in getparams ? parseInt(getparams['lr']) : Number.MAX_SAFE_INTEGER;\n\n        var insideCommentsProps = {\n            image: image,\n            loading: !Imgur.Caption.getInstance().haveCaptions(hash),\n            childmap: childmap,\n            votemap: Imgur.Caption.getInstance().getVotes(hash),\n            contextId: context_id,\n            contextLevels: permalink ? permalink.contextLevels : null,\n            defaultExpandMode: Imgur.CommentTree.EXPAND_MODE_DEFAULT_COLLAPSED,\n            expandedFromPermalink: expandedFromPermalink,\n            commentSort: commentSort,\n            onCommentSortChange: onsortchange,\n            timeLastRead: timeLastRead,\n            permalink: permalink,\n            loadmore: loadmore,\n            msid: Imgur.Environment.msid,\n            onsubmit: onsubmit,\n            linkifier: this._.linkifier,\n            onvotechange: onvotechange\n        };\n\n        var InsideCommentsAreaWithContext = this._.insideCommentsAreaWithContext;\n\n        this._.insideCommentsArea = ReactDOM.render(React.createElement(InsideCommentsAreaWithContext, insideCommentsProps), $('#comments-container').get(0));\n\n        Imgur.ShareButtons.getInstance().bindAddthisButton();\n        Imgur.Util.triggerPerformanceCheckpoint('comments_rendering');\n    },\n\n    getPermalinkIfExists: function getPermalinkIfExists() {\n        var path = window.location.pathname;\n        var isPermalink = path.indexOf('comment') !== -1;\n\n        if (isPermalink) {\n            var commentPathParts = path.split('/comment/')[1].split('/');\n            return {\n                commentId: parseInt(commentPathParts[0]),\n                contextLevels: parseInt(commentPathParts[1])\n            };\n        }\n    },\n\n    setupHistoryState: function setupHistoryState() {\n        var self = this;\n        var History = Imgur.History.getInstance();\n        History.addPopState('inside_nav.comment', function (e) {\n            self.handlePopStateComment(e);\n        });\n        History.addPopState('inside_nav.image', function (e) {\n            self.handlePopStateImage(e);\n        });\n    },\n\n    handlePopStateComment: function handlePopStateComment(e) {\n        var url_parts = window.location.pathname.split('/');\n        var hash = null;\n\n        if (url_parts.length == 3 && url_parts[2].length >= 5) {\n            hash = url_parts[2];\n        }\n\n        if (url_parts.length > 3) {\n            if (url_parts[1] === 'r') {\n                hash = url_parts[url_parts.length - 1];\n            } else {\n                if (url_parts[1] === 'user') {\n                    hash = url_parts[4];\n                } else {\n                    hash = url_parts[2];\n                }\n            }\n        }\n\n        this.setHash(hash);\n        this.scrollToCaptions();\n        this.processCaptions();\n    },\n\n    handlePopStateImage: function handlePopStateImage(e) {\n        var url = window.location.pathname.split('/');\n        var hash = null;\n\n        if (url.length === 3 && url[2].length >= 5) {\n            hash = url[2];\n        }\n\n        if (url[2]) {\n            if (_.indexOf(['r', 't', 'topic'], url[1]) !== -1) {\n                hash = url[url.length - 1];\n            } else if (url[1] === 'user') {\n                hash = url[4];\n            } else {\n                hash = url[2];\n            }\n        }\n\n        // If we were redirected to a gallery type from the image page\n        if (this._.sideGallery.getImage(url[1])) {\n            hash = url[1];\n        }\n\n        this._.sideGallery.selectImage(hash, true);\n        this.processCaptions();\n        this.updateShare();\n    },\n\n    pushWindowState: function pushWindowState(comment_id, context) {\n        var url = this._.baseURL + '/' + this._.hash;\n        if (comment_id) {\n            url += '/comment/' + comment_id;\n            if (context) {\n                url += '/' + context;\n            }\n        }\n\n        Imgur.History.getInstance().addWindowState('inside_nav.comment', 'Comments on ' + window.title, url);\n    },\n\n    setCaptionSort: function setCaptionSort(sort_name) {\n        var ucw_sort_name = sort_name.substr(0, 1).toUpperCase() + sort_name.substr(1);\n        this._.captionLayout.sort = this['sortCaptionsBy' + ucw_sort_name];\n    },\n\n    /**\n     * Chains all the sorts\n     */\n    getCaptionSorter: function getCaptionSorter() {\n        var sorts = [_.bind(this.sortCaptionsByMineJustSubmitted, this), this._.captionLayout.sort, _.bind(this.sortCaptionsByIdDesc, this)];\n        return function (a, b) {\n            for (var i = 0; i < sorts.length; i++) {\n                var sort_result = sorts[i](a, b);\n                if (sort_result != 0) return sort_result;\n            }\n            return 0;\n        };\n    },\n\n    sortCaptionsByTop: function sortCaptionsByTop(a, b) {\n        var score_a = a.points;\n        var score_b = b.points;\n\n        if (score_a > score_b) return -1;\n        if (score_a < score_b) return 1;\n        return 0;\n    },\n\n    sortCaptionsByBest: function sortCaptionsByBest(a, b) {\n        var score_a = a.best_score;\n        var score_b = b.best_score;\n\n        if (score_a > score_b) return -1;\n        if (score_a < score_b) return 1;\n        return 0;\n    },\n\n    sortCaptionsByNew: function sortCaptionsByNew(a, b) {\n        var date_a = new Date(a.datetime);\n        var date_b = new Date(b.datetime);\n\n        if (date_a > date_b) return -1;\n        if (date_a < date_b) return 1;\n        return 0;\n    },\n\n    /**\n     * Sort just submitted captions (timestamp=0) before all others\n     */\n    sortCaptionsByMineJustSubmitted: function sortCaptionsByMineJustSubmitted(a, b) {\n        if ('just_inserted' in a && !('just_inserted' in b)) return -1;\n        if ('just_inserted' in b && !('just_inserted' in a)) return 1;\n        return 0;\n    },\n\n    sortCaptionsById: function sortCaptionsById(a, b) {\n        if (a.id < b.id) return -1;\n        if (a.id > b.id) return 1;\n        return 0;\n    },\n\n    sortCaptionsByIdDesc: function sortCaptionsByIdDesc(a, b) {\n        if (a.id > b.id) return -1;\n        if (a.id < b.id) return 1;\n        return 0;\n    },\n\n    blankPage: function blankPage() {\n        if (this._.isPromoted) {\n            // clean out any custom ads\n            if (Imgur.Environment.l_ads) {\n                this.removeAds();\n            } else {\n                this.removePromotedCompanion();\n            }\n        }\n\n        humanMsg.removeMsg(function () {\n            $('#humanMsg').remove();\n            humanMsg.setup();\n        });\n\n        this._.fetchQueue = [];\n    },\n\n    pushToFetchQueue: function pushToFetchQueue(hash, cbImage, cbCaption) {\n        this._.fetchQueue.push(_.bind(this.fetchImage, this, hash, cbImage, cbCaption));\n    },\n\n    setupReportLink: function setupReportLink() {\n        var hash = this.getHash();\n        var rD = this._.sideGallery.getImage(hash);\n\n        var noDisplay = Imgur.Environment.auth.url === this._.image.account_url || !this._.captionsEnabled || rD.promoId || rD.readonly;\n\n        this._.el.inside.reportImageLink.toggleClass('nodisplay', noDisplay);\n        if ($.cookie('r' + this.getHash()) == 1) {\n            this._.el.inside.reportImageLink.addClass('red').text(' post reported');\n            this._.el.inside.reportImageLink.unbind('click');\n        } else {\n            this._.el.inside.reportImageLink.removeClass('red').text(' report post');\n            this._.el.inside.reportImageLink.unbind('click');\n            this._.el.inside.reportImageLink.click(_.bind(function () {\n                self._.emitter.trigger('report image');\n            }, this));\n        }\n    },\n\n    handleAds: function handleAds() {\n        var hash = this.getHash();\n        var rD = this._.sideGallery.getImage(hash);\n\n        if (!this.isSafe()) {\n            this.removeAds();\n        } else if (this._.ad.injectAd && (!this._.isHotImage && rD.is_hot || rD.hasOwnProperty('in_gallery') && rD.in_gallery)) {\n            this.showAds();\n        } else if (this._.ad.injectAd && this._.section && $(this._.elements.adWrapper).length == 0) {\n            this.showAds();\n        }\n    },\n\n    isSafe: function isSafe() {\n        var rD = this._.sideGallery.getImage(this.getHash());\n\n        if (!rD) {\n            return false;\n        }\n\n        if (rD.is_safe === true) {\n            return true;\n        }\n\n        if (rD.nsfw_tag || rD.nsfw || rD.hasOwnProperty('in_gallery') && !rD.in_gallery || rD.is_moderated === false) {\n            return false;\n        }\n\n        return true;\n    },\n\n    updateSponsoredInfo: function updateSponsoredInfo() {\n        var hash = this.getHash();\n        var el = this._.elements;\n        var rD = this._.sideGallery.getImage(hash);\n\n        this._.emitter.trigger('displayPromoted', hash);\n    },\n\n    updateSubmissionInfo: function updateSubmissionInfo() {\n        var rD = this._.sideGallery.getImage(this.getHash());\n\n        //Sets current topic for admins\n        if (rD.topic) {\n            $('#post-topic option').each(function () {\n                if ($(this).text() == rD.topic) {\n                    $(this).attr('selected', true);\n                    return false;\n                }\n            });\n        } else {\n            $('#post-topic option').eq(0).attr('selected', true);\n        }\n\n        //Sets if post is mature for admins\n        if (rD.nsfw) {\n            $('#mature-post').addClass('nodisplay');\n        } else {\n            $('#mature-post').removeClass('nodisplay');\n        }\n    },\n\n    updatePage: function updatePage(isPopState, oldHash) {\n        var hash = this.getHash();\n        var el = this._.elements;\n        var rD = this._.sideGallery.getImage(hash);\n        var self = this;\n\n        if (Imgur.Environment.l_ads) {\n            //Moderated ads are a different type\n            if (this._.image.is_moderated) {\n                this.removeAds();\n            }\n\n            if (rD) {\n                //Moving from a non-gallery post to a gallery post (or vice a versa) so prepare for different ad units\n                if (!this._.captionsEnabled && ('comment_count' in rD || rD.in_gallery) || this._.captionsEnabled && !('comment_count' in rD) && !rD.in_gallery) {\n                    this.removeAds();\n                }\n            }\n        }\n\n        this._.image = rD;\n\n        Imgur.Gallery.getInstance()._.account_url = rD.account_url;\n\n        if (!isPopState) {\n            Imgur.History.getInstance().addWindowState('inside_nav.image', rD.title, this.getURL({ type: 'historyState', hash: hash }));\n        }\n\n        // close any opened menus\n        $('.opened').removeClass('opened');\n\n        if (!rD.comments_disabled && ('comment_count' in rD || rD.isAd || rD.in_gallery)) {\n            if (!$('#comments-container').length) {\n                $('<div id=\"comments-container\">').insertAfter('.post-container');\n                this._.captionsEnabled = true;\n            }\n\n            var galleryInstance = Imgur.Gallery.getInstance();\n\n            //Moving from non-gallery to gallery so set defaults for analytics\n            if (galleryInstance._.sort === null) {\n                var galleryDefaults = this._.sideGallery.getGalleryEnvironment();\n                galleryInstance._.sort = galleryDefaults.sort;\n                galleryInstance._.window = galleryDefaults.window;\n                galleryInstance._.section = galleryDefaults.section;\n            }\n        } else {\n            $('#comments-container').remove();\n            this._.captionsEnabled = false;\n        }\n\n        if (rD.isAd) {\n            ReactDOM.render(React.createElement(Imgur.PromotedSpotlight, null), document.getElementById('promoted-spotlight'));\n            this.removeAds(); //Don't show programatic ads on promoted content\n        } else {\n            ReactDOM.unmountComponentAtNode(document.getElementById('promoted-spotlight'));\n        }\n\n        this.blankPage();\n\n        this._.isPromoted = rD.isAd;\n\n        if ((typeof runSlots === 'undefined' ? 'undefined' : _typeof(runSlots)) === 'object') {\n            runSlots.galleryNav(rD);\n        }\n\n        // Google's project\n        if (_typeof(window.cNEkDpHAxP) === 'object') {\n            window.cNEkDpHAxP.push(function (api) {\n                api.recordPV();\n            });\n        }\n\n        this.setupReportLink();\n\n        if (!this._.isPromoted) {\n            this.handleAds();\n        }\n\n        this.checkAdTime();\n\n        if (rD.is_album) {\n            Imgur.Util.triggerView(rD.hash, { album: true, discard: true });\n        }\n\n        var desc = rD.isAd ? _.unescape(rD.description) : rD.description;\n\n        if (rD.title == null || rD.title == 'untitled') {\n            Imgur.Notification.getInstance().setTitle(this._.galleryTitle + ' - Imgur');\n        } else {\n            Imgur.Notification.getInstance().setTitle(rD.title + ' - Imgur');\n        }\n\n        if (rD.isAd) {\n            this.updateSponsoredInfo();\n        } else {\n            this.updateSubmissionInfo();\n        }\n\n        if (!rD.comments_disabled && this._.captionsEnabled && !this._.captionInstance.haveCaptions(hash)) {\n            if (this._.insideCommentsArea) {\n                var newProps = this._.insideCommentsArea.props;\n                newProps.loading = !Imgur.Caption.getInstance().haveCaptions(rD.hash);\n                newProps.image = rD;\n\n                var InsideCommentsAreaWithContext = this._.insideCommentsAreaWithContext;\n                this._.insideCommentsArea = ReactDOM.render(React.createElement(InsideCommentsAreaWithContext, newProps), $('#comments-container').get(0));\n            }\n\n            this.pushToFetchQueue(hash, function (img) {\n                self.insertPost(img);\n            }, _.bind(this.processCaptions, this));\n        } else {\n            self.insertPost(rD);\n\n            if (this._.captionsEnabled) {\n                this.processCaptions();\n            }\n        }\n\n        if (rD.is_album === true) {\n            el.$metadataLink.attr('href', this._.protocol + this._.cdnURL + '/' + rD.album_cover + rD.ext);\n        } else {\n            el.$metadataLink.attr('href', this._.protocol + this._.cdnURL + '/' + rD.hash + rD.ext);\n        }\n\n        el.$actionTabs.hide();\n\n        if (rD.vote == 'up') {\n            this._.elements.$voteUp.addClass('pushed');\n            this._.elements.$voteDown.removeClass('pushed');\n        } else if (rD.vote == 'down') {\n            this._.elements.$voteDown.addClass('pushed');\n            this._.elements.$voteUp.removeClass('pushed');\n        } else {\n            this._.elements.$voteDown.removeClass('pushed');\n            this._.elements.$voteUp.removeClass('pushed');\n        }\n\n        var nextImage = this._.sideGallery.getNextImage();\n\n        if (nextImage != null) {\n            this.pushToFetchQueue(nextImage);\n        }\n\n        $('.tipsy').remove();\n\n        Imgur.Util.googleTrackPageview();\n\n        this.purgeCommentData();\n        this.updateCaptionHash();\n\n        // log new items for loaded pages - this is done in the original HTML for hard navigation\n        var jafoMeta = _.extend(Imgur.Gallery.getInstance().getGalleryMetadata(), {\n            hash: rD.hash,\n            inGallery: typeof Imgur.Gallery !== 'undefined',\n            isAlbum: rD.is_album,\n            showsAds: rD.adConfig && rD.adConfig.showsAds,\n            nsfw: rD.nsfw,\n            galleryEntry: null\n        });\n\n        if ('string' === typeof rD.subreddit) {\n            jafoMeta.subreddit = rD.subreddit;\n        }\n\n        try {\n            if ('string' === typeof rD.reddit && 'string' === typeof rD.hot_datetime) {\n                jafoMeta.galleryEntry = moment.utc(rD.hot_datetime, 'YYYY-MM-DD HH:mm:ss').valueOf();\n            } else if ('string' === typeof rD.timestamp) {\n                jafoMeta.galleryEntry = moment.utc(rD.timestamp, 'YYYY-MM-DD HH:mm:ss').valueOf();\n            }\n        } catch (e) {\n            jafoMeta.galleryEntry = null;\n        }\n\n        //increment page depth counter\n        this._.depth += isPopState ? -1 : 1;\n        jafoMeta.depth = this._.depth;\n\n        Imgur.Util.jafoLog({\n            event: 'item',\n            meta: jafoMeta\n        });\n\n        this._.imageJafoMeta = jafoMeta;\n        this.updateShare(); // must follow updating _.imageJafoMeta\n    },\n\n    purgeCommentData: function purgeCommentData() {\n        var self = this;\n\n        // get the hashes in the thumbs, retain only that data\n        var hashes = Object.keys(this._.captionInstance._.captions).filter(function (key) {\n            return Object.hasOwnProperty.call(self._.captionInstance._.captions, key) && self.isImageNearby(key);\n        });\n\n        this._.captionInstance.purgeCaptionData(hashes);\n    },\n\n    isImageNearby: function isImageNearby(hash) {\n        var currentIndex = this._.sideGallery.selectedPosition();\n        var hashIndex = this._.sideGallery.hashPosition(hash);\n\n        return hashIndex !== -1 && hashIndex >= currentIndex - 3 && hashIndex <= currentIndex + 1;\n    },\n\n    _promotedTag: function _promotedTag(render, target) {\n        var tag = React.DOM.div({ className: 'promoted-tag' }, React.DOM.a({\n            href: Imgur.Environment.ppBlog,\n            className: 'title',\n            title: 'learn more about promoted posts'\n        }, 'promoted'));\n\n        return tag;\n    },\n\n    _promotedWrap: function _promotedWrap(component) {\n        return React.DOM.div({ className: 'promoted-wrap' }, this._promotedTag(), component);\n    },\n\n    insertPost: function insertPost(data, load_all) {\n        if (data.hash != this.getHash()) {\n            return;\n        } //Prevents race condition\n\n        if (data.is_album && this._.albumImageStore.getImages(data.hash) == null) {\n            this._.albumImageStore.fetchImages(data.hash, _.bind(this.insertPost, this, this._.sideGallery.getImage(data.hash) || data, load_all));\n            return;\n        }\n\n        var isOwner = this._.hasAccess && !Imgur.Environment.captionsEnabled;\n\n        if (isOwner && data.is_album) {\n            var globalAlbumUploadProps = {\n                instance: 'album',\n                emitter: this._.emitter,\n                hash: data.hash,\n                privacy: data.album_privacy,\n                deletehash: data.deletehash,\n                datetime: data.datetime,\n                images: this._.albumImageStore.getImages(data.hash),\n                linkifier: this._.linkifier,\n                data: data,\n                host: Imgur.Environment.host\n            };\n            ReactDOM.render(React.createElement(Imgur.Upload, globalAlbumUploadProps), document.getElementById('upload-album'), _.bind(this.recachePostElements, this));\n            this._.elements.$inside.empty();\n        } else {\n            var postProps = {\n                data: data,\n                initial: this._.initialImage,\n                all_loaded: load_all,\n                album_image_store: this._.albumImageStore,\n                in_gallery: this._.captionsEnabled || data.isAd && data.hasOwnProperty('starting_score'),\n                has_access: this._.hasAccess,\n                postSavingStore: this._.postSavingStore,\n                showEditTools: isOwner,\n                emitter: this._.emitter,\n                hide_points: !this._.captionsEnabled || this._.isPromoted,\n                hide_views: this._.isPromoted,\n                hide_tags: !this._.captionsEnabled || this._.isPromoted,\n                hide_report: Imgur.Environment.auth.url === data.account_url || this._.isPromoted,\n                linkifier: this._.linkifier,\n                sideGallery: this._.sideGallery,\n                tagStore: this._.tagStore\n            };\n\n            this._.post = ReactDOM.render(React.createElement(Imgur.Gallery.Post, postProps), $('.post-images').get(0), _.bind(this.recachePostElements, this));\n        }\n    },\n\n    recachePostElements: function recachePostElements() {\n        /* Needs to be recached since first load of post-action bar is rendered in react outside the post container since\n        * the post container is rendered natively on first load but in react on subsequent loads.\n        * postHeader and postContainer are recached for the case of upload replacing the DOM */\n        this._.elements.$postActionBar = $('.post-action');\n        this._.elements.$postHeader = $('.post-header');\n        this._.elements.$postContainer = $('.post-container');\n        this._.emitter.trigger('postRendered', this._.sideGallery && this._.sideGallery.getImage ? this._.sideGallery.getImage(this.getHash()) : {});\n    },\n\n    preloadImage: function preloadImage(image) {\n        var tag,\n            showingVideo = image.ext == '.gif' && image.animated && image.size > 2 * 1024 * 1024;\n\n        if (showingVideo) {\n            var video = document.createElement('video');\n            var video_source = document.createElement('source');\n\n            if (video.canPlayType) {\n                video_source.src = Imgur.Environment.cdnUrl + '/' + image.hash + '.mp4';\n            }\n\n            video.appendChild(video_source);\n            tag = video;\n        } else {\n            var img = document.createElement('img');\n            img.src = Imgur.Environment.cdnUrl + '/' + image.hash + image.ext;\n            tag = img;\n        }\n\n        var cancel = function cancel() {\n            if (tag) {\n                // Cancel in-progress preloading by resetting src\n                if (showingVideo) {\n                    $(tag).find('source').attr('src', '');\n                } else {\n                    $(tag).attr('src', '');\n                }\n\n                tag = null; // release reference for gc\n            }\n        };\n\n        tag.onload = tag.onerror = cancel;\n\n        this._.emitter.once('select', null, cancel);\n    },\n\n    bindGoogleForceRefresh: function bindGoogleForceRefresh() {\n        var self = this;\n\n        if (this._.elements.adframe) {\n            var iframe = this._.elements.adframe.contentDocument.getElementsByTagName('iframe')[0];\n\n            if (typeof iframe !== 'undefined') {\n                iframe.onload = function () {\n                    self.forceAdRefresh();\n                };\n            }\n        }\n    },\n\n    forceAdRefresh: function forceAdRefresh() {\n        if (Imgur.Environment.l_ads) {\n            this._.ad.nextImageLoadRefreshesAd = true;\n        }\n    },\n\n    checkAdTime: function checkAdTime() {\n        var e = this._.elements;\n        var self = this;\n\n        if (this._.ad.nextImageLoadRefreshesAd) {\n            var e = self._.elements;\n\n            if (window.usesABP && typeof window.abp_ad !== 'undefined') {\n                this._.ad.abpAdId.removeClass('nodisplay');\n\n                try {\n                    googletag.pubads().refresh([window.abp_ad]);\n                } catch (e) {}\n            } else if (typeof window.dfp_adslot !== 'undefined') {\n                try {\n                    self._.elements.adframe.contentWindow.tagRefresh();\n                    self.bindGoogleForceRefresh();\n                } catch (e) {}\n            }\n\n            if (typeof window.leaderboard_slot !== 'undefined' && window.leaderboard_slot && !Imgur.Environment.auth.id) {\n                try {\n                    window.leaderboard_slot.setTargeting('url', location.href);\n                    googletag.pubads().refresh([window.leaderboard_slot]);\n                } catch (e) {}\n            }\n\n            if (!this._.captionsEnabled && !Imgur.Environment.auth.id) {\n                $('.trc_rbox').remove();\n\n                window._taboola = window._taboola || [];\n                _taboola.push({\n                    mode: 'thumbnails-a',\n                    container: 'taboola-below-article-thumbnails',\n                    placement: 'LoggedOut_NonGallery',\n                    target_type: 'mix'\n                });\n\n                window._taboola = window._taboola || [];\n                _taboola.push({\n                    flush: true\n                });\n            }\n\n            Imgur.Util.jafoLog({\n                event: 'mattShown'\n            });\n\n            this._.ad.nextImageLoadRefreshesAd = false;\n            window.clearTimeout(this._.ad.currentTimeout);\n\n            this._.ad.currentTimeout = window.setTimeout(function () {\n                self._.ad.nextImageLoadRefreshesAd = true;\n                self._.ad.currentTimeout = undefined;\n            }, this._.ad.timeTillRefresh);\n        } else {\n            if (!this._.ad.currentTimeout) {\n                this._.ad.currentTimeout = window.setTimeout(function () {\n                    self._.ad.nextImageLoadRefreshesAd = true;\n                    self._.ad.currentTimeout = undefined;\n                }, this._.ad.timeTillRefresh);\n            }\n        }\n    },\n\n    removePromotedCompanion: function removePromotedCompanion() {\n        $(this._.elements.promoCompanion).remove();\n    },\n\n    removeAds: function removeAds() {\n        if (Imgur.Environment.l_ads) {\n            $(this._.elements.adWrapper).remove();\n            $('#div-gpt-ad-1450206165364-0').remove();\n            $('.trc_rbox').remove();\n            this._.ad.abpAdId.addClass('nodisplay');\n\n            this._.ad.nextImageLoadRefreshesAd = false;\n            this._.ad.injectAd = true;\n        }\n    },\n\n    showAds: function showAds(custHtml, callBack) {\n        if (!Imgur.Environment.l_ads && !custHtml) {\n            return;\n        }\n\n        // custHtml is used for promoted post companions\n        this._.adType = 'normal';\n\n        if (typeof Imgur.getInstance()._.auth != 'undefined' && Imgur.getInstance()._.auth.isPro === true) {\n            return;\n        }\n\n        var hash = this.getHash(),\n            rD = this._.sideGallery.getImage(hash),\n            src = '//' + Imgur.Environment.host + '/ads?page=',\n            ad_div,\n            panelAd,\n            custAd,\n            addedEle;\n\n        if (document.location.protocol == 'https:') {\n            //Only one path to take for https ads (no parameters matter)\n            ad_div = 'div-gpt-ad-1378449215044-0';\n            src += 'ssl';\n        } else if (rD.hasOwnProperty('in_gallery')) {\n            //Page must be inside and main must be false\n            ad_div = 'div-gpt-ad-1345436959737-0';\n            src += 'inside';\n        } else {\n            //Page must be (inside or other) and main must be true and hot (or older than 20 min)\n            ad_div = 'div-gpt-ad-1407357841031-0';\n            src += 'inside&main=1&hot=1';\n        }\n\n        if (!window.usesABP) {\n            var adBox = $('#right-content #under-sidebar-parent.advertisement');\n\n            if (!adBox.length) {\n                $('#right-content #side-gallery').after('<div class=\"advertisement\"></div>');\n            }\n\n            panelAd = $('#right-content #under-sidebar-parent.advertisement .panel-ad');\n            custAd = $('#right-content #under-sidebar-parent.advertisement .custom-ad');\n\n            if (custHtml) {\n                // promoted or other custom thing\n                if (panelAd.length) {\n                    // hide the normal ad\n                    panelAd.addClass('nodisplay');\n                }\n\n                if (custAd.length < 1) {\n                    $('#right-content #under-sidebar-parent.advertisement').append('<div class=\"custom-ad\">' + custHtml + '</div>');\n                    custAd = $('#right-content #under-sidebar-parent.advertisement .custom-ad');\n                }\n\n                custAd.html(custHtml);\n                addedEle = custAd;\n            } else {\n                // kill the custom ad\n                custAd.remove();\n\n                panelAd.html('<iframe id=\"adiframe\" class=\"adframe\" src=\"' + src + '\" scrolling=\"no\" frameBorder=\"0\"></iframe>');\n                addedEle = panelAd;\n            }\n\n            if (!this._.isPromoted) {\n                if (!this._.captionsEnabled && !Imgur.Environment.auth.id) {\n                    this.injectLeaderboardAd('nongallery');\n                } else if (!Imgur.Environment.auth.id && this._.captionsEnabled) {\n                    this.injectLeaderboardAd('gallery');\n                }\n            }\n\n            if (!custHtml) {\n                this._.elements.adframe = $('#adiframe').get(0);\n            }\n        }\n\n        this._.ad.nextImageLoadRefreshesAd = true;\n        this._.ad.injectAd = false;\n\n        if (typeof callBack === 'function') {\n            // The callback can interact with 3rd-party code conceivably. Thus, we\n            // give it a very specific this var to not expose any of our code.\n            callBack.apply(window, [\n            // what we placed\n            custHtml,\n            // where we placed it\n            addedEle]);\n        }\n    },\n\n    injectLeaderboardAd: function injectLeaderboardAd(page) {\n        if (Imgur.Environment.l_ads) {\n            $('#topbar').after('<div id=\"div-gpt-ad-1450206165364-0\" class=\"center advertisement\"></div>');\n\n            //Only need to refresh targeting around an ad if it has already been instantiated\n            if (window.leaderboard_slot) {\n                googletag.pubads().clearTargeting();\n                googletag.pubads().setTargeting('page', page);\n                googletag.pubads().setTargeting('login', Imgur.Environment.auth.id ? 'yes' : 'no');\n                googletag.pubads().setTargeting('url', location.href);\n\n                googletag.pubads().refresh([window.leaderboard_slot]);\n            } else {\n                googletag.cmd.push(function () {\n                    window.leaderboard_slot = googletag.defineSlot('/4761660/Leaderboard_970x90_ATF', [[970, 90], [728, 90]], 'div-gpt-ad-1450206165364-0').setTargeting('page', page).setTargeting('login', Imgur.Environment.auth.id ? 'yes' : 'no').setTargeting('url', location.href).addService(googletag.pubads());\n                    googletag.pubads().enableSingleRequest();\n                    googletag.pubads().collapseEmptyDivs();\n                    googletag.enableServices();\n                });\n\n                googletag.cmd.push(function () {\n                    googletag.display('div-gpt-ad-1450206165364-0');\n                });\n            }\n        }\n    },\n\n    reportBadAds: function reportBadAds() {\n        if (runSlots.blocked()) {\n            // adblocker enabled\n            humanMsg.displayMsg('We’ve detected that you have an ad blocker enabled. If you’d like to help report ads and support Imgur, please consider whitelisting us.', 'error-msg');\n        } else {\n            ReactDOM.render(React.createElement(Imgur.ReportBadAds, null), document.getElementById('report-bad-ads-modal'));\n        }\n    },\n\n    hideZoomedImage: function hideZoomedImage() {\n        if ($('.jquery-image-zoom').is(':visible')) {\n            $('div.jquery-image-zoom a').click();\n        }\n\n        $.colorbox.close();\n    },\n\n    timeoutNextImage: function timeoutNextImage() {\n        if (this._.autoBrowse && !this._.autoBrowseTimeout) {\n            var timeoutPeriod = this._.autoBrowseWait;\n\n            var self = this;\n            this._.autoBrowseTimeout = setTimeout(function () {\n                self._.autoBrowseTimeout = null;\n                self._.emitter.trigger('buttonNav', 'next');\n            }, timeoutPeriod);\n        } else if (this._.autoBrowse) {\n            window.clearTimeout(this._.autoBrowseTimeout);\n\n            this._.autoBrowseTimeout = null;\n            this.timeoutNextImage();\n        }\n    },\n\n    bindAutoBrowse: function bindAutoBrowse() {\n        var self = this;\n\n        $(document).keyup(function (e) {\n            if (e.ctrlKey && e.keyCode === 120) {\n                self._.autoBrowse = !self._.autoBrowse;\n\n                if (self._.autoBrowse) {\n                    self.timeoutNextImage();\n                    humanMsg.displayMsg('Starting auto browse in ' + Math.ceil(self._.autoBrowseWait / 1000) + ' seconds!');\n                } else {\n                    clearTimeout(self._.autoBrowseTimeout);\n                    humanMsg.displayMsg('Done already?');\n                }\n            }\n\n            return true;\n        });\n    },\n\n    navToImage: function navToImage(which, isPopState) {\n        // If the current image is the next requested image\n        if ('hash' in which && this._.hash == which.hash) {\n            return;\n        }\n\n        if ('performance' in window && 'memory' in window.performance) {\n            Imgur.Util.jafoLog({\n                'event': 'nextPageMemory',\n                'meta': {\n                    'pageDepth': Imgur.getInstance().pageDepth,\n                    'used': window.performance.memory.usedJSHeapSize,\n                    'total': window.performance.memory.totalJSHeapSize,\n                    'limit': window.performance.memory.jsHeapSizeLimit\n                }\n            });\n        }\n\n        Imgur.getInstance().pageDepth++;\n\n        var oldHash = this.getHash();\n        this._.initialImage = false;\n        this.hideZoomedImage();\n        this.setHash(which.hash);\n        this.updatePage(isPopState, oldHash);\n        this.timeoutNextImage();\n\n        this._.emitter.trigger('navToImage', this.getHash());\n    },\n\n    logNavigation: function logNavigation(direction, trigger, target) {\n        if (trigger === 'inserted') {\n            // Programmatically selected, we only care about user-triggered\n            return;\n        }\n\n        Imgur.Util.jafoLog({\n            event: 'galleryNav',\n            meta: _.extend(Imgur.Gallery.getInstance().getGalleryMetadata(), {\n                recommendationsBox: trigger === 'recommendationClick',\n                direction: direction,\n                trigger: trigger,\n                targeted: target.hash,\n                visibleTooltip: this._.tooltip && this._.tooltip.showing() ? this._.tooltip.name() : null,\n                layout: this._.sideGallery.state.layout,\n                position: this._.sideGallery.selectedPosition() + 1 + (direction == 'next' ? 1 : -1),\n                recBoxPosition: target.recBoxPosition\n            })\n        });\n    },\n\n    isInvalidKeyContext: function isInvalidKeyContext(e) {\n        var $target = $(e.target);\n\n        if ($target.attr('contenteditable') === 'true') {\n            return true;\n        }\n\n        if (e.ctrlKey || e.altKey || e.metaKey) {\n            return true;\n        }\n\n        return $target.is('input, textarea');\n    },\n\n    bindHotKeys: function bindHotKeys() {\n        var _this = this;\n\n        this._.emitter.on('blockHotKeys', null, function (block) {\n            _this.hotKeysBlocked = block;\n        });\n\n        var keyCodes = {\n            ARROW_LEFT: [37],\n            ARROW_RIGHT: [39],\n            ENTER: [13],\n            MINUS: [109, 189],\n            PLUS: [187, 61, 107],\n            NINE: [57, 105],\n            ZERO: [45, 48, 96],\n            R: [82],\n            S: [83]\n        };\n        // 'dash' key was changed to 173 in firefox https://bugzilla.mozilla.org/show_bug.cgi?id=787504, but keycode 173 is the mute button in chrome\n        if (navigator.userAgent.toLowerCase().indexOf('firefox') > -1) {\n            keyCodes.MINUS.push(173);\n        }\n\n        $(document).keydown(_.throttle(function (e) {\n            if (_this.hotKeysBlocked) {\n                return;\n            }\n\n            if (!_this.isInvalidKeyContext(e)) {\n                if (keyCodes.ARROW_LEFT.indexOf(e.keyCode) !== -1 && _this._.sideGallery.getPrevImage()) {\n                    e.preventDefault();\n\n                    _this._.emitter.trigger('keyboardNav', 'prev');\n                } else if (keyCodes.ARROW_RIGHT.indexOf(e.keyCode) !== -1 && _this._.sideGallery.getNextImage()) {\n                    if (Imgur.Environment.hasAccess && !Imgur.Environment.captionsEnabled) {\n                        return true;\n                    }\n\n                    e.preventDefault();\n\n                    _this._.emitter.trigger('keyboardNav', 'next');\n                } else if (keyCodes.ENTER.indexOf(e.keyCode) !== -1) {\n                    var zoomed = $('.jquery-image-zoom');\n\n                    if (zoomed.length) {\n                        zoomed.click();\n                    } else {\n                        var image = $('.post-image img');\n                        if (image.length) {\n                            image[0].click();\n                        }\n                    }\n                } else if (keyCodes.MINUS.indexOf(e.keyCode) !== -1 && _this._.captionsEnabled) {\n                    // Only display popup when key is pressed\n                    var $vote = $('.post-action-downvote');\n\n                    //Don't show for veto\n                    if ($vote.length && !$vote.hasClass('red')) {\n                        humanMsg.displayMsg('<div class=\"favorited downvoted_msg\"></div>', 'action-msg');\n                    }\n\n                    var event = new MouseEvent('mouseup', {\n                        'view': window,\n                        'bubbles': true,\n                        'cancelable': true\n                    });\n\n                    $vote[0].dispatchEvent(event);\n                } else if (keyCodes.PLUS.indexOf(e.keyCode) !== -1 && _this._.captionsEnabled) {\n                    // Only display popup when key is pressed\n                    var $vote = $('.post-action-upvote');\n\n                    //Don't show for veto\n                    if ($vote.length && !$vote.hasClass('green')) {\n                        humanMsg.displayMsg('<div class=\"favorited upvoted_msg\"></div>', 'action-msg');\n                    }\n\n                    var event = new MouseEvent('mouseup', {\n                        'view': window,\n                        'bubbles': true,\n                        'cancelable': true\n                    });\n\n                    $vote[0].dispatchEvent(event);\n                } else if (keyCodes.NINE.indexOf(e.keyCode) !== -1) {\n                    if (_this._.post) {\n                        _this._.post.loadAll();\n                    } else {\n                        //First load, post not in react\n                        $('.post-loadall').click();\n                    }\n                } else if (keyCodes.S.indexOf(e.keyCode) !== -1) {\n                    $('.post-action-stats').click();\n                } else if (keyCodes.R.indexOf(e.keyCode) !== -1) {\n                    _this.reportBadAds();\n                } else if (keyCodes.ZERO.indexOf(e.keyCode) !== -1) {\n                    // Only display popup when key is pressed\n                    var $fav = $('.post-action-favorite');\n\n                    if ($fav.length && !$fav.hasClass('aqua')) {\n                        humanMsg.displayMsg('<div class=\"favorited\"></div>', 'action-msg');\n                    } else {\n                        humanMsg.displayMsg('<div class=\"favorited unfavorited\"></div>', 'action-msg');\n                    }\n\n                    var event = new MouseEvent('mouseup', {\n                        'view': window,\n                        'bubbles': true,\n                        'cancelable': true\n                    });\n\n                    $fav[0].dispatchEvent(event);\n                }\n\n                return true;\n            }\n\n            return true;\n        }, 100));\n\n        if (this._.isRandom) {\n            this._.elements.$randomButton.click(function (e) {\n                e.preventDefault();\n                self._.emitter.trigger('keyboardNav', 'next');\n            });\n        }\n    },\n\n    getSideGallery: function getSideGallery() {\n        return this._.sideGallery;\n    },\n\n    forceScrollToCaption: function forceScrollToCaption() {\n        var hash = document.location.hash.substr(1);\n        var commentId = parseInt(hash, 10);\n\n        if (!isNaN(commentId)) {\n            var $el = $('#caption-' + hash);\n            this.scrollToCaption($el);\n        }\n    },\n\n    scrollToCaption: function scrollToCaption($el) {\n        var y = $el.offset().top;\n        $('body').scrollTop(y);\n        var $child = $el.find('.textbox').first();\n        $child.addClass('flash');\n\n        setTimeout(function () {\n            $child.removeClass('flash');\n        }, 2000);\n    }\n\n});\n\nClass.addSingleton(Imgur.InsideNav);\n//# sourceMappingURL=insidenav.js.map\n","Namespace('Imgur.Fullscreen');\n\nImgur.Fullscreen = Class.extend({\n    init : function(params) {\n        this._ = $.extend({\n            signed  : Imgur.getInstance()._.signed,\n            el      :\n                {\n                    $fullscreenBox\t\t\t\t\t: $('.fullscreenBox'),\n                    $fullscreenLink\t\t\t\t\t: $('.album-fullscreen-link'),\n                    $userActionLinks                : $('.userActionLinks'),\n                    $embed                          : $('#fullscreenEmbed')\n                }\n        }, params);\n\n        if(window.fullScreenApi && fullScreenApi.supportsFullScreen && this._.el.$embed.length) {\n\n            if(this._.signed) {\n                this._.el.$fullscreenBox.hide();\n\n                this._.el.$fullscreenBox    = $('.fullscreenAlbumOptions');\n                this._.el.$fullscreenLink   = $('.fullscreenAlbumOptions .album-fullscreen-link');\n            }\n\n            if(this._.el.$fullscreenLink.length) {\n                this._.el.$fullscreenLink.unbind('click');\n                this._.el.$fullscreenLink[0].removeEventListener('click', this.viewFullscreen);\n                this._.el.$fullscreenLink[0].addEventListener   ('click', this.viewFullscreen, true );\n            }\n\n            // Fit the fullscreen link in the box.\n            if(this._.el.$userActionLinks.hasClass('vertical')) {\n                this._.el.$userActionLinks.css({\n                    'line-height'   : '22px',\n                    'padding'       : '8px',\n                    'font-size'     : '13px'\n                });\n            }\n\n            this._.el.$embed.attr('src','');\n\n            this._.el.$fullscreenBox.show();\n        }\n    },\n\n\tviewFullscreen : function() {\n\t\tvar self \t\t = Imgur.Fullscreen.getInstance();\n\t\tvar embed        = self._.el.$embed;\n        var embedElement = embed[0];\n\n        // Try again if DOM not ready..\n        if(!self._.el.$embed.length) {\n            setTimeout(self.viewFullscreen, 80);\n\n        } else if(!self._.el.$embed.attr('src') || !self._.el.$embed.attr('src').length) {\n            // Initial load, make a request for the embed album.\n            self._.el.$embed.attr('src','/a/'+Imgur.Album.getInstance()._.id+'/embed');\n            $(self._.el.$embed[0].contentDocument).ready(self.viewFullscreen);\n            humanMsg.displayMsg('Starting fullscreen mode...');\n            return;\n        }\n\n\t\tself._.el.$embed.show();\n\t\twindow.fullScreenApi.requestFullScreen(embedElement);\n\n\t\tsetTimeout( self.focusOverlayAfterOpen, 99);\n\n        var checkIfFullscreen = setInterval( function() {\n            self.showOverlayIfOpen(checkIfFullscreen);\n        }, 100);\n\n        var checkIfExitedFullscreen = setInterval( function() {\n            self.closeOverlayIfExited(checkIfExitedFullscreen);\n        }, 100);\n\t},\n\n    focusOverlayAfterOpen : function() {\n        var self = Imgur.Fullscreen.getInstance();\n\n        if (fullScreenApi.isFullScreen()) {\n\n            self._.el.$embed[0].contentWindow.focus();\n            $(self._.el.$embed[0].contentWindow).keydown(function(e){\n                if(e.which==27) {\n                    self._.el.$embed.hide();\n                }\n                e.stopPropagation();\n            });\n        } else {\n            window.fullScreenApi.requestFullScreen(self._.el.$embed[0]);\n            setTimeout(self.focusOverlayAfterOpen, 200);\n        }\n    },\n\n    showOverlayIfOpen : function(intervalID) {\n        var self = Imgur.Fullscreen.getInstance();\n\n        // Show if it's still hidden for some reason\n        if(!self._.el.$embed.is(':visible')) {\n            self._.el.$embed.css({\n                display     : 'block',\n                opacity     : '100%'\n            });\n        } else {\n            clearInterval(intervalID);\n        }\n    },\n\n    closeOverlayIfExited : function(intervalID) {\n        var self = Imgur.Fullscreen.getInstance();\n        // Close if it's still open for some reason\n\n        if (!fullScreenApi.isFullScreen()) {\n            if(self._.el.$embed.is(':visible')) {\n                self._.el.$embed.css({\n                    display     : 'none'\n                });\n            } else {\n                clearInterval(intervalID);\n            }\n        }\n    }\n\n});\n\nClass.addSingleton(Imgur.Fullscreen);","Namespace('Imgur.Caption.Reply');\n\nImgur.Caption.Reply = React.createClass({\n    displayName: 'Reply',\n\n    propTypes: {\n        image: React.PropTypes.object.isRequired,\n        parentId: React.PropTypes.number,\n        parentAuthorId: React.PropTypes.number,\n        autofocus: React.PropTypes.bool,\n        onSuccess: React.PropTypes.func,\n        closeReply: React.PropTypes.func\n    },\n\n    contextTypes: {\n        msid: React.PropTypes.string.isRequired,\n        onSubmit: React.PropTypes.func.isRequired\n    },\n\n    getDefaultProps: function() {\n        return {\n            maxLength: 140,\n            autofocus: false\n        };\n    },\n\n    getInitialState: function() {\n        return {\n            text: '',\n            error: '',\n            showingLoader: false\n        };\n    },\n\n    componentDidMount: function() {\n        $(this.refs.textarea).autoResize({animate: false, extraSpace: 0});\n\n        if (this.props.autofocus) {\n            this.refs.textarea.focus();\n        }\n    },\n\n    getValue: function() {\n        return $.trim(this.state.text);\n    },\n\n    handleSubmit: function(e) {\n        e.preventDefault();\n        e.stopPropagation();\n        this._submit();\n    },\n\n    handleError: function(xhr) {\n        var response = _.isObject(xhr.responseJSON) ? xhr.responseJSON : xhr;\n\n        if(response && 'data' in response && 'error' in response.data && 'message' in response.data.error) {\n            this.setState({\n                error: response.data.error.message\n            });\n        } else {\n            this.setState({\n                error: 'An unknown error occurred.'\n            });\n        }\n    },\n\n    _submit: function() {\n        if (this.state.text.length === 0 || this.state.text.length > this.props.maxLength) {\n            return;\n        }\n\n        var postData = {\n            parent_id: this.props.parentId,\n            parent_author: this.props.parentAuthorId,\n            caption: this.state.text,\n            sid: this.context.msid,\n            gallery: Imgur.Gallery.getInstance().getGalleryMetadata()\n        };\n\n        if(!Imgur.Environment.signed) {\n            Imgur.getInstance().signin('commentAttempt');\n\n            // When the controller sees this, it will \n            // redirect to the #id URL when the user logs back in\n            postData.redirect = true; \n        }\n\n        this.setState({\n            showingLoader: true\n        });\n\n        var jqx = $.ajax({\n            url: '/gallery/action/caption/' + this.props.image.hash,\n            type: 'POST',\n            data: postData\n        });\n        \n        jqx.always(_.bind(function() {\n            this.setState({\n                showingLoader: false\n            });\n        }, this));\n\n        Imgur.Util.jafoLog({\n            event: 'commentSubmissionButton',\n            meta: {\n                parentId: this.props.parentId || null,\n                hash: this.props.image.hash\n            }\n        });\n                \n        if(Imgur.Environment.signed) {\n            jqx.done(_.bind(function(response) {\n                if(response.success) {\n                    response.data.caption.just_inserted = true;\n\n                    this.props.onSuccess();\n                    Imgur.Caption.getInstance().mergeCaptions(response.data.caption.hash, [response.data.caption]);\n\n                    var vote = {caption_id: response.data.caption.id, vote: 'up'};\n                    Imgur.Caption.getInstance().mergeVotes(response.data.caption.hash, [vote]);\n\n                    this.context.onSubmit(response.data.caption);\n                } else {\n                    this.handleError(response);\n                }\n            }, this));\n\n            jqx.fail(_.bind(this.handleError, this));\n        }\n    },\n\n    handleTextChanged: function(e) {\n        this.setState({\n            text: e.target.value\n        });\n    },\n\n    handleClick: function(e) {\n        // Stop clicks from propagating up to the parent, because click triggers an expand / collapse\n        e.stopPropagation();\n        this.refs.textarea.focus();\n    },\n\n    handleKeyDown: function(e) {\n        if(13 === e.keyCode) { // Enter key\n            e.preventDefault();\n            this._submit();\n        } else if(27 === e.keyCode) { // Escape key\n            this.refs['textarea'].blur();\n        }\n    },\n\n    render: function() {\n        var counter = this.props.maxLength - this.state.text.length,\n            cx = classNames;\n\n        var formCls = cx({\n            'caption-create': true,\n            'loading': this.state.showingLoader,\n            'counter-exceeded': counter < 0\n        });\n\n        return React.DOM.form({\n            className: formCls, \n            onClick: this.handleClick, \n            onSubmit: this.handleSubmit\n        },\n            React.DOM.span({className: 'icon-x right pointer', onClick: this.props.onClose}),\n            React.DOM.textarea({\n                ref: 'textarea',\n                onKeyDown: this.handleKeyDown,\n                onKeyUp: this.handleKeyUp,\n                onChange: this.handleTextChanged,\n                onFocus: this.handleFocus,\n                placeholder: 'Write a comment',\n                value: this.state.text\n            }),\n            (this.state.error.length > 0 ? React.DOM.div({className: 'error'}, this.state.error) : ''),\n            React.DOM.div({className: 'summary'},\n                React.DOM.input({value: 'Post', type: 'submit', id: 'submit-comment', className: 'right btn btn-main', disabled: ((counter == this.props.maxLength || counter < 0) ? 'disabled' : '')}),\n                React.DOM.a({className: 'rules left', href: '/rules', target: '_blank'}, 'remember the community rules'),\n                React.DOM.div({className: 'counter right'}, counter)\n            )\n        );\n    }\n});\n","Namespace('Imgur.Gallery');\n\nImgur.Gallery = Imgur.extend({\n    init : function(emitter, params, history) {\n        $.extend(this.settings, params);\n\n        this._ = _.merge({\n            'sid'                   : params.sid,\n            'auth'                  : params.auth || {},\n            'signed'                : false,\n            'cdnURL'                : params.cdnUrl,\n            'baseURL'               : params.baseURL,\n            'sort'                  : 'hot',\n            'section'               : null,\n            'window'                : 'day',\n            'page'                  : 0,\n            'maxPage'               : 0,\n            'jafoPage'              : 0,\n            'hash'                  : null,\n            'nextHash'              : null,\n            'prevHash'              : null,\n            'showPast'              : true,\n            'commentName'           : 'comment',\n            'comment_sort'          : 'best',\n            'indexName'             : 'gallery',\n            'searchQuery'           : null,\n            'account_url'           : null,\n            'emitter'               : emitter,\n            'mobile'                : false,\n            'isRandom'              : false,\n            'gallery_type'          : null,\n            'tagsCookie'            : 'tags',\n            'isIPad'                : (navigator.userAgent.match(/iPad/i)),\n            'history'               : history,\n            'el' : {\n                'arrows'             : $('.arrow-up, .arrow-down'),\n                'randomButton'       : $('.random-button'),\n                'outside': {\n                    'pageDivider'       : '#imagelist .page-divider',\n                    'noMorePagesID'     : '#nomore',\n                    'tagLoaderClass'    : '.outside-loader',\n                    'loaderID'          : '.imagelist-loader',\n                    'extendedImagelist' : '#extended-imagelist',\n                    'loadMoreID'        : '#load-more',\n                    '$sortOptions'      : $('.sentence-sorting .options a'),\n                    'content'           : $('#imagelist'),\n                    'messagebox'        : $('#messagebox'),\n                    'comboboxes'        : $('.combobox'),\n                    '$toggleViral'      : $('#showviral'),\n                    '$toggleUserSub'    : $('#showusersub'),\n                    'galleryNewInfo'    : {\n                        'id'    : '#gallery-new-info',\n                        '$okay' : $('#gallery-new-info-okay'),\n                        '$no'   : $('#gallery-new-info-decline')\n                    }\n                },\n                'inside' : {\n                    'reportImageLink'       : $('#report-image'),\n                    '$shareTabButton'       : $('.button-container .share'),\n                    '$optionsButton'        : $('.button-container .options-btn'),\n                    '$shareLink'            : $('.button-container .share-link'),\n                    'counter'               : null,\n                    'image'                 : $('.image'),\n                    'zoom'                  : $('.zoom'),\n                    'submitCaptionButton'   : $('.submit-caption-button'),\n                    'commentExpand'         : $('#expand-comments'),\n                    'comboboxes'            : $('.combobox'),\n                    'commentSort'           : $('#comment-sort'),\n                    '$comments'             : $('#captions'),\n                    'reCaptionLink'         : $('#meme-image'),\n                    'downloadAlbumForm'     : {\n                        'id'         : '#download-album-form',\n                        'emailInput' : $('#download-album-form #email'),\n                        'form'       : $('#download-album-form #download-form'),\n                        'message'    : $('#message'),\n                        'save'       : $('#download-album-form #save'),\n                        'loader'     : $('#download-loader')\n                    }\n                },\n                'user' : {\n                    'notorietyLink'    : $('#notoriety-link'),\n                    'notorietyList'    : $('#notoriety-list'),\n                    'buttonComments'   : $('.button.comments'),\n                    'buttonFavorites'  : $('.button.likes'),\n                    'buttonSubmitted'  : $('.button.submitted'),\n                    'buttonReplies'    : $('.button.replies'),\n                    'captions'         : $('#captions'),\n                    'favorites'        : $('#likes'),\n                    'loader'           : $('#loader'),\n                    'pmButton'         : $('#pm-button'),\n                    'pmWrapper'        : $('#pm-wrapper'),\n                    'pmBody'           : $('#pm-wrapper textarea'),\n                    'pmSendButton'     : $('#pm-send-button'),\n                    'pmForm'           : $('#pm-wrapper form'),\n                    'pmSent'           : $('#pm-sent'),\n                    'updateLevelTable' : $('#update-level-table'),\n                    '$carousel'        : $('#thumbs-top')\n                },\n                'past' : {\n                    'wrapper'           : $('#past-wrapper'),\n                    'previewContent'    : $('#past-preview'),\n                    'loader'            : $('#past-loader'),\n                    'link'              : $('#past-link'),\n                    'slider'            : $('#slider'),\n                    'days'              : $('#days'),\n                    'ticker'            : $('#slider-wrapper .ticker'),\n                    'positiveTickClass' : 'positive',\n                    'negativeTickClass' : 'negative',\n                    'submitButton'      : $('#past-submit'),\n                    'calendar'          : $('#past-calendar')\n                },\n                'colorboxConfirmForm' : {\n                    'id'          : '#colorbox-confirm',\n                    'title'       : $('#colorbox-confirm h3'),\n                    'message'     : $('#colorbox-confirm-message'),\n                    'yes'         : $('#colorbox-confirm-yes'),\n                    'no'          : $('#colorbox-confirm-no'),\n                    'loader'      : $('#colorbox-confirm .small-loader')\n                },\n                'embedAlbumForm': Imgur.Utilities.Embed.elEmbedAlbumForm(),\n                'colorboxEmbed' : Imgur.Utilities.Embed.elColorboxEmbed(),\n                'search' : {\n                    '$headerSearch'      : $('.search-container'),\n                    '$headerSearchInput' : $('.search-container input[name=\"q\"]'),\n                    '$advanced'          : $('#search_advanced'),\n                    '$advancedForm'      : $('#search_advanced form'),\n                    '$advancedAllInput'  : $('#search_advanced form input[name=\"q_all\"]'),\n                    'imageCard'          : '.posts-search .post-list, .posts-search .post',\n                    '$container'         : $('#imagelist'),\n                    'size'               : '#q_size',\n                    '$sizePx'            : $('input[name=\"q_size_px\"]'),\n                    '$sizeMpx'           : $('input[name=\"q_size_mpx\"]'),\n                    '$sizeFmt'           : $('input[name=\"q_size_fmt\"]'),\n                    '$sizeToggle'        : $('#q_size_is_mpx'),\n                    '$pxCombo'           : $('#size_in_px'),\n                    '$mpxCombo'          : $('#size_in_mpx')\n                },\n                'side' : {\n                    'links' : $('#fixed-side-footer-links'),\n                    'imagePanels' : $('.imagelist-panels')\n                }\n            },\n            'vars'              : {\n                'pastPage'           : 0,\n                'scrolledPage'       : 0,\n                'scrolledImageSet'   : 0,\n                'pastTickerTimer'    : null,\n                'currentTheme'       : 'dark'\n            },\n            'messages'          : null,\n        }, params);\n\n        this._super(this._);\n\n        return this._;\n    },\n\n    //*********************** GENERIC FUNCTIONS **********************//\n\n    getEmitter : function() {\n        return this._.emitter;\n    },\n\n    getCacheValue : function() {\n        var value = '';\n\n        $('script[type*=javascript]').each(function () {\n            if(this.src) {\n                var data = this.src.split('?');\n                var file = $.trim((data[0].split('/').pop()));\n\n                if(file == 'gallery.js') {\n                    value = data[1];\n                    return;\n                }\n            }\n        });\n\n        return value;\n    },\n\n    isNumberKey : function(e) {\n        var charCode = (e.which) ? e.which : e.keyCode;\n        if (charCode > 31 && (charCode < 48 || charCode > 57)) return false;\n        return true;\n    },\n\n    ungallery: function() {\n        humanMsg.displayMsg('Working...');\n\n        var data = {\n            hash: this.imgurInsideNav.getHash(),\n            type: 'gallery',\n            kill: 'true',\n            sid: this._.sid\n        };\n\n        $.post('/adm/removals/delete', data, function(res) {\n            humanMsg.displayMsg('Image was removed from the gallery');\n        });\n    },\n\n    spamPost: function() {\n        humanMsg.displayMsg('Working...');\n\n        var hash = this.imgurInsideNav.getHash();\n        var url = this._.baseURL + '/action/remove_image/' + hash;\n        var data = {\n            remove: true,\n            sid: this._.sid\n        };\n\n        $.post(url, data, function(res) {\n            humanMsg.displayMsg('Image was marked as spam');\n        });\n    },\n\n    mature: function() {\n        humanMsg.displayMsg('Working...');\n\n        var hash = this.imgurInsideNav.getHash();\n        var url = this._.baseURL + '/action/mature_image/' + hash;\n        var data = {\n            sid: this._.sid\n        };\n\n        $.post(url, data, _.bind(function(res) {\n            humanMsg.displayMsg('Image was marked mature');\n            this.imgurInsideNav.getImage().nsfw = true;\n        }, this));\n    },\n\n    ban: function() {\n        var postParms;\n\n        if(this._.account_url != '') {\n            postParms = {\n                'account_url'  : this._.account_url,\n                'type'         : 'main',\n                'sid'          : this._.sid,\n                'offending_url': window.location.href\n            };\n\n            $.post('/adm/removals/ban', postParms, _.bind(function(data) {\n                var msg = 'The ban hammer hit '+this._.account_url+' successfully for '+postParms.offending_url;\n                humanMsg.displayMsg(msg);\n            }, this));\n        }\n    },\n\n    obfuscate: function() {\n        var hash = this.imgurInsideNav.getHash();\n\n        $.post('/adm/obfuscate', {hash: hash, sid: this._.sid}, _.bind(function(data) {\n            humanMsg.displayMsg('Post has been obfuscated');\n        }, this));\n    },\n\n    spam: function() {\n        if(this._.account_url != '') {\n            $.post('/adm/removals/markspammer', {'account_url': this._.account_url, 'type': 'main', 'sid': this._.sid}, _.bind(function(data) {\n                humanMsg.displayMsg(this._.account_url+' has been spammed');\n            }, this));\n        }\n    },\n\n    warn: function() {\n        var reference_data = window.location.href;\n\n        if(this._.account_url != '') {\n            $.post('/adm/removals/warn', {'account_url': this._.account_url, 'data': reference_data, 'sid': this._.sid}, _.bind(function() {\n                humanMsg.displayMsg(this._.account_url+' has been warned');\n            }, this));\n        }\n    },\n\n    trophy: function(ev) {\n        var $targ = $(ev.target);\n        var tType = $targ.attr('data-type');\n        var tName = $targ.text();\n        var trophy = $targ.val();\n        // this sucks - why isn't the member here updated? -BPM 2015.10.02\n        var img = this.imgurInsideNav.getCurrentImage();\n        var match;\n        var data;\n\n        if (tType === 'comment') {\n            match = document.location.pathname.match(/^\\/gallery\\/[^\\/]+\\/comment\\/([0-9]+)\\/?/);\n\n            if (!match) {\n                humanMsg.displayMsg('Please visit a comment permalink to award that.', 'error-msg');\n\n                return;\n            }\n\n            data = {\n                'comment_id': match[1],\n            };\n        }\n\n        if (tType === 'image' && img.account_url) {\n            if (!/^\\/(gallery\\/[^\\/]+|topic\\/[a-zA-Z0-9_-]+\\/[^\\/]+)\\/?/.test(document.location.pathname)) {\n                humanMsg.displayMsg('Please visit the gallery or topic page for this post to award that.', 'error-msg');\n\n                return;\n            }\n\n            data = {\n                'hash': img.hash,\n            };\n        }\n\n        if (typeof data === 'object') {\n            $.post('/adm/trophies/'+trophy, data, _.bind(function(data) {\n                humanMsg.displayMsg('Awarded '+tName+' trophy!');\n            }, this));\n        }\n\n        ev.preventDefault();\n    },\n\n    reportImage : function() {\n        var self = this;\n        var hash = self.imgurInsideNav.getHash();\n        var metadata = {\n            type: 'galleryPost',\n            hash: hash,\n            isAlbum: self.imgurInsideNav._.image.is_album,\n            nsfw: self.imgurInsideNav._.image.nsfw,\n        };\n\n        Imgur.Util.jafoLog({\n            event: 'reportInvoked',\n            meta: metadata\n        });\n    },\n\n    bindDeleteImage : function() {\n        var self = this;\n\n        this._.el.colorboxConfirmForm.no.unbind('click');\n        this._.el.colorboxConfirmForm.yes.unbind('click');\n\n        this._.el.colorboxConfirmForm.title.html('Remove Submission from Gallery');\n        this._.el.colorboxConfirmForm.message.html(this._.messages.deleteImage);\n\n        $.colorbox.resize();\n        this._.el.colorboxConfirmForm.no.click(function() {\n            $.colorbox.close();\n        });\n\n        this._.el.colorboxConfirmForm.yes.click(function() {\n            self._.el.colorboxConfirmForm.yes.disable();\n            self._.el.colorboxConfirmForm.loader.show();\n\n            $.post(self._.baseURL+'/action/delete_image/'+self._.hash, {sid: self._.sid}, function(data) {\n                self._.el.colorboxConfirmForm.loader.hide();\n                self._.el.colorboxConfirmForm.yes.enable();\n\n                Imgur.Util.jafoLog({\n                    event: 'removeFromGallery',\n                    meta: {\n                        hash: self._.hash,\n                        isAlbum: self._.image.is_album\n                    }\n                });\n\n                if(self._.signed) {\n                    $.colorbox.close();\n\n                    humanMsg.displayMsg('Submission has been removed');\n\n                    setTimeout(function () {\n                        window.location = '//'+self._.host;\n                    },500);\n                }\n\n            }).error(function() {\n                self._.el.colorboxConfirmForm.yes.enable();\n                self._.el.colorboxConfirmForm.loader.hide();\n            });\n        });\n    },\n\n    deleteImage : function() {\n        var self = this;\n\n        $.colorbox({\n            href: self._.el.colorboxConfirmForm.id,\n            open: true,\n            inline: true,\n            top: '15%',\n            transition: 'none',\n            scrolling: false,\n            onComplete: function() {\n                self.bindDeleteImage();\n            }\n        });\n    },\n\n    reCaption : function() {\n        var hash = Imgur.InsideNav.getInstance().getHash();\n\n        window.location = '/memegen/create/'+hash;\n    },\n\n    //*********************** AD FUNCTIONS ***********************//\n\n    insertAd : function(height) {\n        var rand  = Math.floor(Math.random()*1000);\n        var outer = $('<div id=\"bottom-ad\" class=\"advertisement\"></div>');\n        var inner = $('<div class=\"panel-ad advertisement\"></div>');\n        var frame = $('<iframe src=\"//imgur.com/include/rc-iframe.html?cb='+rand+'\" framespacing=\"0\" frameborder=\"no\" scrolling=\"no\" width=\"300\" height=\"250\" allowtransparency=\"true\"></iframe>');\n\n        $(inner).append(frame);\n        $(outer).append(inner);\n        $(outer).css('top', height+'px');\n\n        $('#content').append(outer);\n    },\n\n    fadeInLoader: function(cb) {\n        var $loaders = this._.el.outside.content.find(this._.el.outside.tagLoaderClass);\n\n        if($loaders.length) {\n            $loaders.eq($loaders.length - 1).fadeIn(75, cb);\n        }\n    },\n\n    fadeOutLoader: function(cb) {\n        var $loaders = this._.el.outside.content.find(this._.el.outside.tagLoaderClass);\n\n        if($loaders.length) {\n            $loaders.eq($loaders.length - 1).fadeOut(75, cb);\n        }\n    },\n\n    initialPopState: function(e) {\n        window.location = window.location;\n    },\n\n    //******************** DISPLAY INIT FUNCTIONS *******************//\n\n    initTipsy : function() {\n        if(!this._.isIPad) {\n            var $thumbs = $('#imagelist img, .thumbnails img, .thumbs img, .image img, .thumb-title');\n\n            $thumbs.each(function() {\n                $(this).attr('title', $(this).attr('data-title'));\n            });\n\n            $thumbs.tipsy({\n                gravity: 'n',\n                opacity: 0.95,\n                offset: -15,\n                html: true,\n                live: true\n            });\n        }\n    },\n\n    initZoom : function() {\n        this._.el.inside.zoom.imageZoom();\n    },\n\n    //*********************** PAST FUNCTIONS **********************//\n\n    showPastPreview : function() {\n        if(this._.vars.pastPage > this._.vars.maxDays) {\n            this._.vars.pastPage = this._.vars.maxDays;\n            this._.el.past.days.val(this._.vars.pastPage);\n        }\n\n        $('.tipsy').remove();\n\n        this._.el.past.previewContent.empty();\n        this._.el.past.loader.show();\n\n        var self  = this;\n        var cache = (Imgur.getInstance()._.signed?'miss':'hit');\n\n        // Optimization for avoiding PHP get_image_page. @get_image_page\n        $.cookie('gallerypage', this._.vars.pastPage + 1, {'domain': Imgur.Environment.host, 'path': '/'});\n\n        // XXX ecto: I chose to put this here because\n        // it is needed in an anonymous scope below,\n        // and is changed above. Easier to do this than\n        // bind the function 2 scopes deep\n        var page = this._.vars.pastPage;\n\n        Imgur.Util.jafoLog({\n            event: 'pastImages',\n            meta: {\n                'days': page\n            }\n        });\n\n        $.get(this._.baseURL+'/past/page/'+(this._.showPast? this._.vars.pastPage + 1: this._.vars.pastPage-1)+'/'+cache+'?scrolled', function(data) {\n            self._.el.past.loader.hide();\n            self._.el.past.previewContent.html(data);\n\n            self._.el.past.previewContent.find('img').tipsy({\n                gravity: 'n',\n                opacity: 0.95,\n                offset: -8,\n                html: true\n            }).on('click', function (e) {\n                Imgur.Util.jafoLog({\n                    event: 'pastImagesClick',\n                    meta: {\n                        'days': page\n                    }\n                });\n            });\n        });\n    },\n\n    pastOnLoad : function() {\n        this.hideAds();\n\n        if(this._.el.past.previewContent.find('h3').size() == 0) {\n            this.showPastPreview();\n        }\n\n        this._.el.past.days.val(this._.vars.pastPage);\n\n        var self = this;\n        this._.el.past.calendar.DatePicker({\n            format: 'm/d/Y',\n            date: '',\n            current: '',\n            starts: 1,\n            position: 'bottom',\n            onBeforeShow : function() {\n                var today = new Date();\n                today.setUTCHours(0);\n                today.setUTCMinutes(0);\n                today.setUTCSeconds(0);\n                today.setUTCMilliseconds(0);\n\n                var diffMilli = self._.el.past.days.val() * 86400000;\n                var then      = new Date(today.getTime() - diffMilli);\n                var formatted = (then.getUTCMonth() + 1) + '/' + then.getUTCDate() + '/' + then.getUTCFullYear();\n\n                $(this).DatePickerSetDate(formatted, true);\n                $('.datepicker').css('z-index', 10000);\n\n                Imgur.Util.jafoLog({\n                    event: 'pastImagesCalendarOpen',\n                });\n            },\n            onHide : function() {\n                $('.datepicker').css('z-index', '');\n\n                Imgur.Util.jafoLog({\n                    event: 'pastImagesCalendarClose',\n                });\n            },\n            onChange : function(formatted, dates) {\n                var today = new Date();\n                var then = new Date(dates);\n\n                // zero hrs, mins, seconds to subtract in 24 periods\n                today.setUTCHours(0);\n                today.setUTCMinutes(0);\n                today.setUTCSeconds(0);\n                today.setUTCMilliseconds(0);\n                then.setUTCHours(0);\n                then.setUTCMinutes(0);\n                then.setUTCSeconds(0);\n                then.setUTCMilliseconds(0);\n\n                // Calculate day difference and keep within page range\n                var diff = Math.max(Math.floor((today.getTime() - then.getTime()) / 86400000), 0);\n                diff = Math.min(diff, self._.maxPage);\n\n                // Update 'days ago' and hide calendar\n                self._.el.past.days.val(diff);\n                self._.vars.pastPage = diff;\n                self._.el.past.calendar.DatePickerHide();\n\n                // update slider position\n                self._.el.past.slider.val(self._.vars.pastPage);\n\n                // Update results preview\n                self.showPastPreview();\n\n                Imgur.Util.jafoLog({\n                    event: 'pastImagesCalendarChange',\n                });\n            }\n        });\n\n        this._.el.past.slider\n            .val(this._.vars.pastPage)\n            .attr('min', (this._.vars.showPast? 0: 1))\n            .attr('max', this._.maxPage)\n            .on('input', function() {\n                self._.vars.pastPage = $(this).val();\n                self._.el.past.days.val(self._.vars.pastPage);\n            })\n            .on('change', function() {\n                self.showPastPreview();\n            });\n    },\n\n    pastClickHandler : function() {\n        var self = this;\n\n        Imgur.Util.jafoLog({\n            event: 'pastImagesClock',\n        });\n\n        $.colorbox({\n            href: '#'+this._.el.past.wrapper.attr('id'),\n            inline: true,\n            innerWidth: this._.el.past.wrapper.width()+20,\n            innerHeight: this._.el.past.wrapper.height()+20,\n            className: 'blurbox',\n            transition: 'none',\n            title: 'Show images from the past',\n            open: true,\n            onLoad: function() {\n                self.pastOnLoad();\n            },\n            onClosed: function() {\n                $.cookie('gallerypage', null, {'expires': -1, 'domain': Imgur.Environment.host, 'path': '/' });\n                self.showAds();\n            }\n        });\n    },\n\n    pastDaysChangeHandler : function(e) {\n        if (isFinite(e.currentTarget.value)) {\n            this._.vars.pastPage = parseInt(e.currentTarget.value, 10);\n            this._.el.past.slider.val(this._.vars.pastPage);\n        } else {\n            humanMsg.displayMsg('Please enter a number', 'error-msg');\n        }\n    },\n\n    pastDaysKeypressHandler : function(e) {\n        return this.isNumberKey(e);\n    },\n\n    pastTickerClickHandler : function(e) {\n        clearTimeout(this._.vars.pastTickerTimer);\n\n        if($(e.target).hasClass(this._.el.past.positiveTickClass)) {\n            this._.vars.pastPage = (this._.vars.pastPage + 1) < this._.maxPage?\n                            this._.vars.pastPage + 1: this._.maxPage;\n        } else {\n            this._.vars.pastPage = (this._.vars.pastPage - 1) > 0?\n                            this._.vars.pastPage - 1: 0;\n        }\n\n        this._.el.past.days.val(this._.vars.pastPage);\n        this._.el.past.slider.val(this._.vars.pastPage);\n\n        var self = this;\n        var showPreview = function() { self.showPastPreview(); };\n        this._.vars.pastTickerTimer = setTimeout(showPreview, 400);\n    },\n\n    pastSubmitClickHandler : function() {\n        var pastPage = (this._.showPast? this._.vars.pastPage: this._.vars.pastPage-1);\n\n        Imgur.Util.jafoLog({\n            event: 'pastImagesGo',\n            meta: {\n                page: pastPage\n            }\n        });\n\n        $.colorbox.close();\n\n        window.location = (this._.baseURL+'/hot/viral/page/')+pastPage;\n    },\n\n    getGalleryMetadata: function() {\n        var meta = {};\n        meta.gallerySort = this._.sort;\n        meta.galleryWindow = this._.window;\n        meta.galleryType = this._.section;\n        if (this._.subreddit) {\n            // Cruft from subreddit outside gallery controller setting section to subreddit name\n            meta.galleryType = 'subreddit'\n        }\n\n        switch (meta.galleryType) {\n            case 'subreddit':\n                meta.subreddit = this._.subreddit;\n                break;\n            case 'topic':\n                meta.topic = this._.topic;\n                break;\n            case 'tag':\n                meta.tagName = this._.tag;\n                break;\n            default:\n                // Unsupported galleryType.\n                break;\n        }\n        meta.topicTag = meta.tag || meta.topic;\n\n        return meta;\n    },\n\n\n    //******************* INFINITE SCROLL FUNCTIONS *******************//\n    getBaseUrl: function() {\n        return this._.overRideUrl? this._.overRideUrl : this._.baseURL;\n    },\n\n    getSectionUrl: function() {\n        var section = (this._.section && !this._.subreddit && this._.section != 'tag' && this._.section != 'group' && this._.section != 'topic' && this._.section != 'favorites' ? '/'+this._.section:'');\n        var url     = this._.baseURL+section+'/';\n\n        return url;\n    },\n\n    getUrl: function(page, set) {\n        var sort        = this._.section == 'top'? '' : this._.sort+'/';\n        var time_window = this._.sort == 'top' || this._.section == 'top'? this._.window + '/' : '';\n        var url         = this.getSectionUrl()+sort+time_window+ 'page/'+page+'/'+(Imgur.Environment.signed? 'miss': 'hit')+'?scrolled';\n\n        if(this._.overRideUrl) {\n            return this._.overRideUrl+'/'+sort+'/page/'+page+'/'+(Imgur.Environment.signed? 'miss': 'hit')+'?scrolled';\n        } else if(this._.inSearch) {\n            var search = Imgur.getInstance().getSearchUrl(this._, page);\n            url = search.url + '?scrolled&' + search.query;\n        } else if(this._.section == 'hot') {\n            url += '&set='+set;\n        }\n\n        return url;\n    },\n\n    handleResponse: function(response, cb, retrievedUrl) {\n        var self         = this;\n        var responseImgs = $(response).find('img').length;\n\n        //Add expanded imageset below the main one\n        if(responseImgs > 0 && (this._.vars.scrolledImageSet >= 1 || this._.section == 'new') && !$(this._.el.outside.extendedImagelist).length && $.cookie('showComments')) {\n            var $extendedImagelist;\n\n            if(this._.vars.scrolledImageSet == 0) {\n                $extendedImagelist = $('<div id=\"extended-imagelist\"></div>');\n            } else {\n                $extendedImagelist = $('<div id=\"extended-imagelist\">' +\n                                       '<div class=\"posts br5\"></div>' +\n                                       '<div class=\"page-divider\"><a href=\"javascript:;\" class=\"scroll-top-text\">back to top</a></div>' +\n                                       '</div>');\n            }\n\n            $(this._.el.outside.pageDivider).remove();\n            this._.el.outside.content.after($extendedImagelist);\n            this._.el.outside.content = $extendedImagelist;\n        }\n\n        if(responseImgs > 0 && retrievedUrl) {\n            // page view recorded with raw GA\n            Imgur.Util.getGoogleTracker();\n            __ga('send', 'pageview');\n        }\n\n        if(this._.vars.scrolledPage == 0 && this._.vars.scrolledImageSet <= 0) {\n            var $loader = this._.el.outside.content.find(this._.el.outside.tagLoaderClass);\n\n            if($loader.length) {\n                if($loader.eq($loader.length - 1).is(':visible')) {\n                    this.fadeOutLoader(_.bind(this.handleResponse, this, response, cb));\n                    return;\n                }\n            }\n\n            //Remove extended div if it exists because we're loading in new content\n            if($(this._.el.outside.extendedImagelist).length) {\n                this._.el.outside.content = this._.el.outside.content.prev();\n                $(this._.el.outside.extendedImagelist).remove();\n            }\n\n            this._.el.outside.content.find('.posts').remove();\n            this._.el.outside.content.find('.imagelist-header:gt(0)').remove();\n            this._.el.outside.content.append(response);\n\n        } else if(this._.vars.scrolledImageSet >= 1) {\n            this._.el.outside.content.find('.posts:last .clear').remove();\n            this._.el.outside.content.find('.posts:last').append(response);\n            this._.el.outside.content.find('.posts:last').append('<div class=\"clear\"></div>');\n\n        } else {\n            this._.el.outside.content.append(response);\n        }\n\n        this._.el.outside.content.find('.posts:last').find('img').each(function() {\n            $(this).attr('title', $(this).attr('data-title'));\n            $(this).tipsy({\n                gravity: 'n',\n                opacity: 0.95,\n                offset: -15,\n                html: true\n            });\n        });\n\n        var arrows = $('.arrow-up, .arrow-down');\n        arrows.unbind('click');\n        arrows.click(_.bind(function(e) { this.vote(e); }, this));\n\n        this.initOutsideComboboxes();\n        this.searchHighlight();\n\n        if($(this._.el.outside.noMorePagesID).length == 0) {\n            if(responseImgs < 60) {\n                this._.vars.scrolledPage++;\n                this._.vars.scrolledImageSet = -1;\n            }\n\n            $(this._.el.outside.loaderID + \":lt(-1)\").remove();\n\n            Imgur.InfiniteScroll.getInstance().infiniteScroll(_.bind(function() {\n                this.loadMore();\n            }, this));\n\n        } else if(this._.vars.scrolledImageSet > 0) {\n            $(this._.el.outside.noMorePagesID).remove();\n\n            this._.vars.scrolledPage++;\n            this._.vars.scrolledImageSet = -1;\n\n            this.loadMore();\n\n        } else {\n            $(this._.el.outside.loaderID).eq(0).remove();\n        }\n\n        this._.emitter.trigger('new gallery page');\n\n        if(typeof cb === 'function') {\n            cb();\n        }\n\n        this._.emitter.trigger('gallery page refetched');\n\n        this._.jafoPage++; // advance before logging...\n        Imgur.Util.jafoLog({\n            event: 'galleryPageShown',\n            meta: _.merge(Imgur.Gallery.getInstance().getGalleryMetadata(), {\n                pageNum: this._.jafoPage,\n                itemCount: responseImgs\n            })\n        });\n    },\n\n    fetchImages: function(page, set, cb) {\n        var url = this.getUrl(page, set);\n        this._.vars.loading = true;\n\n        $.ajax({\n            'url'    : url,\n            'success': _.bind(function(response) {\n                this._.vars.loading = false\n                // pass the url used for analytics\n                this.handleResponse(response, cb, url);\n            }, this),\n        });\n\n        $(_.bind(function(){\n            Imgur.Util.jafoLog({\n                event: 'galleryPageRequest',\n                meta: _.merge(Imgur.Gallery.getInstance().getGalleryMetadata(), {\n                    pageNum: page\n                })\n            });\n        }, this));\n    },\n\n    showLoadMore : function(e) {\n        $(this._.el.outside.loaderID).eq(0).html(this._.messages.loadMore);\n        $(this._.el.outside.loadMoreID).click(_.bind(function(e) {\n            $(e.target).unbind('click');\n            $(e.target).parent().html('<img src=\"//s.imgur.com/images/loaders/ddddd1_181817/48.gif\" />');\n\n            this.loadMore(true);\n        }, this));\n    },\n\n    loadMore : function(clicked) {\n        if(this._.vars.loading) { return; }\n\n        if(!clicked && this._.vars.scrolledPage > 0 && this._.vars.scrolledPage % 5 == 0 && this._.vars.scrolledImageSet == -1) {\n            this.showLoadMore();\n            return;\n        }\n\n        if($(this._.el.outside.loaderID).length > 0) {\n            if(this._.section == 'hot' && !this._.inSearch && !this._.overRideUrl) {\n                this._.vars.scrolledImageSet++;\n            } else {\n                this._.vars.scrolledPage++\n            }\n\n            this.fetchImages(this._.vars.scrolledPage, this._.vars.scrolledImageSet);\n        }\n    },\n\n    // ***************** USER FUNCTIONS *****************//\n\n    notorietyLinkClickHandler: function() {\n        if(this._.el.user.notorietyList.is(':hidden')) {\n            this._.el.user.notorietyList.slideDown();\n            this._.el.user.notorietyLink.find('a').html('hide list');\n        } else {\n            this._.el.user.notorietyList.slideUp();\n            this._.el.user.notorietyLink.find('a').html('show list');\n        }\n    },\n\n    userButtonCommentsClickHandler: function() {\n        window.location = '/user/'+this._.account_url;\n    },\n\n    userButtonFavoritesClickHandler: function() {\n        window.location = '/user/'+this._.account_url+'/favorites';\n    },\n\n    userButtonSubmittedClickHandler: function() {\n        window.location = '/user/'+this._.account_url+'/submitted';\n    },\n\n    userButtonRepliesClickHandler : function() {\n        window.location = '/user/'+this._.account_url+'/replies';\n    },\n\n    setupUserCaptions: function() {\n        var self = this;\n\n        var linkify = new Imgur.Linkifier();\n\n        // order matters; first one to grab or say it can view gets it\n\n        linkify.addGrabber(new Imgur.Linkify.ImgurGrabber(Imgur.Environment.host, Imgur.Environment.cdnUrl));\n        linkify.addGrabber(new Imgur.Linkify.PlainGrabber());\n        linkify.addGrabber(new Imgur.Linkify.UsernameGrabber());\n        linkify.addGrabber(new Imgur.Linkify.HashtagGrabber());\n\n        linkify.addViewer('youtube', new Imgur.Linkify.YoutubeViewer());\n        linkify.addViewer('html5video', new Imgur.Linkify.Html5VideoViewer());\n        linkify.addViewer('gifv', new Imgur.Linkify.ImgurGifvViewer(new Imgur.Linkify.Html5VideoViewer()));\n        linkify.addViewer('imgur', new Imgur.Linkify.ImgurViewer());\n        linkify.addViewer('image', new Imgur.Linkify.ImageViewer());\n\n        var UserCommentsAreaWithContext = React.createClass({\n            childContextTypes: {\n                linkifier: React.PropTypes.object,\n            },\n\n            getChildContext: function(){\n                return {linkifier: linkify}\n            },\n\n            render: function(){\n                return React.createElement(Imgur.UserCommentsArea, this.props);\n            }\n        });\n\n        ReactDOM.render(React.createElement(UserCommentsAreaWithContext,{\n            user: this._.account_url,\n            sort: this._.sort\n        }), $('.left .panel .captions-container').get(0));\n    },\n\n    setupUserFavorites: function() {\n        var self = this;\n\n        var cb = function() {\n            self._.el.user.loader.show();\n\n            $.get('/user/'+self._.account_url+'/favorites/page/'+(++self._.page)+'?scrolling', function(response) {\n                if(response) {\n                    self._.el.user.loader.hide();\n                    self._.el.user.favorites.append(response);\n                    Imgur.InfiniteScroll.getInstance().infiniteScroll(cb);\n                } else {\n                    self._.el.user.loader.remove();\n                }\n            });\n        }\n\n        if(this._.el.user.loader.length > 0) {\n            Imgur.InfiniteScroll.getInstance().infiniteScroll(cb);\n        }\n    },\n\n    setupUserReplies : function() {\n        var self = this;\n\n        var linkify = new Imgur.Linkifier();\n\n        // order matters; first one to grab or say it can view gets it\n\n        linkify.addGrabber(new Imgur.Linkify.ImgurGrabber(Imgur.Environment.host, Imgur.Environment.cdnUrl));\n        linkify.addGrabber(new Imgur.Linkify.PlainGrabber());\n        linkify.addGrabber(new Imgur.Linkify.UsernameGrabber());\n        linkify.addGrabber(new Imgur.Linkify.HashtagGrabber());\n\n        linkify.addViewer('youtube', new Imgur.Linkify.YoutubeViewer());\n        linkify.addViewer('html5video', new Imgur.Linkify.Html5VideoViewer());\n        linkify.addViewer('gifv', new Imgur.Linkify.ImgurGifvViewer(new Imgur.Linkify.Html5VideoViewer()));\n        linkify.addViewer('imgur', new Imgur.Linkify.ImgurViewer());\n        linkify.addViewer('image', new Imgur.Linkify.ImageViewer());\n\n\n\n        var UserRepliesAreaWithContext = React.createClass({\n            childContextTypes: {\n                linkifier: React.PropTypes.object,\n            },\n\n            getChildContext: function(){\n                return {linkifier: linkify}\n            },\n\n            render: function(){\n                return React.createElement(Imgur.UserRepliesArea, this.props);\n            }\n        });\n\n        ReactDOM.render(React.createElement(UserRepliesAreaWithContext,{\n            auth: this._.auth\n        }), $('.left .panel .replies-div .captions-container').get(0));\n\n    },\n\n    setupUserSubmitted: function() {\n        var self = this;\n\n        var cb = function() {\n            self._.el.user.loader.show();\n\n            $.get('/user/'+self._.account_url+'/submitted/page/'+(++self._.page)+'?scrolling', function(response) {\n                if(response) {\n                    self._.el.user.loader.hide();\n                    self._.el.user.favorites.append(response);\n                    Imgur.InfiniteScroll.getInstance().infiniteScroll(cb);\n                } else {\n                    self._.el.user.loader.remove();\n                }\n            });\n        }\n\n        if(this._.el.user.loader.length > 0) {\n            Imgur.InfiniteScroll.getInstance().infiniteScroll(cb);\n        }\n    },\n\n    userPmButtonClickHandler: function() {\n        if(!this._.signed) {\n            return Imgur.getInstance().signin('messageUserAttempt');\n        }\n\n        window.location = '/account/messages#' + this._.account_url\n    },\n\n    userPmSendButton: function() {\n        var self = this;\n\n        if(self._.el.user.pmBody.val() == '' ||\n           self._.el.user.pmBody.val() == self._.el.user.pmBody.attr('title')) {\n            return;\n        }\n\n        var inputs = self._.el.user.pmForm.find('input, textarea');\n\n        for(var i = 0; i < inputs.length; ++i) {\n            var input = $(inputs[i]);\n\n            if(input.val() == input.attr('title')) {\n                input.val('');\n            }\n        }\n\n        $.post('/account/messages/create', self._.el.user.pmForm.serialize(), function(response) {\n            self._.el.user.pmSent.fadeIn(250);\n            setTimeout(function() {\n                $.colorbox.close();\n                self._.el.user.pmSent.hide();\n                self._.el.user.pmBody.val('');\n                self._.el.user.pmBody.showPlaceholder();\n            }, 600);\n        });\n    },\n\n    carouselItemFirstIn : function(element, carousel, prev) {\n        if(element.index() == 0) {\n            prev.addClass('disabled');\n        } else {\n            prev.removeClass('disabled');\n        }\n    },\n\n    carouselItemLastIn : function(element, carousel, next) {\n        var length = carousel.jcarousel('items').length;\n\n        if(element.index() == length-1) {\n            next.addClass('disabled');\n        } else {\n            next.removeClass('disabled');\n        }\n    },\n\n    userInit : function() {\n        var self = this;\n        this.generalInit();\n\n        this._.el.user.notorietyLink.click(function() { self.notorietyLinkClickHandler() });\n        this._.el.user.buttonComments.click(function() { self.userButtonCommentsClickHandler() });\n        this._.el.user.buttonFavorites.click(function() { self.userButtonFavoritesClickHandler() });\n        this._.el.user.buttonSubmitted.click(function() { self.userButtonSubmittedClickHandler() });\n        this._.el.user.buttonReplies.click(function() { self.userButtonRepliesClickHandler() });\n        this._.el.user.pmButton.click(function() { self.userPmButtonClickHandler() });\n        this._.el.user.pmSendButton.click(function() { self.userPmSendButton() });\n\n        $('#spam-post').click(function() {\n            self.spamPost(self.imgurInsideNav.getHash());\n        });\n\n        $('#mature-post').click(function() {\n            self.mature();\n        });\n\n        $('#ban-user').click(function() {\n            self.ban();\n        });\n\n        $('#spam-user').click(function() {\n            self.spam();\n        });\n\n        // Captions\n        if(this._.window === 'index') {\n            this.setupUserCaptions();\n\n        // Favorites\n        } else if(this._.window === 'submitted') {\n            this.setupUserSubmitted();\n        } else if(this._.window === 'replies') {\n            this.setupUserReplies();\n        } else {\n            this.setupUserFavorites();\n        }\n\n        this._.el.user.$carousel.jcarousel({ animation: 300});\n\n        $('.next').click(function() {\n            self._.el.user.$carousel.jcarousel('scroll', '+=3', true);\n        });\n\n        $('.prev').click(function() {\n            self._.el.user.$carousel.jcarousel('scroll', '-=3', true);\n        });\n\n        self._.el.user.$carousel.find('li')\n            .bind('jcarouselitemfirstin', function(carousel) {\n                self.carouselItemFirstIn($(this), self._.el.user.$carousel, $('.prev'));\n            })\n            .bind('jcarouselitemlastin', function(carousel) {\n                self.carouselItemLastIn($(this), self._.el.user.$carousel, $('.next'));\n            });\n    },\n\n    toggleShowViral : function() {\n        if($.cookie('hidingviral')) {\n            $.removeCookie('hidingviral', { path: '/' });//delete cookie\n        } else {\n            $.cookie('hidingviral', true, { expires: 30,  path: '/' });\n        }\n\n        window.location = window.location;\n    },\n\n    initOutsideInfScroll : function() {\n        Imgur.InfiniteScroll.getInstance().infiniteScroll(_.bind(function() { this.loadMore(); }, this));\n    },\n\n    bindOutsideSortOptions : function() {\n        var self = this;\n\n        this._.el.outside.$sortOptions.bind('click', function (e) {\n            var path = $(this).attr('href').split('?')[0];\n            var href = path.split('/');\n            var sort = href[href.length - 1];\n\n            Imgur.Util.jafoLog({\n                event: 'gallerySortChange',\n                meta: {\n                    location: 'outside',\n                    gallerySort: sort,\n                    galleryType: self._.section,\n                    previousSort: self._.sort,\n                    previousType: self._.section,\n                }\n            });\n        });\n    },\n\n    // cleans up the GET parms and decides if a search is simply simple (q=)\n    searchAdvancedHandleSubmit : function(e) {\n        e.preventDefault();\n        var loc = document.location,\n            $advInputs = this._.el.search.$advancedForm.find('input'),\n            $tmp,\n            tmpName,\n            tmpVal,\n            getVars = [],\n            qAllOnly = true,\n            qVal = this._.el.search.$advancedAllInput.val(),\n            len = $advInputs.length,\n            iter,\n            destination = loc.protocol+'//'+loc.host\n            skip = {'qs':1, 'q_all':1};\n\n        if(loc.port.length) {\n            destination += ':'+loc.port;\n        }\n\n        destination += '/search/'+this._.sort+'/'+this._.window;\n\n        if(len) {\n            for(iter = 0; iter < len; iter++) {\n                $tmp       = $($advInputs[iter]);\n                tmpName    = $($advInputs[iter]).attr('name');\n                tmpVal     = String($($advInputs[iter]).val());\n\n                if(tmpName in skip) {\n                    continue;\n                }\n\n                switch($tmp.attr('type')) {\n                    case 'hidden':\n                        if(tmpVal != $($advInputs[iter]).attr('data-default')) {\n                            getVars.push(tmpName+'='+encodeURIComponent(tmpVal));\n                            qAllOnly = false;\n                        }\n                        break;\n                    case 'text':\n                        if(tmpVal.length) {\n                            getVars.push(tmpName+'='+encodeURIComponent(tmpVal));\n                            qAllOnly = false;\n                        }\n                        break;\n                    case 'checkbox':\n                        if($tmp.is(':checked')) {\n                            getVars.push(tmpName+'=on');\n                        }\n                        break;\n                }\n            }\n            if(qAllOnly) {\n                getVars = ['q='+encodeURIComponent(qVal)];\n            } else {\n                getVars.push('q_all='+encodeURIComponent(qVal));\n            }\n            if(getVars.length) {\n                destination += '?'+getVars.join('&');\n            }\n\n            // finall do it!\n            document.location = destination;\n        }\n    },\n\n    searchAdvancedToggleHandler : function(e) {\n        var self = this;\n        var $target = $(e.target);\n\n        if(this._.el.search.$advanced.is(':visible')) {\n            this._.el.search.$advanced.fadeOut(150, function() { self.syncSearchSimpleAndAdvanced(); });\n            $(e.target).attr('title', 'show advanced search');\n        } else {\n            this._.el.search.$advanced.fadeIn(150, function() { self.syncSearchSimpleAndAdvanced(); });\n            $(e.target).attr('title', 'hide advanced search');\n        }\n\n        $target.parent().toggleClass('active');\n        $target.tipsy('hide');\n    },\n\n    searchAdvancedToggleSizeType : function (e) {\n        if(this._.el.search.$sizeToggle.is(':checked')) {\n            // mpx requested\n            this._.el.search.$pxCombo.hide(0);\n            this._.el.search.$mpxCombo.show(0);\n        } else {\n            this._.el.search.$mpxCombo.hide(0);\n            this._.el.search.$pxCombo.show(0);\n        }\n    },\n\n    searchHighlight : function() {\n        var txt = '',\n            exact = false,\n            sploded = false,\n            iter,\n            len,\n            opts = {className: 'matched-search-term'},\n            $cards = $(this._.el.search.imageCard);\n\n        if(this._.inSearch) {\n            if(typeof this._.advSearch === 'object' && (typeof this._.searchQuery != 'string' || this._.searchQuery === '')) {\n                if(typeof this._.advSearch.q_all === 'string') {\n                    txt += ' '+this._.advSearch.q_all;\n                }\n                if(typeof this._.advSearch.q_exactly === 'string') {\n                    exact = this._.advSearch.q_exactly;\n                }\n                if(typeof this._.advSearch.q_any === 'string') {\n                    txt += ' '+this._.advSearch.q_any;\n                }\n                if(txt.length) {\n                    sploded = txt.match(/(\"[^\"]+\"|[^\\s]+)/g);\n                    len = sploded.length;\n                    if(len > 0) {\n                        for(iter = 0; iter < len; iter++) {\n                            $cards.strEle(sploded[iter], opts);\n                        }\n                    }\n                }\n                if(exact) { // exact is highlighted wholesale\n                    $cards.strEle(exact, opts);\n                }\n            } else if(this._.searchQuery) {\n                $cards.strEle(this._.searchQuery, opts);\n            }\n            $cards.find('.bottom-box span').removeClass(opts.className);\n\n        }\n    },\n\n    syncSearchSimpleAndAdvanced : function() {\n        if(this._.el.search.$advanced.length < 1) {\n            return;\n        }\n        // in the future this will need to parse search syntax and act\n        // accordingly with the various advanced inputs\n        if(this._.el.search.$advanced.is(':visible')) {\n            this._syncSearchSimpleAndAdvancedElements(this._.el.search.$headerSearchInput, this._.el.search.$advancedAllInput);\n            this._.el.search.$headerSearch.removeClass('search-focused').addClass('search-forced-closed');\n            this._.el.search.$advancedAllInput.focus().select();\n        } else {\n            this._syncSearchSimpleAndAdvancedElements(this._.el.search.$advancedAllInput, this._.el.search.$headerSearchInput);\n            this._.el.search.$headerSearch.removeClass('search-forced-closed').addClass('search-focused')\n            this._.el.search.$headerSearchInput.focus().select();\n        }\n    },\n\n    _syncSearchSimpleAndAdvancedElements : function($from, $to) {\n        var tmpVal    = String($to.val()),\n            tmpNewVal = $from.val(),\n            place     = $from.attr('placeholder');\n\n        if(tmpVal.length < 1 && tmpNewVal != place) {\n            $to.val(tmpNewVal).trigger('change');\n        }\n        $from.val('')\n    },\n\n    //*********************** PUBLIC FUNCTIONS ***********************//\n\n    outsideInit : function() {\n        var self = this;\n        this._.vars.scrolledPage = this._.vars.pastPage = this._.page;\n\n        if(!this._.showPast) {\n            this._.vars.pastPage += 1;\n        }\n\n        this.generalInit();\n        this.initOutsideInfScroll();\n        this.bindOutsideSortOptions();\n\n        $('.tooltip').tooltipster({\n            interactive: true,\n            position: 'left',\n            speed: 100,\n            offsetX: 7\n        });\n\n        this._.el.arrows.click(function(e) { self.vote(e); });\n        this._.el.past.link.click(function() { self.pastClickHandler(); });\n        this._.el.past.days.change(function(e) { self.pastDaysChangeHandler(e); });\n        this._.el.past.days.keypress(function(e) { self.pastDaysKeypressHandler(e); });\n        this._.el.past.ticker.click(function(e) { self.pastTickerClickHandler(e); });\n        this._.el.past.submitButton.click(function() { self.pastSubmitClickHandler(); });\n        // some search stuff is bound this way so changing the HTMl contents to highlight search terms will preserve bindings\n        this._.el.search.$sizeToggle.on('change', function(e) { self.searchAdvancedToggleSizeType(e); });\n        this._.el.search.$advancedForm.on('submit', function(e) { self.searchAdvancedHandleSubmit(e); });\n\n        if(this._.section == 'new') {\n            this._.el.outside.$toggleViral.click(function() { self.toggleShowViral(); });\n        }\n\n        this.initOutsideComboboxes();\n        this.searchHighlight();\n\n        this._.el.outside.content.on('mouseenter', '.post a', function(e) {\n            var page = $(this).data('page');\n            $.cookie('gallerypage', page, {'domain': Imgur.Environment.host, 'path': '/' });\n        });\n\n        this._.el.outside.content.on('mouseleave', '.post a', function(e) {\n            $.cookie('gallerypage', null, {'expires': -1, 'domain': Imgur.Environment.host, 'path': '/' });\n        });\n\n        $(document).ready(function () {\n            if(self._.showGalleryNewInfo) {\n                $.colorbox({\n                    href: self._.el.outside.galleryNewInfo.id,\n                    open: true,\n                    inline: true,\n                    top: '15%',\n                    transition: 'none',\n                    scrolling: false,\n                    onComplete: function() {\n                        self._.el.outside.galleryNewInfo.$okay.click(function () {\n                            $.cookie('IGT', 1, { expires: 7, path: '/' });\n                            $.colorbox.close();\n                        });\n\n                        self._.el.outside.galleryNewInfo.$no.click(function () {\n                            window.location = '//'+self._.host+'/hot';\n                        });\n                    }\n                });\n            }\n        });\n\n    },\n\n    initOutsideComboboxes : function() {\n        $('.combobox:not(#section):not(#sort)').combobox({\n            onChange: _.bind(function(element, value, $choice) {\n                switch(element) {\n                    case 'q_size_px':\n                        $(this._.el.search.size).val(value);\n                        this._.el.search.$sizeMpx.val(value);\n                        var newText = this._.el.search.$mpxCombo.find('.options .item')\n                            .removeClass('selected')\n                            .filter('[value=\"'+value+'\"]')\n                            .addClass('selected')\n                            .text();\n                        this._.el.search.$mpxCombo.find('div.selection').first().text(newText);\n                        break;\n\n                    case 'q_size_mpx':\n                        $(this._.el.search.size).val(value);\n                        this._.el.search.$sizePx.val(value);\n                        var newText = this._.el.search.$pxCombo.find('.options .item')\n                            .removeClass('selected')\n                            .filter('[value=\"'+value+'\"]')\n                            .addClass('selected')\n                            .text();\n                        this._.el.search.$pxCombo.find('div.selection').first().text(newText);\n                        break;\n\n                }\n            }, this)\n        });\n    },\n\n    insideInit : function() {\n        var maybeComboboxCb = _.bind(function(element, value, $item) {\n            var hash = this.imgurInsideNav.getHash();\n            var item = this.imgurInsideNav._.sideGallery.getImage(hash);\n\n            //Image not in sidegallery because it came from non-gallery initial page load\n            if (!item) {\n                item = this._.image;\n            }\n\n            switch(value) {\n                case 'download':\n                    Imgur.Util.jafoLog({\n                        event: 'downloadImage',\n                        meta: {\n                            control: 'postOptions',\n                            nsfw: item.nsfw,\n                            hash: item.hash,\n                            isAlbum: item.is_album,\n                            isAnimated: item.animated\n                        }\n                    });\n\n                    if (item.is_album) {\n                        this.imgurInsideNav.startDownload(item.hash);\n                    } else {\n                        window.location = '/download/'+hash+'/'+encodeURIComponent(item.title);\n                    }\n\n                    break;\n                case 'meme':\n                    Imgur.Util.jafoLog({\n                        event: 'makeAMeme',\n                        meta: {\n                            control: 'postOptions',\n                            nsfw: item.nsfw,\n                            hash: item.hash,\n                            isAlbum: item.is_album,\n                            isAnimated: item.animated\n                        }\n                    });\n\n                    window.location = '/memegen/create/' + hash;\n                    break;\n                case 'report':\n                    //Check if user has already reported\n                    if($.cookie('r' + hash) != 1) {\n                        this.reportImage();\n                    }\n                    break;\n                case 'delete':\n                    this.deleteImage();\n                    break;\n                case 'embed':\n                    Imgur.Utilities.Embed.embedModal.call(this);\n                    break;\n            }\n\n            return false;\n        }, this);\n\n        this.generalInit();\n        Imgur.getInstance().setHash(this._.hash);\n\n        this._.el.embedAlbumForm.embedCodeInput.click($(this).selectAll);\n\n        if(!this._.comment_id && !this._.mobile){\n            this._.el.inside.$comments.html('<img class=\"small-margin-top\" src=\"//s.imgur.com/images/loaders/ddddd1_2b2b2b/24.gif\"/>');\n        }\n\n        Imgur.Util.triggerPerformanceCheckpoint('votebtn');\n\n        Imgur.Util.triggerView(this._.hash, { album: this._.image.is_album, discard: false });\n\n        if(this._.image.is_album) {\n            for(var i = 0; i < this._.image.album_images.images.length && i < 10; i++) {\n                var image = this._.image.album_images.images[i];\n\n                Imgur.Util.triggerView(image.hash, { image: true, discard: false });\n            }\n        }\n\n        this.initZoom();\n        this._.el.colorboxEmbed.embedCodeInput.click($(this).selectAll);\n\n        // Rebind arrow key functions\n        this.imgurInsideNav.generalInit(_.bind(function() {\n            this.imgurInsideNav.setCaptionSort(this._.comment_sort);\n\n            //if(!this._.mobile && this._.section !== null && this._.captionsEnabled) {\n            if(!this._.image.comments_disabled && !this._.mobile && this._.section !== null && this._.captionsEnabled) {\n                this.imgurInsideNav.fetchCaptions(this._.hash, _.bind(function() {\n                    // vote AJAX might finish first\n                    // this is intentionally so that there is no three-phase loading on the first\n                    // set of comments (i.e. phase 1 is before react/js has run, phase 2 is the component\n                    // has mounted but no data, and phase 3 would be after data has loaded). Instead, the first\n                    // load is two-phase (1 and 3) and the second-load is two-phase (2 and 3)\n                    if(Imgur.Caption.getInstance().haveCaptions(this._.hash)) {\n                        this.imgurInsideNav.processCaptions(this._.hash);\n                    }\n                }, this));\n            }\n\n            $('.post-loadall').click(_.bind(function() {\n                this.imgurInsideNav.insertPost(this._.image, true);\n                return false;\n            }, this));\n\n        }, this));\n\n        this._.el.inside.reCaptionLink.click(this.reCaption);\n        this._.el.inside.$shareTabButton.click(this.toggleTab);\n\n        if($.cookie('r'+this.imgurInsideNav.getHash()) == 1) {\n            this._.el.inside.reportImageLink.addClass('red').text(' post reported');\n        } else {\n            this._.el.inside.reportImageLink.removeClass('red').text(' report post');\n        }\n\n        $('#ungallery-post').click(_.bind(this.ungallery, this));\n\n        $('#spam-post').click(_.bind(this.spamPost, this));\n\n        // used by moderators\n        $('#mature-post').click(_.bind(this.mature, this));\n\n        $('#warn-user').click(_.bind(this.warn, this));\n\n        $('#ban-user').click(_.bind(this.ban, this));\n\n        $('#obfuscate').click(_.bind(this.obfuscate, this));\n\n        $('#spam-user').click(_.bind(this.spam, this));\n\n        $('#trophy-mod').on('click', 'button', _.bind(this.trophy, this));\n\n        $('#post-tag').on('submit', _.bind(function(e) {\n            e.preventDefault();\n            var tag = $('#post-tag-input').val();\n\n            $.post(this._.baseURL + '/action/set_tag/' + this.imgurInsideNav.getHash(), {sid: this._.sid, tag: tag}, function() {\n                humanMsg.displayMsg(tag + ' added to post');\n            }).fail(function() {\n                humanMsg.displayMsg('Unable to add tag ' + tag + ' to post');\n            });\n        }, this));\n\n        this._.el.inside.$shareLink.focus(this.select);\n\n        this._.el.inside.$optionsButton.combobox({\n            maybe: maybeComboboxCb\n        });\n\n        $(document).ready(_.bind(function() {\n            this.updateShare();\n            Imgur.Util.triggerPerformanceCheckpoint('sharebtn');\n        }, this));\n    },\n\n    toggleTab : function(e) {\n        if (!e) {\n            $('.button-container .btn').removeClass('opened');\n            return;\n        }\n\n        e.stopPropagation();\n        var $target = $(e.currentTarget);\n        var wasOpened = $target.hasClass('opened');\n\n        $('.opened').removeClass('opened');\n\n        if(!wasOpened) {\n            $target.addClass('opened');\n        }\n\n    },\n\n    generalInit : function() {\n        if(window.navigator.userAgent === Imgur.Util.PERFORMANCE_CHECKPOINT_USER_AGENT) {\n            window.performance.webkitSetResourceTimingBufferSize(9999999);\n        }\n\n        this._.sid = $('#sid').val();\n\n        this._.messages = {\n            deleteImage: 'Are you sure you want to remove this submission from the gallery?',\n            loadMore: '<div id=\"load-more\">load more images</div>',\n            reportImage: 'Are you sure you want to report this submission for spam or abuse?'\n        };\n\n        this.initTipsy();\n    },\n\n    updateShare: function() {\n        var image = this._.image;\n        if (!image) {\n            return;\n        }\n        var share = Imgur.ShareButtons.getInstance();\n        share.bindButtons();\n\n        var shareUrl = 'http://'+this._.host + this._.baseURL +'/'+ this._.hash;\n        if (image.is_album) {\n            shareUrl = shareUrl.replace(\"/account/favorites/\",\"/a/\");\n        } else {\n            shareUrl = shareUrl.replace(\"/account/favorites/\",\"/\");\n        }\n\n        // This should match insidenav's metadata\n        share.setShareData({\n            title: image.title,\n            jafoMeta: _.merge(this.getGalleryMetadata(), {\n                type: 'galleryPost',\n                hash: this._.hash,\n                isAlbum: image.is_album,\n                inGallery: true,\n                nsfw: image.nsfw\n            }),\n            url: shareUrl\n        }, {\n            global: true\n        });\n    },\n\n    getInsideNav: function() {\n        return this.imgurInsideNav;\n    },\n\n    resetReportCloseAnalytics: function() {\n        this._.preventReportCloseAnalytics = false;\n    },\n\n    preventReportCloseAnalytics: function() {\n        this._.preventReportCloseAnalytics = true;\n    }\n});\n\nClass.addSingleton(Imgur.Gallery);\n","Namespace('Imgur.Gallery');\n\nImgur.Gallery.Inside = Imgur.Gallery.extend({\n    init: function(insideNav, emitter, params) {\n        this.imgurInsideNav = insideNav;\n        this._super(emitter, params);\n    }\n});\n","Namespace('Imgur.Gallery');\n\nImgur.Gallery.Outside = Imgur.Gallery.extend({\n});\n","Namespace('Imgur.Gallery');\n\nImgur.Gallery.MainOutside = Imgur.Gallery.Outside.extend({\n    init: function(outsideActiveTagStore, emitter, params, history) {\n        this._super(emitter, params, history);\n        this._.outsideActiveTagStore = outsideActiveTagStore;\n    },\n\n    handleTagChanged: function(fromPopState) {\n        var isActive = this._.outsideActiveTagStore.getIsActive();\n\n        if(isActive) {\n            this._handleTagSelect(fromPopState);\n        } else {\n            this._handleTagDeselect(fromPopState);\n        }\n    },\n\n    _handleTagDeselect: function() {\n        this._.overRideUrl = null;\n        this._.history.addWindowState('initial', 'tagDeselect', this.getSectionUrl());\n        this.refetchPage();\n    },\n\n    _handleTagSelect: function(fromPopState) {\n        var tagName = this._.outsideActiveTagStore.getActiveTag(),\n            tagNameUrlEncoded = encodeURIComponent(this._.outsideActiveTagStore.getActiveTagEncoded());\n\n        this._.overRideUrl = '/t/'+tagNameUrlEncoded;\n\n        if(this._.sort == 'rising') {\n            this._.sort = 'viral';\n        }\n\n        if(!fromPopState) {\n            if(window.history.replaceState && !window.history.state) {\n                window.history.replaceState('initial', 'initial', window.location.href);\n            }\n\n            this._.history.addWindowState('tag', 'Imgur - '+tagName, this._.overRideUrl);\n        }\n\n        this._updatePageOnTagChange(this._.overRideUrl);\n    },\n\n    _updatePageOnTagChange: function(url) {\n        var $sort    = $('#sort');\n        var $section = $('#section');\n        var $rising  = $sort.find('.item[value=\"rising\"]');\n        var $top     = $sort.find('.item[value=\"top\"]');\n        \n        $section.find('.selected').removeClass('selected');\n\n        if($rising.hasClass('selected')) {\n            var activeEl = $sort.find('.item[value=\"'+this._.sort+'\"]').addClass('selected');\n            $sort.find('.selection').html(activeEl.text());\n        }\n\n        $rising.hide();\n        $('.sort-options').hide();\n\n        this.refetchPage();\n    },\n\n    refetchPage: function() {\n        if(this._.vars.loading) {\n            return;\n        }\n\n        if(this._.vars.scrolledPage > 0) {\n            this._.vars.scrolledImageSet = -1;\n        }\n        \n        this._.vars.scrolledPage = 0;\n\n        Imgur.InfiniteScroll.getInstance().stopInfiniteScroll();\n        $(this._.el.outside.pageDivider).remove();\n        this.fadeInLoader();\n        \n        this.fetchImages(0, 0, _.bind(function() {\n            if(!this._.vars.loading) {\n                Imgur.InfiniteScroll.getInstance().continueInfiniteScroll();\n                this.initOutsideInfScroll();\n            }\n        }, this));\n    },\n\n});\n","Namespace('Imgur.Gallery');\n\nImgur.Gallery.Header = React.createClass({\n    displayName: 'Gallery-Header',\n    MAX_ALBUM_TITLE: 255,\n    MAX_IMAGE_TITLE: 128,\n\n    propTypes: {\n        noNav: React.PropTypes.bool\n    },\n\n    getInitialState: function getInitialState() {\n        return {\n            first: true,\n            last: false,\n            image: this.props.initialImage,\n            initial: true,\n            showingGrid: false\n        };\n    },\n\n    componentDidMount: function componentDidMount() {\n        this.props.emitter.on('initGrid', this, function () {\n            this.setState({\n                showingGrid: true\n            });\n        });\n    },\n\n    componentWillUnmount: function componentWillUnmount() {\n        this.props.emitter.off('initGrid');\n    },\n\n    _next: function _next() {\n        this.props.emitter.trigger('buttonNav', 'next');\n    },\n\n    _prev: function _prev() {\n        this.props.emitter.trigger('buttonNav', 'prev');\n    },\n\n    closeRearrange: function closeRearrange() {\n        this.props.emitter.trigger('closeGrid');\n        this.setState({\n            showingGrid: false\n        });\n    },\n\n    componentDidUpdate: function componentDidUpdate() {\n        if (this.state.initial) {\n            return;\n        }\n\n        var $postHeader = $('.post-header');\n\n        // User has scrolled a bit so only scroll them back to the top of the post-container incase their cursor is over next post button.\n        if ($postHeader.hasClass('fixed') && this.state.navTrigger == 'click') {\n            // Removing fixed so the header doesn't transition (animate) causing wrong outerHeight.\n            $postHeader.removeClass('animate fixed animation-finished');\n            var postHeaderHeight = $postHeader.outerHeight();\n            $postHeader.addClass('fixed');\n\n            $('.post-container').css('padding-top', postHeaderHeight);\n            $(document).scrollTop($('.post-container').offset().top + 1);\n        } else {\n            $(document).scrollTop(0);\n        }\n    },\n\n    render: function render() {\n        var className = '',\n            options;\n\n        if (this.props.noNav || Imgur.Environment.hasAccess && !Imgur.Environment.captionsEnabled && !this.state.image.is_album) {\n            className = ' nodisplay';\n        }\n\n        if (this.state.showingGrid) {\n            // Save options.\n            options = React.createElement(\n                'div',\n                { onClick: this.closeRearrange, className: 'right btn btn-action btn-rearrange-done\\'' },\n                'Done'\n            );\n        } else {\n            options = React.createElement(\n                'div',\n                { className: 'next-prev' + className },\n                React.createElement('div', { onClick: this.state.first ? _.noop : this._prev, className: 'btn navPrev icon icon-arrow-left' + (this.state.first ? ' disabled' : '') }),\n                React.createElement(\n                    'div',\n                    { onClick: this.state.last ? _.noop : this._next, className: 'btn btn-action navNext' + (this.state.last ? ' disabled' : '') },\n                    React.createElement(\n                        'div',\n                        { className: 'text' },\n                        'Next Post'\n                    ),\n                    React.createElement('span', { className: 'icon icon-arrow-right' })\n                )\n            );\n        }\n\n        return React.createElement(\n            'div',\n            null,\n            options,\n            React.createElement(\n                'div',\n                { className: 'post-title-container' },\n                React.createElement(Imgur.Gallery.TitleDesc, {\n                    postSavingStore: this.props.postSavingStore,\n                    element: 'h1',\n                    type: 'title',\n                    classes: 'post-title' + (this.state.image.nsfw ? ' mature-indicator' : ''),\n                    placeholder: 'Give your post a title...',\n                    text: this.state.image.title,\n                    is_album: this.state.image.is_album,\n                    deletehash: this.state.image.deletehash,\n                    max_length: this.state.image.is_album ? this.MAX_ALBUM_TITLE : this.MAX_IMAGE_TITLE,\n                    no_enter: true,\n                    published: this.props.published,\n                    showEditTools: this.props.showEditTools,\n                    tabindex: this.props.showEditTools ? 1 : ''\n                })\n            ),\n            React.createElement(Imgur.Gallery.SourceBar, {\n                image: this.state.image,\n                slim: this.props.showEditTools\n            })\n        );\n    }\n});\n//# sourceMappingURL=header.js.map\n","Namespace('Imgur.Gallery');\n\nImgur.Gallery.DownloadPost = React.createClass({\n    displayName: 'Gallery-DownloadPost',\n\n    getInitialState: function getInitialState() {\n        return {\n            message: '',\n            messageClassName: ''\n        };\n    },\n    handleSubmit: function handleSubmit(e) {\n        e.preventDefault();\n        var data = { email: ReactDOM.findDOMNode(this.refs.email).value };\n        data['zip-album-submit-' + Imgur.Environment.msid] = true;\n\n        $.post('/ajaxalbums/zip/' + this.props.hash, data, _.bind(function (response) {\n            if (response.data == 'success') {\n                this.setState({\n                    message: 'Done!',\n                    messageClassName: 'green'\n                });\n                setTimeout($.colorbox.close, 900);\n            } else {\n                this.setState({\n                    message: 'Oops! Something went wrong.',\n                    messageClassName: 'error'\n                });\n            }\n        }, this));\n    },\n    render: function render() {\n        return React.createElement(\n            'div',\n            { id: 'download-album-form', className: 'popup' },\n            React.createElement(\n                'h3',\n                null,\n                'Download this album'\n            ),\n            React.createElement(\n                'div',\n                { className: 'textbox' },\n                'This album is really big! It\\'s going to take us a bit to get your download ready for you.  Enter your email and we will notify you when it\\'s ready. Once ready, it will be available for up to 24 hours.'\n            ),\n            React.createElement(\n                'form',\n                { id: 'download-form', onSubmit: this.handleSubmit },\n                React.createElement(\n                    'div',\n                    null,\n                    React.createElement(\n                        'div',\n                        null,\n                        React.createElement('input', { ref: 'email', id: 'email', type: 'text', name: 'email', title: 'Email', value: Imgur.Environment.auth.email })\n                    ),\n                    React.createElement(\n                        'div',\n                        { id: 'message', className: 'right ' + this.state.messageClassName },\n                        this.state.message\n                    ),\n                    React.createElement(\n                        'div',\n                        { 'class': 'left' },\n                        React.createElement('input', { type: 'submit', className: 'btn btn-action', value: 'Save', id: 'save' })\n                    ),\n                    React.createElement('div', { className: 'clear' })\n                )\n            )\n        );\n    }\n});\n//# sourceMappingURL=downloadpost.js.map\n","Namespace('Imgur.Gallery');\n\nImgur.Gallery.Embed = React.createClass({\n    displayName: 'Gallery-Embed',\n\n    componentDidMount: function componentDidMount() {\n        Imgur.Util.jafoLog({\n            event: 'openEmbedModal',\n            meta: {\n                inGallery: this.props.in_gallery,\n                hash: this.props.hash,\n                isAlbum: this.props.is_album,\n                nsfw: this.props.nsfw,\n                control: 'postOptions'\n            }\n        });\n\n        $.ajax({\n            url: this.getEmbedScript(),\n            dataType: 'script',\n            cache: true\n        });\n\n        window.addEventListener('message', _.bind(function (e) {\n            var eventData = JSON.parse(e.data);\n            if (eventData.message === 'resize_imgur') {\n                this.refs.preview.style.height = eventData.height + 'px';\n                $.colorbox.resize();\n            }\n        }, this), false);\n    },\n    getEmbedScript: function getEmbedScript() {\n        return '//' + (Imgur.Environment.isDev ? Imgur.Environment.host + '/include/minified' : 's.imgur.com/min') + '/embed.js';\n    },\n    getEmbedCode: function getEmbedCode(showContext, logAnalytics) {\n        var context = showContext === false ? ' data-context=\"' + showContext + '\"' : '';\n        var analytics = logAnalytics ? '' : ' data-analytics=\"false\"';\n        return '<blockquote class=\"imgur-embed-pub\" lang=\"en\" data-id=\"' + (this.props.is_album ? 'a/' : '') + this.props.hash + '\"' + context + analytics + '><a href=\"//' + Imgur.Environment.host + '/' + this.props.hash + '\">' + _.escape(this.props.title) + '</a></blockquote><script async src=\"' + this.getEmbedScript() + '\" charset=\"utf-8\"></script>';\n    },\n    render: function render() {\n        return React.createElement(\n            'div',\n            null,\n            React.createElement(\n                'p',\n                { className: 'embed-action' },\n                'Copy + Paste this Code'\n            ),\n            React.createElement(Imgur.Elements.Copy, { value: this.getEmbedCode(true, true), inputClass: 'copy-input embed-copy', copyClass: 'copy' }),\n            React.createElement('div', { ref: 'preview', dangerouslySetInnerHTML: { __html: this.getEmbedCode(true, false) } }),\n            React.createElement(\n                'p',\n                { className: 'embed-meta center' },\n                'Include this post in your blog, news site, or anywhere else on the web!'\n            )\n        );\n    }\n});\n//# sourceMappingURL=embed.js.map\n","Namespace('Imgur.Gallery');\n\nImgur.Gallery.PostActionBar = React.createClass({\n    displayName: 'Gallery-PostActionBar',\n\n    actionType: {\n        UPVOTE: 'upvote',\n        DOWNVOTE: 'downvote',\n        FAVORITE: 'favorite'\n    },\n\n    voteType: {\n        UP: 'up',\n        DOWN: 'down'\n    },\n\n    getInitialState: function getInitialState() {\n        return {\n            ups: this.props.ups,\n            downs: this.props.downs,\n            upvoted: this.props.vote == 'up',\n            downvoted: this.props.vote == 'down',\n            favorited: this.props.favorited,\n            points: this.props.points,\n            reported: $.cookie('r' + this.props.hash) == 1,\n            postOptionsOpened: false,\n            signupTooltipOptions: null,\n            galleryTags: this.props.galleryTags\n        };\n    },\n\n    componentDidMount: function componentDidMount() {\n        var _this = this;\n\n        if (!this.props.in_gallery) {\n            return;\n        }\n\n        this.props.emitter.on('pointUpdate', this, function (data) {\n            if (data.type === 'image' && 'hash' in data) {\n\n                if (_this.state.points == data.points) {\n                    return;\n                }\n\n                _this.props.sideGallery.updatePoints(_this.props.hash, data.ups, data.downs);\n\n                _this.setState({\n                    ups: data.ups,\n                    downs: data.downs,\n                    points: data.points\n                });\n            }\n        });\n    },\n\n    componentWillUpdate: function componentWillUpdate(nextProps, nextState) {\n        if (this.props.hash == nextProps.hash && this.state.points != nextState.points && !this.props.isAd) {\n            ReactDOM.findDOMNode(this.refs.points).classList.add('post-action-stats-points--fade');\n        }\n    },\n\n    componentDidUpdate: function componentDidUpdate() {\n        if (this.props.isAd) {\n            return;\n        }\n\n        setTimeout(_.bind(function () {\n            var points = ReactDOM.findDOMNode(this.refs.points);\n\n            if (points) {\n                points.classList.remove('post-action-stats-points--fade');\n            }\n        }, this), 150);\n    },\n\n    componentWillUnmount: function componentWillUnmount() {\n        this.props.emitter.off('pointUpdate');\n        this.props.emitter.off('closed dropdown menu');\n        document.removeEventListener('click', this.hideSignupTooltip);\n    },\n\n    logCreateSignupTooltip: function logCreateSignupTooltip(type) {\n\n        var meta = {\n            type: 'gallery'\n        };\n\n        switch (type) {\n            case this.actionType.FAVORITE:\n                meta.invokedToolTipBy = 'favoriteAttempt';\n                break;\n            case this.actionType.UPVOTE:\n                meta.voteType = this.voteType.UP;\n                meta.invokedToolTipBy = 'voteAttempt';\n                break;\n            case this.actionType.DOWNVOTE:\n                meta.voteType = this.voteType.DOWN;\n                meta.invokedToolTipBy = 'voteAttempt';\n                break;\n            default:\n                // Nothing to do.\n                break;\n        }\n\n        Imgur.Util.jafoLog({\n            event: \"toolTipAppear\",\n            meta: meta\n        });\n    },\n\n    createSignupTooltip: function createSignupTooltip(_ref) {\n        var _this2 = this;\n\n        var type = _ref.type,\n            title = _ref.title,\n            body = _ref.body;\n\n\n        var imageUrl = Imgur.Environment.staticUrl + '/images/icons/large_' + type + '.png';\n        var favGallerySuffix = this.props.in_gallery ? '' : '-nongallery';\n        var classNames = 'ActionCard-post ActionCard-animate ActionCard-' + type + favGallerySuffix;\n        var name = type + '-signup-card';\n\n        var invokedBy = { invokedRegisterSigninBy: 'voteAttempt', type: 'image' };\n        var actions = [Imgur.Elements.ActionCard.createAction('signin', 'Sign in', function () {\n            return Imgur.getInstance().signin(invokedBy, true);\n        }, 'btn btn-left-edge'), Imgur.Elements.ActionCard.createAction('signup', 'Sign up', function () {\n            return Imgur.getInstance().signin(invokedBy);\n        }, 'btn btn-action btn-action-card')];\n\n        this.logCreateSignupTooltip(type);\n\n        return React.createElement(\n            'div',\n            { id: 'signup-tooltip' },\n            React.createElement(Imgur.Elements.ActionCard, {\n                key: type,\n                classNames: classNames,\n                name: name,\n                title: title,\n                body: body,\n                actions: actions,\n                imageUrl: imageUrl,\n                close: function close() {\n                    _this2.setState({ signupTooltipOptions: null });\n                }\n            })\n        );\n    },\n\n    showSignupTooltip: function showSignupTooltip(signupTooltipOptions) {\n        var _this3 = this;\n\n        if (this.state.signupTooltipOptions && signupTooltipOptions.type === this.state.signupTooltipOptions.type) {\n            // Close if they've clicked the same action again.\n            this.setState({ signupTooltipOptions: null });\n            return;\n        }\n\n        setTimeout(function () {\n            _this3.setState({ signupTooltipOptions: signupTooltipOptions });\n        }, 1);\n    },\n\n    handleVote: function handleVote(vote, force) {\n        if ((this.state.upvoted && vote == 'up' || this.state.downvoted && vote == 'down') && !force) {\n            vote = 'veto';\n        }\n\n        if (!Imgur.Environment.auth.id && !force) {\n            var signupTooltipOptions = void 0;\n            if (vote === 'up') {\n                signupTooltipOptions = {\n                    type: this.actionType.UPVOTE,\n                    title: 'Up and Away!',\n                    body: 'Sign up to upvote the posts you like and make them more popular.'\n                };\n            } else {\n                signupTooltipOptions = {\n                    type: this.actionType.DOWNVOTE,\n                    title: 'Beg to differ?',\n                    body: 'Sign up to downvote the posts that rub you the wrong way.'\n                };\n            }\n            this.showSignupTooltip(signupTooltipOptions);\n            return;\n        }\n\n        this.setState({\n            upvoted: vote == 'up',\n            downvoted: vote == 'down'\n        });\n\n        $.ajax({\n            url: '/gallery/action/vote/' + this.props.hash,\n            type: 'POST',\n            data: {\n                'vote': vote,\n                'sid': Imgur.Environment.msid,\n                'type': 'image',\n                'location': 'inside',\n                'gallery': Imgur.Gallery.getInstance().getGalleryMetadata()\n            },\n            displayGenericError: false,\n            success: _.bind(function (response) {\n                if (response.gallery && response.gallery.message) {\n                    humanMsg.displayMsg(response.gallery.message);\n                }\n\n                if (!Imgur.Environment.auth.id) {\n                    return;\n                }\n\n                Imgur.Util.jafoLog({\n                    event: 'vote' + (this.props.readonly ? 'ReadOnly' : ''),\n                    meta: _.merge(Imgur.Gallery.getInstance().getGalleryMetadata(), {\n                        hash: this.props.hash,\n                        type: 'image',\n                        vote: vote,\n                        location: 'inside'\n                    })\n                });\n            }, this)\n        });\n\n        this.props.sideGallery.updateVote(this.props.hash, vote, _.bind(function (points) {\n            this.setState({\n                points: points\n            });\n        }, this));\n    },\n\n    handleFavorite: function handleFavorite() {\n        var currentFavoriteStatus = this.state.favorited;\n\n        if (!Imgur.Environment.auth.id) {\n            this.showSignupTooltip({\n                type: this.actionType.FAVORITE,\n                title: 'Fave and Never Forget',\n                body: 'Sign up to save your favorite posts to your profile.'\n            });\n            return;\n        }\n\n        this.setState({\n            favorited: !this.state.favorited\n        });\n\n        var url = '/' + this.props.hash + '/fav.json';\n\n        if (this.props.is_album) {\n            url = '/a' + url;\n        }\n\n        $.ajax({\n            url: url,\n            type: 'POST',\n            data: {\n                ajax: true,\n                msid: Imgur.Environment.msid,\n                location: 'inside'\n            },\n            error: _.bind(function () {\n                if (Imgur.Environment.auth.id) {\n                    this.setState({\n                        favorited: !this.state.favorited\n                    });\n                }\n            }, this)\n        });\n\n        Imgur.Util.jafoLog({\n            event: 'favorite',\n            meta: {\n                isAlbum: this.props.is_album,\n                hash: this.props.hash,\n                location: 'inside',\n                state: currentFavoriteStatus ? 'favorite' : 'unfavorite'\n            }\n        });\n    },\n\n\n    showAnalytics: function showAnalytics() {\n        var size = this.props.size;\n\n        if (this.props.isAd) {\n            // Don't show stats for PPs.\n            return;\n        }\n\n        if (this.props.is_album && this.props.album_images) {\n            size = 0;\n\n            for (var i = 0; i < this.props.album_images.length; i++) {\n                size += this.props.album_images[i].size;\n            }\n        }\n\n        $.colorbox({\n            html: '<div id=\"analytics-container\"></div>',\n            open: true,\n            top: '10%',\n            transition: 'none',\n            scrolling: false,\n            fixed: true,\n            width: 636,\n            height: 465,\n            className: 'blurbox',\n            close: '',\n            title: 'Analytics',\n            onComplete: _.bind(function () {\n                ReactDOM.render(React.createElement(Imgur.Elements.Analytics, {\n                    ups: this.state.ups,\n                    downs: this.state.downs,\n                    thumbhash: this.props.is_album ? this.props.album_cover : this.props.hash,\n                    views: this.props.views,\n                    size: size,\n                    comments: this.props.comment_count,\n                    timestamp: this.props.timestamp,\n                    title: this.props.title,\n                    inGallery: this.props.in_gallery,\n                    galleryHash: this.props.in_gallery ? this.props.hash : '',\n                    isAlbum: this.props.is_album\n                }), document.getElementById('analytics-container'), $.colorbox.resize);\n            }, this)\n        });\n    },\n\n    handleReport: function handleReport(e) {\n        e.preventDefault();\n\n        var metadata = {\n            type: 'galleryPost',\n            hash: this.props.hash,\n            isAlbum: this.props.is_album,\n            nsfw: this.props.nsfw\n        };\n\n        Imgur.Util.jafoLog({\n            event: 'reportInvoked',\n            meta: metadata\n        });\n\n        if (!Imgur.Environment.auth.id) {\n            Imgur.getInstance().signin('reportAttempt');\n        } else {\n            $.colorbox({\n                html: '<div id=\"report-container\"></div>',\n                open: true,\n                top: '10%',\n                transition: 'none',\n                scrolling: false,\n                fixed: true,\n                width: Imgur.Elements.Report.dimensions.width,\n                height: Imgur.Elements.Report.dimensions.height,\n                className: 'noBorder',\n                close: '',\n                onComplete: _.bind(function () {\n                    ReactDOM.render(React.createElement(Imgur.Elements.Report, {\n                        type: 'post',\n                        url: '/gallery/action/report_image/' + this.props.hash,\n                        metadata: metadata,\n                        cb: _.bind(function () {\n                            this.setState({\n                                reported: true\n                            });\n                        }, this)\n                    }), $('#report-container').get(0));\n                }, this),\n                onClosed: _.bind(function () {\n                    if (!Imgur.Gallery.getInstance()._.preventReportCloseAnalytics) {\n                        Imgur.Util.jafoLog({\n                            event: 'reportCancel',\n                            meta: _.extend({\n                                method: 'modal'\n                            }, metadata)\n                        });\n                    }\n\n                    Imgur.Gallery.getInstance().resetReportCloseAnalytics();\n                }, this)\n            });\n        }\n    },\n\n    handleDownload: function handleDownload(e) {\n        e.preventDefault();\n\n        Imgur.Util.jafoLog({\n            event: 'downloadImage',\n            meta: {\n                control: 'postOptions',\n                nsfw: this.props.nsfw,\n                hash: this.props.hash,\n                isAlbum: this.props.is_album,\n                isAnimated: this.props.animated\n            }\n        });\n\n        if (!this.props.is_album) {\n            window.location = '/download/' + this.props.hash + '/' + encodeURIComponent(this.props.title);\n        } else {\n            $.post('/ajaxalbums/zipexists/' + this.props.hash, _.bind(function (response) {\n                if (response == 'available') {\n                    window.location = '/a/' + this.props.hash + '/zip';\n                } else {\n                    $.colorbox({\n                        html: '<div id=\"download-container\"></div>',\n                        open: true,\n                        top: '10%',\n                        transition: 'none',\n                        scrolling: false,\n                        fixed: true,\n                        width: 432,\n                        height: 262,\n                        className: 'blurbox',\n                        onComplete: _.bind(function () {\n                            ReactDOM.render(React.createElement(Imgur.Gallery.DownloadPost, { hash: this.props.hash }), document.getElementById('download-container'));\n                        }, this)\n                    });\n                }\n            }, this));\n        }\n    },\n\n    handleEmbed: function handleEmbed(e) {\n        e.preventDefault();\n\n        $.colorbox({\n            href: '<div id=\"embed-modal\"></div>',\n            open: true,\n            inline: true,\n            top: '15%',\n            transition: 'none',\n            scrolling: false,\n            width: 593,\n            height: 587,\n            className: 'blurbox blurbox--scroll',\n            title: 'Embed',\n            onComplete: _.bind(function () {\n                ReactDOM.render(React.createElement(Imgur.Gallery.Embed, {\n                    hash: this.props.hash,\n                    title: this.props.title,\n                    in_gallery: !!this.props.in_gallery,\n                    is_album: !!this.props.is_album,\n                    nsfw: !!this.props.nsfw\n                }), document.getElementById('embed-modal'));\n            }, this)\n        });\n    },\n\n    handleMarkMature: function handleMarkMature(e) {\n        e.preventDefault();\n\n        var message = 'Are you sure you want to mark this submission as mature?';\n\n        // If the user doesn't have mature enabled, give them some extra warning.\n        if (!Imgur.Environment.auth.show_mature) {\n            message = '<p>' + message + '</p><p>If you\\'d like to enable mature content for your account, please visit your <a href=\"/account/settings\">account settings</a> and choose &quot;Show mature posts and comments.&quot; If you mark a post as mature, but choose not to enable mature content, you may not see your post when browsing Imgur.</p>';\n        }\n\n        $.colorbox({\n            href: '<div id=\"mark-mature\"></div>',\n            open: true,\n            inline: true,\n            top: '15%',\n            transition: 'none',\n            scrolling: false,\n            width: 420,\n            height: 160,\n            className: 'blurbox',\n            title: 'Mark this submission as mature?',\n            onComplete: _.bind(function () {\n                ReactDOM.render(React.createElement(Imgur.Elements.Confirm, {\n                    message: message,\n                    handleNo: $.colorbox.close,\n                    handleYes: _.bind(function () {\n                        $.post('/gallery/action/mature_image/' + this.props.hash, { sid: Imgur.Environment.msid }, _.bind(function (data) {\n                            Imgur.Util.jafoLog({\n                                event: 'markGalleryAsMature',\n                                meta: {\n                                    hash: this.props.hash,\n                                    isAlbum: this.props.is_album\n                                }\n                            });\n\n                            $.colorbox.close();\n                            humanMsg.displayMsg('Submission marked as mature');\n                        }, this));\n                    }, this)\n                }), document.getElementById('mark-mature'), $.colorbox.resize);\n            }, this)\n        });\n    },\n\n    togglePostOptions: function togglePostOptions() {\n        this.setState({\n            postOptionsOpened: !this.state.postOptionsOpened\n        }, _.bind(function () {\n            if (this.state.postOptionsOpened) {\n                document.addEventListener('click', this.togglePostOptions);\n            } else {\n                document.removeEventListener('click', this.togglePostOptions);\n            }\n        }, this));\n    },\n\n    handleHideAlbumFromAccount: function handleHideAlbumFromAccount(e) {\n        e.preventDefault();\n\n        $.colorbox({\n            href: '<div id=\"hide-album\"></div>',\n            open: true,\n            inline: true,\n            top: '15%',\n            transition: 'none',\n            scrolling: false,\n            width: 420,\n            height: 160,\n            className: 'blurbox',\n            title: 'Hide Album From Account',\n            onComplete: _.bind(function () {\n                ReactDOM.render(React.createElement(Imgur.Elements.Confirm, {\n                    message: 'Are you sure you want to hide this album? It will still be accessible through the link, but it won\\'t show up in your account. You will also no longer be able to edit it.',\n                    handleNo: $.colorbox.close,\n                    handleYes: _.bind(function () {\n                        $.post('/ajaxalbums/hide/' + this.props.hash, { msid: Imgur.Environment.msid }, function (data) {\n                            $.colorbox.close();\n                            humanMsg.displayMsg('Album has been hidden');\n                        });\n                    }, this)\n                }), document.getElementById('hide-album'), $.colorbox.resize);\n            }, this)\n        });\n    },\n\n    logTopicClick: function logTopicClick() {\n        Imgur.Util.jafoLog({\n            event: 'openTopicTag',\n            meta: {\n                hash: this.props.hash,\n                isAlbum: this.props.is_album,\n                nsfw: this.props.nsfw,\n                isHot: this.props.is_hot,\n                control: 'topic',\n                location: 'inside',\n                galleryType: 'topic',\n                topicTag: this.props.topic\n            }\n        });\n    },\n\n    handleDelete: function handleDelete(e) {\n        e.preventDefault();\n\n        $.colorbox({\n            href: '<div id=\"delete-album-form\"></div>',\n            open: true,\n            inline: true,\n            top: '15%',\n            transition: 'none',\n            scrolling: false,\n            width: 420,\n            height: 160,\n            className: 'blurbox',\n            title: 'Remove Submission from Gallery',\n            onComplete: _.bind(function () {\n                ReactDOM.render(React.createElement(Imgur.Elements.Confirm, {\n                    message: 'Are you sure you want to remove this submission from the gallery?',\n                    handleNo: $.colorbox.close,\n                    handleYes: _.bind(function () {\n                        $.post('/gallery/action/delete_image/' + this.props.hash, { sid: Imgur.Environment.msid }, _.bind(function (data) {\n\n                            Imgur.Util.jafoLog({\n                                event: 'removeFromGallery',\n                                meta: {\n                                    hash: this.props.hash,\n                                    isAlbum: this.props.is_album\n                                }\n                            });\n\n                            if (Imgur.Environment.auth.id) {\n                                $.colorbox.close();\n\n                                humanMsg.displayMsg('Submission has been removed');\n\n                                setTimeout(_.bind(function () {\n                                    if (this.props.is_album) {\n                                        window.location = '/a/' + this.props.hash;\n                                    } else {\n                                        window.location = '/' + this.props.hash;\n                                    }\n                                }, this), 500);\n                            }\n                        }, this));\n                    }, this)\n                }), document.getElementById('delete-album-form'), $.colorbox.resize);\n            }, this)\n        });\n    },\n\n    handleRemoveTag: function handleRemoveTag(tag) {\n        var _this4 = this;\n\n        $.post('/gallery/action/remove_tag/' + this.props.hash, { sid: Imgur.Environment.msid, tag: tag.tag }, function () {\n            _this4.setState({\n                galleryTags: _this4.state.galleryTags.filter(function (galleryTag) {\n                    return galleryTag.tag !== tag.tag;\n                })\n            });\n            humanMsg.displayMsg(tag.display + ' removed from post');\n        }).fail(function () {\n            humanMsg.displayMsg('Unable to remove tag ' + tag.display + ' from post', 'error-msg');\n        });\n    },\n    renderTags: function renderTags() {\n        var _this5 = this;\n\n        if (!this.state.galleryTags) {\n            return [];\n        }\n\n        return Object.values(this.state.galleryTags).map(function (tag) {\n            return React.createElement(Imgur.Elements.Tag.View, { key: tag['tag'], tagName: tag['display'] || tag['tag'], redirectTo: '/t/' + tag['tag'], redirectAnalytics: _this5.handleTagClick(tag['tag']), classNames: 'post-action-tags-tag right', allowRemoval: Imgur.Environment.isGalleryAdmin, removeTag: _this5.handleRemoveTag.bind(_this5, tag) });\n        });\n    },\n\n    handleTagClick: function handleTagClick(tagName) {\n        return function () {\n            var meta = _.extend(Imgur.Gallery.getInstance().getGalleryMetadata(), {\n                location: 'tagModule',\n                tagName: tagName\n            });\n\n            Imgur.Util.jafoLog({\n                event: 'tagClick',\n                meta: meta\n            });\n        };\n    },\n\n    postOption: function postOption(icon, linkText, handler) {\n        var url = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : '#';\n\n        return React.createElement(\n            'li',\n            { key: linkText },\n            React.createElement(\n                'a',\n                { className: 'post-action-option', href: url, onClick: handler },\n                React.createElement('span', { className: 'icon-' + icon + ' post-action-options-items-icon' }),\n                React.createElement(\n                    'span',\n                    { className: 'post-action-link-text' },\n                    linkText\n                )\n            )\n        );\n    },\n\n    render: function render() {\n        var singleRow = !this.props.in_gallery || this.props.hide_points;\n        var team = '';\n\n        if (Imgur.Environment.apocalypse_active && Imgur.Environment.auth.team) {\n            team = Imgur.Environment.auth.team;\n        }\n\n        var upvoteClasses = classNames({\n            'post-action-icon': true,\n            'post-action-upvote': true,\n            'icon-upvote-outline': !this.state.upvoted && !team,\n            'icon-upvote-fill': this.state.upvoted && !team,\n            'icon-human-upvote': !this.state.upvoted && team === 'human',\n            'icon-human-upvote-filled': this.state.upvoted && team === 'human',\n            'icon-zombie-upvote': !this.state.upvoted && team === 'zombie',\n            'icon-zombie-upvote-filled': this.state.upvoted && team === 'zombie',\n            'green': this.state.upvoted\n        });\n\n        var downvoteClasses = classNames({\n            'post-action-icon': true,\n            'post-action-downvote': true,\n            'icon-downvote-outline': !this.state.downvoted && !team,\n            'icon-downvote-fill': this.state.downvoted && !team,\n            'icon-human-downvote': !this.state.downvoted && team === 'human',\n            'icon-human-downvote-filled': this.state.downvoted && team === 'human',\n            'icon-zombie-downvote': !this.state.downvoted && team === 'zombie',\n            'icon-zombie-downvote-filled': this.state.downvoted && team === 'zombie',\n            'red': this.state.downvoted\n        });\n\n        var favoriteClasses = classNames({\n            'post-action-icon': true,\n            'post-action-favorite': true,\n            'icon-favorite-outline': !this.state.favorited && !team,\n            'icon-favorite-fill': this.state.favorited && !team,\n            'icon-human-favorite': !this.state.favorited && team === 'human',\n            'icon-human-favorite-filled': this.state.favorited && team === 'human',\n            'icon-zombie-favorite': !this.state.favorited && team === 'zombie',\n            'icon-zombie-favorite-filled': this.state.favorited && team === 'zombie',\n            'aqua': this.state.favorited\n        });\n\n        var pointsProps = {\n            className: 'post-action-stats'\n        };\n\n        if (this.props.in_gallery) {\n            pointsProps.className += ' pointer';\n            pointsProps.onClick = this.showAnalytics;\n        }\n\n        var pointsClasses = classNames({\n            'post-action-stats-points': true,\n            'nodisplay': singleRow\n        });\n\n        // temp fix (Dec 6, 2016) for problematic HBase views - if backend returns 0 views, hide view counter\n        var viewsClasses = classNames({\n            'nodisplay': this.props.views == 0 || this.props.hide_views\n        });\n\n        var postOptionsClasses = classNames({\n            'post-action-options': true,\n            'pointer': true,\n            'right': true,\n            'post-action-options--opened': this.state.postOptionsOpened\n        });\n\n        var postOptions = [];\n        var isOwner = Imgur.Environment.auth.url && Imgur.Environment.auth.url == this.props.account_url;\n        if (this.props.in_gallery) {\n            if (!this.props.hide_report) {\n                if (this.state.reported) {\n                    postOptions.push(this.postOption('flag', 'Post Reported'));\n                } else {\n                    postOptions.push(this.postOption('report-outline', 'Report Post', this.handleReport));\n                }\n            }\n\n            if (!this.props.nsfw && isOwner) {\n                postOptions.push(this.postOption('alert', 'Mark As Mature', this.handleMarkMature));\n            }\n\n            if (isOwner) {\n                postOptions.push(this.postOption('trash', 'Delete Post', this.handleDelete));\n            }\n        }\n\n        postOptions.push(this.postOption('download', 'Download Post', this.handleDownload));\n        postOptions.push(this.postOption('embed', 'Embed Post', this.handleEmbed));\n\n        if (!this.props.is_album && !this.props.animated) {\n            postOptions.push(this.postOption('meme', 'Make Meme', undefined, '/memegen/create/' + this.props.hash));\n        }\n\n        var actionsCard = null;\n        if (this.state.signupTooltipOptions) {\n            actionsCard = this.createSignupTooltip(this.state.signupTooltipOptions);\n        }\n\n        if (singleRow) {\n            return React.createElement(\n                'div',\n                { className: 'post-action-actions post-action-single' + (this.props.add_border ? ' post-action-border' : '') },\n                actionsCard,\n                this.props.in_gallery ? React.createElement(\n                    'span',\n                    null,\n                    React.createElement(Imgur.Elements.PressButton, { onPress: _.partial(this.handleVote, 'up'), className: upvoteClasses }),\n                    React.createElement(Imgur.Elements.PressButton, { onPress: _.partial(this.handleVote, 'down'), className: downvoteClasses })\n                ) : '',\n                React.createElement(Imgur.Elements.PressButton, { onPress: _.partial(this.handleFavorite), className: favoriteClasses }),\n                React.createElement(\n                    'span',\n                    pointsProps,\n                    React.createElement(\n                        'span',\n                        { className: viewsClasses },\n                        Imgur.Util.numberFormat(this.props.views),\n                        ' view',\n                        this.props.views != 1 && this.props.views != -1 ? 's' : ''\n                    )\n                ),\n                React.createElement(\n                    'div',\n                    { onClick: this.togglePostOptions, className: postOptionsClasses },\n                    React.createElement('span', { className: 'icon-ellipses' }),\n                    React.createElement(\n                        'ul',\n                        { className: 'post-action-options-items' },\n                        postOptions\n                    )\n                ),\n                this.props.in_gallery && !this.props.hide_report && !this.state.reported && this.props.sideGallery.getSection() == 'new' ? React.createElement('a', { href: '', onClick: this.handleReport, className: 'icon-flag post-action-report right' }) : '',\n                React.createElement(Imgur.Elements.Socialicons, { classes: 'right' })\n            );\n        }\n\n        /* Double Line - in gallery, non-promoted */\n        return React.createElement(\n            'div',\n            { className: this.props.add_border ? 'post-action-border' : '' },\n            React.createElement(\n                'div',\n                { className: 'post-action-actions' },\n                actionsCard,\n                React.createElement(Imgur.Elements.PressButton, { onPress: _.partial(this.handleVote, 'up'), className: upvoteClasses }),\n                React.createElement(Imgur.Elements.PressButton, { onPress: _.partial(this.handleVote, 'down'), className: downvoteClasses }),\n                React.createElement(Imgur.Elements.PressButton, { onPress: _.partial(this.handleFavorite), className: favoriteClasses }),\n                React.createElement(\n                    'div',\n                    { onClick: this.togglePostOptions, className: postOptionsClasses },\n                    React.createElement('span', { className: 'icon-ellipses' }),\n                    React.createElement(\n                        'ul',\n                        { className: 'post-action-options-items' },\n                        postOptions\n                    )\n                ),\n                React.createElement(Imgur.Elements.Socialicons, { classes: 'right' })\n            ),\n            React.createElement(\n                'div',\n                { className: 'post-action-meta' },\n                React.createElement(\n                    'span',\n                    pointsProps,\n                    React.createElement(\n                        'span',\n                        { ref: 'points', className: pointsClasses },\n                        Imgur.Util.numberFormat(this.state.points),\n                        ' Point',\n                        this.state.points != 1 && this.state.points != -1 ? 's' : ''\n                    ),\n                    React.createElement(\n                        'span',\n                        { className: viewsClasses },\n                        Imgur.Util.numberFormat(this.props.views),\n                        ' View',\n                        this.props.views != 1 && this.props.views != -1 ? 's' : ''\n                    )\n                ),\n                React.createElement(\n                    'div',\n                    { className: 'right post-action-tags' },\n                    this.props.in_gallery && !this.props.hide_tags ? this.renderTags() : ''\n                ),\n                React.createElement('div', { className: 'cf' })\n            )\n        );\n    }\n});\n//# sourceMappingURL=postactionbar.js.map\n","Namespace('Imgur.Gallery');\n\nImgur.Gallery.Privacy = React.createClass({\n    displayName: 'Gallery-Privacy',\n\n    PUBLIC: 0,\n    HIDDEN: 1,\n\n    getInitialState: function getInitialState() {\n        return {\n            publicPrivacy: this.props.privacy == this.PUBLIC\n        };\n    },\n    handleChange: function handleChange(privacy) {\n        this.setState({\n            publicPrivacy: this.refs.privacyForm.elements['privacy'].value == this.PUBLIC\n        });\n    },\n    handleSave: function handleSave() {\n        var privacy = this.state.publicPrivacy ? this.PUBLIC : this.HIDDEN;\n        $.ajax({\n            method: 'POST',\n            url: '/ajaxalbums/settings/' + this.props.hash,\n            data: { privacy: privacy },\n            success: function () {\n                this.props.handleSuccess(privacy);\n            }.bind(this)\n        });\n    },\n    render: function render() {\n        var privacyMessage = 'Your posts are hidden to anyone coming to your profile, but can still be accessed via the direct URL.';\n        var privacyClass = 'privacy-hidden-message';\n\n        if (this.state.publicPrivacy) {\n            privacyMessage = \"When a post is marked 'public', it can be seen in your profile and shared around the web.\";\n            privacyClass = 'privacy-public-message';\n        }\n\n        return React.createElement(\n            'div',\n            null,\n            React.createElement(\n                'div',\n                { className: 'privacy-selection' },\n                React.createElement(\n                    'div',\n                    { className: 'privacy-title' },\n                    'Select a setting'\n                ),\n                React.createElement(\n                    'div',\n                    { className: 'spaceform' },\n                    React.createElement(\n                        'form',\n                        { ref: 'privacyForm' },\n                        React.createElement(\n                            'label',\n                            { className: 'privacy-public' + (this.state.publicPrivacy ? ' privacy-selected' : '') },\n                            React.createElement('input', { type: 'radio', name: 'privacy', value: this.PUBLIC, checked: this.state.publicPrivacy, onChange: this.handleChange }),\n                            React.createElement('i', { className: 'spaceform-radio' }),\n                            ' ',\n                            React.createElement(\n                                'span',\n                                { className: 'privacy-setting' },\n                                'Public'\n                            ),\n                            ' ',\n                            React.createElement('i', { className: 'icon-globe' })\n                        ),\n                        React.createElement(\n                            'label',\n                            { className: !this.state.publicPrivacy ? 'privacy-selected' : '' },\n                            React.createElement('input', { type: 'radio', name: 'privacy', value: this.HIDDEN, checked: !this.state.publicPrivacy, onChange: this.handleChange }),\n                            React.createElement('i', { className: 'spaceform-radio' }),\n                            ' ',\n                            React.createElement(\n                                'span',\n                                { className: 'privacy-setting' },\n                                'Hidden'\n                            ),\n                            ' ',\n                            React.createElement('i', { className: 'icon-lock' })\n                        )\n                    )\n                )\n            ),\n            React.createElement(\n                'p',\n                { className: privacyClass },\n                privacyMessage\n            ),\n            React.createElement(\n                'button',\n                { className: 'btn btn-action right privacy-save', onClick: this.handleSave },\n                'Save'\n            )\n        );\n    }\n});\n//# sourceMappingURL=privacy.js.map\n","Namespace('Imgur.Gallery');\n\nImgur.Gallery.ShareImage = React.createClass({\n    displayName: 'Gallery-ShareImage',\n\n    render: function render() {\n        return React.createElement(\n            'div',\n            null,\n            React.createElement(\n                'div',\n                { className: 'left' },\n                React.createElement(\n                    'h3',\n                    { className: 'font-opensans-reg' },\n                    'Share Link'\n                ),\n                React.createElement(Imgur.Elements.Copy, { value: this.props.embedcoder.imageLink(), inputClass: 'copy-input', copyClass: 'copy' }),\n                React.createElement(\n                    'h3',\n                    { className: 'font-opensans-reg' },\n                    'BBCode (Forums)'\n                ),\n                React.createElement(Imgur.Elements.Copy, { value: this.props.embedcoder.bbcode(), inputClass: 'copy-input', copyClass: 'copy' })\n            ),\n            React.createElement(\n                'div',\n                { className: 'right' },\n                React.createElement(\n                    'h3',\n                    { className: 'font-opensans-reg' },\n                    'Embed in HTML'\n                ),\n                React.createElement(Imgur.Elements.Copy, { value: this.props.embedcoder.embed(), inputClass: 'copy-input', copyClass: 'copy' }),\n                React.createElement(\n                    'h3',\n                    { className: 'font-opensans-reg' },\n                    'Markdown (Reddit)'\n                ),\n                React.createElement(Imgur.Elements.Copy, { value: this.props.embedcoder.markdown(), inputClass: 'copy-input', copyClass: 'copy' })\n            )\n        );\n    }\n});\n//# sourceMappingURL=shareimage.js.map\n","Namespace('Imgur.Gallery');\n\nImgur.Gallery.SharePost = React.createClass({\n    displayName: 'Gallery-ShareImage',\n\n    getInitialState: function getInitialState() {\n        return {\n            topics: [],\n            validTitle: false,\n            topicSelected: -1\n        };\n    },\n\n    componentWillMount: function componentWillMount() {\n        this.topics_request = $.get('https://api.imgur.com/3/topics/defaults', _.bind(function (data) {\n            this.setState({\n                topics: data.data\n            }, $.colorbox.resize);\n        }, this));\n    },\n    componentWillUnmount: function componentWillUnmount() {\n        this.topics_request.abort();\n    },\n    handleTopicSelect: function handleTopicSelect(index) {\n        this.setState({\n            topicSelected: index\n        });\n    },\n    handleTitleValidation: function handleTitleValidation(valid) {\n        this.setState({\n            validTitle: valid\n        });\n    },\n    handleShare: function handleShare() {},\n    handleFail: function handleFail(response) {\n        var self = this;\n\n        try {\n            if (!response) {\n                throw 'bad response';\n            }\n\n            if (response.responseText) {\n                response = $.parseJSON(response.responseText);\n            }\n        } catch (e) {\n            humanMsg.displayMsg('An unknown error occurred. Please try again.', 'error-msg');\n\n            Imgur.Util.jafoLog({\n                event: 'shareOnImgurError',\n                meta: {\n                    hash: this.props.hash,\n                    error: 'unparsable',\n                    button: 'share'\n                }\n            });\n\n            return;\n        }\n\n        if (response.data == null || response.data.error == null || response.data.error.message == null) {\n            humanMsg.displayMsg('An unknown error occurred. Please try again.', 'error-msg');\n\n            Imgur.Util.jafoLog({\n                event: 'shareOnImgurError',\n                meta: {\n                    hash: this.props.hash,\n                    error: 'unknown',\n                    button: 'share'\n                }\n            });\n\n            return;\n        }\n\n        var sec = parseInt(response.data.error.message);\n        var statMessage = 'unknown';\n\n        if (!isNaN(sec) && sec > 0) {\n            statMessage = 'rateLimit';\n            var time = sec > 60 ? Math.round(sec / 60) + Imgur.Util.pluralize(Math.round(sec / 60), ' minute') : sec + Imgur.Util.pluralize(sec, ' second');\n            humanMsg.displayMsg('You\\'re sharing too quickly. Please wait ' + time + '.', 'error-msg');\n        } else if (response.data.error.message == 'Banned') {\n            statMessage = 'banned';\n            humanMsg.displayMsg('You blew it! You have been banned for posting NSFW images to the gallery.', 'error-msg');\n        } else if (response.data.error.message == 'Terms') {\n            statMessage = 'terms';\n            this.showTerms(savePreview);\n        } else if (response.data.error.message == 'NotVerified') {\n            statMessage = 'notVerified';\n            this.showEmailVerification(function () {\n                if (savePreview) {\n                    self.handleSave();\n                } else {\n                    self.handleSubmit();\n                }\n            });\n        } else if (response.data.error.message == 'OP') {\n            humanMsg.displayMsg('OP must exist.', 'error-msg');\n        } else if (response.data.error.message == 'Suspended') {\n            statMessage = 'suspended';\n            humanMsg.displayMsg('Your account is currently suspended', 'error-msg');\n        } else {\n            humanMsg.displayMsg('An unknown error occurred. Please try again.', 'error-msg');\n        }\n\n        Imgur.Util.jafoLog({\n            event: 'shareOnImgurError',\n            meta: {\n                hash: this.props.hash,\n                error: statMessage,\n                button: 'share'\n            }\n        });\n    },\n    render: function render() {\n        var topics = [];\n        var validTopic = this.state.topicSelected >= 0;\n        var shareClasses = classNames({\n            'right': true,\n            'btn': true,\n            'btn-grey': !this.state.validTitle || !validTopic,\n            'btn-action': this.state.validTitle && validTopic\n        });\n\n        var shareText = 'Share';\n\n        if (!this.state.validTitle && !validTopic) {\n            shareText = 'Title & Topic Required';\n        } else if (!this.state.validTitle) {\n            shareText = 'Title Required';\n        } else if (!validTopic) {\n            shareText = 'Topic Required';\n        }\n\n        for (var i = 0; i < this.state.topics.length; i++) {\n            var topicSelected = '';\n\n            if (this.state.topicSelected == i) {\n                topicSelected = ' green';\n            }\n\n            topics.push(React.createElement(\n                'div',\n                { className: 'post-share-topic pointer' + topicSelected, onClick: _.partial(this.handleTopicSelect, i), key: 'topic' + i },\n                React.createElement('i', { className: 'icon-checkmarkcircle' }),\n                ' ',\n                React.createElement(\n                    'span',\n                    { className: 'post-share-topic-name' },\n                    this.state.topics[i].name\n                ),\n                React.createElement(\n                    'div',\n                    { className: 'post-share-topic-desc' + topicSelected },\n                    this.state.topics[i].description\n                )\n            ));\n        }\n\n        return React.createElement(\n            'div',\n            null,\n            React.createElement(\n                'div',\n                { className: 'tooltip' },\n                'Contains Mature Content ',\n                React.createElement('input', { type: 'checkbox' }),\n                React.createElement(\n                    'span',\n                    { className: 'tooltip-text tooltip-text-bottom' },\n                    'What\\'s this? Mature content is intended for adult audiences only. Selecting this option also enables mature content in your stream.'\n                )\n            ),\n            React.createElement(\n                Imgur.Elements.NanoScroller,\n                { classes: 'post-share-options' },\n                React.createElement(Imgur.Share.Title, { handleChange: this.handleTitleValidation, title: this.props.title, maxLength: 255, inputClasses: 'post-share-input', limitClasses: 'right post-share-counter' }),\n                React.createElement('div', { className: 'cf' }),\n                React.createElement(\n                    'span',\n                    { className: 'post-share-topics-header' },\n                    'Topic'\n                ),\n                React.createElement(\n                    'div',\n                    { className: 'post-share-topics' },\n                    topics\n                )\n            ),\n            React.createElement(\n                'div',\n                { className: 'post-share-save' },\n                React.createElement(\n                    'button',\n                    { className: shareClasses },\n                    shareText\n                )\n            )\n        );\n    }\n});\n//# sourceMappingURL=sharepost.js.map\n","Namespace('Imgur.Gallery');\n\nImgur.Gallery.SourceBar = React.createClass({\n    displayName: 'Gallery-SourceBar',\n\n    viaAppIconClick: function(){\n        Imgur.Util.jafoLog({\n            event: 'viaAppIcon',\n            meta: {\n                type: 'upload',\n                hash: this.props.image.hash,\n                isAlbum: this.props.image.is_album,\n                nsfw: this.props.image.nsfw,\n                inGallery: true,\n                platform: (this.props.image.platform === 'ios') ? 'iphone' : this.props.image.platform\n            }\n        });\n    },\n\n    _redditSource: function(redditLink, sourceText) {\n        return React.DOM.a({\n                href: 'https://www.reddit.com' + redditLink,\n                target: '_blank',\n                key: 'reddit'\n            },\n            sourceText\n        );\n    },\n\n    handleUserProfileClick: function() {\n        Imgur.Util.jafoLog({\n            event: 'userProfileNav',\n            meta: {\n                accountId: this.props.image.account_id,\n                method: 'usernamePost'\n            }\n        });\n    },\n\n    render: function() {\n        var children = [],\n            anon     = false;\n\n        if(this.props.image.isAd || this.props.image.is_ad) {\n            children.push(\n                React.DOM.a({\n                    href: 'http://imgur.com/blog/2015/05/31/about-promoted-posts/',\n                    className: 'title promoted-tag',\n                    title: 'learn more about promoted posts',\n                    key: 'promoted'\n                }, 'Promoted')\n            );\n        }\n\n        if(this.props.image.account_url) {\n            children.push(\n                React.DOM.span({key: 'by'}, ' by '),\n                React.DOM.a({\n                        href: '/user/' + this.props.image.account_url,\n                        onClick: this.handleUserProfileClick,\n                        title: 'view account of ' + this.props.image.account_url,\n                        className: 'post-account',\n                        key: 'account'\n                    },\n                    this.props.image.account_url\n                )\n            );\n        } else if(this.props.image.reddit) {\n            var sourceText = (this.props.image.video_source && !this.props.image.is_album) ? ' (source) ' : '(source) ';\n\n            children.push(this._redditSource(this.props.image.reddit, sourceText));\n        } else if(this.props.image.subreddit) {\n            children.push(this._redditSource(this.props.image.permalink, '(source) '));\n        } else {\n            anon = true;\n            children.push(React.DOM.span({key: 'anon'}, 'Uploaded '));\n        }\n\n        var opts = {className: 'post-title-meta font-opensans-semibold'};\n\n        if(!this.props.image.title && !Imgur.Environment.hasAccess && !this.props.slim) {\n            opts.className += ' post-title-meta--notitle'\n        }\n\n        if(this.props.image.isAd || this.props.image.is_ad) {\n            // we skip reporting the time for promoted posts\n            return React.DOM.div(opts, children);\n        }\n\n        // via ios or android\n        if (['ios', 'android'].indexOf(this.props.image.platform) >= 0) {\n            children.push(React.DOM.span({key: 'platform'}, ' via ', React.DOM.a({\n                href: '//' + Imgur.Environment.host + '/apps',\n                onClick: this.viaAppIconClick\n            },(this.props.image.platform == 'ios') ? 'iPhone' : 'Android', React.DOM.span({\n                className: 'icon-mobile'\n            }, null))));\n        }\n\n        if (this.props.image.timestamp || this.props.image.datetime) {\n            children.push(React.createElement(Imgur.Elements.Timestamp, {key: 'humantime' + (this.props.image.timestamp || this.props.image.datetime), shouldUpdate: false, timestamp: this.props.image.timestamp || this.props.image.datetime}));\n        }\n\n        if(this.props.image.video_source && !this.props.image.is_album) {\n            children.push(\n                React.DOM.span({\n                        className: 'vidgif-info',\n                        key: 'vidgif'\n                    },\n                    'Made with ',\n                    React.DOM.a({\n                            href: '//imgur.com/vidgif',\n                            target: '_blank'\n                        },\n                        'Video to GIF'\n                    )\n                )\n            );\n        }\n\n        return React.DOM.div(\n            opts,\n            children\n        );\n    }\n});\n","Namespace('Imgur.Gallery.Post');\n\nImgur.Gallery.Post = React.createClass({\n    INITIAL_LOAD: 10,\n    MAX_WIDTH: 728,\n    MAX_NON_GALLERY_TITLE: 128,\n    MAX_TEXTAREA: 32767, // half the size of a mysql blob to account for double byte chars\n    ADD_IMAGE_ROW_HEIGHT: 30,\n    RENDER_STATE: { //Only used for albums\n        PRE: 1, //Layout image divs to the page\n        POST: 2 },\n\n    updatingState: false,\n\n    _: {\n        onScroll: null,\n        $window: $(window)\n    },\n\n    displayName: 'GalleryPost',\n\n    getInitialState: function getInitialState() {\n        var gridType = '';\n\n        if (this.props.data.force_grid) {\n            gridType = 'browse';\n        }\n\n        return {\n            all_loaded: false,\n            gridType: gridType,\n            render_state: this.RENDER_STATE.PRE,\n            scrolltop: 0,\n            window_height: 600,\n            thumb_size: localStorage.getItem('retina') == '0' ? 'g' : 'r',\n            isLoadingTags: false\n        };\n    },\n\n    componentDidMount: function componentDidMount() {\n        if (this.props.data.is_album) {\n            this._calculateContainerHeights();\n\n            this.setState({\n                render_state: this.RENDER_STATE.POST\n            });\n\n            if (!this.props.in_gallery) {\n                this.props.emitter.on('initGrid', this, function (type) {\n                    this._.$window.off('scroll', this._.onScroll);\n                    this.setState({\n                        gridType: type\n                    });\n                });\n\n                this.props.emitter.on('closeGrid', this, function () {\n                    this._.$window.on('scroll', this._.onScroll);\n                    this._handleScroll();\n                    this.setState({\n                        gridType: ''\n                    });\n                });\n            }\n        }\n\n        if (this.props.data.is_viral) {\n            var message = '<div id=\"post-edit-message\">';\n            message += '<div class=\"post-edit-message-header\"></div>';\n            message += '<div class=\"post-edit-message-body\">';\n            message += '<p><strong>Your post is in Most Viral! Please edit responsibly.</strong></p>';\n            message += '<p>It\\'s good Imgur-etiquette to use the phrase \"Edit\" to distinguish new details about your post.</p>';\n            message += '<p>Bad edits change the context of the post, solicit Imgurians to send inappropriate things, add spammy links, or violate our <a href=\"/rules\">community rules</a>.</p>';\n            message += '<div class=\"right margin-top margin-bottom\"><button class=\"btn btn-action\" onclick=\"$.colorbox.close()\">Okay, got it!</button></div>';\n            message += '</div></div>';\n\n            $.colorbox({\n                html: message,\n                open: true,\n                top: '10%',\n                transition: 'none',\n                scrolling: false,\n                fixed: true,\n                width: 540,\n                height: 445,\n                className: 'noBorder noX'\n            });\n        }\n\n        // allow Sales and Marketing to set image titles on new content\n        this.showTitles = Imgur.LocalStorage.get('showTitles') || false;\n    },\n\n    componentWillMount: function componentWillMount() {\n        if (this.props.all_loaded) {\n            this.setState({\n                all_loaded: true\n            });\n        }\n\n        this._.onScroll = _.throttle(_.bind(this._handleScroll, this), 250);\n        this._.$window.on('scroll', this._.onScroll);\n        this._handleScroll();\n    },\n\n    componentWillUnmount: function componentWillUnmount() {\n        if (this.props.data.is_album) {\n            this._.$window.off('scroll', this._.onScroll);\n        }\n    },\n\n    componentDidUpdate: function componentDidUpdate(prevProps, prevState) {\n        if (this.props.data.is_album && (this.state.render_state == this.RENDER_STATE.PRE || this.props.has_access && this.updatingState === true)) {\n            this._calculateContainerHeights();\n            this.updatingState = false;\n            this.setState({\n                render_state: this.RENDER_STATE.POST\n            });\n        }\n    },\n\n    componentWillReceiveProps: function componentWillReceiveProps(nextProps) {\n        this.setState({\n            all_loaded: nextProps.all_loaded,\n            render_state: this.RENDER_STATE.PRE,\n            gridType: nextProps.gridType\n        });\n    },\n\n    _handleScroll: function _handleScroll() {\n        this.setState({\n            scrolltop: this._.$window.scrollTop(),\n            window_height: this._.$window.height()\n        });\n    },\n\n    //Modified from imgur.php\n    _scaleWidth: function _scaleWidth(origW, origH, maxW) {\n        if (origH && origW) {\n            var ratio = origH / origW;\n\n            if (origW >= maxW) {\n                return Math.round(maxW * ratio);\n            }\n        }\n\n        return origH;\n    },\n\n    /**\n    * Takes in text from an editable field and parses it for tags without spaces.\n    * All tags that were added via an editable field are then removed and readded to account for tag editing\n    *\n    * @param {number} containerIndex - image position in post\n    * @param {string} type - the type of field being edited\n    * @param {string} text - the text of the field\n    */\n    updateTagsFromText: function updateTagsFromText(containerIndex, type, value) {\n        var _this = this;\n\n        if (type !== 'description') {\n            return;\n        }\n\n        var addedVia = containerIndex + type;\n        var tagRegex = new RegExp('#([a-zA-Z0-9_]{' + Imgur.Constants.MIN_TAG_LENGTH + ',' + Imgur.Constants.MAX_TAG_LENGTH + '})', 'g');\n        var matches = [];\n        var match = void 0;\n\n        do {\n            match = tagRegex.exec(value);\n\n            if (match) {\n                matches.push(match[1]);\n            }\n        } while (match);\n\n        this.props.tagStore.getTags().forEach(function (tag) {\n            if (tag.addedVia === addedVia && matches.indexOf(tag.tagName) === -1) {\n                _this.props.tagStore.removeTag(tag.tagName);\n            }\n        });\n\n        matches.forEach(function (match) {\n            _this.props.tagStore.addTag(match, addedVia, function () {});\n        });\n    },\n\n    _setContainerHeightByIndex: function _setContainerHeightByIndex(containerIndex, type, value) {\n        var album_images = this.props.album_image_store.getImages(this.props.data.hash);\n        var image = album_images.images[containerIndex];\n        var prevHeight = image.containerHeight;\n        image[type] = value;\n        var ref = image.reactKey ? image.reactKey : image.hash;\n        var height = this._calculateElementHeight(ReactDOM.findDOMNode(this.refs[ref]));\n        image.containerHeight = height !== false ? height : image.containerHeight;\n\n        if (prevHeight != image.containerHeight) {\n            this._handleScroll();\n        }\n\n        this.updateTagsFromText(containerIndex, type, value);\n    },\n\n    _calculateContainerHeights: function _calculateContainerHeights() {\n        var album_images = this.props.album_image_store.getImages(this.props.data.hash);\n        var image_count = album_images.count;\n        album_images = album_images.images;\n\n        if (!this.state.all_loaded) {\n            image_count = Math.min(image_count, this.INITIAL_LOAD);\n        }\n\n        for (var i = 0; i < image_count; i++) {\n            if (typeof album_images[i].containerHeight !== 'number' || album_images[i].recalcReady) {\n                var ref = album_images[i].reactKey ? album_images[i].reactKey : album_images[i].hash;\n                var height = this._calculateElementHeight(ReactDOM.findDOMNode(this.refs[ref]));\n                album_images[i].containerHeight = height !== false ? height : album_images[i].containerHeight;\n                album_images[i].needsRecalc = false;\n                album_images[i].recalcReady = false;\n            }\n        }\n    },\n\n    _calculateElementHeight: function _calculateElementHeight(el) {\n        if (!el) {\n            return 0;\n        }\n\n        var computedStyle = document.defaultView.getComputedStyle(el, null);\n\n        var height = computedStyle.getPropertyValue('height');\n\n        if (height == 'auto') {\n            return false;\n        }\n\n        var elmHeight = parseFloat(computedStyle.getPropertyValue('height'), 10);\n        var elmMargin = parseFloat(computedStyle.getPropertyValue('margin-top'), 10) + parseFloat(computedStyle.getPropertyValue('margin-bottom'), 10);\n\n        return elmHeight + elmMargin;\n    },\n\n    loadAll: function loadAll() {\n        var images = this.props.album_image_store.getImages(this.props.hash);\n\n        if (images != null) {\n            this.setState({\n                all_loaded: true,\n                render_state: this.RENDER_STATE.PRE\n            });\n        } else {\n            this.props.album_image_store.fetchImages(this.props.hash, _.bind(function (data) {\n                this.setState({\n                    all_loaded: true,\n                    render_state: this.RENDER_STATE.PRE\n                });\n            }, this));\n        }\n    },\n\n    _createRenderedImage: function _createRenderedImage(image, i) {\n        var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n        var props = {\n            thumbsize: image.thumbsize,\n            width: this.MAX_WIDTH,\n            minHeight: image.minHeight,\n            item: image,\n            wrap_with_direct_link: false,\n            poster: false,\n            showShareLinks: options.showShareLinks || this.props.has_access,\n            // the initial pageload is not covered with React, and we may have already fired the pixel for this album-image in generalInit().\n            discarding_referrer: !this.props.initial || i >= this.INITIAL_LOAD && !image.shown,\n            firing_pixel: !this.props.initial || i >= this.INITIAL_LOAD && !image.shown,\n            handleRemove: this.handleRemove,\n            album_hash: this.props.data.hash\n        };\n\n        return React.createElement(Imgur.ImageViewer, props);\n    },\n\n    _createComponent: function _createComponent(image, imgView, i, visible_image_count) {\n        var isLastVisibleImage = i == visible_image_count - 1;\n        var containerClasses = classNames({\n            'post-image-container': true,\n            'post-image-container--spacer': !isLastVisibleImage && !this.props.has_access && !image.title && !image.description\n        });\n        var metaClasses = classNames({\n            'post-image-meta': image.title || image.description || this.props.showEditTools,\n            'post-image-meta--last': isLastVisibleImage && !this.props.showEditTools\n        });\n\n        // use blobURL (just a UUID) to support uploading state (ie, no hash)\n        var key = image.reactKey ? image.reactKey : image.hash;\n        var titleTabindex = i * 2 + 2;\n        var descriptionTabindex = i * 2 + 3;\n\n        return React.DOM.div({ ref: key, id: image.hash, className: containerClasses, key: key }, imgView, React.DOM.div({ className: metaClasses }, this.showTitles || image.title ? React.createElement(Imgur.Gallery.TitleDesc, {\n            postSavingStore: this.props.postSavingStore,\n            element: 'h2',\n            type: 'title',\n            classes: 'post-image-title',\n            placeholder: 'Image title',\n            text: image.title,\n            deletehash: image.deletehash,\n            triggerSave: image.triggerSaveTitleDesc,\n            max_length: this.MAX_NON_GALLERY_TITLE,\n            no_enter: true,\n            dont_protect: true,\n            updateContainer: _.bind(this._setContainerHeightByIndex, this, i),\n            showEditTools: this.props.showEditTools,\n            tabindex: this.props.showEditTools ? titleTabindex : '', //index * (image title + image description) + (post title and 1 for non-0 index)\n            handleKeyDown: _.bind(this.editKeyHandler, this, titleTabindex),\n            key: 'tabindex' + titleTabindex,\n            ref: 'tabindex' + titleTabindex\n        }) : null, React.createElement(Imgur.Gallery.DescriptionTagSuggestContainer, {\n            postSavingStore: this.props.postSavingStore,\n            tagStore: this.props.tagStore,\n            element: 'div',\n            type: 'description',\n            classes: 'post-image-description' + (this.props.showEditTools ? ' post-image-description--editable' : ''),\n            placeholder: 'Add a description #tags and @mention',\n            text: image.description,\n            deletehash: image.deletehash,\n            triggerSave: image.triggerSaveTitleDesc,\n            max_length: this.MAX_TEXTAREA,\n            dont_protect: this.props.data.isAd || this.props.data.is_ad,\n            linkify: true,\n            linkifier: this.props.linkifier,\n            updateContainer: _.bind(this._setContainerHeightByIndex, this, i),\n            showEditTools: this.props.showEditTools,\n            tabindex: this.props.showEditTools ? descriptionTabindex : '', //index * (image title + image description) + (this image title + post title and 1 for non-0 index)\n            handleKeyDown: _.bind(this.editKeyHandler, this, descriptionTabindex),\n            key: 'tabindex' + descriptionTabindex,\n            ref: 'tabindex' + descriptionTabindex\n        })));\n    },\n\n    _getThumbSize: function _getThumbSize(image) {\n        if (image.prefer_video) {\n            return '';\n        }\n\n        if (this.state.thumb_size == 'r') {\n            if (image.width > this.MAX_WIDTH * 2) {\n                return 'r';\n            }\n\n            //User is on retina but the image isn't larger than twice MAX_WIDTH which is required for retina so just return the original image\n            return '';\n        } else if (image.width > this.MAX_WIDTH) {\n            return 'g';\n        }\n\n        return '';\n    },\n\n    handleRemove: function handleRemove(image_hash) {\n        this.props.album_image_store.deleteImage(this.props.data.hash, image_hash);\n        this.forceUpdate();\n    },\n\n    editKeyHandler: function editKeyHandler(currentTabIndex, e) {\n        if (e.keyCode == 9) {\n            //Going backward\n            if (e.shiftKey) {\n                currentTabIndex--;\n            } else {\n                currentTabIndex++;\n            }\n\n            var node = ReactDOM.findDOMNode(this.refs['tabindex' + currentTabIndex]);\n\n            if (!node) {\n                return;\n            }\n\n            e.preventDefault();\n\n            $('html, body').animate({\n                scrollTop: node.offsetTop - 200\n            }, 100, function () {\n                node.focus();\n            });\n        }\n    },\n\n    handleGridColorbox: function handleGridColorbox(images, e) {\n        $target = $(e.target);\n        $target.colorbox({\n            rel: 'post-grid-image',\n            href: $target.attr('data-href'),\n            open: true,\n            scrolling: false,\n            maxWidth: '90%',\n            maxHeight: '90%',\n            className: 'blurbox',\n            title: $target.attr('data-title'),\n            transition: 'none',\n            onOpen: function () {\n                this.props.emitter.trigger('blockHotKeys', true);\n            }.bind(this),\n            onClosed: function () {\n                this.props.emitter.trigger('blockHotKeys', false);\n            }.bind(this)\n        });\n    },\n\n    render: function render() {\n        var album_images = this.props.album_image_store.getImages(this.props.data.hash),\n            images = [],\n            uncalculated_images = [],\n            visible_image_count = 0,\n            truncation = null,\n            description = null,\n            last_image_title_desc = false,\n            imgView;\n\n        var postActionBar = !this.props.has_access ? React.DOM.div({ className: 'post-action' }, React.createElement(Imgur.Gallery.PostActionBar, _.extend(this.props.data, {\n            key: this.props.data.hash + 'postactionbar',\n            insideTagController: this.props.insideTagController,\n            has_access: this.props.has_access,\n            in_gallery: this.props.in_gallery,\n            emitter: this.props.emitter,\n            analytics: this.props.analytics,\n            hide_points: this.props.hide_points,\n            hide_views: this.props.hide_views,\n            hide_tags: this.props.hide_tags,\n            hide_report: this.props.hide_report,\n            sideGallery: this.props.sideGallery,\n            add_border: last_image_title_desc,\n            album_images: this.props.data.is_album ? album_images.images : []\n        }))) : null;\n\n        if (this.props.data.is_album && album_images) {\n            visible_image_count = album_images.count;\n            var $postImages = $('.post-images');\n\n            var padTop = 0,\n                renderedHeight = 0,\n                padBot = 0,\n                offset = $postImages.length ? $postImages.offset().top : 0;\n\n            if (this.state.gridType === 'rearrange') {\n                return React.createElement(Imgur.Gallery.Grid, {\n                    album_image_store: this.props.album_image_store,\n                    postSavingStore: this.props.postSavingStore,\n                    deletehash: this.props.data.deletehash,\n                    hash: this.props.data.hash,\n                    thumbnail: this.props.data.album_cover,\n                    offset: offset,\n                    mouseUp: this.props.rearrangeImages,\n                    allowRearrange: true,\n                    gridImageClasses: 'grab'\n                });\n            } else if (this.state.gridType === 'browse') {\n                return React.DOM.div({}, React.createElement(Imgur.Gallery.Grid, {\n                    album_image_store: this.props.album_image_store,\n                    postSavingStore: this.props.postSavingStore,\n                    deletehash: this.props.data.deletehash,\n                    hash: this.props.data.hash,\n                    thumbnail: this.props.data.album_cover,\n                    offset: offset,\n                    mouseUp: this.handleGridColorbox,\n                    allowRearrange: false,\n                    gridImageClasses: 'pointer'\n                }), postActionBar);\n            }\n\n            if (!this.state.all_loaded) {\n                visible_image_count = Math.min(visible_image_count, this.INITIAL_LOAD);\n            }\n\n            for (var i = 0; i < visible_image_count; i++) {\n                var image = album_images.images[i];\n\n                //Calculate and cache sizes on first load\n                if (!image.minHeight || image.needsRecalc) {\n                    if (!image.animated && image.width > this.MAX_WIDTH) {\n                        image.thumbsize = this._getThumbSize(image);\n                    } else {\n                        image.thumbsize = '';\n                    }\n\n                    image.minHeight = this._scaleWidth(image.width, image.height, this.MAX_WIDTH);\n                }\n\n                if (this.state.render_state == this.RENDER_STATE.PRE) {\n                    if (i < this.INITIAL_LOAD) {\n                        imgView = this._createRenderedImage(image, i, { showShareLinks: false });\n                        image.shown = true;\n                    } else {\n                        imgView = React.DOM.div({ ref: image.hash, style: {\n                                minHeight: image.minHeight\n                            } });\n                    }\n\n                    images.push(this._createComponent(image, imgView, i, visible_image_count));\n                } else {\n                    if (typeof image.containerHeight !== 'number' || image.needsRecalc) {\n                        imgView = this._createRenderedImage(image, i);\n                        uncalculated_images.push(this._createComponent(image, imgView, i, visible_image_count));\n\n                        // needs a second property to store whether we've updated this image in the DOM since recalculations\n                        // can be triggered by other actions while needsRecalc is true (eg, during componentWillReceiveProps)\n                        image.recalcReady = true;\n                        continue;\n                    }\n\n                    var min = this.state.scrolltop - this.state.window_height;\n                    var max = this.state.scrolltop + this.state.window_height * 2;\n\n                    var image_top = offset + padTop + renderedHeight;\n                    var image_bottom = image_top + image.containerHeight;\n                    var showAddImageButton = this.props.has_access && !this.props.in_gallery && i != visible_image_count - 1;\n\n                    if (image_top > min && image_top < max || image_bottom > min && image_bottom < max || image_top < min && image_bottom > max) {\n                        renderedHeight += image.containerHeight;\n\n                        imgView = this._createRenderedImage(image, i);\n                        image.shown = true;\n\n                        images.push(this._createComponent(image, imgView, i, visible_image_count));\n\n                        if (showAddImageButton && this.props.addImage) {\n                            images.push(React.DOM.label({ key: 'add-between-' + (i + 1), htmlFor: 'add-between' }, React.DOM.div({\n                                key: 'addimage' + i,\n                                className: 'post-add-image between',\n                                onClick: function (index) {\n                                    this.props.addImage(index);\n                                }.bind(this, i + 1)\n                            }, React.DOM.div({ className: 'tear' }), React.DOM.div({ className: 'icon-plus' }))));\n                        }\n                    } else if (renderedHeight == 0) {\n                        padTop += image.containerHeight + (showAddImageButton ? this.ADD_IMAGE_ROW_HEIGHT : 0);\n                    } else {\n                        padBot += image.containerHeight + (showAddImageButton ? this.ADD_IMAGE_ROW_HEIGHT : 0);\n                    }\n                }\n\n                last_image_title_desc = !!(image.description || image.title || album_images.count > this.INITIAL_LOAD && visible_image_count == this.INITIAL_LOAD);\n            }\n\n            if (uncalculated_images.length > 0) {\n                this.updatingState = true;\n            }\n\n            if (!this.state.all_loaded && album_images.count > this.INITIAL_LOAD) {\n                truncation = React.DOM.div({ className: 'js-post-truncated' }, React.DOM.a({ className: 'post-loadall btn btn-action', onClick: this.loadAll }, 'Load ' + (album_images.count - this.INITIAL_LOAD) + ' more ' + Imgur.Util.pluralize(album_images.count - this.INITIAL_LOAD, 'image')), React.DOM.span({ className: 'post-gridview' }, React.DOM.span({ className: 'icon-grid' }), React.DOM.a({ className: 'post-gridview-link', target: '_blank', href: '/a/' + this.props.data.hash + '?grid' }, 'Grid view')));\n            }\n\n            if (this.props.data.album_description) {\n                description = React.createElement(Imgur.Gallery.TitleDesc, {\n                    postSavingStore: this.props.postSavingStore,\n                    element: 'div',\n                    type: 'description',\n                    classes: 'post-description',\n                    placeholder: 'Add a post description',\n                    text: this.props.data.album_description,\n                    is_album: true,\n                    deletehash: this.props.data.deletehash,\n                    max_length: this.MAX_TEXTAREA,\n                    dont_protect: this.props.data.isAd || this.props.data.is_ad,\n                    linkify: true,\n                    linkifier: this.props.linkifier,\n                    showEditTools: this.props.showEditTools,\n                    tabindex: this.props.showEditTools ? visible_image_count * 2 + 2 : '' });\n            }\n\n            //IE can only render divs around 1.5mil in height. Using a lower threshold for safety\n            for (var i = 0; padTop >= 1000000; i++) {\n                images.unshift(React.DOM.div({ key: 'padtop' + i, style: {\n                        height: 1000000\n                    } }));\n\n                padTop -= 1000000;\n            }\n\n            images.unshift(React.DOM.div({ key: 'padtop', style: {\n                    height: padTop\n                } }));\n\n            images.push(React.DOM.div({ key: 'padbot', style: {\n                    height: padBot\n                } }));\n        } else {\n            //if not album\n            var minHeight = 0;\n            var descriptionTabindex = 2;\n\n            if (this.props.data.width > this.MAX_WIDTH) {\n                var downScale = this.MAX_WIDTH / this.props.data.width;\n                minHeight = this.props.data.height * downScale;\n            } else {\n                minHeight = this.props.data.height || 0;\n            }\n\n            var handleRemove = function handleRemove() {\n                humanMsg.displayMsg('Deleted');\n                setTimeout(function () {\n                    // after 1s, redirect to all page (if logged in) or homepage (anon)\n                    window.location = Imgur.Environment.auth.url ? '//' + Imgur.Environment.auth.url + '.' + Imgur.Environment.host : '/';\n                }, 1000);\n            };\n\n            imgView = React.createElement(Imgur.ImageViewer, {\n                thumbsize: this._getThumbSize(this.props.data),\n                minHeight: minHeight,\n                width: this.MAX_WIDTH,\n                item: this.props.data,\n                wrap_with_direct_link: false,\n                poster: false,\n                showShareLinks: this.props.has_access,\n                // the initial pageload is not covered with React, and we may have already fired the pixel for this album-image in generalInit().\n                discarding_referrer: !this.props.initial,\n                firing_pixel: !this.props.initial,\n                singleImage: true,\n                handleRemove: handleRemove\n            });\n\n            var component = React.DOM.div({ id: this.props.data.hash, className: 'post-image-container', key: this.props.data.hash }, imgView, React.DOM.div({ className: this.props.data.description || this.props.showEditTools ? 'post-image-meta' : '' }, React.createElement(Imgur.Gallery.DescriptionTagSuggestContainer, {\n                postSavingStore: this.props.postSavingStore,\n                tagStore: this.props.tagStore,\n                element: 'div',\n                type: 'description',\n                classes: 'post-image-description',\n                placeholder: 'Image description',\n                text: this.props.data.description,\n                deletehash: this.props.data.deletehash,\n                max_length: this.MAX_TEXTAREA,\n                dont_protect: this.props.data.isAd || this.props.data.is_ad,\n                linkify: true,\n                showEditTools: this.props.showEditTools,\n                tabindex: this.props.showEditTools ? descriptionTabindex : '',\n                handleKeyDown: _.bind(this.editKeyHandler, this, descriptionTabindex),\n                autoSuggestTags: true,\n                key: 'tabindex' + descriptionTabindex,\n                ref: 'tabindex' + descriptionTabindex,\n                updateContainer: _.bind(this.updateTagsFromText, this, 0)\n            })));\n\n            images.push(component);\n        }\n\n        var addImage = this.props.has_access && this.props.addImage && !this.props.in_gallery ? React.DOM.div({\n            onClick: this.props.addImage.bind(null, album_images.images.length),\n            className: 'post-add-image end'\n        }, React.DOM.span({ className: 'icon-plus' }), React.DOM.span(null, 'Add another image')) : null;\n\n        var promotedPostCustomTags = void 0;\n        var isAd = this.props.data.isAd || this.props.data.is_ad;\n        if (isAd && this.props.data.customTags) {\n            var iframeWrapper = '<iframe srcdoc=\"' + _.escape(this.props.data.customTags) + '\"></iframe>';\n            promotedPostCustomTags = React.createElement('div', { style: { display: 'none' }, dangerouslySetInnerHTML: { __html: iframeWrapper } });\n        }\n\n        return React.DOM.div({}, images, uncalculated_images, truncation, description, addImage, promotedPostCustomTags, postActionBar);\n    }\n});\n//# sourceMappingURL=post.js.map\n","Namespace('Imgur.Gallery.TitleDesc');\n\nImgur.Gallery.TitleDesc = React.createClass({\n    displayName: 'TitleDesc',\n\n    TYPING_SPEED: 500, //time in ms between each keystroke to wait before triggering save\n    savedRequest: null,\n\n    getDefaultProps: function getDefaultProps() {\n        return {\n            linkifier: {\n                grab: function grab(text) {\n                    return text;\n                }\n            }\n        };\n    },\n\n    getInitialState: function getInitialState() {\n        return {\n            savedText: this.props.text\n        };\n    },\n\n    placeCaretAtEnd: function placeCaretAtEnd(el) {\n        el.focus();\n\n        if (typeof window.getSelection !== 'undefined' && typeof document.createRange !== 'undefined') {\n            var range = document.createRange();\n            range.selectNodeContents(el);\n            range.collapse(false);\n\n            var sel = window.getSelection();\n            sel.removeAllRanges();\n            sel.addRange(range);\n        } else if (typeof document.body.createTextRange !== 'undefined') {\n            var textRange = document.body.createTextRange();\n            textRange.moveToElementText(el);\n            textRange.collapse(false);\n            textRange.select();\n        }\n    },\n\n    handlePaste: function handlePaste(e) {\n        e.preventDefault();\n        var text = '';\n\n        if (e.clipboardData) {\n            text = e.clipboardData.getData('Text');\n        } else if (window.clipboardData) {\n            text = window.clipboardData.getData('Text');\n        }\n\n        //text = text.replace(/\\n<br\\s*[\\/]?>/gi, '\\n');\n\n        //Strip HTML from clipboard\n        text = Imgur.Util.htmlEntity(text);\n\n        if (this.props.linkify && !this.props.dont_protect) {\n            text = Imgur.Util.linkify(text, true, true, true);\n        }\n\n        this.insertText(text);\n    },\n\n    // from http://stackoverflow.com/a/6691294\n    insertText: function insertText(text) {\n        // insert text manually\n        var sel, range;\n        if (window.getSelection) {\n            // IE9 and non-IE\n            sel = window.getSelection();\n            if (sel.getRangeAt && sel.rangeCount) {\n                range = sel.getRangeAt(0);\n                range.deleteContents();\n\n                // Range.createContextualFragment() would be useful here but is\n                // non-standard and not supported in all browsers (IE9, for one)\n                var el = document.createElement('div');\n                el.innerHTML = text;\n                var frag = document.createDocumentFragment(),\n                    node,\n                    lastNode;\n                while (node = el.firstChild) {\n                    lastNode = frag.appendChild(node);\n                }\n                range.insertNode(frag);\n\n                // Preserve the selection\n                if (lastNode) {\n                    range = range.cloneRange();\n                    range.setStartAfter(lastNode);\n                    range.collapse(true);\n                    sel.removeAllRanges();\n                    sel.addRange(range);\n                }\n\n                this._save(false, this.TYPING_SPEED);\n            }\n        }\n    },\n\n    handleKeyDown: function handleKeyDown(e) {\n        var keyCode = e.which || e.keyCode;\n\n        if (this.props.no_enter && keyCode == 13) {\n            this.refs.text.blur();\n            window.getSelection().removeAllRanges();\n        }\n\n        if (this.props.handleKeyDown) {\n            // any additional key binding events such as tabindex\n            this.props.handleKeyDown(e);\n        }\n    },\n\n    _save: function _save(force, wait, e) {\n        var retries = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;\n\n\n        //bail if the image doesn't have a deletehash (ie, is still being uploaded) or if hitting tab trying to go next\n        if (!this.props.deletehash || e && e.keyCode == 9) {\n            return;\n        }\n\n        var text = this.refs.text;\n        var textLength = text.textContent.length;\n        var data = {\n            is_album: this.props.is_album\n        };\n\n        clearTimeout(this.typingTimer);\n\n        if (textLength > this.props.max_length) {\n            text.textContent = text.textContent.substring(0, this.props.max_length);\n            this.placeCaretAtEnd(text); //Setting textContent forces cursor to beginning\n        }\n\n        /* When setting innerHTML (via here or rerendering prop due to dangerouslySetInnerHTML)\n         * it causes browsers to move cursor back to beginning, so let's just do it on a fake element instead.\n         * The goal of the first replace is to remove empty lines and block elements and replace with newlines while the later\n         * replaces excess brs typically left by firefox since firefox is the only browser to not use block level containers for content in contenteditable */\n        var el = document.createElement('div');\n        el.innerHTML = text.innerHTML.replace(/(<div>|<p>)(.+?)(<br\\s*[\\/]?>)?(<\\/p>|<\\/div>)/gi, '\\n$2').replace(/<br\\s*[\\/]?>/gi, '\\n');\n        var textContent = el.textContent.trim();\n\n        if (force && this.props.linkify && !this.props.dont_protect) {\n            text.innerHTML = Imgur.Util.linkify(Imgur.Util.htmlEntity(textContent), true, true, true, 'postDescription');\n        }\n\n        if (textContent == this.state.savedText) {\n            this.props.postSavingStore.remove(this.props.deletehash, this.props.type);\n            return;\n        } else {\n            this.props.postSavingStore.add(this.props.deletehash, this.props.type);\n        }\n\n        if (typeof this.props.updateContainer === 'function') {\n            this.props.updateContainer(this.props.type, textContent);\n        }\n\n        data[this.props.type] = textContent;\n\n        this.typingTimer = setTimeout(_.bind(function () {\n            if (this.savedRequest) {\n                this.savedRequest.abort();\n            }\n\n            this.savedRequest = $.ajax({\n                url: '/ajax/titledesc/' + this.props.deletehash,\n                method: 'POST',\n                data: data,\n                success: function () {\n                    this.props.postSavingStore.remove(this.props.deletehash, this.props.type);\n                    this.savedRequest = null;\n                    this.setState({\n                        savedText: textContent\n                    });\n                }.bind(this),\n                error: function (xhr, textStatus) {\n                    if (textStatus == 'abort') return;\n                    if (retries == 3) {\n                        // alert user after 4 sec\n                        humanMsg.displayMsg(\"Saving is taking longer than expected. We're still trying!\", 'error-msg');\n                    }\n\n                    this._save(false, Math.pow(2, retries) * wait, null, retries + 1); // exponential backoff\n                }.bind(this)\n            });\n        }, this), wait);\n    },\n\n    shouldComponentUpdate: function shouldComponentUpdate(nextProps, nextState) {\n        if (this.props.text != nextProps.text && !this.props.showEditTools) {\n            return true;\n        }\n\n        return false;\n    },\n\n    componentDidUpdate: function componentDidUpdate(prevProps) {\n        if (!this.refs.text) return;\n\n        var textLength = this.props.deletehash ? this.refs.text.textContent.length : 0;\n\n        if (prevProps.triggerSave != this.props.triggerSave && textLength !== 0) {\n            this._save(false, this.TYPING_SPEED);\n        }\n    },\n\n    render: function render() {\n        var text = this.props.text;\n\n        if (text && !this.props.dont_protect) {\n            text = Imgur.Util.htmlEntity(text);\n\n            if (this.props.linkify) {\n                text = Imgur.Util.linkify(text, true, true, true, 'postDescription');\n            }\n        }\n\n        if (this.props.showEditTools && !this.props.published) {\n            var baseProps = {\n                className: this.props.classes + ' post-contenteditable',\n                contentEditable: true,\n                tabIndex: this.props.tabindex,\n                placeholder: this.props.placeholder,\n                ref: 'text',\n                onInput: _.partial(this._save, false, this.TYPING_SPEED),\n                onBlur: _.partial(this._save, true, 0),\n                onPaste: this.handlePaste,\n                dangerouslySetInnerHTML: { __html: text },\n                onKeyDown: this.handleKeyDown,\n                onKeyUp: this.props.onKeyUp\n            };\n\n            return React.createElement(this.props.element, baseProps);\n        }\n\n        return text ? React.createElement(this.props.element, { className: this.props.classes, dangerouslySetInnerHTML: { __html: text } }) : false;\n    }\n});\n//# sourceMappingURL=TitleDesc.js.map\n","Namespace('Imgur.Gallery.TagSuggest');\n\nImgur.Gallery.TagSuggest = React.createClass({\n    displayName: 'TagSuggest',\n    MAX_HEIGHT: 223,\n    ROW_HEIGHT: 40,\n\n    getDefaultProps: function getDefaultProps() {\n        return {\n            onHighlightedKeyDown: function onHighlightedKeyDown() {},\n            classNames: ''\n        };\n    },\n\n    getInitialState: function getInitialState() {\n        return {\n            highlightedTag: null\n        };\n    },\n\n    componentDidMount: function componentDidMount() {\n        document.addEventListener(\"keydown\", this.handleKeyDown);\n\n        this.updatePosition();\n    },\n\n    componentWillUnmount: function componentWillUnmount() {\n        document.removeEventListener(\"keydown\", this.handleKeyDown);\n    },\n\n    componentWillReceiveProps: function componentWillReceiveProps(nextProps) {\n        if (JSON.stringify(this.props.suggestedTags) !== JSON.stringify(nextProps.suggestedTags)) {\n            this.setState({ highlightedTag: null });\n        }\n    },\n\n    componentDidUpdate: function componentDidUpdate(prevProps) {\n        if (this.props.left !== prevProps.left) {\n            this.updatePosition();\n        }\n    },\n\n    /**\n     * Converts a string to title case (hello world -> Hello World)\n     *\n     * @param {string} tag - the tag name\n     *\n     * @returns {string}\n     */\n    titleCase: function titleCase(tag) {\n        if (!tag) {\n            return tag;\n        }\n\n        return tag.replace(/(^|\\s)[a-z]/g, function (firstChar) {\n            return firstChar.toUpperCase();\n        });\n    },\n\n    highlightedTagIndex: function highlightedTagIndex() {\n        return this.props.suggestedTags.map(function (tag) {\n            return tag.tag;\n        }).indexOf(this.state.highlightedTag);\n    },\n\n    handleKeyDown: function handleKeyDown(e) {\n        if ([38, 40, 13].indexOf(e.which) == -1) {\n            //up, down, enter, or esc keys\n            return;\n        }\n\n        e.preventDefault();\n\n        var index = this.highlightedTagIndex();\n        var highlightedTagName = void 0;\n\n        if (e.which == 38) {\n            highlightedTagName = this.props.suggestedTags[Math.max(index - 1, 0)].tag;\n\n            // move selection up by one\n            this.setState({\n                highlightedTag: highlightedTagName\n            });\n            this.props.onHighlightedKeyDown(this.titleCase(highlightedTagName));\n        }\n\n        if (e.which == 40) {\n            highlightedTagName = this.props.suggestedTags[Math.min(index + 1, this.props.suggestedTags.length - 1)].tag;\n\n            // move selection down by one\n            this.setState({\n                highlightedTag: highlightedTagName\n            });\n            this.props.onHighlightedKeyDown(this.titleCase(highlightedTagName));\n        }\n\n        if (e.which == 13) {\n            this.props.onSelect(this.titleCase(this.state.highlightedTag));\n        }\n    },\n\n    updatePosition: function updatePosition() {\n        this.refs.suggest.style.top = this.props.top + 30 + 'px';\n        this.refs.suggest.style.left = this.props.left - 15 + 'px';\n    },\n\n    mouseEnter: function mouseEnter(tagText) {\n        this.setState({\n            highlightedTag: tagText\n        });\n    },\n\n    mouseDown: function mouseDown(tagText, e) {\n        e.preventDefault();\n        this.props.onSelect(this.titleCase(tagText));\n    },\n\n    renderTagRow: function renderTagRow(tag) {\n        return React.createElement(\n            'tr',\n            {\n                className: 'tag pointer' + (this.state.highlightedTag == tag.tag ? ' tag-suggest-highlighted' : ''),\n                onMouseDown: this.mouseDown.bind(this, tag.tag),\n                onMouseEnter: this.mouseEnter.bind(this, tag.tag),\n                key: tag.tag },\n            React.createElement(\n                'td',\n                { className: 'tag-suggest-left' },\n                tag.tag\n            ),\n            React.createElement(\n                'td',\n                { className: 'tag-suggest-right' },\n                tag.images,\n                '\\xA0',\n                Imgur.Util.pluralize(tag.images, 'post')\n            )\n        );\n    },\n\n    render: function render() {\n        var _this = this;\n\n        var content = void 0;\n\n        if (this.props.error) {\n            content = React.createElement(\n                'p',\n                { className: 'tag-suggest-error' },\n                this.props.error\n            );\n        } else {\n            var suggestedTagsLength = this.props.suggestedTags ? this.props.suggestedTags.length : 0;\n            var height = Math.min(suggestedTagsLength * this.ROW_HEIGHT, this.MAX_HEIGHT);\n            var taginfo = void 0;\n\n            if (!this.props.suggestedTags) {\n                taginfo = '';\n            } else if (suggestedTagsLength === 0) {\n                taginfo = React.createElement(\n                    'p',\n                    { key: 'noresults', className: 'tag-suggest-noresults' },\n                    'Sorry no results'\n                );\n            } else if (suggestedTagsLength > 0) {\n                taginfo = React.createElement(\n                    Imgur.Nanoscroll,\n                    { key: 'nanoscroller', options: { preventPageScrolling: true }, contentClassNames: 'scroll-content', contentStyle: { height: height }, nanoStyle: { height: height } },\n                    React.createElement(\n                        'table',\n                        null,\n                        React.createElement(\n                            'tbody',\n                            null,\n                            this.props.suggestedTags.map(function (tag) {\n                                return _this.renderTagRow(tag);\n                            })\n                        )\n                    )\n                );\n            }\n\n            content = [React.createElement(\n                'div',\n                { key: 'header', className: 'tag-suggest-header' },\n                'POPULAR ON IMGUR'\n            ), taginfo];\n        }\n\n        return React.createElement(\n            'div',\n            { ref: 'suggest', className: 'tag-suggest ' + this.props.classNames },\n            content\n        );\n    }\n});\n//# sourceMappingURL=TagSuggest.js.map\n","var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nNamespace('Imgur.Gallery.DescriptionTagSuggestContainer');\n\nImgur.Gallery.DescriptionTagSuggestContainer = React.createClass({\n    displayName: 'DescriptionTagSuggestContainer',\n\n    TRANSITION_TIMEOUT: 150,\n    TAG_SUGGEST_CARRET_DISTANCE_FROM_LEFT: 30, /* From tag-suggest.styl */\n\n    getInitialState: function getInitialState() {\n        return {\n            showingSuggestions: false,\n            suggestKeyword: null,\n            suggestedTags: []\n        };\n    },\n\n    componentDidMount: function componentDidMount() {\n        this.textNode = ReactDOM.findDOMNode(this.refs.text);\n    },\n\n    tagSelected: function tagSelected(tagText) {\n        //insert / replace tag at current cursor position inside the TitleDesc div\n\n        var range = window.getSelection().getRangeAt(0);\n        var keywordLength = range.startContainer.textContent.substring(0, this.getCaretPosition()).split('#').pop().length;\n        var clone = range.cloneRange();\n        clone.setStart(range.startContainer, range.startOffset - keywordLength);\n        clone.setEnd(range.startContainer, range.startOffset);\n        clone.deleteContents();\n\n        this.refs.text.insertText(tagText + ' ');\n        this.setState({ showingSuggestions: false });\n    },\n\n    handleKeyUp: function handleKeyUp(e) {\n        this.xhr && this.xhr.abort();\n\n        if (e.which == 27) {\n            //esc key\n            this.setState({ showingSuggestions: false });\n            return;\n        }\n\n        var caretPosition = this.getCaretPosition();\n\n        var lastWord = window.getSelection().getRangeAt(0).startContainer.textContent.substring(0, caretPosition).replace(/\\n/g, \" \").split(' ').pop(); //get all the characters in the last word up to the cursor\n        if (lastWord.substring(0, 1) == '#') {\n            this.fetchSuggestions({ updateCoords: !this.state.showingSuggestions, keyword: lastWord.split('#').pop().substr(1) });\n        } else {\n            this.setState({ showingSuggestions: false });\n        }\n    },\n\n    fetchSuggestions: function fetchSuggestions() {\n        var _this = this;\n\n        var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n        var caretPosition = this.getCaretPosition();\n\n        var keyword = window.getSelection().getRangeAt(0).startContainer.textContent.substring(0, caretPosition).replace(/\\n/g, \" \").split(' ').pop().substr(1); //get all the characters after the hashtag up to the cursor\n\n        var coords = options.updateCoords ? this.getSelectionCoords() : { y: this.state.cursorTop, x: this.state.cursorLeft };\n\n        this.props.tagStore.getSuggestions(keyword, function (response) {\n            _this.setState({\n                suggestedTags: _this.formatTagSuggestionResponse(response),\n                showingSuggestions: true,\n                cursorTop: coords.y,\n                cursorLeft: coords.x\n            });\n        });\n    },\n\n\n    /**\n    * Returns tags formatted for descriptions since they can't contain spaces for linkification purposes\n    *\n    * @param {array} response - response from tag search suggestions\n    *\n    * @returns {array}\n    */\n    formatTagSuggestionResponse: function formatTagSuggestionResponse(response) {\n        if (!response) {\n            return response;\n        }\n\n        return response.map(function (tag) {\n            tag.tag = tag.tag.replace(' ', '_');\n            return tag;\n        });\n    },\n\n\n    // from http://stackoverflow.com/a/3976125\n    getCaretPosition: function getCaretPosition() {\n        var editableDiv = this.textNode;\n        var caretPos = 0,\n            sel,\n            range;\n        if (window.getSelection) {\n            sel = window.getSelection();\n            if (sel.rangeCount) {\n                range = sel.getRangeAt(0);\n                if (range.commonAncestorContainer.parentNode == editableDiv) {\n                    caretPos = range.endOffset;\n                }\n            }\n        }\n        return caretPos;\n    },\n\n    // from http://stackoverflow.com/a/6847328\n    getSelectionCoords: function getSelectionCoords(win) {\n        win = win || window;\n        var doc = win.document;\n        var sel = doc.selection,\n            range,\n            rects,\n            rect;\n        var x = 0,\n            y = 0;\n        if (sel) {\n            if (sel.type != \"Control\") {\n                range = sel.createRange();\n                range.collapse(true);\n                x = range.boundingLeft;\n                y = range.boundingTop;\n            }\n        } else if (win.getSelection) {\n            sel = win.getSelection();\n            if (sel.rangeCount) {\n                range = sel.getRangeAt(0).cloneRange();\n                if (range.getClientRects) {\n                    range.collapse(true);\n                    rects = range.getClientRects();\n                    if (rects.length > 0) {\n                        rect = rects[0];\n                    }\n                    x = rect.left;\n                    y = rect.top;\n                }\n            }\n        }\n        return { x: x, y: y };\n    },\n\n    hideSuggestions: function hideSuggestions() {\n        this.setState({\n            showingSuggestions: false\n        });\n    },\n\n    render: function render() {\n        return React.createElement(\n            'div',\n            null,\n            React.createElement(Imgur.Gallery.TitleDesc, _extends({ ref: 'text', onKeyUp: this.handleKeyUp }, this.props)),\n            React.createElement(\n                React.addons.CSSTransitionGroup,\n                { transitionName: 'suggest', transitionEnterTimeout: this.TRANSITION_TIMEOUT, transitionLeaveTimeout: this.TRANSITION_TIMEOUT },\n                this.state.showingSuggestions && this.state.suggestedTags.length > 0 ? React.createElement(Imgur.Gallery.TagSuggest, {\n                    ref: 'suggest',\n                    onSelect: this.tagSelected,\n                    left: this.state.cursorLeft - this.TAG_SUGGEST_CARRET_DISTANCE_FROM_LEFT,\n                    top: this.state.cursorTop + $(document).scrollTop(),\n                    showingSuggestions: this.state.showingSuggestions,\n                    unmount: this.hideSuggestions,\n                    suggestedTags: this.state.suggestedTags }) : null\n            )\n        );\n    }\n});\n//# sourceMappingURL=DescriptionTagSuggestContainer.js.map\n","Namespace('Imgur.Gallery.Store.Saving');\n\nImgur.Gallery.Store.Saving = Class.extend({\n    init: function(emitter) {\n        this._ = {\n            posts: {}, // Map of hash -> isSaving\n            saving: 0,\n            emitter: emitter\n        };\n    },\n\n    add: function(hash, type) {\n        if (!this._.posts[hash + type]) {\n            if (this._.saving == 0) {\n                window.onbeforeunload = function() {\n                    return 'Your updates are still saving. Are you sure you want to leave?';\n                }\n            }\n            \n            this._.posts[hash + type] = true;\n            this._.saving++;\n            this._.emitter.trigger('saving');\n        }\n    },\n\n    remove: function(hash, type) {\n        if (this._.posts[hash + type]) {\n            this._.posts[hash + type] = false;\n            this._.saving--;\n\n            if (this._.saving == 0) {\n                window.onbeforeunload = null;\n                this._.emitter.trigger('saved');\n            }\n        }\n    },\n});","Namespace('Imgur.Gallery.Store');\n\nImgur.Gallery.Store.Tag = Class.extend({\n    init: function init(maxTags, tagValidator, emitter) {\n        this._ = {\n            queries: {}, // Map of queries -> tag objects\n            pendingRequestUrl: null,\n            tags: [],\n            maxTags: maxTags,\n            tagValidator: tagValidator,\n            emitter: emitter\n        };\n    },\n\n    /**\n     * Returns the tag validator that was passed in to the constructor\n     *\n     * @returns {Imgur.Tag.TagValidator}\n     */\n    getTagValidator: function getTagValidator() {\n        return this._.tagValidator;\n    },\n\n    /**\n     * Returns the tags in the store\n     *\n     * @returns {Array}\n     */\n    getTags: function getTags() {\n        return this._.tags;\n    },\n\n    /**\n     * Callback for adding a tag\n     *\n     * @callback addTagCallback\n     * @param {bool} success - was the addition successful or not?\n     * @param {string=} reason - null if successful, else error string\n     */\n\n    /**\n     * Validates and adds a tag to the store.\n     * Will also emit the tagAdded event with the tag object that was inserted.\n     *\n     * @param {string} tagName - the tag to add to the store\n     * @param {string} addedVia - the way it was added (useful for analytics and such)\n     * @param {addTagCallback} callback - handles response for adding of a tag\n     */\n    addTag: function addTag(tagName, addedVia, callback) {\n        if (this._.tags.length >= this._.maxTags) {\n            return callback(false, this._.maxTags + ' limit reached');\n        }\n\n        var tagNameNormalized = tagName.toLowerCase().replace('_', ' ');\n\n        var is_duplicate = this._.tags.some(function (tag) {\n            return tag.tagNameNormalized === tagNameNormalized;\n        });\n\n        if (!this._.tagValidator.isValidTag('submit', tagName, is_duplicate)) {\n            return callback(false, this._.tagValidator.whyNot('submit', tagName, is_duplicate));\n        }\n\n        var tag = {\n            tagName: tagName,\n            tagNameNormalized: tagNameNormalized,\n            addedVia: addedVia\n        };\n\n        this._.tags.push(tag);\n        this._.emitter.trigger('tagAdded', tag);\n        return callback(true, null);\n    },\n\n    /**\n     * Removes a tag from the store.\n     * Will also emit the tagRemoved event with the tag object that was removed\n     *\n     * @param {string} tagName - name of tag to remove\n     */\n    removeTag: function removeTag(tagName) {\n        var tags = [];\n        var removedTag = void 0;\n\n        for (var i = 0; i < this._.tags.length; i++) {\n            if (this._.tags[i].tagName !== tagName) {\n                tags.push(this._.tags[i]);\n            } else {\n                removedTag = this._.tags[i];\n            }\n        }\n\n        if (removedTag) {\n            this._.tags = tags;\n            this._.emitter.trigger('tagRemoved', removedTag);\n        }\n    },\n\n    /**\n     * Success callback for getting suggestions\n     *\n     * @callback getSuggestionsSuccessCallback\n     * @param {Object[]} results - The results array\n     * @param {string} results[].tag - the tag to show in search suggestions\n     * @param {number} results[].images - number of images tagged with this tag\n     */\n\n    /**\n     * Fetches suggestions from cache or falls back to making an ajax request for suggestions\n     *\n     * @param {string} query - what to search for\n     * @param {getSuggestionsSuccessCallback} successCallback\n     */\n    getSuggestions: function getSuggestions(query, successCallback) {\n        var results = this._.queries[query] ? this._.queries[query] : null;\n\n        if (results) {\n            return successCallback(results);\n        }\n\n        return this.fetchSuggestions(query, successCallback);\n    },\n\n    /**\n     * Set suggestions for a query\n     *\n     * @param {string} query - the query to cache\n     * @param {Object[]} data - the data to cache for the query\n     */\n    setSuggestions: function setSuggestions(query, data) {\n        this._.queries[query] = data;\n    },\n\n    /**\n     * Fetch suggestions from the backend for a tag suggest query\n     *\n     * @param {string} query - query to search for\n     * @param {getSuggestionsSuccessCallback} successCallback\n     */\n    fetchSuggestions: function fetchSuggestions(query, successCallback) {\n        var url = '//' + Imgur.Environment.host + '/ajax/suggest_tags';\n\n        //Prevent duplicate requests\n        this.xhr && this.xhr.abort();\n\n        this.xhr = $.ajax({\n            method: 'GET',\n            url: url,\n            data: {\n                q: query,\n                size: 10\n            },\n            success: function (res) {\n                var data = [];\n                var normalizedQuery = query.toLowerCase();\n                var addQuery = true;\n\n                for (var i = 0; i < res.data.length; i++) {\n                    data.push({\n                        tag: res.data[i].tag,\n                        images: res.data[i].images\n                    });\n\n                    if (res.data[i].tag === normalizedQuery) {\n                        addQuery = false;\n                    }\n                }\n\n                //Add user's query to search results if it doesn't already exist in the suggested response\n                if (addQuery && this._.tagValidator.isValidTag('submit', query, false)) {\n                    data.push({\n                        tag: query,\n                        images: 0\n                    });\n                }\n\n                this.setSuggestions(query, data);\n                this.getSuggestions(query, successCallback);\n            }.bind(this)\n        });\n    }\n});\n//# sourceMappingURL=tag.js.map\n","Namespace('Imgur.Factory');\n\nImgur.Factory.Gallery = Class.extend({\n    _getDefaultPredicates: function(kindOfTag) {\n        var isCloseEnough = (function(a, b) {\n            var dist = Imgur.Util.editDistance(a, b);\n            return (dist / Math.max(a.length, b.length)) < 0.2 || ((a.length+b.length/2)>=5 && dist <= 3) || b.indexOf(a) != -1;\n        });\n\n        var base = (function(tag) {\n            return (tag instanceof kindOfTag);\n        });\n\n        var providerFilterByLevDistancePredicate = (function(query) {\n            return (function(tag) {\n                return (tag instanceof Imgur.Tag.SuggestedTag);\n            });\n        });\n\n        return {\n            base: base,\n            providerByLevDistance: providerFilterByLevDistancePredicate \n        };\n    },\n\n    _getAjaxGetWithLoader: function(loader) {\n        return (function(url, data, success, fail) {\n            loader.show();\n            fail = fail || _.noop;\n            success = success || _.noop;\n\n            return $.get(url, data, success)\n                    .fail(fail)\n                    .always(_.bind(loader.hide, loader));\n        });\n    },\n\n    /**\n     * Make the post callback aware of our standard data response, so that fail() is triggered \n     * when a server error happens\n     */\n    _standardDataResponsePost: function(post) {\n        return (function(url, data, success, fail) {\n            fail = fail || _.noop;\n            success = success || _.noop;\n\n            var success_aware = function(response, status, jqXHR) {\n                if((response && response.success) || (!response && status === 'success')) {\n                    // Assume that an empty response (no errors) implies success\n                    success(response, status, jqXHR);\n                } else {\n                    fail((response && response.data && response.data.error && response.data.error.message) || (response && response.data && response.data.error) || status, jqXHR, status);\n                }\n            };\n\n            var fail_aware = function(jqXHR, status, error) {\n                var msg = error;\n\n                try {\n                    var json = jqXHR.responseJSON || $.parseJSON(jqXHR.responseText);\n                    fail(json.data.error.message, jqXHR, status);\n                    return;\n                } catch(e) {}\n\n                fail(msg, jqXHR, status);\n            };\n\n            return post(url, data, success_aware, fail_aware);\n        });\n    },\n\n    _getStandardPostAuthorized: function() {\n        return this._standardDataResponsePost(this._.postProvider());\n    },\n\n    _getStandardPostAuthorizedWithLoader: function(loader) {\n        var postAuthorized = this._standardDataResponsePost(this._.postProvider());\n\n        return (function(url, data, success, fail) {\n            loader.show();\n            return postAuthorized(url, data, success).always(_.bind(loader.hide, loader));\n        });\n    },\n\n    _getPostAuthorizedWithLoader: function(loader) {\n        var postAuthorized = this._.postProvider();\n\n        return (function(url, data, success, fail) {\n            loader.show();\n            return postAuthorized(url, data, success).always(_.bind(loader.hide, loader));\n        });\n    },\n\n    _produceEmptyMessageProviderForQuery: function(query) {\n        return function() {\n            return _.templates['tags.empty-message-makeone']({query: query});\n        };\n    },\n\n    _produceUserGroupProvider: function(emitter, groupModel, currentGroupId, cboxConfirm, $confirmMessage, $confirmTitle) {\n        var comparator = new Imgur.Tag.Comparator(),\n            comparer = _.bind(comparator.compare, comparator);\n\n        var userGroupControllerProvider = _.bind(this._produceUserGroupController, this, \n            emitter, \n            groupModel, \n            currentGroupId,\n            cboxConfirm, \n            $confirmMessage, \n            $confirmTitle\n        );\n        \n        var userGroupToDomFromData = _.bind(this._produceUserGroupFromData, this, comparator);\n        var newUserGroupFromDom = _.bind(this._produceUserGroupFromDom, this, userGroupControllerProvider, comparator, emitter);\n        var newUserGroupProvider = _.compose(newUserGroupFromDom, userGroupToDomFromData);\n\n        return newUserGroupProvider;\n    },\n\n    _produceUserGroupController: function(emitter, groupModel, current_group_id, cboxConfirm, $confirmMessage, $confirmTitle, group, tag_list_structure) {\n        return new Imgur.Tag.Controller.UserGroup(\n            emitter, \n            groupModel, \n            current_group_id, \n            group, \n            tag_list_structure, \n            cboxConfirm, \n            $confirmMessage, \n            $confirmTitle\n        );\n    },\n\n    _produceUserGroupFromData: function(comparer, name, hash, tags) {\n        return $(_.templates['tags.user-group']({\n            group: {\n                name: name,\n                hash: hash\n            }\n        }));\n    },\n\n    _produceUserGroupFromDom: function(groupControllerProvider, comparer, emitter, $dom, tags) {\n        var tag_list_structure = new Imgur.Element.SortedListEmptyable($(), comparer, tags || []);\n        var group = new Imgur.Tag.UserGroup($dom, tag_list_structure);\n\n        var groupController = groupControllerProvider(group, tag_list_structure);\n        group.get$RemoveButton().on('click', _.bind(groupController.handleRemoveEvent, groupController));\n\n        emitter.on('group.remove', groupController, groupController.handleRemoveEventOther);\n\n        return {\n            group: group,\n            adapter: groupController\n        };\n    }\n});\n","Namespace('Imgur.Factory');\n\nImgur.Factory.InsideGallery = Imgur.Factory.Gallery.extend({\n    init: function init(parent_factory, env, groups, postProvider) {\n        this._ = {\n            parent_factory: parent_factory,\n            env: env,\n            gallery_env: env,\n            groups: groups,\n            postProvider: postProvider,\n            stores: {},\n            header: null\n        };\n    },\n\n    produceInsideGallery: function produceInsideGallery(emitter) {\n        var sideGallery;\n        var isOwner = Imgur.Environment.hasAccess && !Imgur.Environment.captionsEnabled;\n        var tagValidator = new Imgur.Tag.TagValidator(Imgur.Constants.MIN_TAG_LENGTH, Imgur.Constants.MAX_TAG_LENGTH);\n        var tagStore = new Imgur.Gallery.Store.Tag(Imgur.Constants.MAX_TAGS_PER_POST, tagValidator, emitter);\n\n        var gallery_env = this._.env;\n        var $sideGallery = $('#side-gallery');\n\n        if (!isOwner) {\n            // for recommendations\n            var bucket = Imgur.Experiments.getUserBucket('expT4377');\n            var variation = bucket && bucket.variation;\n\n            var sideGalleryProps = {\n                env: gallery_env,\n                variation: variation,\n                cache: Imgur.Environment.signed ? '/miss.json' : '/hit.json',\n                votedFavedRecently: Imgur.Environment.votedFavedRecently,\n                showMature: Imgur.Environment.auth.show_mature,\n                emitter: emitter\n            };\n\n            sideGallery = ReactDOM.render(React.createElement(Imgur.SideGallery, sideGalleryProps), $sideGallery[0]);\n\n            if (variation != 'control' && Imgur.Experiments.isActive('expT4377')) {\n                //todo: don't render if not in one of 3 exp arms\n                var recommendations = ReactDOM.render(React.createElement(ImgurRecommendations, {\n                    variation: variation,\n                    sideGallery: sideGallery,\n                    host: Imgur.Environment.host }), $('#recommendations')[0]);\n                sideGallery.recommendations = recommendations;\n            }\n        } else {\n            $sideGallery.remove();\n            if (!Imgur.Environment.image.is_album) {\n                var postOptionsProps = {\n                    initialHash: Imgur.Environment.image.hash,\n                    initialIsPublished: false,\n                    emitter: emitter,\n                    deletehash: Imgur.Environment.image.deletehash,\n                    isAlbum: Imgur.Environment.image.is_album,\n                    image: Imgur.Environment.image,\n                    tagStore: tagStore\n                };\n\n                sideGallery = ReactDOM.render(React.createElement(Imgur.PostOptions, postOptionsProps), document.getElementById('post-options'));\n            }\n        }\n\n        var isIPad = navigator.userAgent.match(/iPad/i);\n\n        var linkifier = this._.parent_factory.produceLinkify(emitter);\n\n        linkifier.addGrabber(new Imgur.Linkify.AlbumImageGrabber());\n\n        var albumImageViewer = new Imgur.Linkify.AlbumImageViewer(gallery_env.hash);\n        linkifier.prependViewer('albumimage', albumImageViewer);\n\n        emitter.on('select', albumImageViewer, albumImageViewer.handleUpdatedImage);\n\n        // announce the comments for things that need to know the image\n        // before they load... like Imgur.Linkify.OpGrabber.\n        emitter.trigger('beforeComments', this._.gallery_env.image);\n\n        var captions = new Imgur.Caption({\n            'sid': this._.env.sid,\n            'signed': this._.env.signed,\n            'auth_id': this._.env.auth.id,\n            'hash': gallery_env.hash,\n            'baseURL': gallery_env.baseURL,\n            'defaultText': 'Submit a ',\n            'commentName': gallery_env.commentName,\n            'target': $('#submit-caption'),\n            'loadingClass': '#save-caption-loader',\n            'isReply': false,\n            'isIPad': isIPad,\n            'showRepliesCount': true,\n            'emitter': emitter\n        });\n\n        Imgur.Util.triggerPerformanceCheckpoint('comment_box');\n\n        linkifier.prependViewer('nsfw', new Imgur.Linkify.NSFWViewer(captions));\n\n        Imgur.Caption._instance = captions;\n\n        var albumImageStore = new Imgur.Store.AlbumImage();\n        var postSavingStore = new Imgur.Gallery.Store.Saving(emitter);\n\n        var insideNav = this.produceInsideNav(emitter, sideGallery, captions, gallery_env, linkifier, albumImageStore, postSavingStore, tagStore);\n        Imgur.InsideNav._instance = insideNav;\n\n        var gallery = new Imgur.Gallery.Inside(insideNav, emitter, gallery_env);\n        Imgur.Gallery._instance = gallery;\n\n        emitter.on('report image', gallery, gallery.reportImage);\n\n        this.producePromoted(emitter, insideNav, sideGallery);\n\n        linkifier.attachDelegate('#comments-container');\n\n        var headerProps = {\n            showEditTools: isOwner,\n            initialImage: Imgur.Environment.image,\n            emitter: emitter,\n            postSavingStore: postSavingStore\n        };\n\n        var last_image_title_desc = false;\n\n        if (Imgur.Environment.image.is_album) {\n            var initial_load = 10;\n            var images_length = Imgur.Environment.image.album_images.images.length;\n            var last_image_index = images_length - 1;\n\n            if (last_image_index > -1) {\n                var last_image = Imgur.Environment.image.album_images.images[last_image_index];\n                last_image_title_desc = !!(last_image.title || last_image.description || Imgur.Environment.image.album_images.count > initial_load && images_length == initial_load);\n            }\n        } else {\n            last_image_title_desc = !!Imgur.Environment.image.description;\n        }\n\n        var postActionBarProps = _.extend({}, Imgur.Environment.image, {\n            in_gallery: Imgur.Environment.captionsEnabled || Imgur.Environment.image.isAd && Imgur.Environment.image.in_gallery,\n            has_access: Imgur.Environment.hasAccess,\n            emitter: emitter,\n            sideGallery: sideGallery,\n            hide_points: Imgur.Environment.image.isAd,\n            hide_views: Imgur.Environment.image.isAd,\n            hide_tags: Imgur.Environment.image.isAd,\n            hide_report: Imgur.Environment.auth.url === Imgur.Environment.image.account_url || Imgur.Environment.image.isAd,\n            add_border: last_image_title_desc,\n            album_images: Imgur.Environment.image.is_album ? Imgur.Environment.image.album_images.images : []\n        });\n\n        this._.header = ReactDOM.render(React.createElement(Imgur.Gallery.Header, headerProps), $('.post-header').get(0));\n\n        //Do this here because initial gallery load isn't React\n        ReactDOM.render(React.createElement(Imgur.Gallery.PostActionBar, postActionBarProps), $('.post-action').get(0));\n\n        var initial = true;\n\n        emitter.on('select', null, function (image, isPopState, direction, navTrigger) {\n            if (!this._.header) return false;\n\n            this._.header.setState({\n                image: image,\n                first: false,\n                last: false,\n                initial: initial,\n                navTrigger: navTrigger\n            });\n\n            initial = false;\n        }.bind(this));\n\n        return gallery;\n    },\n\n    produceInsideNav: function produceInsideNav(emitter, sideGallery, caption, gallery_env, linkifier, albumImageStore, postSavingStore, tagStore) {\n        var insideNav = new Imgur.InsideNav(sideGallery, caption, emitter, albumImageStore, postSavingStore, tagStore, _.merge(gallery_env, {\n            isPromoted: gallery_env.image.isAd || gallery_env.image.is_ad,\n            el: {\n                inside: {\n                    'reportImageLink': $('#report-image'),\n                    'image': $('.image'),\n                    'arrows': $(\".image-arrows\"),\n                    'zoom': $('.zoom'),\n                    'accountBio': $('#account-bio.access'),\n                    'submitCaptionButton': $('.submit-caption-button'),\n                    'commentExpand': $('#expand-comments'),\n                    'comboboxes': $('.combobox'),\n                    'commentSort': $('#comment-sort'),\n                    '$comments': $('#captions'),\n                    'favoriteImageLink': $('.favorite-image'),\n                    'reCaptionLink': $('#meme-image'),\n                    'downloadAlbumForm': {\n                        'id': '#download-album-form',\n                        'emailInput': $('#download-album-form #email'),\n                        'form': $('#download-album-form #download-form'),\n                        'message': $('#message'),\n                        'save': $('#download-album-form #save'),\n                        'loader': $('#download-loader')\n                    }\n                }\n            },\n            linkifier: linkifier\n        }));\n\n        emitter.on('imageRendered', null, function ($a, item) {\n            $a.click(function (e) {\n                e.preventDefault();\n                sideGallery.selectImage(item.hash);\n            });\n        });\n\n        emitter.on('reset', null, function (item) {\n            sideGallery.selectImage(item.hash);\n        });\n\n        emitter.on('select', insideNav, insideNav.navToImage);\n        emitter.on('firstImage', insideNav, function (image) {\n            if (!this._.header) return false;\n            this._.header.setState({\n                first: true,\n                last: false\n            });\n        }.bind(this));\n        emitter.on('lastImage', insideNav, function (image) {\n            if (!this._.header) return false;\n            this._.header.setState({\n                first: false,\n                last: true\n            });\n        }.bind(this));\n\n        emitter.on('sectionChange', insideNav, insideNav.changeSection);\n        emitter.on('sortChange', insideNav, insideNav.changeSort);\n        emitter.on('windowChange', insideNav, insideNav.changeWindow);\n\n        emitter.on('sidegalleryPageLoad', null, _.bind(function (method) {\n            switch (method) {\n                case 'append':\n                    insideNav.enableNextButton();break;\n                case 'prepend':\n                    insideNav.enablePrevButton();break;\n            }\n        }, this));\n\n        return insideNav;\n    },\n\n    producePromoted: function producePromoted(emitter, insideNav, sideGallery) {\n        // temporarily disable promoted posts in expT4377\n        var bucket = Imgur.Experiments.getUserBucket('expT4377');\n        if (bucket && (bucket.variation == 'control-no-pp' || bucket.variation == 'lift-igniter-no-pp' || bucket.variation == 'cxense-no-pp')) {\n            return;\n        }\n\n        if (typeof Imgur.getInstance()._.auth != 'undefined' && Imgur.getInstance()._.auth.isPro === true) {\n            return;\n        }\n\n        var promoConfig = this._.parent_factory.getConfig('promoted'),\n            promoEvents = new Imgur.Promoted.Events(promoConfig, emitter, insideNav),\n            promoSource = new Imgur.Promoted.Source.Adzerk(promoConfig, emitter),\n            promoted = new Imgur.Promoted(promoConfig, emitter, insideNav, sideGallery, promoEvents, promoSource);\n\n        return promoted;\n    }\n});\n//# sourceMappingURL=inside.js.map\n","Namespace('Imgur.Factory');\n\nImgur.Factory.OutsideGallery = Imgur.Factory.Gallery.extend({\n    init: function(global_env, gallery_env, groups_env, postProvider) {\n        this._ = {\n            env: {\n                global: global_env,\n                gallery: gallery_env,\n                groups: groups_env\n            },\n            gallery_env: gallery_env,\n            postProvider: postProvider\n        };\n    },\n\n    produceOutsideGallery: function(emitter) {\n        var outsideActiveTagStore = new Imgur.Tag.Store.OutsideActiveTag(emitter);\n\n        var history     = new Imgur.History();\n        var gallery_env = this._.env.gallery;\n        var gallery     = new Imgur.Gallery.MainOutside(outsideActiveTagStore, emitter, gallery_env, history);\n\n        emitter.on('show tagset loader', gallery, gallery.fadeInLoader);\n        emitter.on('hide tagset loader', gallery, gallery.fadeOutLoader);\n        emitter.on('new tagset', gallery, gallery.refetchPage);\n        emitter.on('new outside active tag', gallery, gallery.handleTagChanged);\n\n        $('#imagelist').on('click', '.remove-outside-image', function(e) {\n            var hash = $(e.target).attr('data-hash');\n            gallery.remove(hash);\n            $('#'+hash).fadeOut();\n        });\n\n        $('#imagelist').on('click', '.scroll-top-text', function(e) {\n            $(\"html, body\").animate({scrollTop:0}, '500', 'easeInOutCirc');\n        });\n\n        $('#sponsored-upload').click(_.bind(function() {\n            if(!this._.env.gallery.signed) {\n                var imgur = new Imgur();\n                imgur.signin('sponsoredUploadAttempt', true);\n            } else {\n                $('#topbar li.upload-button').click();\n            }\n         }, this));\n\n        history.addPopState('initial', _.bind(gallery.initialPopState, gallery));\n\n        Imgur.Gallery._instance = gallery;\n\n        return {\n            gallery: gallery,\n            history: history,\n            outsideActiveTagStore: outsideActiveTagStore\n        };\n    },\n\n    produceOutsideUser: function(emitter) {\n        var gallery_env = this._.env.gallery;\n        var gallery = new Imgur.Gallery.Outside(emitter, gallery_env);\n\n        Imgur.Gallery._instance = gallery;\n        return gallery;\n    },\n\n    produceOutsideMemes: function(emitter) {\n        var gallery_env = this._.env.gallery;\n        var gallery = new Imgur.Gallery.Outside(emitter, gallery_env);\n\n        Imgur.Gallery._instance = gallery;\n        return gallery;\n    },\n\n    produceOutsideNonMainSectionChooser: function(emitter) {\n        $('#section').combobox({\n            maybe: function(element, value, $choice) {\n                return false;\n            }\n        });\n\n        $('#sort').combobox();\n\n        var activeGroup = null;\n        var NonMainGroupSelector = new Imgur.Tag.GroupSelector(emitter, this._.env.gallery.section, this._.env.gallery.sort, this._.env.gallery.searchQuery, $('.sentence-sorting'), activeGroup);\n    },\n\n    produceOutsideTaggingWidget: function(emitter, galleryGraph) {\n        var sid    = this._.env.gallery.sid;\n        var signed = this._.env.gallery.signed;\n        var current_group = this._.env.gallery.group;\n        var current_group_type = this._.env.gallery.group_type;\n\n        var imgur = new Imgur(),\n            signin = function(e) { e.preventDefault(); e.stopPropagation(); imgur.signin('tagAttempt', true); };\n\n\n        var $outsideTagging = $('#outside-tagging'),\n            $outsideTaggingParent = $('#content .panel'),\n            $tagShowHide = $('#outside-tagging-showhide');\n\n        $('#section').combobox({\n            maybe: function(element, value, $choice) {\n                return false;\n            }\n        });\n\n        $('#sort').combobox({\n            maybe: function(element, value, $choice) {\n                return false;\n            },\n            \n            onChange: function(element, value, $choice) {\n                emitter.trigger('chosen.sort', value, $choice);\n            }\n        });\n\n        var tagStore = new Imgur.Tag.Store.Tag(emitter),\n            tagGroupStore = new Imgur.Tag.Store.TagGroup(emitter),\n            groupStore = new Imgur.Tag.Store.Group(emitter, this._.env.groups.groups),\n            groupModel = new Imgur.Tag.GroupModel(this._getStandardPostAuthorized(), tagGroupStore, emitter),\n            tagValidator = new Imgur.Tag.TagValidator(Imgur.Constants.MIN_TAG_LENGTH, Imgur.Constants.MAX_TAG_LENGTH),\n            suggestionStore = new Imgur.Tag.Store.Suggestion(emitter, tagValidator);\n\n        Imgur.Dev.DebugVar('suggestionstore', suggestionStore);\n\n        var currentGroupId = this._.env.gallery.group.id;\n        _.each(this._.env.gallery.group.tags, function(tag) {\n            tagGroupStore.addTagToGroup(tag, currentGroupId);\n        });\n\n        Imgur.Dev.DebugVar('tagGroupStore', tagGroupStore);\n        Imgur.Dev.DebugVar('outsideActiveTagStore', galleryGraph.outsideActiveTagStore);\n        Imgur.Dev.DebugVar('tagstore', tagStore);\n        Imgur.Dev.DebugVar('groupstore', groupStore);\n        Imgur.Dev.DebugVar('taggroupstore', tagGroupStore);\n\n        var extractTagGroupData = (function() {\n            var $existingTagGroupData = $(\"script[type='text/tag-group-data']\");\n\n            $existingTagGroupData.each(function() {\n                var tagGroupData = {};\n                try {\n                    tagGroupData = $.parseJSON($(this).html());\n                } catch(e) {}\n\n                _.each(tagGroupData, function(groups, tag) {\n                    _.each(groups, function(group_hash) {\n                        if(!tagGroupStore.isTagInGroup(tag, group_hash)) {\n                            tagGroupStore.addTagToGroup(tag, group_hash);\n                        }\n                    });\n                });\n\n                $(this).remove();\n            });\n        });\n\n        extractTagGroupData();\n        \n        var extractTagData = (function() {\n            var $existingTagData = $(\"script[type='text/tag-data']\");\n\n            $existingTagData.each(function() {\n                var tag_obj = null;\n\n                try {\n                    tag_obj = $.parseJSON($(this).html());\n                } catch(e) {}\n\n                if(tag_obj) {\n                    tagStore.addTag(tag_obj);\n                }\n\n                $(this).remove();\n            });\n        });\n\n        extractTagData();\n\n        emitter.on('new gallery page', null, extractTagData);\n\n        var groupModel = this._produceGroupModel(emitter, tagGroupStore);\n\n        var renderTagList = _.bind(function() {\n            if(tagGroupStore.getTagsForGroup(currentGroupId).length == 0  && current_group_type != 'base') {\n                this._produceEmptyGalleryTagList(emitter, tagGroupStore, galleryGraph.outsideActiveTagStore, suggestionStore, groupModel);\n            } else {\n                this._produceUserTagList(emitter, tagGroupStore, galleryGraph.outsideActiveTagStore, suggestionStore, groupModel);\n            }\n        }, this);\n\n        if ((this._.env.gallery.section == 'group' || this._.env.gallery.section == 'custom') && current_group_type != 'base') {\n            renderTagList();\n\n            emitter.on('gallery page refetched', null, renderTagList);\n        }\n        \n        var outsideWidget = new Imgur.Tag.OutsideTaggingWidget($outsideTagging, $outsideTaggingParent, $tagShowHide, emitter);\n\n        $tagShowHide.on('click', _.bind(outsideWidget.toggle, outsideWidget, this._.env.gallery.bestCaps));\n        var $sentence = $('.sentence-sorting');\n\n        var groupValidator = new Imgur.Tag.GroupValidator(2, 25);\n\n        var sentence = new Imgur.Tag.Sentence($sentence.find('.before-text'), $sentence.find('.middle-text'), groupStore);\n\n        var group_selector = new Imgur.Tag.MainGroupSelector(\n            emitter, \n            this._.env.gallery.section, \n            this._.env.gallery.sort, \n            this._.env.gallery.inSearch,\n            $sentence,\n            sentence,\n            galleryGraph.outsideActiveTagStore\n        );\n\n        galleryGraph.history.addPopState('tag', function TagPopStateHandler(e) {\n            var tagName = window.location.href.replace(/.*\\/t\\//i, '').replace(/_/g,' ');\n            galleryGraph.outsideActiveTagStore.setActiveTag(tagName, true);\n        });\n\n        if(this._.env.gallery.bestCaps) {\n            $('#top-comments .best-captions img').tipsy({\n                opacity: 0.95,\n                offset: -2,\n                gravity: 'n',\n                html: true\n            });\n        }\n\n        if(!signed) {\n            $('#custom-group a').on('click', signin);\n            return;\n        }\n\n        var groupLimitsController = new Imgur.Tag.Controller.GroupSelectorLimits(emitter, group_selector, groupStore);\n        emitter.on('group.remove', groupLimitsController, groupLimitsController.handleGroupRemove);\n        emitter.on('group.add', groupLimitsController, groupLimitsController.handleGroupAdd);\n\n        return groupModel;\n    },\n    \n    produceSharePage: function(emitter, type, hash, tags, tagLimit, gallery_type, title, topic, default_tags) {\n        var tagStore = new Imgur.Tag.Store.Tag(emitter, tagLimit);\n        \n        _.each(tags, function(tag){\n            tagStore.addTag({\n                tag: tag\n            });\n        });\n        \n        var tagValidator    = new Imgur.Tag.TagValidator(2, 36);\n        var suggestionStore = new Imgur.Tag.Store.Suggestion(emitter, tagValidator);\n        var autoSuggestUrl  = '//es.' + this._.env.global.host;\n        var suggestModel    = new Imgur.Tag.SuggestModelNoProvider(this._.postProvider(), autoSuggestUrl);\n        var $tagInput       = $(\"#tags input\");\n        var placeholder     = $tagInput.attr('placeholder');\n        var tabIndex        = $tagInput.attr('tabindex');\n        \n        var renderTitle = (function() {\n            ReactDOM.render(React.createElement(Imgur.Share.Title,{\n                title: title,\n                maxLength: 255,\n                inputClasses: 'required input-bb',\n                limitClasses: 'limit'\n            }), $('#submission-title').get(0));\n        });\n        \n        renderTitle();\n        \n        var renderInsideList = (function() {\n            ReactDOM.render(React.createElement(Imgur.Tag.ShareTagComponent,{\n                tagStore        : tagStore,\n                suggestionStore : suggestionStore,\n                placeholder     : placeholder,\n                tabIndex        : tabIndex,\n                id              : 'tagbox',\n                gallery_type    : gallery_type,\n                defaultTags     : default_tags,\n                tagLimit        : tagLimit\n            }), $('#tags').get(0));\n        });\n\n        renderInsideList();\n        \n        var shareOnImgur = Imgur.ShareOnImgur.getInstance({\n            type     : type,\n            hash     : hash,\n            tagStore : tagStore,\n            emitter  : emitter,\n            hasTitle : !!title,\n            hasTopic : !!topic\n        });\n        \n        shareOnImgur.generalInit();\n        \n        var outsideController = new Imgur.Tag.Controller.OutsideComponent(suggestModel, suggestionStore);\n        emitter.on('new suggest query', null, _.bind(outsideController.handleChangedQuery, outsideController));\n        \n        emitter.on('select', null, renderInsideList);\n        emitter.on('new suggest query', null, renderInsideList);\n        emitter.on('new finished query', null, renderInsideList);\n        emitter.on('new suggestions', null, renderInsideList);\n        emitter.on('tag removed', null, renderInsideList);\n        \n        emitter.on('tag limit reached', null, function(){\n            humanMsg.displayMsg('You have already added the maximum number of tags', 'error-msg');\n        });\n        \n        //Handle blurring of tagging widget\n        $(document).on('click', function(e) { \n            //Clicking on a suggested tag or the tag input\n            if($(e.target).closest('.tag-filter, .tag-list-content').length){\n                $('#tags').addClass('focus');\n                return;\n            } else {\n                $('#tags').removeClass('focus');\n            }\n        });\n    },\n\n    _produceUserTagList: function(emitter, tagGroupStore, outsideActiveTagStore, suggestionStore, groupModel) {\n        var suggestedPost = this._.postProvider();\n        var autoSuggestUrl = '//es.' + this._.env.global.host;\n        var suggestModel = new Imgur.Tag.SuggestModelNoProvider(suggestedPost, autoSuggestUrl);\n\n        var userTagListProps = {\n            tagGroupStore: tagGroupStore,\n            groupId: this._.env.gallery.group.id,\n            outsideActiveTagStore: outsideActiveTagStore,\n            groupModel: groupModel,\n            suggestionStore: suggestionStore,\n            placeholder: 'add tags to this gallery'\n        };\n\n        $('#tags-current-list, #outside-tagging-showhide').show();\n\n        if($.cookie('showTags')) {\n            $('#content > .panel').removeClass('hidden');\n        }\n\n        var renderUserTagList = function() {\n            ReactDOM.render(React.createElement(Imgur.Tag.TagListComponent,userTagListProps), $(\"#tags-current-list\").get(0));\n        };\n\n        renderUserTagList();\n\n        emitter.on('tag added to group', null, renderUserTagList);\n        emitter.on('tag removed from group', null, renderUserTagList);\n        emitter.on('new tag-group event', null, renderUserTagList);\n        emitter.on('pending tag removed from group', null, renderUserTagList);\n        emitter.on('new outside active tag', null, renderUserTagList);\n        emitter.on('new suggestions', null, renderUserTagList);\n        emitter.on('new suggest query', null, renderUserTagList);\n        emitter.on('new finished query', null, renderUserTagList);\n        emitter.on('new suggest validation mode', null, renderUserTagList);\n\n        var outsideController = new Imgur.Tag.Controller.OutsideComponent(suggestModel, suggestionStore);\n        emitter.on('new suggest query', null, _.bind(outsideController.handleChangedQuery, outsideController));\n    },\n\n    _produceGroupModel: function(emitter, tagGroupStore) {\n        var self = this;\n\n        var groupModel = new Imgur.Tag.GroupModel(this._getStandardPostAuthorized(), tagGroupStore, emitter);\n\n        return groupModel;\n    },\n\n    _produceSuggestedTagFromData: function(cb_choose, hash, name, subscribers, is_first) {\n        var $dom = $(_.templates['tags.tag-suggested']({\n            is_first: !!is_first,\n            tag: {\n                name: name,\n                subscribers: subscribers,\n                urlencoded: ''\n            }\n        }));\n\n        var tag = new Imgur.Tag.SuggestedTag($dom, hash);\n\n        tag.get$Add().on('click', _.partial(cb_choose, tag));\n\n        return tag;\n    },\n\n    _produceRemovableTagFromData: function(hash, name, subscriptions) {\n        var $dom = $(_.templates['tags.tag-removable']({\n            tag: name\n        }));\n\n        return $dom;\n    },\n\n    produceRemovableTagFromDom: function(emitter, groupController, nanoScroller, $dom) {\n        var tag = new Imgur.Tag.RemovableTag(emitter, $dom);\n\n        tag.get$RemoveButton().on('click', _.bind(groupController.handleRemovedTagEvent, groupController, tag));\n\n        var covers = [{\n            spot: 'markConfirmed',\n            cover: 'recomputeNanoScroller',\n            type: 'passAfter'\n        }];\n\n        tag = Imgur.Util.decorateWithDetailed(tag, nanoScroller, covers);\n        return tag;\n    },\n\n    _produceComboboxItemFromSomething: function($something, value) {\n        var $item = $(_.templates['tags.combobox-item']({\n            value: value\n        }));\n\n        $item.append($something);\n\n        return $item;\n    },\n    \n    _produceEmptyGalleryTagList: function(emitter, tagGroupStore, outsideActiveTagStore, suggestionStore, groupModel) {\n        var suggestedPost = this._.postProvider();\n        var autoSuggestUrl = '//es.' + this._.env.global.host;\n        var suggestModel = new Imgur.Tag.SuggestModelNoProvider(suggestedPost, autoSuggestUrl);\n\n        var userTagListProps = {\n            tagGroupStore: tagGroupStore,\n            groupId: this._.env.gallery.group.id,\n            outsideActiveTagStore: outsideActiveTagStore,\n            groupModel: groupModel,\n            suggestionStore: suggestionStore,\n            id: 'add-tag',\n            placeholder: 'Start following tags and stay up to date with the most viral images on the Internet'\n        };\n        \n        //Sidebar always hidden on new tag page\n        $('#tags-current-list, #outside-tagging-showhide').hide();\n        $('#content > .panel').addClass('hidden');\n\n        var renderUserTagList = function() {\n            var addTagContainer = $('#add-tag-container').get(0);\n            \n            if(addTagContainer) {\n                ReactDOM.render(React.createElement(Imgur.Tag.TagListComponent,userTagListProps), addTagContainer);\n            }\n        };\n\n        renderUserTagList();\n        \n        emitter.on('select', null, renderUserTagList);\n        emitter.on('new suggest query', null, renderUserTagList);\n        emitter.on('new finished query', null, renderUserTagList);\n        emitter.on('new suggest validation mode', null, renderUserTagList);\n        emitter.on('new suggestions', null, renderUserTagList);\n        \n        var outsideController = new Imgur.Tag.Controller.OutsideComponent(suggestModel, suggestionStore);\n        emitter.on('new suggest query', null, _.bind(outsideController.handleChangedQuery, outsideController));\n        \n        $('.popular-tag .add-tag').on('click', function(){\n            //Get the popular tag name the user wants to add\n            var tag = $(this).parent().find('.tag-name').text();\n            groupModel.subscribe(userTagListProps.groupId, tag);\n        });\n    }\n});\n","Namespace('Imgur.Favorite');\n  \nImgur.Favorite = Imgur.extend({\n    init : function(params) {\n        this._ = $.extend({\n            'method'       : null,\n            'hash'         : null,\n            '$favButton'   : $('.favorite-image'),\n            'confirm'  : {\n                'target'      : '#colorbox-confirm',\n                '$message'    : $('#colorbox-confirm-message'),\n                '$title'      : $('#colorbox-confirm-title')\n            },\n            'messages' : {\n                'favorited'    : '<div class=\"favorited\"></div>',\n                'unfavorited'  : '<div class=\"favorited unfavorited\"></div>',\n                'confirmMsg'   : function (fav) { return 'Are you sure you want to '+ (fav? 'unfavorite':'favorite')+ ' this image?';},\n                'confirmTitle' : function (fav) { return (fav? 'Unfavorite':'Favorite')+ ' this image?';}\n            }\n        }, params);\n\n        this._.method = $.trim(this._.method);\n        this._super(this._);\n        if(!this._.hash) {\n            this._.hash = Imgur.InsideNav.getInstance().getHash();\n        }\n    },\n    \n    _init : function() {\n        this.showMessage();\n\n        // can be run multiple times        \n        this._init_click_handler();\n    },\n    \n    _init_click_handler : function() {\n        this._.$favButton.unbind('click').on('click', _.bind(function (e) {\n            var displayMsg = false;\n            var isAlbum;\n            var insideImage;\n            var callBack;\n\n            if(typeof e.fav_display_msg != 'undefined' && e.fav_display_msg === true) {\n                displayMsg = true;\n            }\n\n            // find if this was the gallery item and read the album state from that\n            // try/catch just in case the class exists, but is not instantiated\n            try {\n                if(Imgur.InsideNav) {\n                    insideImage = Imgur.InsideNav.getInstance().getImage();\n                }\n\n                if(insideImage && this._.hash === insideImage.hash) {\n                    isAlbum = insideImage.is_album;\n\n                    callBack = function(method) {\n                        Imgur.InsideNav.getInstance().updateFavorite(method == 'favorited');\n                    };\n                }\n            } catch(ex) {\n                // http://i.imgur.com/q7vY1YX.gif\n            }\n\n            this.favorite(this._.hash, isAlbum, callBack, displayMsg);\n        }, this));\n\n        Imgur.Util.triggerPerformanceCheckpoint('favoritebtn');\n    },\n\n    handleKey: function(e) {\n        if(!e.ctrlKey && !e.altKey && !e.metaKey && (e.keyCode == 48 || e.keyCode == 45 || e.keyCode == 96)) {\n            if(!$(e.target).is('input, textarea') && $(e.target).attr('contenteditable') != 'true') {\n                // display heart popup only when key is pressed\n                var event = jQuery.Event('click', {'fav_display_msg' : true});\n                this._.$favButton.trigger(event);\n            }\n        }\n    },\n\n    showMessage : function (method) {\n        if(typeof(method) == 'undefined') {\n            method = this._.method;\n        }\n        \n        if(method == 'favorited') {\n           this.showFavorited();\n        } else if(method == 'unfavorited') {\n            this.showUnfavorited();\n        } else if(method == 'confirm') {\n            this.showConfirm();\n        }\n    },\n    \n    showFavorited : function() {\n        humanMsg.displayMsg(this._.messages.favorited, 'action-msg');\n    },\n    \n    showUnfavorited: function() {\n        humanMsg.displayMsg(this._.messages.unfavorited, 'action-msg');\n    },\n\n    showConfirm : function () {        \n        this._.confirm.$message.html(this._.messages.confirmMsg(this.isFavorited()));\n        this._.confirm.$title.html(this._.messages.confirmTitle(this.isFavorited()));\n        \n        Imgur.Utilities.ColorboxConfirm.getInstance().show(this._.confirm.target,  _.bind(this.favorite, this));\n    },\n    \n    favorite : function(hash, is_album, callback, display_msg) {\n        if(!Imgur.getInstance()._.signed) {\n            $('.tipsy,#favorite-bar').remove(); // Needed for when clicked from imgur image via linkifier\n            Imgur.getInstance().signin('favoriteAttempt', true);\n        }\n\n        if(typeof(hash) == 'undefined') {\n            hash = this._.hash;\n        } else if(typeof(hash) == 'function') {\n            hash = hash();\n        }\n\n        if(Imgur.getInstance()._.signed) {\n            // Do not update UI state if user is not logged in\n            if(this._.$favButton.hasClass('favorited')) {\n                this._.$favButton.removeClass('favorited');\n                this._.method = 'unfavorited';\n            } else {\n                this._.$favButton.addClass('favorited');\n                this._.method =  'favorited';\n\n                if($('#mainUpArrow').is(':visible')) {\n                    this.upvote();\n                }\n            }\n\n            if(display_msg) {\n                this.showMessage();\n            }\n        }\n        \n        var url = '/'+hash+'/fav.json';\n        if(window.location.href.indexOf(\"/a/\") !== -1 || is_album) {\n            url = '/a'+url;\n        }\n        \n        var data = {\n            ajax: true,\n            msid: Imgur.Environment.msid,\n            location: Imgur.InsideNav? 'inside': 'outside'\n        }\n        \n        //Force upvote on login\n        if(!Imgur.getInstance()._.signed) {\n            _.extend(data, {\n                sid:  Imgur.Environment.sid,\n                vote: 'up',\n                type: 'image'\n            });\n        } else {\n            Imgur.Util.jafoLog({\n                event: 'favorite',\n                meta: {\n                    isAlbum: is_album? is_album: window.location.href.indexOf(\"/a/\") !== -1,\n                    hash: hash,\n                    location: Imgur.InsideNav? 'inside': 'outside',\n                    state: this._.method === 'unfavorited'? 'unfavorite': 'favorite'\n                }\n            });\n        }\n        \n        $.ajax({\n            'url' : url,\n            'type': 'POST',\n            'data': data,\n            'success' : _.bind(this.favoriteSuccess, this, callback),\n            'error': _.bind(this.favoriteError, this)\n        });\n    },\n    \n    favoriteSuccess : function(callback, response) {\n        if(response && 'success' in response && response.success) {\n            this._.method = response.data.fav_method;\n        \n            if(callback) {\n                callback(response.data.fav_method);\n            }\n        }\n    },\n    \n    favoriteError : function() {\n        if(Imgur.getInstance()._.signed) {\n            // Since we are only updating UI when user is logged in\n            // no need to revert if a failure occurs if user is not logged in\n            if(this._.method == 'favorited') {\n                this._.$favButton.removeClass('favorited');\n                this._.method = 'unfavorited';\n            } else {\n                this._.$favButton.addClass('favorited');\n                this._.method = 'favorited';\n            }\n        }\n    },\n    \n    isFavorited : function() {\n        return this._.$favButton.hasClass('favorited');\n    },\n    \n    upvote : function() {\n        if(!Imgur.getInstance()._.signed) { return; }\n        \n        if(!$('#mainUpArrow').hasClass('pushed') && !$('#mainDownArrow').hasClass('pushed') ) {\n            $('#mainUpArrow').click();\n        }\n    }\n\n});\n","Namespace('Imgur.ShareOnImgur');\nImgur.ShareOnImgur = Imgur.extend({\n    init : function(params) {\n        params = params || {};\n\n        this._ = $.extend(true, {\n            gallerySubmitTermsUrl     : '/lightboxes/galleryterms',\n            galleryVerifyEmailFormUrl : '/lightboxes/verifyemail',\n            gallerySubmitURL          : '/share/i/', //for single images\n            loading                   : false,\n            shareing                  : false,\n            terms                     : 0,\n\n            messages                  : {\n                postingTooFast : function(sec) {\n                    var time = sec > 60? (Math.round(sec/60)+Imgur.Util.pluralize(Math.round(sec/60), ' minute')): sec+Imgur.Util.pluralize(sec, ' second');\n                    return 'You\\'re sharing too quickly. Please wait '+time+'.';\n                },\n                banned              : 'You blew it! You have been banned for posting NSFW images to the gallery.'\n            },\n\n            el                        : {\n                $shareonimgur      : $('#shareonimgur'),\n                $shareAlbum        : $('#share-album'),\n                $preview           : $('#preview'),\n                $descriptions      : $('#submission-title input, .data-col textarea'),\n                $topic_id          : $('input[name=\"topic_id\"]'),\n                $titleDesc         : $('input[name=\"imageTitle[]\"], textarea[name=\"description[]\"]'),\n                $imageTitles       : $('.image-title'),\n                $deleteContainers  : $('.delete-col'),\n                $required          : $('.required'),\n                $submit            : $('#share'),\n                $terms             : $('input[name=\"terms\"]'),\n                $tagbox            : $('#tagbox'),\n                $contentContainer  : $('#content-container'),\n                $topicSelect       : $('.topic-select'),\n                $publishButtons    : $('#publish-buttons'),\n                $missingFields     : $('#missing-fields'),\n                $promotedPlatBoxes : $('#platform-target-prompt input[type=\"checkbox\"]'),\n                $promotedPlatAll   : $('#platform-target-prompt input[type=\"checkbox\"]#targeting-all'),\n                sortHandler        : '.move',\n                images             : '.image-container .zoom'\n            }\n        }, params);\n\n        this._.galleryLink = '//'+imgur._.host+'/gallery/'+this._.hash+'/new';\n        this._.publishCortex = new Cortex({\n            submitting:    false,\n            promoted:      false,\n            missingFields: 2\n        });\n\n        this._ = this._super(this._);\n        return this._;\n    },\n\n    generalInit: function() {\n        var self = this;\n\n        var renderPublishWidget = (function() {\n            ReactDOM.render(React.createElement(Imgur.Share.Publish,{\n                cortex:  self._.publishCortex,\n                hash:    self._.hash,\n                isAlbum: self._.type == 'a' ? true : false,\n                handlePreview: function(e) {\n                    self._.originalState = self._.el.$shareAlbum.serialize();\n                    self.handleSave(e);\n                },\n                handleSubmit: _.bind(self.handleSubmit, self)\n            }), self._.el.$publishButtons.get(0));\n        });\n\n        renderPublishWidget();\n\n        this._.publishCortex.on('update', function() {\n            renderPublishWidget();\n        });\n\n        $(this._.el.images).imageZoom();\n\n        this._.el.$deleteContainers.on('click', function(e){\n            self.handleDelete(e);\n        });\n\n        this._.el.$required.on('keyup', function(){\n            if ($(this).val() != '') {\n                self._.hasTitle = true;\n                $(this).removeClass('error');\n            } else {\n                self._.hasTitle = false;\n            }\n\n            self.checkMissingFields();\n        });\n\n        this._.el.$descriptions.on('keydown', function(e){\n            if(e.keyCode == 9 && !e.shiftKey) {\n                var $element = $(this), $container;\n\n                //Coming from submission title input\n                if($element.hasClass('required')) {\n                    $container = $('.image-container').eq(0);\n                } else {\n                    $container = $element.parents('.image-container').next();\n                }\n\n                $.smoothScroll({\n                    scrollTarget: $container\n                });\n            }\n        });\n\n        this._.el.$titleDesc.on('change', function(){\n            $(this).parents('.image-container').find('input[name=\"dirty[]\"]').val(1);\n        });\n\n        //Store the original state so we can tell if anything changed\n        this._.originalState = this._.el.$shareAlbum.serialize();\n\n        this._.el.$topicSelect.combobox({\n            onChange: function(element, value, $choice) {\n                self._.hasTopic = true;\n                self.checkMissingFields();\n                self._.el.$topicSelect.removeClass('error');\n            }\n        });\n\n        // bind platform boxes for PP submission\n        this._.el.$promotedPlatBoxes.on('change click', _.bind(_.debounce(this.handlePromoPlatformChange, 500), this));\n        // set the default state by calling\n        this.handlePromoPlatformChange();\n\n        this.placeShareButtons();\n\n        $(window).on('resize', _.bind(self.placeShareButtons, this));\n\n        $(window).on('beforeunload', function(){\n            if(self._.el.$shareAlbum.serialize() != self._.originalState && !self._.sharing) {\n                return 'You have unsaved changes';\n            }\n        });\n    },\n\n    placeShareButtons: function() {\n        if($('#topbar').height() + $('#shareonimgur').height() + $('#cta-container-placeholder').height() > $(window).height() && $(window).width() > 960) {\n            this._.el.$publishButtons.addClass('js-fixed');\n        } else {\n            this._.el.$publishButtons.removeClass('js-fixed');\n        }\n    },\n\n    retabindex: function() {\n        $('#tagbox, #submission-title input, .data-col input, .data-col textarea').each(function(index){\n            $(this).attr('tabindex', index+1);\n        });\n    },\n\n    handleDelete: function(e) {\n        e.preventDefault();\n        $(e.target).closest('.image-container').remove();\n\n        //Hide move and delete col\n        if ($(this._.el.images).length == 1) {\n            this._.el.$imageTitles.remove();\n        }\n\n        this.retabindex();\n    },\n\n    //Serialize form to JSON to get around php max vars for large albums\n    serialize: function() {\n        var data    = {};\n        var dirty   = '';\n        var $inputs = this._.el.$shareAlbum.find(':input');\n\n        for(var i = 0; i < $inputs.length; i++) {\n            var namedArray = $inputs[i].name.indexOf('[]');\n            var name       = $inputs[i].name.replace('[]', '');\n            var value      = $inputs[i].value;\n\n            if (name == '') {\n                continue;\n            } else if(name == 'dirty') {\n                dirty = value;\n            } else if((name == 'description' && !dirty) || (name == 'imageTitle' && !dirty)) {\n                value = '';\n            }\n\n            if(namedArray != -1) {\n                if(Array.isArray(data[name])) {\n                    data[name].push(value);\n                } else {\n                    data[name] = [value];\n                }\n            } else {\n                if($inputs[i].type == 'radio' || $inputs[i].type == 'checkbox') {\n                    if($inputs[i].checked) {\n                        data[name] = value;\n                    }\n                } else {\n                    data[name] = value;\n                }\n            }\n        }\n\n        return JSON.stringify(data);\n    },\n\n    handleSave: function(e) {\n        if(e) {\n            e.preventDefault();\n        }\n\n        if(this.handleValidation(true)) {\n            var self = this;\n\n            this._.previewWindow = window.open('/share/' + this._.type + '/' + this._.hash + '/loading', '_blank');\n\n            Imgur.Util.jafoLog({\n                event: 'shareOnImgurPreview',\n                meta: {\n                    hash: this._.hash\n                }\n            });\n\n            $.ajax({\n                method: 'POST',\n                url: '/share/' + this._.type + '/' + this._.hash + '/save',\n                data: {\n                    msid: Imgur.Environment.msid,\n                    data: this.serialize()\n                },\n                success: function (response) {\n                    if (!response || !response.success) {\n                        return self.handleFail(true, response);\n                    }\n                },\n                error: this.handleFail.bind(this, true)\n            });\n        }\n    },\n\n    handleSubmit: function(e) {\n        if(e) {\n            e.preventDefault();\n        }\n\n        if(this.handleValidation() && !this._.loading) {\n            var self       = this;\n            this._.loading = true;\n            this._.publishCortex.submitting.set(true);\n\n            Imgur.Util.jafoLog({\n                event: 'shareOnImgurButton',\n                meta: {\n                    hash: this._.hash,\n                    topic: $('.topic-select .selection h4').text().trim(),\n                    matureToggle: $('#mature').is(':checked'),\n                    location: 'uploadModal'\n                }\n            });\n\n            $.ajax({\n                method: 'POST',\n                url: '/share/' + this._.type + '/' + this._.hash + '/share',\n                data: {\n                    msid: Imgur.Environment.msid,\n                    data: this.serialize()\n                },\n                success: function(response){\n                    if(!response || !response.success) {\n                        return self.handleFail(false, response);\n                    }\n\n                    self._.sharing = true;\n\n                    // open the ad/flight for promoted posts\n                    if(response.data && response.data.promoPage) {\n                        var newPageContent='';\n\n                        newPageContent += '<div class=\"panel\" id=\"promo-success\">';\n                        newPageContent += '<h1>Success!</h1>';\n                        newPageContent += '<ul>';\n                        newPageContent += '<li><a href=\"//'+imgur._.host+'/gallery/'+self._.hash+'/\" target=\"_blank\">View the gallery page</a></li>';\n                        newPageContent += '<li><a href=\"'+response.data.promoPage+'\" target=\"_blank\">View the promo flight</a></li>';\n                        newPageContent += '</ul>';\n                        newPageContent += '</div>';\n\n                        self._.el.$contentContainer.html(newPageContent);\n                    } else {\n                        window.location = '//'+imgur._.host+'/gallery/'+self._.hash+'/new';\n                    }\n                },\n                error: this.handleFail.bind(this, false)\n            });\n        }\n    },\n\n    // juggling the platofrm targeting checkboxes\n    handlePromoPlatformChange: function(ev) {\n        var allSelector = '#targeting-all';\n        var allNotSelector = ':not('+allSelector+')';\n        var allOn = this._.el.$promotedPlatAll.attr('checked');\n        var isAll = typeof ev === 'object' && $(ev.target).is(allSelector);\n\n        if(!this._.el.$promotedPlatBoxes.length) {\n            return;\n        }\n\n        if(isAll) {\n            if(allOn) {\n                this._.el.$promotedPlatBoxes.filter(allNotSelector).attr('checked', true);\n            } else {\n                this._.el.$promotedPlatAll.removeAttr('checked');\n            }\n        } else {\n            var expected = this._.el.$promotedPlatBoxes.filter(allNotSelector).length;\n            var gotten = 0;\n\n            // yes, we need to loop through these because jQuery fucks up the checked attr\n            // thus an elegant trick like this._.el.$promotedPlatBoxes.filter(':not(#targeting-all)').filter('[checked]').length\n            // simply won't work (it always returns the same amount as the expected var :/)\n\n            for(var iter = 0; iter < this._.el.$promotedPlatBoxes.length; iter++) {\n                var $currBox = $(this._.el.$promotedPlatBoxes[iter]);\n\n                if($currBox.is(allSelector)) {\n                    continue;\n                }\n\n                if($currBox.attr('checked')) {\n                    gotten++;\n                }\n            }\n\n            if(expected == gotten) {\n                this._.el.$promotedPlatAll.attr('checked', true);\n            } else {\n                this._.el.$promotedPlatAll.removeAttr('checked');\n            }\n        }\n\n    },\n\n    redirectToGallery: function() {\n        this._.previewWindow.close();\n        window.location = this._.galleryLink;\n    },\n\n    handleFail: function(savePreview, response) {\n        var self = this;\n        this._.loading = false;\n        this._.publishCortex.submitting.set(false);\n\n        try {\n            if(!response) {\n                throw 'bad response';\n            }\n\n            if(response.responseText) {\n                response = $.parseJSON(response.responseText);\n            }\n        } catch(e) {\n            humanMsg.displayMsg('An unknown error occurred. Please try again.', 'error-msg');\n            $.colorbox.close();\n\n            Imgur.Util.jafoLog({\n                event: 'shareOnImgurError',\n                meta: {\n                    hash: this._.hash,\n                    error: 'unparsable',\n                    button: 'share'\n                }\n            });\n\n            return;\n        }\n\n        if(response.data == null || response.data.error == null || response.data.error.message == null) {\n            humanMsg.displayMsg('An unknown error occurred. Please try again.', 'error-msg');\n            $.colorbox.close();\n\n            Imgur.Util.jafoLog({\n                event: 'shareOnImgurError',\n                meta: {\n                    hash: this._.hash,\n                    error: 'unknown',\n                    button: 'share'\n                }\n            });\n\n            return;\n        }\n\n        var i = parseInt(response.data.error.message);\n        var statMessage = 'unknown';\n\n        if(!isNaN(i) && i > 0) {\n            statMessage = 'rateLimit';\n            humanMsg.displayMsg(this._.messages.postingTooFast(i), 'error-msg');\n        } else if(response.data.error.message == 'Banned') {\n            statMessage = 'banned';\n            humanMsg.displayMsg(this._.messages.banned, 'error-msg');\n            $.colorbox.close();\n        } else if(response.data.error.message == 'Terms') {\n            statMessage = 'terms';\n            this.showTerms(savePreview);\n        } else if(response.data.error.message == 'NotVerified') {\n            statMessage = 'notVerified';\n            this.showEmailVerification(function() {\n                if(savePreview) {\n                    self.handleSave();\n                } else {\n                    self.handleSubmit();\n                }\n            });\n        } else if(response.data.error.message == 'OP') {\n            humanMsg.displayMsg('OP must exist.', 'error-msg');\n            $.colorbox.close();\n        } else if(response.data.error.message == 'Suspended') {\n            statMessage = 'suspended';\n            humanMsg.displayMsg('Your account is currently suspended', 'error-msg');\n        } else {\n            humanMsg.displayMsg('An unknown error occurred. Please try again.', 'error-msg');\n            $.colorbox.close();\n        }\n\n        Imgur.Util.jafoLog({\n            event: 'shareOnImgurError',\n            meta: {\n                hash: this._.hash,\n                error: statMessage,\n                button: 'share'\n            }\n        });\n    },\n\n    handleValidation: function(fromPreviewButton) {\n        var error = false;\n        var statMessage = '';\n        var buttonName = fromPreviewButton === true ? 'preview' : 'share';\n\n        if(!this._.el.$required.val()) {\n            this._.el.$required.addClass('error');\n            this._.el.$required.focus();\n            error = true;\n\n            // this will change if we add more required fields:\n            statMessage += 'noTitle';\n        }\n\n        if(this._.el.$topic_id.val() == '') {\n            this._.el.$topicSelect.addClass('error');\n            error = true;\n\n            if (statMessage == 'noTitle') {\n                statMessage += 'NoTags';\n            } else {\n                statMessage += 'noTags'\n            }\n        }\n\n        if (error) {\n            Imgur.Util.jafoLog({\n                event: 'shareOnImgurError',\n                meta: {\n                    hash: this._.hash,\n                    error: statMessage,\n                    button: buttonName\n                }\n            });\n\n            return false;\n        }\n\n        return true;\n    },\n\n    checkMissingFields: function() {\n        var missing_fields = 0;\n\n        if(!this._.hasTopic) {\n            missing_fields++;\n        }\n\n        if (!this._.hasTitle) {\n            missing_fields++;\n        }\n\n        this._.publishCortex.missingFields.set(missing_fields);\n\n        return missing_fields;\n    },\n\n    showTerms: function(savePreview) {\n        var self  = this;\n        var share = Imgur.ShareOnImgur.getInstance();\n\n        $.colorbox.close();\n\n        $.colorbox({\n            href: self._.gallerySubmitTermsUrl,\n            open: true,\n            iframe: true,\n            top: '15%',\n            transition: 'none',\n            scrolling: false,\n            innerWidth: '520px',\n            innerHeight: '234px',\n            onComplete: function() {\n                self._.publishCortex.submitting.set(false);\n            },\n            onCleanup: function() {\n                if(share._.terms) {\n                    self._.el.$terms.val(1);\n                    if(savePreview) {\n                        self.handleSave();\n                    } else {\n                        self.handleSubmit();\n                    }\n                }\n            }\n        });\n    },\n\n    acceptTerms : function(e, keepColorBoxOpen) {\n        var self = Imgur.ShareOnImgur.getInstance();\n\n        self._.terms = 1;\n        self._.el.$terms.val(1);\n\n        if(!keepColorBoxOpen) {\n            $.colorbox.close();\n        }\n    },\n\n    declineTerms : function() {\n        var self = Imgur.ShareOnImgur.getInstance();\n\n        self._.terms = 0;\n        self._.el.$terms.val(0);\n        $.colorbox.close();\n    },\n\n    showEmailVerification : function(callback) {\n        var self = Imgur.ShareOnImgur.getInstance();\n\n        $.colorbox.close();\n\n        setTimeout(function(){\n            var self_ = self;\n\n            $.colorbox({\n                href: self._.galleryVerifyEmailFormUrl,\n                open: true,\n                iframe: true,\n                top: '15%',\n                transition: 'none',\n                scrolling: false,\n                innerWidth: '520px',\n                innerHeight: '256px',\n                onComplete: function() {\n                    self.sendVerificationEmail();\n                    self_.checkEmailVerification();\n                },\n                onCleanup: function() {\n                    if(callback) {\n                        callback();\n                    }\n                }\n            });\n        }, 600);\n    },\n\n    sendVerificationEmail : function() {\n        $.get('/ajax/send_email_verification');\n    },\n\n    checkEmailVerification : function(code, callback) {\n        var self = this;\n\n        if(!code) { code = '' }\n\n        $.post('/ajax/verify_email/'+code, function(response) {\n            if(response.data.verified) {\n                $.colorbox.close();\n\n                if (callback) {\n                    callback()\n                }\n            } else {\n                if(response.data.invalid && code) {\n                    humanMsg.displayMsg('Verification code is invalid', 'error-msg');\n                }\n\n                setTimeout(function() { self.checkEmailVerification() }, 1500);\n            }\n        });\n    }\n});\n\nClass.addSingleton(Imgur.ShareOnImgur);\n","Namespace('Imgur');\n\nImgur.GalleryPost = React.createClass({\n    displayName: 'GalleryPost',\n\n    getInterestingEvents: function() {\n        return [\n            'select'\n        ];\n    },\n\n    render: function() {\n        var img = this.props.currentImageStore.getCurrentImage();\n        var title = img.title;\n        var matureClass = img.nsfw ? 'mature-indicator' : '';\n\n        if(title == 'untitled') {\n            title = '';\n        }\n\n        if(img.isAd) {\n            return React.DOM.div(null,\n                this.props.promotedTag(),\n                React.DOM.h1({\n                    id: 'image-title',\n                    className: matureClass\n                }, title)\n            );\n        }\n\n        return React.DOM.div(null,\n            React.DOM.h1({\n                id: 'image-title',\n                className: matureClass\n            }, title)\n        );\n    }\n});\n","Namespace('Imgur.Share');\n\nImgur.Share.Title = React.createClass({\n    displayName: 'Share-Title',\n\n    getInitialState: function() {\n        return {\n            title       : this.props.title,\n            titleLength : this.props.title.length,\n        };\n    },\n    \n    handleChange: function(e) {\n        var targetLength = e.target.value.length;\n\n        this.setState({\n            title       : e.target.value,\n            titleLength : targetLength\n        });\n\n        if (typeof this.props.handleChange === 'function') {\n            var valid = false;\n\n            if (targetLength > 0 && targetLength <= this.props.maxLength) {\n                valid = true;\n            }\n\n            this.props.handleChange(valid);\n        }\n    },\n    \n    render: function() {\n        var countClass = '';\n        \n        if(this.state.titleLength >= this.props.maxLength) {\n            countClass = ' filled';\n        } else if (this.state.titleLength > 0) {\n            countClass = ' filling';\n        }\n        \n        return React.DOM.div({},\n            React.DOM.input({\n                type: 'text',\n                className: this.props.inputClasses,\n                ref: 'title',\n                name: 'title',\n                placeholder: 'Give your post a title',\n                value: this.state.title,\n                autoComplete: 'off',\n                maxLength: this.props.maxLength,\n                tabIndex: 1,\n                onChange: this.handleChange\n            }),\n            React.DOM.p({\n                className: this.props.limitClasses + countClass\n            }, '(' + this.state.titleLength + '/' + this.props.maxLength + ')')\n        );\n    }\n});","Namespace('Imgur.Share');\n\nImgur.Share.Publish = React.createClass({\n    displayName: 'Share-Publish',\n\n    handleRules: function() {\n        Imgur.Util.jafoLog({\n            event: 'reportRules',\n            meta: {\n                type: 'galleryPost',\n                hash: this.props.hash,\n                isAlbum: this.props.is_album\n            }\n        });\n    },\n    \n    render: function() {\n        var publishButton,\n            missingFieldsText,\n            missingFields = this.props.cortex.missingFields.getValue();\n        \n        if (missingFields) {\n            publishButton     = React.DOM.button({id: 'share', className: 'btn btn-grey', disabled: 'disabled'}, 'Finish & Share');\n            missingFieldsText = React.DOM.p({id: 'missing-fields'}, 'missing ' + missingFields + ' required field' + (missingFields != 0 ? 's' : ''));\n        } else {\n            publishButton     = React.DOM.button({id: 'share', className: 'btn btn-main', onClick: this.props.handleSubmit}, 'Finish & Share');\n            missingFieldsText = React.DOM.p({id: 'missing-fields', className: 'success'}, 'Remember our ',\n                React.DOM.a({href: '/rules', target: '_blank', onClick: this.handleRules}, 'community rules')\n            );\n        }\n        \n        return React.DOM.div({},\n            publishButton,\n            React.DOM.span({id: 'share-loader', className: this.props.cortex.submitting.getValue() ? '' : 'nodisplay'}),\n            this.props.cortex.promoted.getValue() ? '' : React.DOM.a({id: 'preview', href: '', onClick: this.props.handlePreview}, 'preview post'),\n            missingFieldsText\n        );\n    }\n});\n","Namespace('Imgur.Element');\n\nImgur.Element.SortedList = Class.extend({\n    init: function($container, comparator, initialList) {\n        this._ = {\n            el: {\n                $container: $container\n            },\n            comparator: comparator,\n            list: initialList || []\n        };\n    },\n\n    getComparator: function() {\n        return this._.comparator;\n    },\n\n    getList: function() {\n        return this._.list;\n    },\n\n    get$Container: function() {\n        return this._.el.$container;\n    },\n\n    /**\n     * Insert the tag in sorted position\n     */\n    add: function(el) {\n        var inserted = false;\n\n        for(var existing_index = 0; existing_index < this._.list.length; existing_index++) {\n            var existing_element = this._.list[existing_index];\n\n            var comparison_result = this._.comparator(el, existing_element);\n\n            if(comparison_result <= 0) {\n                existing_element.get$Container().before(el.get$Container());\n                this._.list.splice(existing_index, 0, el);\n                inserted = true;\n                break;\n            }\n        }\n\n        if(!inserted) {\n            this.append(el);\n        }\n    },\n\n    prepend: function(el) {\n        if(this._.list.length) {\n            this._.list[0].insertBefore(el);\n        } else {\n            this._.el.$container.append(el.get$Container());\n        }\n        this._.list.unshift(el);\n    },\n\n    append: function(el) {\n        this._.el.$container.append(el.get$Container());\n        this._.list.push(el);\n    },\n\n    remove: function(el) {\n        this.removeElementPredicate(function(cur_el) {\n            return cur_el.equals(el);\n        });\n    },\n\n    /**\n     * Remove the tags for which the predicate evaluates to true\n     */\n    removeElementPredicate: function(predicate) {\n        this._.list = _.filter(this._.list, function(cur_el) {\n            var result = predicate(cur_el);\n\n            if(result) {\n                cur_el.remove();\n            }\n\n            return !result;\n        });\n    },\n\n    clear: function() {\n        for(var i = 0; i < this._.list.length; i++) {\n            this._.list[i].remove();\n        }\n\n        this._.list = [];\n    },\n\n    extend: function(list) {\n        _.each(list, _.bind(this.add, this));\n    },\n\n    length: function() {\n        return this._.list.length;\n    },\n\n    contains: function(el) {\n        return _.some(this._.list, function(other) {\n            return el.equals(other);\n        });\n    },\n\n    containsBy: function(predicate) {\n        return _.some(this._.list, predicate);\n    },\n\n    moveToTop: function(el) {\n        el.remove();\n        this.remove(el);\n\n        this.prepend(el);\n    },\n\n    findFirstBy: function(predicate) {\n        var els = _.filter(this._.list, predicate);\n        return (els.length ? els[0] : null);\n    }\n});\n","Namespace('Imgur.Element');\n\nImgur.Element.SortedListEmptyable = Imgur.Element.SortedList.extend({\n    init: function($container, $empty, comparator, initialList, emptyMessageProvider) {\n        this._super($container, comparator, initialList);\n        this._.el.$empty = $empty;\n        this._.emptyMessageProvider = emptyMessageProvider || function() { return $empty; };\n    },\n\n    setEmptyMessageProvider: function(provider) {\n        this._.emptyMessageProvider = provider;\n    },\n\n    getEmptyMessageProvider: function() {\n        return this._.emptyMessageProvider;\n    },\n\n    _replaceEmptyMessage: function() {\n        var $empty = $(this._.emptyMessageProvider());\n        this._.el.$empty.replaceWith($empty);\n        this._.el.$empty = $empty;\n    },\n\n    add: function(el) {\n        this._super(el);\n        this.hideEmptyMessage();\n    },\n\n    prepend: function(el) {\n        this.hideEmptyMessage();\n        this._super(el);\n    },\n\n    append: function(el) {\n        this.hideEmptyMessage();\n        this._super(el);\n    },\n\n    remove: function(el) {\n        this._super(el);\n\n        if(this._.list.length == 0) {\n            this.showEmptyMessage();\n        }\n    },\n\n    removeElementPredicate: function(predicate) {\n        this._super(predicate);\n\n        if(this._.list.length == 0) {\n            this.showEmptyMessage();\n        }\n    },\n\n    clear: function() {\n        this._super();\n        this.showEmptyMessage();\n    },\n\n    hasEmptyMessage: function() {\n        return !this._.el.$empty.hasClass('nodisplay');\n    },\n\n    hideEmptyMessage: function() {\n        if(this.hasEmptyMessage()) {\n            this._.el.$empty.addClass('nodisplay');\n        }\n    },\n\n    showEmptyMessage: function() {\n        this._replaceEmptyMessage();\n\n        if(!this.hasEmptyMessage()) {\n            this._.el.$empty.removeClass('nodisplay');\n        }\n    }\n});\n","Namespace('Imgur.Element');\n\nImgur.Element.OutsideSortedListEmptyable = Imgur.Element.SortedListEmptyable.extend({\n    hasEmptyMessage: function() {\n        return this._.el.$selectorContainer.hasClass('noGroups');\n    },\n\n    hideEmptyMessage: function() {\n        if(this.hasEmptyMessage()) {\n            this._.el.$selectorContainer.removeClass('noGroups');\n        }\n    },\n\n    showEmptyMessage: function() {\n        this._replaceEmptyMessage();\n\n        if(!this.hasEmptyMessage()) {\n            this._.el.$selectorContainer.addClass('noGroups');\n        }\n    }\n});\n","Namespace('Imgur.Tag');\n\nImgur.Tag.Follow = React.createClass({\n    displayName: 'Tag-Follow',\n\n    _handleUnsubscribe: function() {        \n        this.props.groupModel.unsubscribe('[custom]', this.props.tag);\n    },\n    \n    _handleSubscribe: function() {        \n        this.props.groupModel.subscribe('[custom]', this.props.tag);\n    },\n    \n   render: function() {\n        if (this.props.tagFollower) {\n            return React.DOM.div({className: 'btn btn-small btn-main', onClick: _.bind(this._handleUnsubscribe, this)}, 'following');\n        } else {\n            return React.DOM.div({className: 'btn btn-small btn-secondary', onClick: _.bind(this._handleSubscribe, this)}, 'follow');\n        }\n   }\n});","Namespace('Imgur.Tag');\n\nImgur.Tag.GroupSelector = Class.extend({\n    init: function(emitter, section, sort, inSearch, $container, activeGroup) {\n        this._ = _.merge(this._ || {}, {\n            emitter: emitter,\n            section: section,\n            sort: sort,\n            inSearch: inSearch,\n            activeGroup: activeGroup,\n            el: {\n                $selection: $container.find('#section .selection')\n            }\n        });\n    },\n\n    changeSelectionToTag: function(tag) {\n        this._.el.$sectionName.html(tag);\n    },\n\n    getActiveGroupId: function() {\n        return this._.activeGroup.getId();\n    },  \n\n    getActiveGroup: function() {\n        return this._.activeGroup;\n    },\n\n    getActiveGroupName: function() {\n        return this._.activeGroup.getName();\n    },\n\n    getActiveTag: function() {\n        return this._.tag;\n    },\n\n    getActiveTagName: function() {\n        return this._.tag.getName();\n    },\n\n    setActiveGroupName: function(name) {\n        this._.activeGroup.setName(name);\n        this._.el.$selection.text(name).trim();\n    },\n\n    findTagInActiveGroup: function(tagName) {\n        return this._.activeGroup.findFirstTagBy(function(cur_tag) {\n            return cur_tag.getName() === tagName;\n        });\n    }\n});\n\n","Namespace('Imgur.Tag');\n\nImgur.Tag.MainGroupSelector = Imgur.Tag.GroupSelector.extend({\n    init: function(emitter, section, sort, inSearch, $container, sentence, outsideActiveTagStore) {\n        this._super(emitter, section, sort, inSearch, $container);\n\n        this._ = _.merge(this._ || {}, {\n            emitter: emitter,\n            section: section,\n            sort: sort,\n            inSearch: inSearch,\n            sentence: sentence,\n            outsideActiveTagStore: outsideActiveTagStore,\n            el: {\n                $container: $container,\n                $selectionName: $container.find('#section .selection .name')\n            }\n        });\n    },\n\n    get$Container: function() {\n        return this._.el.$container;\n    }\n});\n","Namespace('Imgur.Tag');\n\nImgur.Tag.Group = Class.extend({\n    init: function($container, list) {\n        this._ = {\n            list: list,\n            el: {\n                $container: $container,\n                $name: $container.find('.name')\n            }\n        };\n    },\n\n    getId: function() {\n        return this.getIdFrom$Container(this._.el.$container);\n    },\n\n    getList: function() {\n        return this._.list;\n    },\n\n    setList: function(list) {\n        this._.list = list;\n    },\n\n    getName: function() {\n        return this._.el.$name.text();\n    },\n\n    get$Container: function() {\n        return this._.el.$container;\n    },\n\n    get$Name: function() {\n        return this._.el.$name;\n    },\n\n    setName: function(name) {\n        this._.el.$name.text(name);\n    },\n\n    add: function(tag) {\n        this._.list.add(tag);\n    },\n\n    contains: function(tag) {\n        return this._.list.contains(tag);\n    },\n\n    containsBy: function(predicate) {\n        return this._.list.containsBy(predicate);\n    },\n\n    findFirstTagBy: function(predicate) {\n        return this._.list.findFirstBy(predicate);\n    },\n\n    getIdFrom$Container: function($container) {\n        return $container.children('div').attr('value');\n    },\n    \n    getTypeFrom$Container: function($container) {\n        return $container.children('div').attr('data-type');\n    },\n    \n    equals: function(other) {\n        return other === this.getId();\n    },\n    \n    insertBefore: function(el) {\n        this.get$Container().before(el.get$Container());\n    }\n});\n","Namespace('Imgur.Tag');\n\nImgur.Tag.UserGroup = Imgur.Tag.Group.extend({\n    init: function($container, list) {\n        this._super($container, list);\n        this._.el.$remove = $container.find('.remove');\n    },\n\n    setName: function(name) {\n        this._.el.$name.text(name);\n    },\n\n    get$RemoveButton: function() {\n        return this._.el.$remove;\n    },\n\n    remove: function() {\n        this._.el.$container.remove();\n    },\n    \n    equals: function(other) {\n        return other === this.getId();\n    }\n});\n","Namespace('Imgur.Tag');\n\nImgur.Tag.GroupModel = Class.extend({\n    init: function(post, tagGroupStore, emitter) {\n        this._ = {\n            post          : post,\n            tagGroupStore : tagGroupStore,\n            emitter       : emitter\n        };\n    },\n\n    unsubscribe: function(group_id, tag_id) {\n        this._.tagGroupStore.removeTagFromGroup(tag_id, group_id);\n\n        var success = _.bind(function() {\n            this._.tagGroupStore.setFailedTag('');\n            this._.tagGroupStore.pushHistory(tag_id, group_id, this._.tagGroupStore.ACTIONS.REMOVED);\n            this._.emitter.trigger('new tagset');\n        }, this);\n\n        var fail = _.bind(function() {\n            this._.tagGroupStore.setFailedTag('Failed to unsubscribe from ' + tag_id);\n            this._.tagGroupStore.addTagToGroup(tag_id, group_id);\n            this._.tagGroupStore.pushHistory(tag_id, group_id, this._.tagGroupStore.ACTIONS.ERROR);\n            humanMsg.displayMsg('Failed to unfollow tag', 'error-msg');\n        }, this);\n\n        this._.post('/account/groups/unsubscribe', {\n            group: group_id,\n            tag: tag_id\n        }, success, fail);\n    },\n\n    subscribe: function(group_id, tag_id) {\n        this._.tagGroupStore.addPendingTag(tag_id, group_id);\n\n        var success = _.bind(function() {\n            this._.tagGroupStore.addTagToGroup(tag_id, group_id);\n            this._.tagGroupStore.removePendingTag(tag_id, group_id);\n            this._.tagGroupStore.setFailedTag('');\n            this._.tagGroupStore.pushHistory(tag_id, group_id, this._.tagGroupStore.ACTIONS.ADDED);\n            this._.emitter.trigger('new tagset');\n        }, this);\n\n        var fail = _.bind(function() {\n            this._.tagGroupStore.setFailedTag('Failed to subscribe to ' + tag_id);\n            this._.tagGroupStore.removePendingTag(tag_id, group_id);\n            this._.tagGroupStore.pushHistory(tag_id, group_id, this._.tagGroupStore.ACTIONS.ERROR);\n            humanMsg.displayMsg('Failed to follow tag', 'error-msg');\n        }, this);\n\n        this._.post('/account/groups/subscribe', {\n            group: group_id,\n            tag: tag_id\n        }, success, fail);\n    },\n\n    block: function(group_id, tag_id) {\n        this._.tagGroupStore.addPendingTag(tag_id, group_id);\n        \n        var success = _.bind(function() {\n            this._.tagGroupStore.addTagToGroup(tag_id, group_id);\n            this._.tagGroupStore.removePendingTag(tag_id, group_id);\n            this._.tagGroupStore.setFailedTag('');\n            this._.tagGroupStore.pushHistory(tag_id, group_id, this._.tagGroupStore.ACTIONS.BLOCKED);\n            this._.emitter.trigger('new tagset');\n        }, this);\n\n        var fail = _.bind(function() {\n            this._.tagGroupStore.setFailedTag('Failed to block ' + tag_id);\n            this._.tagGroupStore.removePendingTag(tag_id, group_id);\n            this._.tagGroupStore.pushHistory(tag_id, group_id, this._.tagGroupStore.ACTIONS.ERROR);\n        }, this);\n\n        this._.post('/account/groups/blocktag', {\n            tag: tag_id\n        }, success, fail);\n\n        this._.tagGroupStore.block(tag_id);\n    },\n\n    unblock: function(group_id, tag_id) {\n        this._.tagGroupStore.removeTagFromGroup(tag_id, group_id);\n\n        var success = _.bind(function() {\n            this._.tagGroupStore.setFailedTag('');\n            this._.tagGroupStore.pushHistory(tag_id, group_id, this._.tagGroupStore.ACTIONS.UNBLOCKED);\n            this._.emitter.trigger('new tagset');\n        }, this);\n\n        var fail = _.bind(function() {\n            this._.tagGroupStore.pushHistory(tag_id, group_id, this._.tagGroupStore.ACTIONS.ERROR);\n            this._.tagGroupStore.setFailedTag('Failed to unblock ' + tag_id);\n            this._.tagGroupStore.addTagToGroup(tag_id, group_id);\n        }, this);\n\n        this._.post('/account/groups/unblocktag', {\n            tag: tag_id\n        }, success, fail);\n\n        this._.tagGroupStore.unblock(tag_id);\n    }\n});\n","Namespace('Imgur.Tag');\n\n/**\n * Common base class for gallery-image-tags and normal and suggested tags\n */\nImgur.Tag.Tag = Class.extend({\n    init: function($container) {\n        this._ = {\n            el: {\n                $container: $container,\n                $name: Object.getPrototypeOf(this).get$NameFrom$Container($container)\n            }\n        };\n    },\n\n    insertBefore: function(tag) {\n        this._.el.$container.before(tag.get$Container());\n    },\n\n    remove: function() {\n        this._.el.$container.remove();\n    },\n\n    getName: function() {\n        return this._.el.$name.text().toLowerCase();\n    },\n\n    get$Container: function() {\n        return this._.el.$container;\n    },\n\n    get$Name: function() {\n        return this._.el.$name;\n    },\n\n    get$NameFrom$Container: function($container) {\n        return $container.children('.name'); // name is also the sub-group-line name class so we can't find()\n    },\n\n    getNameFrom$Container: function($container) {\n        return $container.children('.name').text();\n    },\n\n    equals: function(other) {\n        return (other instanceof Imgur.Tag.Tag) &&\n               (other.getName() == this.getName());\n    },\n\n    addSelection: function() {\n        this.get$Container().addClass('selected');\n    },\n\n    removeSelection: function() {\n        this.get$Container().removeClass('selected');\n    },    \n});\n","Namespace('Imgur.Tag');\n\nImgur.Tag.RemovableTag = Imgur.Tag.Tag.extend({\n    init: function(emitter, $container) {\n        this._super($container);\n        this._.emitter = emitter;\n        this._.el.$remove = $container.find('.remove');\n    },\n\n    getEmitter: function() {\n        return this._.emitter;\n    },\n\n    get$RemoveButton: function() {\n        return this._.el.$remove;\n    },\n\n    markConfirmed: function() {\n        this._.el.$container.removeClass('pending');\n    },\n\n    remove: function() {\n        this._.emitter.trigger('tag.remove', this.getName());\n        this._super();\n    }\n});\n","Namespace('Imgur.Tag');\n\nImgur.Tag.OutsideTaggingWidget = Class.extend({\n    init: function($outsideTagging, $outsideTaggingParent, $tagShowHide, emitter) {\n        this._ = {\n            emitter                : emitter,\n            showBestCommentsCookie : 'showComments',\n            showTagsCookie         : 'showTags',\n            el: {\n                $outsideTaggingParent: $outsideTaggingParent,\n                $outsideTagging: $outsideTagging,\n                $tagShowHide: $tagShowHide\n            }\n        };\n    },\n\n    isOpen: function() {\n        return $.cookie(this._.showTagsCookie);\n    },\n\n    toggle: function(comments) {\n        var hidden = this._.el.$outsideTaggingParent.hasClass('hidden');\n        \n        $('.tipsy').remove();\n\n        if(hidden) {\n            this._.el.$outsideTaggingParent.removeClass('hidden');\n            this._.el.$tagShowHide.attr('title', 'Hide Sidebar');\n            this._.el.$outsideTagging.stop(true, true).fadeTo(0, 1);\n        } else {\n            this._.el.$outsideTaggingParent.addClass('hidden');\n            this._.el.$tagShowHide.attr('title', 'Show Sidebar');\n            this._.el.$outsideTagging.stop(true, true).delay(100).fadeTo(100, 0);\n        }\n\n        if(comments) {\n            this.setBestCommentsCookie(hidden? 1: 0);\n        } else {\n            this.setTagBoxCookie(hidden? 1: 0);\n        }\n    },\n\n    openTagBox: function() {\n        if(!this.isOpen()) {\n            this.toggle(false);\n        }\n    },\n    \n    setTagBoxCookie: function(value) {\n        if(value) {\n            $.cookie(this._.showTagsCookie, value, {'path': '/', expires: 10000});\n        } else {\n            $.removeCookie(this._.showTagsCookie, {'path': '/'});\n        }\n    },\n    \n    setBestCommentsCookie: function(value) {\n        if(value) {\n            $.cookie(this._.showBestCommentsCookie, value, {'path': '/', expires: 10000});\n        } else {\n            $.removeCookie(this._.showBestCommentsCookie, {'path': '/'});\n        }\n    }\n});\n","Namespace('Imgur.Tag');\n\nImgur.Tag.Model = Class.extend({\n    /**\n     * Primary tags: list of string; tag names to automatically exclude from success cb\n     */\n    init: function(ajax, tagProvider) {\n        this._ = {\n            ajax: ajax,\n            tagProvider: tagProvider,\n            queryNonce: 0,\n            pendingRequest: null\n        };\n    },\n\n    cancel: function() {\n        this._.queryNonce++;\n\n        if(null != this._.pendingRequest) {\n            this._.pendingRequest.abort();\n        }\n    },\n\n    fetch: function(queryContext, url, cb, data) {\n        this.cancel();\n        this._.pendingRequest = this._.ajax(url, data, _.bind(this._handleResponse, this, this._.queryNonce, queryContext, cb || _.noop), _.bind(this._handleError, this, queryContext));\n    },\n\n    responseWasSuccessful: function(response) {\n        return !!response.success;\n    },\n\n    _handleResponse: function(nonce, queryContext, success_callback, response) {\n        this._.pendingRequest = null;\n\n        if(nonce < this._.queryNonce) {\n            // nonce was either cancelled or another fetch is happening. \n            // only proceed with the latest request.\n            return;\n        }\n\n        this._.queryNonce++;\n        if(response && this.responseWasSuccessful(response)) {\n            success_callback(queryContext, this._handleResponseSuccess(queryContext, response));\n        }\n    },\n\n    _handleError: function(queryContext) {\n        throw 'abstract';\n    },\n\n    _handleResponseSuccess: function(queryContext, response) {\n        throw 'abstract';\n    }\n});\n","Namespace('Imgur.Tag');\n\nImgur.Tag.SuggestModel = Imgur.Tag.Model.extend({\n    init: function(ajax, tagProvider, autoSuggestUrl) {\n        this._super(ajax, tagProvider);\n        this._.autoSuggestUrl = autoSuggestUrl;\n    },\n    \n    fetch: function(group_id, query, cb, chosen_cb) {\n        this._super([group_id, query, chosen_cb], this._.autoSuggestUrl + '/tags/_suggest', cb, JSON.stringify({\n            'tags' : {\n                'text' : query,\n                'completion' : {\n                    'field' : 'name_suggest',\n                    'size': 10,\n                    \"fuzzy\" : {\n                        \"edit_distance\" : 1\n                    }\n                }\n            }\n        }));\n    },\n\n    responseWasSuccessful: function(response) {\n        return response._shards.successful > 0;\n    },\n\n    _handleResponseSuccess: function(queryContext, response) {\n        var tags = [];\n\n        var group_id = queryContext[0],\n            query = queryContext[1],\n            clicked_cb = queryContext[2];\n\n        _.each(response.tags[0].options, _.bind(function(tag_obj, key) {\n            tags.push(this._.tagProvider(clicked_cb, group_id, tag_obj.text, tag_obj.payload.subscribed));\n        }, this));\n\n        return tags;\n    },\n\n    toString: function() {\n        return '[tag suggestion model]';\n    }\n});\n","Namespace('Imgur.Tag');\n\nImgur.Tag.SuggestModelNoProvider = Imgur.Tag.Model.extend({\n    init: function(ajax, autoSuggestUrl) {\n        this._super(ajax, null);\n        this._.autoSuggestUrl = autoSuggestUrl;\n    },\n    \n    fetch: function(query, cb) {\n        if(query) {\n            this._super(query, this._.autoSuggestUrl + '/tags/_suggest', cb, JSON.stringify({\n                'tags' : {\n                    'text' : query,\n                    'completion' : {\n                        'field' : 'name_suggest',\n                        'size': 10,\n                        \"fuzzy\" : {\n                            \"edit_distance\" : 1\n                        }\n                    }\n                }\n            }));\n        } else {\n            cb('', []);\n        }\n    },\n\n    responseWasSuccessful: function(response) {\n        return response._shards.successful > 0;\n    },\n\n    _handleResponseSuccess: function(queryContext, response) {\n        var tags = [];\n\n        var query = queryContext;\n\n        _.each(response.tags[0].options, _.bind(function(tag_obj, key) {\n            tags.push({\n                tag: tag_obj.text,\n                subscribers: tag_obj.payload.subscribed,\n                images: tag_obj.payload.images\n            });\n        }, this));\n\n        return tags;\n    },\n\n    _handleError: _.noop\n});\n","Namespace('Imgur.Tag');\n\nImgur.Tag.AutocompleteComponent = React.createClass({\n    displayName: 'Tag-AutocompleteComponent',\n\n    getInitialState: function() {\n        return {\n            hidden: '',\n        };\n    },\n    \n    getDefaultProps: function() {\n        return {\n            KEYCODES: {\n                KEY_T           : 84,\n                KEY_ESC         : 27,\n                KEY_DOWN_ARROW  : 40,\n                KEY_RIGHT_ARROW : 39,\n                KEY_UP_ARROW    : 38,\n                KEY_ENTER       : 13,\n                KEY_TAB         : 9\n            }\n        };\n    },\n\n    focus: function() {\n        this.refs.query.focus();\n    },\n    \n    moveCursorToEnd: function(el) {\n        el.selectionStart = el.selectionEnd = el.value.length;\n        el.style.display  = 'none';\n        el.offsetHeight;\n        el.style.display  = 'block';\n        el.focus();\n    },\n\n    handleKeyDown: function(e) {\n        //remove error tipsies\n        $('.tipsy').remove();\n\n        //If tag input is empty and user presses tab then they want to get out of box\n        if (e.keyCode == 9 && this._getAcInfo().queryDisplayed != '') {\n            e.preventDefault();\n        }\n\n        var key = {\n            down_arrow  : (e.keyCode === this.props.KEYCODES.KEY_DOWN_ARROW),\n            up_arrow    : (e.keyCode === this.props.KEYCODES.KEY_UP_ARROW),\n            right_arrow : (e.keyCode === this.props.KEYCODES.KEY_RIGHT_ARROW),\n            enter       : (e.keyCode === this.props.KEYCODES.KEY_ENTER),\n            tab         : (e.keyCode === this.props.KEYCODES.KEY_TAB),\n            modifier    : !!e.metaKey || !!e.ctrlKey || !!e.altKey\n        };\n\n        if (key.modifier) {\n            return;\n        }\n        \n        if(key.enter) {\n            this.handleSubmit(e);\n        }\n        \n        var suggestions = this.props.suggestionStore.getSuggestions();\n\n        if (suggestions.length == 0) {\n            suggestions = this.props.defaultTags || [];\n        }\n\n        if(suggestions.length) {\n            var curIdx = this.props.getAutocompleteIdx();\n\n            if(key.down_arrow || key.up_arrow) {\n                var step = 0;\n\n                if(key.down_arrow) {\n                    step = 1;\n                } else {\n                    step = -1;\n                }\n\n                if((curIdx === 0 && key.up_arrow) || (curIdx === suggestions.length - 1 && key.down_arrow)) {\n                    this.props.setComponentState({\n                        selectionActive: false,\n                        autocompleteIdx: null\n                    });\n                    return;\n                }\n                    \n                if(curIdx == null) {\n                    if(key.up_arrow) {\n                        curIdx = suggestions.length - 1;\n                    } else {\n                        curIdx = 0;\n                    }\n                } else {\n                    curIdx = (((curIdx + step) % suggestions.length) + suggestions.length) % suggestions.length;\n                }\n\n                this.props.setComponentState({\n                    selectionActive: true,\n                    autocompleteIdx: curIdx\n                });\n            } else if(key.right_arrow || key.tab) {\n                var acText = suggestions[0].tag,\n                    query  = this.refs.query;\n\n                if(curIdx != null) {\n                    acText = suggestions[curIdx].tag;\n                } else if(typeof query.selectionEnd == \"number\" && query.selectionEnd == query.value.length) {\n                    this.moveCursorToEnd(query);\n                }\n\n                this.props.suggestionStore.setQuery(acText);\n                this.handleKeyPress(e);\n\n                if(key.tab) {\n                    this.props.setComponentState({\n                        focusDue: true\n                    });\n                }\n            }\n        }\n    },\n    \n    handleKeyPress: function(e) {\n        //32 == space key which doesn't count toward width at the end of a span so fill it with a dummy character to get the actual width\n        var temptext = this._getAcInfo().queryDisplayed + (e.which == 32 ? 'm' : String.fromCharCode(e.which));\n        var temp     = $('<span />').text(temptext);\n        $('body').append(temp);\n        \n        if(temp.width() > $(this.refs.query).width()) {\n            this.setState({\n                hidden: 'hidevis'\n            });\n        } else {\n            this.setState({\n                hidden: ''\n            })\n        }\n        \n        temp.remove();\n    },\n    \n    handleChangedQuery: function(e) {\n        this.props.suggestionStore.setValidationMode('query');\n        this.props.suggestionStore.setQuery(e.target.value);\n\n        this.props.setComponentState({\n            selectionActive: false,\n            autocompleteIdx: null\n        });\n    },\n    \n    handleSubmit: function(e) {\n        e.preventDefault();\n\n        this.props.suggestionStore.setValidationMode('submit');\n\n        var acInfo = this._getAcInfo();\n        var query = acInfo.queryDisplayed; // use the autosuggested query rather than the user's (possibly overridden) query\n\n        var isValid = this.props.suggestionStore.getIsValidQuery(query);\n\n        if(isValid) {\n            this.props.onSubmit(query, e);\n        }\n    },\n    \n    focused: function() {\n        this.props.setComponentState({\n            focusDue: false\n        });\n    },\n    \n    _getAcInfo: function() {\n        var query = this.props.suggestionStore.getQuery(),\n            acText = '',\n            suggestions = this.props.suggestionStore.getSuggestions();\n\n        if (suggestions.length == 0) {\n            suggestions = this.props.defaultTags || [];\n        }\n\n        if(suggestions.length && this.props.getAutocompleteIdx() != null) {\n            acText = suggestions[this.props.getAutocompleteIdx()].tag;\n        } else if(suggestions.length) {\n            acText = suggestions[0].tag;\n        }\n\n        var prefix = this._longestCommonPrefix(acText, query);\n\n        if(!prefix || (prefix != query && !this.props.getSelectionActive())) {\n            acText = '';\n        }\n\n        return {\n            acText: acText,\n            queryDisplayed: (this.props.getAutocompleteIdx() != null && this.props.getSelectionActive()) ? acText : query\n        };\n    },\n    \n    /**\n     * A bit naive\n     */\n    _longestCommonPrefix: function(alpha, beta) {\n        //default tag has no beta\n        if(!beta) {\n            return alpha;\n        }\n\n        var i = Math.min(alpha.length, beta.length);\n\n        while(i >= 0) {\n            if(alpha.substr(0, i) == beta.substr(0, i)) {\n                return alpha.substr(0, i);\n            }\n\n            i--;\n        }\n\n        return '';\n    },\n    \n    componentDidUpdate: function() {        \n        if(this.props.maybeErrorLabel || this.props.maybeAjaxErrorLabel) {\n            $('.tipsy-error').tipsy({\n                cls:     'error-tipsy',\n                gravity: 'w',\n                trigger: 'manual',\n                title:   'data-title'\n            }).tipsy('show');\n        }\n    },\n    \n    render: function() {\n        return React.DOM.div({className: 'acContainer'},\n            React.DOM.input({\n                ref: 'query',\n                onChange: this.handleChangedQuery,\n                type: 'text',\n                id: this.props.id ? this.props.id : 'tagbox',\n                placeholder: this.props.placeholder,\n                tabIndex: this.props.tabIndex,\n                value: this._getAcInfo().queryDisplayed,\n                onKeyDown: this.handleKeyDown,\n                onKeyPress: this.handleKeyPress,\n                autoComplete: 'off',\n                'data-title': this.props.maybeErrorLabel ? this.props.maybeErrorLabel : (this.props.maybeAjaxErrorLabel ? this.props.maybeAjaxErrorLabel : ''),\n                className: this.props.className + ((this.props.maybeErrorLabel || this.props.maybeAjaxErrorLabel) ? ' tipsy-error' : '')\n            }),\n            React.DOM.input({id: 'acText', type: 'text', autoComplete: 'off', readOnly: true, ref: 'hint', className: this.state.hidden, value: this._getAcInfo().acText})\n        );\n    }\n});\n","Namespace('Imgur.Tag');\n\nImgur.Tag.Comparator = Class.extend({\n    compare: function(left, right) {\n        var leftName = left.getName(),\n            rightName = right.getName();\n\n        if(rightName == leftName) {\n            return 0;\n        }\n\n        var result = [leftName, rightName];\n        result.sort();\n\n        if(result[0] == leftName) {\n            return -1;\n        } else {\n            return 1;\n        }\n    }\n});\n","Namespace('Imgur.Tag');\n\nImgur.Tag.ShareTagComponent = React.createClass({\n    displayName: 'Tag-ShareTagComponent',\n\n    getInitialState: function() {\n        return {\n            focusDue: true,\n            selectionActive: false,\n            autocompleteIdx: null\n        };\n    },\n    \n    _encode: function(tag) {\n        return tag.replace(new RegExp(' ', 'g'), '_');\n    },\n\n    handleTagClicked: function(tag, e) {\n        e.preventDefault();\n    },\n\n    handleRemoveClicked: function(tag, e) {\n        e.preventDefault();\n        this.props.tagStore.removeTag(tag);\n    },\n\n    handleQueryChange: function(e) {\n        this.props.suggestionStore.setQuery(e.target.value);\n    },\n\n    handleChoice: function(tag, e) {\n        e.preventDefault();\n\n        this.props.suggestionStore.setValidationMode('query');\n        this.props.suggestionStore.clear();\n        this.props.suggestionStore.setQuery('');\n\n        this.props.tagStore.addTag({\n            tag: tag\n        });\n        \n        this.setState({\n            selectionActive: false,\n            autocompleteIdx: null\n        });\n    },\n    \n    getSelectionActive: function() {\n        return this.state.selectionActive;\n    },\n    \n    getAutocompleteIdx: function() {\n        return this.state.autocompleteIdx;\n    },\n    \n    setComponentState: function(options) {\n        this.setState(options);\n    },\n    \n    componentDidMount: function() {\n        this._updateNano();\n    },\n\n    componentDidUpdate: function() {\n        this._updateNano();\n    },\n\n    _updateNano: function() {\n        var $nanoDiv = $(this.refs.nano),\n            contentDiv = this.refs.content;\n\n        $nanoDiv.height('inherit').height(contentDiv.scrollHeight);\n\n        $nanoDiv.nanoScroller({\n            preventPageScrolling: true,\n            alwaysVisible: true\n        });\n\n        if($nanoDiv.children('.pane').is(':visible')) {\n            $nanoDiv.addClass('nano-visible');\n        } else {\n            $nanoDiv.removeClass('nano-visible');\n        }\n    },\n    \n    stopPropagation: function(e) {\n        e.stopPropagation();\n    },\n    \n    _produceTag: function(selected, tagName, images) {\n        return React.DOM.div({onClick: _.partial(this.handleChoice, tagName), className: 'tag suggested pointer' + (selected ? ' hover' : '')}, \n            React.DOM.div({className: 'name'}, tagName),\n            React.DOM.div({className: 'images'}, Imgur.Util.numberFormat(images) + ' images')\n        );\n    },\n\n    render: function() {\n        var lastFinishedQuery   = this.props.suggestionStore.getLastFinishedQuery(), \n            query               = this.props.suggestionStore.getQuery(),\n            acText              = '',\n            isValidQuery        = this.props.suggestionStore.getIsValidQuery(query),\n            ifNotMessage        = this.props.suggestionStore.getWhyNot(query),\n            loading             = this.props.suggestionStore.getIsLoading(),\n            suggestions         = this.props.suggestionStore.getSuggestions(),\n            content             = [],\n            defaultTags         = [],\n            filteredDefaultTags = [],\n            tags                = [],\n            tagNames            = Object.keys(this.props.tagStore.getTags()),\n            tagsLength          = 0,\n            tagCountClass       = ''\n            tagCountText        = '';\n        \n        if(!lastFinishedQuery.length) {\n            content.push(React.DOM.div({className: 'empty'}, ''));\n        } else {            \n            _.each(suggestions, _.bind(function(stag, i) {\n                var selected = (this.state.autocompleteIdx != null && i == this.state.autocompleteIdx && this.state.selectionActive);\n                content.push(this._produceTag(selected, stag.tag, stag.images));\n            }, this));\n    \n            if(!suggestions.length && isValidQuery) {\n                var lastQuery = (loading ? lastFinishedQuery : query);\n                content.push(React.DOM.p({className: 'empty'}, 'No tag like ', React.DOM.em(null, lastQuery), ' found. ', \n                    React.DOM.a({className: 'tag-create-from-empty-query', href: '#', onClick: _.partial(this.handleChoice, lastQuery)}, 'Make it!')));\n            }\n        }\n        \n        //Show default tags for focused empty tag input with no query\n        if(content.length < 2 && tagNames.length == 0 && !suggestions.length && (!loading || !query.length)) {\n            //Filter out already selected default tags\n            filteredDefaultTags = _.filter(this.props.defaultTags, function(dtag){\n                return tagNames.indexOf(dtag.tag) == -1;\n            });\n\n            _.each(filteredDefaultTags, _.bind(function(dtag, i) {\n                if(tagNames.indexOf(dtag.tag) == -1) {\n                    var selected = (this.state.autocompleteIdx != null && i == this.state.autocompleteIdx && this.state.selectionActive);\n                    defaultTags.push(this._produceTag(selected, dtag.tag, dtag.images));\n                }\n            }, this));\n        }\n            \n        tags = _.map(tagNames, _.bind(function(tag) {\n            \n            //Can't remove default gallery type tag\n            if (tag == this.props.gallery_type) {\n                return React.DOM.div({className: 'tag-removable'},\n                    React.DOM.span(null, tag)\n                );\n            } else {\n                return React.DOM.div({className: 'tag-removable'},\n                    React.DOM.span(null, tag),\n                    React.DOM.a({onClick: _.partial(this.handleRemoveClicked, tag), href: '#', className: 'remove'}, ''),\n                    React.DOM.input({type: 'hidden', name: 'tag[]', value: tag})\n                );\n            }\n        }, this));\n        \n        tagsLength = tags.length;\n        \n        if(tagsLength >= this.props.tagLimit) {\n            tagCountClass = 'filled';\n        } else if(tagsLength > 0) {\n            tagCountClass = 'filling';\n        }\n        \n        if(this.refs.query && $(this.refs.query).find('input').is(':focus')) {\n            tagCountText = 'Press enter to add tag ';\n        }\n\n        return React.DOM.div(null,\n            tags,\n            React.DOM.div({className: 'tag-filter'},\n                React.createElement(Imgur.Tag.AutocompleteComponent,{\n                    onSubmit: this.handleChoice,\n                    ref: 'query',\n                    id: (tagsLength >= this.props.tagLimit) ? 'tagbox-hidden' : this.props.id,\n                    type: 'text',\n                    autoComplete: 'off',\n                    placeholder: this.props.placeholder,\n                    tabIndex: this.props.tabIndex,\n                    defaultTags: filteredDefaultTags,\n                    suggestionStore: this.props.suggestionStore,\n                    getAutocompleteIdx: this.getAutocompleteIdx,\n                    getSelectionActive: this.getSelectionActive,\n                    setComponentState: this.setComponentState,\n                    maybeErrorLabel: ifNotMessage\n                }),\n                React.DOM.div({ref: 'nano', className: 'tag-list-content nano'}, \n                    React.DOM.div({ref: 'content', className: 'tag-list-results scroll-content content'},\n                        (filteredDefaultTags.length || (suggestions.length && isValidQuery)) ? React.DOM.p({}, 'TAG SUGGESTIONS') : '',\n                        content,\n                        defaultTags\n                    )\n                )\n            ),\n            React.DOM.p({id: 'tag-count', className: 'limit'}, tagCountText,\n                React.DOM.span({className: tagCountClass}, '(' + tagsLength + '/' + this.props.tagLimit + ')')\n            )\n        );\n    }\n});\n","Namespace('Imgur.Tag');\n\nImgur.Tag.TagListComponent = React.createClass({\n    displayName: 'Tag-TagListComponent',\n\n    getInitialState: function() {\n        return {\n            focusDue: true,\n            selectionActive: false,\n            autocompleteIdx: null\n        };\n    },\n    \n    _encode: function(tag) {\n        return tag.replace(new RegExp(' ', 'g'), '_');\n    },\n\n    handleTagClicked: function(tag, e) {\n        e.preventDefault();\n\n        var isActive = this.props.outsideActiveTagStore.getIsActive(),\n            activeTag = this.props.outsideActiveTagStore.getActiveTag();\n\n        if(isActive && (tag === activeTag)) {\n            this.props.outsideActiveTagStore.deactivate();\n        } else {\n            this.props.outsideActiveTagStore.setActiveTag(tag);\n        }\n    },\n\n    handleRemoveClicked: function(tag, e) {\n        e.preventDefault();\n\n        if('[filtered]' === this.props.groupId) {\n            this.props.groupModel.unblock(this.props.groupId, tag);\n        } else {\n            this.props.groupModel.unsubscribe(this.props.groupId, tag);\n        }\n    },\n\n    handleQueryChange: function(e) {\n        this.props.suggestionStore.setQuery(e.target.value);\n    },\n\n    handleChoice: function(tag, e) {\n        e.preventDefault();\n\n        this.props.suggestionStore.setValidationMode('query');\n        this.props.suggestionStore.clear();\n        this.props.suggestionStore.setQuery('');\n\n        if('[filtered]' === this.props.groupId) {\n            this.props.groupModel.block(this.props.groupId, tag);\n        } else {\n            if(!this.props.tagGroupStore.isTagInGroup(tag, this.props.groupId)) {\n                this.props.groupModel.subscribe(this.props.groupId, tag);\n            }\n        }\n    },\n    \n    getSelectionActive: function() {\n        return this.state.selectionActive;\n    },\n    \n    getAutocompleteIdx: function() {\n        return this.state.autocompleteIdx;\n    },\n    \n    setComponentState: function(options) {\n        this.setState(options);\n    },\n    \n    componentDidMount: function() {\n        this._updateNano();\n    },\n\n    componentDidUpdate: function() {\n        this._updateNano();\n    },\n\n    _updateNano: function() {\n        var $nanoDiv = $(this.refs.nano),\n            contentDiv = this.refs.content;\n\n        $nanoDiv.height('inherit').height(contentDiv.scrollHeight);\n\n        $nanoDiv.nanoScroller({\n            preventPageScrolling: true\n        });\n\n        if($nanoDiv.children('.pane').is(':visible')) {\n            $nanoDiv.addClass('nano-visible');\n        } else {\n            $nanoDiv.removeClass('nano-visible');\n        }\n    },\n\n    render: function() {\n        var lastFinishedQuery   = this.props.suggestionStore.getLastFinishedQuery(), \n            query               = this.props.suggestionStore.getQuery(),\n            acText              = '',\n            isValidQuery        = this.props.suggestionStore.getIsValidQuery(query),\n            ifNotMessage        = this.props.suggestionStore.getWhyNot(query),\n            groupId             = this.props.groupId,\n            activeTag           = this.props.outsideActiveTagStore.getActiveTag(),\n            loading             = this.props.suggestionStore.getIsLoading(),\n            suggestions         = this.props.suggestionStore.getSuggestions(),\n            failedTag           = this.props.tagGroupStore.getFailedTag(),\n            maybeErrorLabel     = '',\n            maybeAjaxErrorLabel = '';\n        \n        var content = [];\n        \n        if(!lastFinishedQuery.length) {\n            content = _.map(this.props.tagGroupStore.getTagsForGroup(groupId), _.bind(function(tag) {\n                return React.DOM.div({className: 'tag tag-removable ' + ((tag === activeTag) ? 'selected' : '') + (this.props.tagGroupStore.isPending(tag, groupId) ? ' pending' : '')},\n                    React.DOM.a({onClick: _.partial(this.handleTagClicked, tag), href: '/t/' + this._encode(tag), className: 'name'}, tag),\n                    React.DOM.a({onClick: _.partial(this.handleRemoveClicked, tag), href: '#', className: 'remove'}, '')\n                );\n            }, this));\n        } else {\n            content = _.map(suggestions, _.bind(function(stag, i) {\n                var selected = (this.state.autocompleteIdx != null && i == this.state.autocompleteIdx && this.state.selectionActive);\n                return React.DOM.div({onClick: _.partial(this.handleChoice, stag.tag), className: 'tag suggested' + (selected ? ' hover' : '')}, \n                    React.DOM.span({className: 'name'}, stag.tag),\n                    React.DOM.div({className: 'add'}, React.DOM.span({className: 'plus-icon'}, ''))\n                );\n            }, this));\n\n            if(!suggestions.length && isValidQuery) {\n                var lastQuery = (loading ? lastFinishedQuery : query);\n                content.push(React.DOM.p({id: 'new-empty-tag'}, React.DOM.span({className: 'icon-alert'}, ''), 'Are you sure you want to create ', React.DOM.em(null, lastQuery)));\n            }\n        }\n\n        if(!content.length) {\n            var msg = '';\n\n            if(this.props.groupId == '[filtered]') {\n                msg = 'Add tags to be filtered out.';\n            }\n\n            content.push(React.DOM.div({className: 'empty'}, msg));\n        }\n\n        if(!isValidQuery) {\n            maybeErrorLabel = ifNotMessage;\n        }\n\n        if(failedTag) {\n            maybeAjaxErrorLabel = failedTag;\n        }\n\n        return React.DOM.div(null,\n            React.DOM.div({className: 'tag-filter'},\n                React.createElement(Imgur.Tag.AutocompleteComponent,{\n                    onSubmit: this.handleChoice,\n                    ref: 'query',\n                    id: this.props.id ? this.props.id : 'tagbox',\n                    type: 'text',\n                    autoComplete: 'off',\n                    placeholder: this.props.placeholder,\n                    maybeErrorLabel: maybeErrorLabel,\n                    maybeAjaxErrorLabel: maybeAjaxErrorLabel,\n                    suggestionStore: this.props.suggestionStore,\n                    getAutocompleteIdx: this.getAutocompleteIdx,\n                    getSelectionActive: this.getSelectionActive,\n                    setComponentState: this.setComponentState\n                })\n            ),\n            React.DOM.div({ref: 'nano', className: 'tag-list-content nano'}, \n                React.DOM.div({ref: 'content', className: 'tag-list-results scroll-content content'},\n                    content\n                )\n            )\n        );\n    }\n});\n","Namespace('Imgur.Tag.Validator');\n\nImgur.Tag.TagValidator = Class.extend({\n    TAG_REGEX: /^[a-zA-Z0-9\\_ ]*$/,\n\n    init: function(min_length, max_length) {\n        this._ = {\n            maxLength: max_length,\n            minLength: min_length\n        };\n    },\n\n    isValidTag: function(cause, query, isDuplicate) {\n        return this._validateTag(cause, query, isDuplicate).success;\n    },\n\n    whyNot: function(cause, query, isDuplicate) {\n        return this._validateTag(cause, query, isDuplicate).message;\n    },\n\n    _validateTag: function(cause, query, isDuplicate) {\n        var validationResult = {\n            success: true,\n            message: null\n        };\n\n        query = query.trim().toLowerCase();\n\n        if(query.match(Object.getPrototypeOf(this).TAG_REGEX) == null) {\n            validationResult.message = 'Tags can only contain alphanumeric, space, and underscore characters.';\n            validationResult.success = false;\n        }\n\n        if(isDuplicate) {\n            validationResult.message = 'This tag has already been added';\n            validationResult.success = false;\n        }\n\n        if(cause == 'submit' && query.length < this._.minLength) {\n            validationResult.message = 'Tag is too short. Tags can be between ' + this._.minLength + ' and ' + this._.maxLength + ' characters.';\n            validationResult.success = false;\n        } else if(query.length > this._.maxLength) {\n            validationResult.message = 'Tag is too long. Tags can be between ' + this._.minLength + ' and ' + this._.maxLength + ' characters.';\n            validationResult.success = false;\n        }\n\n        return validationResult;\n    }\n});\n","Namespace('Imgur.Tag.Validator');\n\nImgur.Tag.GroupValidator = Class.extend({\n    GROUP_REGEX: /^[a-zA-Z0-9&\\-\\s]*$/,\n\n    init: function(min_length, max_length) {\n        this._ = {\n            maxLength: max_length,\n            minLength: min_length\n        };\n    },\n\n    isValidGroup: function(cause, query) {\n        return this._validateGroup(cause, query).success;\n    },\n\n    whyNot: function(cause, query) {\n        return this._validateGroup(cause, query).message;\n    },\n\n    _validateGroup: function(cause, query) {\n        var validationResult = {\n            success: true,\n            message: null\n        };\n\n        query = query.trim();\n        \n        if(query.match(Object.getPrototypeOf(this).GROUP_REGEX) == null) {\n            validationResult.message = 'Galleries can only contain alphanumeric and others (&-).';\n            validationResult.success = false;\n        }\n\n        if(cause == 'submit' && query.length < this._.minLength) {\n            validationResult.message = 'Gallery is too short. Galleries can be between ' + this._.minLength + ' and ' + this._.maxLength + ' characters.';\n            validationResult.success = false;\n        } else if(query.length > this._.maxLength) {\n            validationResult.message = 'Gallery is too long. Galleries can be between ' + this._.minLength + ' and ' + this._.maxLength + ' characters.';\n            validationResult.success = false;\n        }\n\n        return validationResult;\n    }\n});","Namespace('Imgur.Tag');\n\nImgur.Tag.Sentence = Class.extend({\n    init: function($before, $middle, groupStore) {\n        this._ = {\n            groupStore: groupStore,\n            el: {\n                $before: $before,\n                $middle: $middle\n            }\n        };\n    },\n\n    get$Before: function() {\n        return this._.el.$before;\n    },\n\n    get$Middle: function() {\n        return this._.el.$middle;\n    },\n\n    change: function(mode) {\n        if('hot' == mode) {\n            this._.el.$before.text('The');\n        } else if('gallery-other' == mode || 'usersub' == mode || 'subreddit' == mode) {\n            this._.el.$before.text('');\n        } else if('tag' == mode) {\n            this._.el.$before.text('Images tagged with');\n        } else if('gallery' == mode) {\n            this._.el.$before.text('Your');\n        }\n\n        var middle_text = ', sorted by';\n\n        if('hot' == mode) {\n            middle_text = 'images on the Internet' + middle_text;\n        } else if('usersub' == mode || 'subreddit' == mode) {\n            middle_text = 'images' + middle_text;\n        } else if('gallery' == mode || 'gallery-other' == mode) {\n            middle_text = ' gallery' + middle_text;\n        }\n\n        this._.el.$middle.text(middle_text);\n    }\n});\n","Namespace('Imgur.Tag.Store');\n\nImgur.Tag.Store.Suggestion = Class.extend({\n    init: function(emitter, tagValidator) {\n        this._ = {\n            tagValidator: tagValidator,\n            emitter: emitter,\n            suggestions: [],\n            query: '',\n            lastFinishedQuery: '',\n            validationMode: 'query',\n            loading: false\n        };\n    },\n\n    getIsLoading: function() {\n        return this._.loading;\n    },\n    \n    setIsLoading: function(isloading) {\n        this._.loading = isloading;\n\n        this._.emitter.trigger('new suggestions');\n    },\n\n    setValidationMode: function(mode) {\n        this._.validationMode = mode;\n\n        this._.emitter.trigger('new suggest validation mode');\n    },\n\n    getIsValidQuery: function(query) {\n        return this._.tagValidator.isValidTag(this._.validationMode, query);\n    },\n\n    getWhyNot: function(query) {\n        return this._.tagValidator.whyNot(this._.validationMode, query);\n    },\n\n    getQuery: function() {\n        return this._.query.toLowerCase();\n    },\n\n    getLastFinishedQuery: function() {\n        return this._.lastFinishedQuery;\n    },\n\n    setLastFinishedQuery: function(query) {\n        this._.lastFinishedQuery = query;\n\n        this._.emitter.trigger('new finished query');\n    },\n\n    setQuery: function(value) {\n        this._.query = value;\n\n        this._.emitter.trigger('new suggest query');\n    },\n\n    getSuggestions: function() {\n        return this._.suggestions;\n    },\n\n    setSuggestions: function(suggestions) {\n        this._.suggestions = suggestions;\n\n        this._.emitter.trigger('new suggestions');\n    },\n\n    addSuggestion: function(suggest) {\n        this._.suggestions.push(suggest);\n\n        this._.emitter.trigger('new suggestions');\n    },\n\n    clear: function() {\n        this._.suggestions = [];\n\n        this._.emitter.trigger('new suggestions');\n    }\n});\n","Namespace('Imgur.Tag.Store');\n\nImgur.Tag.Store.CurrentImage = Class.extend({\n    init: function(emitter) {\n        this._ = {\n            emitter: emitter,\n            currentImage: null\n        };\n    },\n\n    setCurrentImage: function(image) {\n        this._.currentImage = image;\n        this._.emitter.trigger('current image updated');\n    },\n\n    getCurrentImage: function() {\n        return this._.currentImage;\n    },\n\n    getCurrentImageId: function() {\n        return this._.currentImage ? this._.currentImage.hash : null;\n    }\n});\n","Namespace('Imgur.Tag.Store');\n\nImgur.Tag.Store.Group = Class.extend({\n    init: function(emitter, groups) {\n        this._ = {\n            emitter: emitter,\n            groups: groups || {}\n        };\n    },\n\n    getGroups: function() {\n        return _.filter(_.values(this._.groups), function(group) {\n            return !group.deleted;\n        });\n    },\n\n    getGroup: function(hash) {\n        return this._.groups[hash];\n    },\n\n    haveGroup: function(hash) {\n        return this._.groups.hasOwnProperty(hash) && !this._.groups[hash].deleted;\n    },\n\n    addGroup: function(group) {\n        this._.groups[group.hash] = group;\n\n        this._.emitter.trigger('new group added');\n    },\n\n    removeGroup: function(hash) {\n        if(this._.groups.hasOwnProperty(hash)) {\n            delete this._.groups[hash];\n        }\n\n        this._.emitter.trigger('group deleted');\n    },\n\n    markDeleted: function(hash) {\n        if(this._.groups.hasOwnProperty(hash)) {\n            this._.groups[hash].deleted = true;\n        }\n\n        this._.emitter.trigger('group deleted');\n    }\n});\n","Namespace('Imgur.Tag.Store');\n\nImgur.Tag.Store.TagImage = Class.extend({\n    SOURCE: {\n        DEFAULT: 'default',\n        GALLERY_PAGE: 'page',\n        SUGGESTION: 'suggestion',\n        USER: 'user'\n    },\n\n    init: function(emitter) {\n        this._ = {\n            emitter: emitter,\n            tagsByHash: {}, // map hash -> (map tag -> tag)\n            ajaxErrors: {}, // map hash -> error msg\n            isLoading: false\n        };\n    },\n\n    setAjaxError: function(hash, msg) {\n        this._.ajaxErrors[hash] = msg;\n\n        this._.emitter.trigger('ajax error added to post');\n    },\n\n    unsetAjaxError: function(hash) {\n        delete this._.ajaxErrors[hash];\n\n        this._.emitter.trigger('ajax error removed from post');\n    },\n\n    getAjaxError: function(hash) {\n        if(this._.ajaxErrors.hasOwnProperty(hash)) {\n            return this._.ajaxErrors[hash];\n        } else {\n            return null;\n        }\n    },\n\n    getIsLoading: function() {\n        return this._.isLoading;\n    },\n\n    setIsLoading: function(loading) {\n        this._.isLoading = !!loading;\n\n        this._.emitter.trigger('ajax tag loading finished');\n    },\n\n    isTagOnPost: function(hash, tag) {\n        if(!this._.tagsByHash.hasOwnProperty(hash)) {\n            return false;\n        }\n\n        return this._.tagsByHash[hash].hasOwnProperty(tag);\n    },\n\n    getTagsForPost: function(hash) {\n        if(!this._.tagsByHash.hasOwnProperty(hash)) {\n            return [];\n        }\n\n        return this._.tagsByHash[hash];\n    },\n\n    haveTagsForPost: function(hash) {\n        return this._.tagsByHash.hasOwnProperty(hash);\n    },\n\n    addTagForPost: function(hash, tag_name, tag_obj) {\n        if(!this._.tagsByHash.hasOwnProperty(hash)) {\n            this._.tagsByHash[hash] = {};\n        }\n\n        if(this._.tagsByHash[hash].hasOwnProperty(tag_name)) {\n            // merge tag data, but keep the original source\n            var source = this._.tagsByHash[hash][tag_name].source;\n\n            tag_obj = _.merge({}, this._.tagsByHash[hash][tag_name], tag_obj, {\n                source: source\n            });\n        }\n\n        this._.tagsByHash[hash][tag_name] = tag_obj;\n\n        this._.emitter.trigger('tag added to post');\n    },\n\n    removeTagFromPost: function(hash, tag) {\n        if(this._.tagsByHash.hasOwnProperty(hash)) {\n            if(this._.tagsByHash[hash].hasOwnProperty(tag)) {\n                delete this._.tagsByHash[hash][tag];\n            }\n        }\n        \n        this._.emitter.trigger('tag removed from post');\n    },\n\n    getTag: function(hash, tag_name) {\n        if(!this._.tagsByHash.hasOwnProperty(hash)) {\n            return null;\n        }\n\n        if(!this._.tagsByHash[hash].hasOwnProperty(tag_name)) {\n            return null;\n        }\n\n        var tag = this._.tagsByHash[hash][tag_name];\n\n        return tag;\n    },\n\n    _getTagProp: function(hash, tag, prop) {\n        if(!this._.tagsByHash.hasOwnProperty(hash)) {\n            return null;\n        }\n\n        if(!this._.tagsByHash[hash].hasOwnProperty(tag)) {\n            return null;\n        }\n\n        var tag = this._.tagsByHash[hash][tag];\n\n        return tag[prop];\n    },\n\n    _setTagProp: function(hash, tag, prop, value) {\n        if(!this._.tagsByHash.hasOwnProperty(hash)) {\n            return;\n        }\n\n        if(!this._.tagsByHash[hash].hasOwnProperty(tag)) {\n            return;\n        }\n\n        var tag = this._.tagsByHash[hash][tag];\n\n        tag[prop] = value;\n\n        this._.emitter.trigger('image tag updated');\n    },\n\n    getTagVote: function(hash, tag) {\n        return this._getTagProp(hash, tag, 'vote');\n    },\n\n    setTagVote: function(hash, tag, vote) {\n        this._setTagProp(hash, tag, 'vote', vote);\n    },\n\n    setTagSource: function(hash, tag, source) {\n        this._setTagProp(hash, tag, 'source', source);\n    }\n});\n","Namespace('Imgur.Tag.Store');\n\nImgur.Tag.Store.Tag = Class.extend({\n    INTERESTING_FIELDS: ['tag', 'subscribers', 'images'],\n\n    init: function(emitter, limit) {\n        this._ = {\n            emitter: emitter,\n            tags: {}, // map tag name -> tag object\n            limit: limit || 0 //0 = unlimited tags\n        };\n    },\n\n    getTag: function(tagName) {\n        return this._.tags[tagName];\n    },\n    \n    getTags: function() {\n        return this._.tags;\n    },\n\n    haveTag: function(tagName) {\n        return this._.tags.hasOwnProperty(tagName);\n    },\n\n    getTagSubscribers: function(tag) {\n        if(this._.tags.hasOwnProperty(tag)) {\n            if(this._.tags[tag].hasOwnProperty('subscribers')) {\n                return this._.tags[tag].subscribers;\n            }\n        }\n\n        return 'n/a';\n    },\n\n    addTag: function(tag) {\n        if(this._.limit == 0 || Object.keys(this.getTags()).length != this._.limit) {\n            var mergeBasis = {};\n    \n            if(this._.tags.hasOwnProperty(tag.tag)) {\n                mergeBasis = this._.tags[tag.tag];\n            }\n    \n            tag                  = _.pick(tag, this.INTERESTING_FIELDS);\n            this._.tags[tag.tag] = _.merge({}, mergeBasis, tag);\n            this._.emitter.trigger('tag updated');\n        } else {\n            this._.emitter.trigger('tag limit reached');\n        }\n    },\n\n    removeTag: function(tagName) {\n        delete this._.tags[tagName];\n\n        this._.emitter.trigger('tag removed');\n    },\n    \n    setFollowing: function(tagName, following) {\n        var tag = this.getTag(tagName);\n        \n        if(tag) {\n            tag.following = following;\n        }\n    },\n\n    encode: function(tag_name) {\n        return encodeURIComponent(tag_name.replace(new RegExp(' ', 'g'), '_'));\n    }\n});\n","Namespace('Imgur.Tag.Store');\n\nImgur.Tag.Store.TagGroup = Class.extend({\n    ACTIONS: {\n        ADDED: 'added',\n        REMOVED: 'removed',\n        ERROR: 'error'\n    },\n\n    init: function(emitter) {\n        this._ = {\n            emitter: emitter,\n            groupsByTag         : {}, // map tag -> list of group hashes\n            tagsByGroup         : {}, // map group hash -> list of tags\n            pendingAddTags      : {}, // map group hash -> list of tags\n            groupsEventHistory  : {}, // map tag -> group hash -> action\n            failedTag           : \"\"\n        };\n    },\n\n    pushHistory: function(tag, group_hash, action) {\n        if(!this._.groupsEventHistory.hasOwnProperty(tag)) {\n            this._.groupsEventHistory[tag] = {};\n        }\n\n        if(!this._.groupsEventHistory[tag].hasOwnProperty(group_hash)) {\n            this._.groupsEventHistory[tag][group_hash] = [];\n        }\n\n        this._.groupsEventHistory[tag][group_hash].push({\n            time: Date.now(),\n            action: action\n        });\n\n        this._.emitter.trigger('new tag-group event');\n    },\n\n    getLatestTagGroupEvent: function(tag, group_hash) {\n        if(!this._.groupsEventHistory.hasOwnProperty(tag) || !this._.groupsEventHistory[tag].hasOwnProperty(group_hash)) {\n            return null;\n        }\n\n        var evts = this._.groupsEventHistory[tag][group_hash],\n            evt = evts[evts.length - 1];\n\n        return evt;\n    },\n\n    isTagInGroup: function(tag, group_hash) {\n        if(!this._.groupsByTag.hasOwnProperty(tag)) {\n            return false;\n        }\n        \n        return this._.groupsByTag[tag].indexOf(group_hash) !== -1 || (this._.pendingAddTags.hasOwnProperty(group_hash) && this._.pendingAddTags[group_hash].indexOf(tag) !== -1);\n    },\n\n    getTagsForGroup: function(group_hash) {\n        if(!this._.tagsByGroup.hasOwnProperty(group_hash)) {\n            return [];\n        }\n\n        if(this._.pendingAddTags.hasOwnProperty(group_hash)) {\n            return this._.tagsByGroup[group_hash].concat(this._.pendingAddTags[group_hash]);\n        }\n\n        return this._.tagsByGroup[group_hash];\n    },\n\n    getGroupHashesForTag: function(tag) {\n        if(!this._.groupsByTag.hasOwnProperty(tag)) {\n            return [];\n        }\n\n        return this._.groupsByTag[tag];\n    },\n\n    addTagToGroup: function(tag, group_hash) {\n        if(!this._.groupsByTag.hasOwnProperty(tag)) {\n            this._.groupsByTag[tag] = [];\n        }\n\n        if(!this._.tagsByGroup.hasOwnProperty(group_hash)) {\n            this._.tagsByGroup[group_hash] = [];\n        }\n\n        this._.groupsByTag[tag].push(group_hash);\n        this._.tagsByGroup[group_hash].push(tag);\n\n        this._.emitter.trigger('tag added to group');\n    },\n\n    removeTagFromGroup: function(tag, group_hash) {\n        if(this._.groupsByTag.hasOwnProperty(tag)) {\n            this._.groupsByTag[tag] = _.filter(this._.groupsByTag[tag], function(cur_hash) {\n                return (cur_hash != group_hash);\n            });\n        }\n\n        if(this._.tagsByGroup.hasOwnProperty(group_hash)) {\n            this._.tagsByGroup[group_hash] = _.filter(this._.tagsByGroup[group_hash], function(cur_tag) {\n                return (cur_tag != tag);\n            });\n        }\n\n        this._.emitter.trigger('tag removed from group');\n    },\n    \n    addPendingTag: function(tag, group_hash) {\n        if(this._.pendingAddTags[group_hash] && this._.pendingAddTags[group_hash].length) {\n            this._.pendingAddTags[group_hash].push(tag);\n        } else {\n            this._.pendingAddTags[group_hash] = [tag];\n        }\n\n        this._.emitter.trigger('pending tag added to group');\n    },\n    \n    removePendingTag: function(tag, group_hash) {\n        var index = this._.pendingAddTags[group_hash].indexOf(tag);\n\n        if(index > -1) {\n            this._.pendingAddTags[group_hash].splice(index, 1);\n            this._.emitter.trigger('pending tag removed from group');\n        }\n    },\n    \n    isPending: function(tag, group_hash) {\n        if(this._.pendingAddTags.hasOwnProperty(group_hash)) {\n            return _.contains(this._.pendingAddTags[group_hash], tag);\n        }\n        return false;\n    },\n    \n    getFailedTag: function() {\n        return this._.failedTag;\n    },\n    \n    setFailedTag: function (tag) {\n        this._.failedTag = tag;\n    },\n    \n    getTags: function(){\n        return this._.groupsByTag;\n    }\n});\n","Namespace('Imgur.Tag.Store');\n\nImgur.Tag.Store.OutsideActiveTag = Class.extend({\n    init: function(emitter) {\n        this._ = {\n            emitter: emitter,\n            activeTag: null\n        };\n    },\n\n    getIsActive: function() {\n        return (null != this._.activeTag);\n    },\n\n    getActiveTag: function() {\n        return this._.activeTag;\n    },\n\n    getActiveTagEncoded: function() {\n        return this._.activeTag.replace(new RegExp(' ', 'g'), '_');\n    },\n\n    setActiveTag: function(tag_name, fromPopState) {\n        this._.activeTag = tag_name;\n        this._.emitter.trigger('new outside active tag', !!fromPopState);\n    },\n\n    deactivate: function(fromPopState) {\n        this._.activeTag = null;\n        this._.emitter.trigger('new outside active tag', !!fromPopState);\n    }\n});\n","Namespace('Imgur.Tag.Controller');\n\nImgur.Tag.Controller.OutsideComponent = Class.extend({\n    init: function(suggestionModel, suggestionStore) {\n        this._ = {\n            suggestionModel: suggestionModel, \n            suggestionStore: suggestionStore\n        };\n    },\n\n    handleChangedQuery: function() {\n        var query = this._.suggestionStore.getQuery();\n\n        this._.suggestionStore.setIsLoading(true);\n        this._.suggestionModel.cancel();\n        this._.suggestionModel.fetch(query, _.bind(this._handleSuggestResponse, this), _.bind(this._handleSuggestError, this, query));\n    },\n\n    _handleSuggestResponse: function(query, tags) {\n        this._.suggestionStore.setSuggestions(tags);\n        this._.suggestionStore.setIsLoading(false);\n        this._.suggestionStore.setLastFinishedQuery(query);\n    },\n\n    _handleSuggestError: function(query) {\n        this._.suggestionStore.setLastFinishedQuery(query);\n        this._.suggestionStore.setIsLoading(false);\n    }\n});\n","Namespace('Imgur.Tag.Controller');\n\nImgur.Tag.Controller.UserGroup = Class.extend({\n    init: function(emitter, groupModel, activeGroupId, group, groupList, cboxConfirm, $confirmMessage, $confirmTitle) {\n        this._ = {\n            groupModel: groupModel,\n            activeGroupId: activeGroupId,\n            group: group,\n            groupList: groupList,\n            emitter: emitter,\n            cboxConfirm: cboxConfirm,\n            confirmTarget: '#colorbox-confirm',\n\n            el: {\n                $confirmMessage: $confirmMessage,\n                $confirmTitle: $confirmTitle,\n            }\n        };\n    },\n\n    handleRemoveConfirmedEvent: function(e) {\n        this._.group.remove();\n        this._.emitter.trigger('group.remove', this._.group.getId());\n\n        if(this._.group.getId() == this._.activeGroupId) {\n            this._.emitter.trigger('command.location', '/');\n        }\n    },\n\n    handleRemoveEvent: function(e) {\n        e.stopPropagation();\n        \n        this._.el.$confirmTitle.html('Delete ' + this._.group.getName() + '?');\n        this._.el.$confirmMessage.html('Are you sure you want to delete the gallery <span class=\"green\">' + this._.group.getName() + '</span>?');\n        this._.cboxConfirm.show(this._.confirmTarget, _.bind(this.handleRemoveConfirmedEvent, this, e));\n    },\n\n    handleRemovedTagEvent: function(tag, e) {\n        e.stopPropagation();\n\n        this._.groupList.remove(tag);\n        this._.groupList.removeCoreSet(tag);\n\n        this._.groupModel.unsubscribe(this._.group.getId(), tag.getName(), _.bind(function() {\n            this._.emitter.trigger('new tagset');\n        }, this));\n        this._.emitter.trigger('show tagset loader');\n    },\n\n    handleRemoveEventOther: function(id) {\n        if(id == this._.group.getId()) {\n            this._.group.remove();\n        }\n    },\n\n    setList: function(sortedList) {\n        this._.groupList = sortedList;\n        this._.group.setList(sortedList);\n    }\n});\n","Namespace('Imgur.Tag.Controller');\n\nImgur.Tag.Controller.GroupSelectorLimits = Class.extend({\n    init: function(emitter, group_selector, groupStore) {\n        this._ = {\n            emitter: emitter,\n            groupSelector: group_selector,\n            groupStore: groupStore\n        };\n    },\n\n    _disableNew: function() {\n        this._.groupSelector.disableNewGroupButton();\n    },\n\n    _enableNew: function() {\n        this._.groupSelector.enableNewGroupButton();\n    },\n\n    handleGroupRemove: function(hash) {\n        this._.groupSelector.removeUserGroup(hash);\n\n        this._.groupStore.markDeleted(hash);\n\n        if(this._.groupSelector.getRemainingUserGroups() > 0) {\n            this._enableNew();\n        }\n    },\n\n    handleGroupAdd: function(group) {\n        this._.groupSelector.addUserGroup(group);\n\n        this._.groupStore.addGroup({\n            hash: group.getId(),\n            name: group.getName(),\n            account_id: Imgur.Environment.auth.id,\n            account_url: Imgur.Environment.auth.url\n        });\n\n        if(this._.groupSelector.getRemainingUserGroups() <= 0) {\n            this._disableNew();\n        }\n    }\n});\n","Namespace('Imgur.Tag');\n\nImgur.Tag.SuggestedTag = Imgur.Tag.Tag.extend({\n    VOTE_UP: 'up',\n\n    init: function($dom, group_id) {\n        this._super($dom);\n\n        this._.groupId = group_id;\n        this._.el.$addBtn = $dom;\n        this._.el.$subscribers = $dom.find('.subscribers');\n    },\n\n    getGroupId: function() {\n        return this._.groupId;\n    },\n\n    get$Add: function() {\n        return this._.el.$addBtn;\n    },\n\n    getSubscribers: function() {\n        return Number(this._.el.$subscribers.attr('data-subscribers'));\n    },\n\n    get$ExternalLink: function() {\n        return this._.el.$container.find('.external-link');\n    }\n});\n","Imgur.Elements.Copy = React.createClass({\n    displayName: 'Copy',\n\n    getDefaultProps: function() {\n        return {\n            inputClass: ''\n        };\n    },\n\n    copy: function() {\n        var value = this.refs['value'];\n        value.select();\n        \n        try {\n            document.execCommand('copy');\n            window.getSelection().removeAllRanges();\n        } catch(e) {}\n\n        flashElement($(value), 100, null);\n    },\n\n    selectAll: function() {\n        ReactDOM.findDOMNode(this.refs.value).select();\n    },\n\n    render: function() {\n        var copyButton;\n        var inputClasses = this.props.inputClass;\n\n        if (document.queryCommandSupported('copy')) {\n            copyButton = React.DOM.button({onClick: this.copy, className: this.props.copyClass}, 'Copy');\n        } else {\n            copyButton = React.DOM.button({className: this.props.copyClass + ' copy-button-unsupported'});\n            inputClasses += ' copy-input-unsupported';\n        }\n\n        inputClasses += ' copyflash';\n        \n        return React.DOM.div({className: 'copywrapper'},\n            React.DOM.input({type: 'text', value: this.props.value, ref: 'value', className: inputClasses, onClick: this.selectAll, readOnly: true}),\n            copyButton\n        );\n    }\n});","Imgur.Flash = React.createClass({\n    displayName: 'Flash',\n\n    getDefaultProps: function() {\n        return {\n            delay: 1000\n        };\n    },\n\n    getInitialState: function() {\n        return {\n            visible: false\n        };\n    },\n\n    componentWillReceiveProps: function(next) {\n        if(next.start !== this.props.start || next.delay !== this.props.delay) {\n            // Reset the timer if the children are changed\n\n            this._installTimer(next.start);\n\n            this.setState({\n                visible: true\n            });\n        }\n    },\n\n    _getDuration: function(start) {\n        return Math.max(0, start + this.props.delay - (+new Date()));\n    },\n\n    componentDidMount: function() {\n        if(this._getDuration(this.props.start) > 0) {\n            this._installTimer(this.props.start);\n            this.setState({\n                visible: true\n            });\n        }\n    },\n\n    _installTimer: function(start) {\n        if(this._timer !== null) {\n            window.clearTimeout(this._timerRef);\n            this._timerRef = null;\n        }\n\n        var duration = this._getDuration(start);\n        this._timerRef = window.setTimeout(_.bind(this._handleTimerExpired, this), duration);\n    },\n\n    _handleTimerExpired: function() {\n        this.setState({\n            visible: false\n        });\n\n        this._timerRef = null;\n    },\n\n    render: function() {\n        return React.createElement(React.addons.CSSTransitionGroup, {transitionName: 'flash'},\n            this.state.visible ? React.DOM.div(null, this.props.children) : null\n        );\n    }\n});\n","var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nNamespace('Imgur.Elements');\n\nvar styles = {\n    spring: {\n        stiffness: 120,\n        damping: 9\n    },\n    button: {\n        maxScale: 1.25\n    }\n};\n\nImgur.Elements.PressButton = React.createClass({\n    displayName: 'PressButton',\n\n    propTypes: {\n        isPressed: React.PropTypes.bool,\n        onPress: React.PropTypes.func\n    },\n\n    getDefaultProps: function getDefaultProps() {\n        return {\n            style: {}\n        };\n    },\n    getInitialState: function getInitialState() {\n        return {\n            isPressed: false\n        };\n    },\n    isLeftClick: function isLeftClick(e) {\n        e = e || window.event;\n        var button = e.which || e.button;\n        return button < 2;\n    },\n    handleMouseDown: function handleMouseDown(e) {\n        if (this.isLeftClick(e)) {\n            this.setState({ isPressed: true });\n        }\n    },\n    handleMouseUp: function handleMouseUp(e) {\n        if (this.isLeftClick(e)) {\n            this.props.onPress();\n            this.setState({ isPressed: false });\n        }\n    },\n    handleMouseLeave: function handleMouseLeave() {\n        this.setState({ isPressed: false });\n    },\n    render: function render() {\n        var _this = this;\n\n        var springScale = this.state.isPressed ? styles.button.maxScale : 1;\n        var motionStyle = { scale: ReactMotion.spring(springScale, styles.spring) };\n\n        return React.createElement(\n            ReactMotion.Motion,\n            {\n                defaultStyle: { scale: 1 },\n                style: motionStyle },\n            function (_ref) {\n                var scale = _ref.scale;\n                return React.createElement(\n                    'button',\n                    _extends({}, _this.props, {\n                        onMouseDown: _this.handleMouseDown,\n                        onMouseUp: _this.handleMouseUp,\n                        onMouseLeave: _this.handleMouseLeave,\n                        style: _extends({\n                            transform: 'scale(' + scale + ')',\n                            WebkitTransform: 'scale(' + scale + ')'\n                        }, _this.props.style) }),\n                    _this.props.children\n                );\n            }\n        );\n    }\n});\n//# sourceMappingURL=pressbutton.js.map\n","Namespace('Imgur.Elements');\n\nImgur.Elements.NanoScroller = React.createClass({\n    displayName: 'NanoScroller',\n    componentDidUpdate: function componentDidUpdate() {\n        $(ReactDOM.findDOMNode(this.refs['container'])).nanoScroller();\n    },\n    componentWillUnmount: function componentWillUnmount() {\n        this.scrollContainer.nanoScroller({ destroy: true });\n    },\n    render: function render() {\n        return React.createElement(\n            'div',\n            { ref: 'container', className: 'js-nanoscroller nano ' + this.props.classes, onScroll: this.props.onScroll },\n            React.createElement(\n                'div',\n                { className: 'scroll-content content cf' },\n                this.props.children\n            )\n        );\n    }\n});\n//# sourceMappingURL=nanoscroller.js.map\n","Namespace('Imgur.Elements');\n\nImgur.Elements.Socialicons = React.createClass({\n    displayName: 'Elements-Socialicons',\n\n    getDefaultProps: function getDefaultProps() {\n        return {\n            classes: ''\n        };\n    },\n    socialShare: function socialShare(network) {\n        var url = window.location.href;\n        var dimensions = 'left=20,top=20,width=560,height=500,toolbar=1';\n        var title = $('.post-title').text();\n\n        switch (network) {\n            case 'facebook':\n                url = 'https://www.facebook.com/sharer/sharer.php?u=' + encodeURIComponent(url);dimensions = 'left=20,top=20,width=500,height=500,toolbar=1';break;\n            case 'twitter':\n                url = 'https://twitter.com/home?status=' + encodeURIComponent(title + ' ' + url);break;\n            case 'pinterest':\n                url = 'https://pinterest.com/pin/create/button/?url=' + encodeURIComponent(url) + '&media=' + encodeURIComponent($('.post-images img')[0].src) + '&description=' + title;dimensions = 'left=20,top=20,width=750,height=601,toolbar=1';break;\n            case 'reddit':\n                url = '//www.reddit.com/submit?title=' + encodeURIComponent(title) + '&url=' + encodeURIComponent(url);dimensions = 'left=20,top=20,width=860,height=700,toolbar=1';break;\n        }\n\n        window.open(url, 'sharer', dimensions);\n    },\n    render: function render() {\n        return React.createElement(\n            'div',\n            { className: this.props.classes },\n            React.createElement('span', { className: 'social-icon icon-f', onClick: this.socialShare.bind(null, 'facebook') }),\n            React.createElement('span', { className: 'social-icon icon-twttr', onClick: this.socialShare.bind(null, 'twitter') }),\n            React.createElement('span', { className: 'social-icon icon-pin', onClick: this.socialShare.bind(null, 'pinterest') }),\n            React.createElement('span', { className: 'social-icon icon-reddit', onClick: this.socialShare.bind(null, 'reddit') })\n        );\n    }\n});\n//# sourceMappingURL=socialicons.js.map\n","Namespace('Imgur.Elements');\n\nImgur.Elements.Report = React.createClass({\n\n    propTypes: {\n        type: React.PropTypes.string.isRequired,\n        url: React.PropTypes.string.isRequired,\n        metadata: React.PropTypes.object,\n        cb: React.PropTypes.func\n    },\n\n    displayName: 'ElementsReport',\n    strings: {\n        abuse: 'Abusive/Offensive',\n        abuseExplanation: function abuseExplanation(type) {\n            return 'This ' + type + ' contains racism, sexism, slurs, personal attacks, death threats, suicide requests or any form of hate speech.';\n        },\n        dboi: 'Does Not Belong On Imgur',\n        dboiExplanation: function dboiExplanation(type) {\n            return 'This ' + type + ' contains illegal activity, suicide threats, personal information, or something else you think doesn\\'t belong on Imgur.';\n        },\n        defaultCombobox: 'SELECT A REASON',\n        explicit: 'Sexually Explicit',\n        explicitExplanation: function explicitExplanation(type) {\n            return 'This ' + type + ' contains pornography, full or partial nudity.';\n        },\n        mature: 'Mature',\n        matureExplanation: function matureExplanation(type) {\n            return 'This ' + type + ' contains suggestive or provocative content.';\n        },\n        matureSettings: React.createElement(\n            'div',\n            null,\n            'If you don\\'t want to see mature content on Imgur, please change your ',\n            React.createElement(\n                'a',\n                { href: '/account/settings' },\n                'safety settings'\n            ),\n            '.'\n        ),\n        matureWarning: function matureWarning(type) {\n            return '(This ' + type + ' is already marked as mature)';\n        },\n        spam: 'Spam',\n        reportHeading: function reportHeading(type) {\n            return 'Report ' + type;\n        },\n        spamExplanation: function spamExplanation(type) {\n            return 'This ' + type + ' contains clickbait, advertising, scams or script bots.';\n        }\n    },\n\n    reportValues: {\n        DBOI: 1,\n        SPAM: 2,\n        ABUSE: 3,\n        MATURE: 4,\n        EXPLICIT: 5\n    },\n\n    getInitialState: function getInitialState() {\n        return {\n            value: null\n        };\n    },\n\n    getDefaultProps: function getDefaultProps() {\n        return {\n            metadata: {}\n        };\n    },\n\n    shouldComponentUpdate: function shouldComponentUpdate(nextProps, nextState) {\n        return this.state.value !== nextState.value;\n    },\n\n    handleSubmit: function handleSubmit(e) {\n        e.preventDefault();\n\n        if (!this.state.value) {\n            return;\n        }\n\n        var postOptions = {\n            sid: Imgur.Environment.msid,\n            type: this.state.value,\n            hash: this.props.metadata.hash\n        };\n\n        if (this.props.metadata.isAlbum) {\n            postOptions.isAlbum = true;\n        }\n\n        // metadata is the same data that went with the reportInvoked event for either comment or gallery\n        Imgur.Util.jafoLog({\n            event: 'report',\n            meta: this.props.metadata\n        });\n\n        $.post(this.props.url, postOptions);\n\n        Imgur.Gallery.getInstance().preventReportCloseAnalytics();\n\n        $.colorbox.close();\n        humanMsg.displayMsg('Thanks for reporting!');\n\n        if (typeof this.props.cb === 'function') {\n            this.props.cb();\n        }\n    },\n\n    setValue: function setValue(value) {\n        this.setState({ value: value });\n    },\n\n    render: function render() {\n\n        var type = this.props.type;\n        var warning = null;\n        var matureExplanation = this.strings.matureExplanation(type);\n        var mature = this.props.metadata.nsfw;\n        if (mature) {\n            warning = this.strings.matureWarning(type);\n            matureExplanation = this.strings.matureSettings;\n        }\n\n        var items = [Imgur.Elements.RadioBox.createItem(this.strings.mature, matureExplanation, this.reportValues.MATURE, warning, mature), Imgur.Elements.RadioBox.createItem(this.strings.explicit, this.strings.explicitExplanation(type), this.reportValues.EXPLICIT), Imgur.Elements.RadioBox.createItem(this.strings.spam, this.strings.spamExplanation(type), this.reportValues.SPAM), Imgur.Elements.RadioBox.createItem(this.strings.abuse, this.strings.abuseExplanation(type), this.reportValues.ABUSE), Imgur.Elements.RadioBox.createItem(this.strings.dboi, this.strings.dboiExplanation(type), this.reportValues.DBOI)];\n        var buttonDisabled = !this.state.value && 'btn-nebula-inactive';\n\n        return React.createElement(\n            'div',\n            null,\n            React.createElement(\n                'h2',\n                null,\n                this.strings.reportHeading(type)\n            ),\n            React.createElement(Imgur.Elements.RadioBox, {\n                name: 'reportpost',\n                enabled: this.state.enabled,\n                items: items,\n                onChange: this.setValue }),\n            React.createElement(\n                'div',\n                { className: 'report-footer' },\n                React.createElement(\n                    'p',\n                    { className: 'community_rules' },\n                    'For more info please read the ',\n                    React.createElement(\n                        'a',\n                        { target: '_blank', href: 'http://imgur.com/rules' },\n                        'Community Rules'\n                    )\n                ),\n                React.createElement(\n                    'button',\n                    { className: 'btn-nebula ' + buttonDisabled + ' btn-action btn-small right', type: 'button', onClick: this.handleSubmit },\n                    'Report'\n                )\n            )\n        );\n    }\n});\n\nImgur.Elements.Report.dimensions = { width: 540, height: 680 };\n//# sourceMappingURL=report.js.map\n","Namespace('Imgur.Elements');\n\nImgur.Elements.RadioBox = React.createClass({\n    displayName: 'RadioBox',\n\n    propTypes: {\n        name: React.PropTypes.string.isRequired,\n        items: React.PropTypes.array.isRequired,\n        onChange: React.PropTypes.func\n    },\n\n    onComponentDidMount: function onComponentDidMount() {\n        this.refs.RadioBox.focus();\n    },\n\n    onClick: function onClick(selectedValue, disabled) {\n        if (disabled) {\n            return;\n        }\n        this.refs['RadioBox-item-' + selectedValue].focus();\n        if (this.props.onChange) {\n            this.props.onChange(selectedValue);\n        }\n    },\n\n    renderItem: function renderItem(item) {\n\n        var id = 'RadioBox-item-' + item.value;\n\n        return React.createElement(\n            'label',\n            { ref: id, key: '' + id, className: 'RadioBox-item', onClick: this.onClick.bind(this, item.value, item.disabled) },\n            React.createElement('input', { ref: id + '-radio', disabled: item.disabled, className: 'RadioBox-radio', type: 'radio', name: this.props.name }),\n            React.createElement(\n                'div',\n                { ref: id + '-checkbox', className: 'RadioBox-checkbox' },\n                '\\xA0'\n            ),\n            React.createElement(\n                'div',\n                null,\n                React.createElement(\n                    'div',\n                    { ref: id + '-title', className: 'RadioBox-title' },\n                    item.title,\n                    ' ',\n                    React.createElement(\n                        'span',\n                        { ref: id + '-warning', className: 'RadioBox-warning' },\n                        item.warning\n                    )\n                ),\n                React.createElement(\n                    'div',\n                    { ref: id + '-description', className: 'RadioBox-description' },\n                    item.description\n                )\n            )\n        );\n    },\n\n    render: function render() {\n        var items = this.props.items.map(this.renderItem, this);\n        return React.createElement(\n            'div',\n            { ref: 'RadioBox', className: 'RadioBox' },\n            items\n        );\n    }\n});\n\nImgur.Elements.RadioBox.createItem = function (title, description, value) {\n    var warning = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : null;\n    var disabled = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : false;\n\n    return { title: title, description: description, value: value, warning: warning, disabled: disabled };\n};\n//# sourceMappingURL=RadioBox.js.map\n","/*! Smooth Scroll - v1.4.7 - 2012-10-29\n* Copyright (c) 2012 Karl Swedberg; Licensed MIT, GPL */\n\n(function($) {\n\nvar version = '1.4.7',\n    defaults = {\n      exclude: [],\n      excludeWithin:[],\n      offset: 0,\n      direction: 'top', // one of 'top' or 'left'\n      scrollElement: null, // jQuery set of elements you wish to scroll (for $.smoothScroll).\n                          //  if null (default), $('html, body').firstScrollable() is used.\n      scrollTarget: null, // only use if you want to override default behavior\n      beforeScroll: function() {},  // fn(opts) function to be called before scrolling occurs. \"this\" is the element(s) being scrolled\n      afterScroll: function() {},   // fn(opts) function to be called after scrolling occurs. \"this\" is the triggering element\n      easing: 'swing',\n      speed: 400,\n      autoCoefficent: 2 // coefficient for \"auto\" speed\n    },\n\n    getScrollable = function(opts) {\n      var scrollable = [],\n          scrolled = false,\n          dir = opts.dir && opts.dir == 'left' ? 'scrollLeft' : 'scrollTop';\n\n      this.each(function() {\n\n        if (this == document || this == window) { return; }\n        var el = $(this);\n        if ( el[dir]() > 0 ) {\n          scrollable.push(this);\n        } else {\n          // if scroll(Top|Left) === 0, nudge the element 1px and see if it moves\n          el[dir](1);\n          scrolled = el[dir]() > 0;\n          if ( scrolled ) {\n            scrollable.push(this);\n          }\n          // then put it back, of course\n          el[dir](0);\n        }\n      });\n\n      // If no scrollable elements, fall back to <body>,\n      // if it's in the jQuery collection\n      // (doing this because Safari sets scrollTop async,\n      // so can't set it to 1 and immediately get the value.)\n      if (!scrollable.length) {\n        this.each(function(index) {\n          if (this.nodeName === 'BODY') {\n            scrollable = [this];\n          }\n        });\n      }\n\n      // Use the first scrollable element if we're calling firstScrollable()\n      if ( opts.el === 'first' && scrollable.length > 1 ) {\n        scrollable = [ scrollable[0] ];\n      }\n\n      return scrollable;\n    },\n    isTouch = 'ontouchend' in document;\n\n$.fn.extend({\n  scrollable: function(dir) {\n    var scrl = getScrollable.call(this, {dir: dir});\n    return this.pushStack(scrl);\n  },\n  firstScrollable: function(dir) {\n    var scrl = getScrollable.call(this, {el: 'first', dir: dir});\n    return this.pushStack(scrl);\n  },\n\n  smoothScroll: function(options) {\n    options = options || {};\n    var opts = $.extend({}, $.fn.smoothScroll.defaults, options),\n        locationPath = $.smoothScroll.filterPath(location.pathname);\n\n    this\n    .unbind('click.smoothscroll')\n    .bind('click.smoothscroll', function(event) {\n      var link = this,\n          $link = $(this),\n          exclude = opts.exclude,\n          excludeWithin = opts.excludeWithin,\n          elCounter = 0, ewlCounter = 0,\n          include = true,\n          clickOpts = {},\n          hostMatch = ((location.hostname === link.hostname) || !link.hostname),\n          pathMatch = opts.scrollTarget || ( $.smoothScroll.filterPath(link.pathname) || locationPath ) === locationPath,\n          thisHash = escapeSelector(link.hash);\n\n      if ( !opts.scrollTarget && (!hostMatch || !pathMatch || !thisHash) ) {\n        include = false;\n      } else {\n        while (include && elCounter < exclude.length) {\n          if ($link.is(escapeSelector(exclude[elCounter++]))) {\n            include = false;\n          }\n        }\n        while ( include && ewlCounter < excludeWithin.length ) {\n          if ($link.closest(excludeWithin[ewlCounter++]).length) {\n            include = false;\n          }\n        }\n      }\n\n      if ( include ) {\n        event.preventDefault();\n\n        $.extend( clickOpts, opts, {\n          scrollTarget: opts.scrollTarget || thisHash,\n          link: link\n        });\n\n        $.smoothScroll( clickOpts );\n      }\n    });\n\n    return this;\n  }\n});\n\n$.smoothScroll = function(options, px) {\n  var opts, $scroller, scrollTargetOffset, speed,\n      scrollerOffset = 0,\n      offPos = 'offset',\n      scrollDir = 'scrollTop',\n      aniProps = {},\n      aniOpts = {},\n      scrollprops = [];\n\n\n  if (typeof options === 'number') {\n    opts = $.fn.smoothScroll.defaults;\n    scrollTargetOffset = options;\n  } else {\n    opts = $.extend({}, $.fn.smoothScroll.defaults, options || {});\n    if (opts.scrollElement) {\n      offPos = 'position';\n      if (opts.scrollElement.css('position') == 'static') {\n        opts.scrollElement.css('position', 'relative');\n      }\n    }\n  }\n\n  opts = $.extend({link: null}, opts);\n  scrollDir = opts.direction == 'left' ? 'scrollLeft' : scrollDir;\n\n  if ( opts.scrollElement ) {\n    $scroller = opts.scrollElement;\n    scrollerOffset = $scroller[scrollDir]();\n  } else {\n    $scroller = $('html, body').firstScrollable();\n  }\n\n  // beforeScroll callback function must fire before calculating offset\n  opts.beforeScroll.call($scroller, opts);\n\n  scrollTargetOffset = (typeof options === 'number') ? options :\n                        px ||\n                        ( $(opts.scrollTarget)[offPos]() &&\n                        $(opts.scrollTarget)[offPos]()[opts.direction] ) ||\n                        0;\n\n  aniProps[scrollDir] = scrollTargetOffset + scrollerOffset + opts.offset;\n  speed = opts.speed;\n\n  // automatically calculate the speed of the scroll based on distance / coefficient\n  if (speed === 'auto') {\n\n    // if aniProps[scrollDir] == 0 then we'll use scrollTop() value instead\n    speed = aniProps[scrollDir] || $scroller.scrollTop();\n\n    // divide the speed by the coefficient\n    speed = speed / opts.autoCoefficent;\n  }\n\n  aniOpts = {\n    duration: speed,\n    easing: opts.easing,\n    complete: function() {\n      opts.afterScroll.call(opts.link, opts);\n    }\n  };\n\n  if (opts.step) {\n    aniOpts.step = opts.step;\n  }\n\n  if ($scroller.length) {\n    $scroller.stop().animate(aniProps, aniOpts);\n  } else {\n    opts.afterScroll.call(opts.link, opts);\n  }\n};\n\n$.smoothScroll.version = version;\n$.smoothScroll.filterPath = function(string) {\n  return string\n    .replace(/^\\//,'')\n    .replace(/(index|default).[a-zA-Z]{3,4}$/,'')\n    .replace(/\\/$/,'');\n};\n\n// default options\n$.fn.smoothScroll.defaults = defaults;\n\nfunction escapeSelector (str) {\n  return str.replace(/(:|\\.)/g,'\\\\$1');\n}\n\n})(jQuery);\n","this[\"_\"] = this[\"_\"] || {};\nthis[\"_\"][\"templates\"] = this[\"_\"][\"templates\"] || {};\n\nthis[\"_\"][\"templates\"][\"favoriteBar\"] = function(obj) {\nobj || (obj = {});\nvar __t, __p = '', __e = _.escape, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\nwith (obj) {\n__p += '<div id=\"favorite-bar\">\\n    <div original-title=\"Favorite\" class=\"favorite-image title ';\n if(favorited) { ;\n__p += 'favorited';\n } ;\n__p += '\" href=\"javascript:;\">\\n        <span class=\"icon-fav\"></span>\\n    </div>\\n    <div class=\"clipboard-container\" id=\"copy-container\" title=\"copy\">\\n        <div class=\"icon-copy\" id=\"copy-clipboard\"></div>\\n    </div>\\n    <input type=\"hidden\" id=\"copy\" value=\"' +\n((__t = ( value )) == null ? '' : __t) +\n'\" readonly=\"readonly\" />\\n</div>';\n\n}\nreturn __p\n};","Namespace('Imgur.Promoted.Events');\n\nImgur.Promoted.Events = Class.extend({\n    init: function(config, emitter, insideNav) {\n        this._ = {\n            'ele': {\n                'clicks': {\n                    'ACTION_IMAGE_UPVOTE':     '.post-action-upvote:not(.green)',\n                    'ACTION_IMAGE_DOWNVOTE':   '.post-action-downvote:not(.red)',\n                    'ACTION_FAVORITE':         '.post-action-favorite:not(.green)', // add unfavorite variant? ask AZ for this?\n                    'ACTION_SHARE':            '.social-icon',\n                    'ACTION_SHARE_FACEBOOK':   '.social-icon.icon-f',\n                    'ACTION_SHARE_TWITTER':    '.social-icon.icon-twttr',\n                    'ACTION_SHARE_PINTEREST':  '.social-icon.icon-pin',\n                    'ACTION_SHARE_REDDIT':     '.social-icon.icon-reddit',\n                    'CLICK_COMPANION':         '#right-content .advertisement .promoCompanion a img'\n                }\n            },\n            'config': config,\n            'emitter': emitter,\n            'inside': insideNav\n        };\n    },\n\n    // pass boolean true to unbind events\n    bindAll: function(off) {\n        // Trying to variableize this._.emitter.(on|off)\n        // freaked the emitter object the fuck out.\n        // Long conditional it is!\n        if (off) {\n            this._.emitter.off('captionVoted', this, this._handleCommentVote);\n            this._.emitter.off('captionSubmit', this, this._handleCommentSubmit);\n            this._.emitter.off('vwTime', this, this._handleVwTime);\n            this._.emitter.off('vwUnderImage', this, this._handleVwUnderImage);\n        } else {\n            this._.emitter.on('captionVoted', this, this._handleCommentVote);\n            this._.emitter.on('captionSubmit', this, this._handleCommentSubmit);\n            this._.emitter.on('vwTime', this, this._handleVwTime);\n            this._.emitter.on('vwUnderImage', this, this._handleVwUnderImage);\n        }\n\n        this.bindClicks(off);\n    },\n\n    // pass boolean true to unbind events\n    bindClicks: function(off) {\n        var type = off? 'off': 'on',\n            func, iter;\n\n        for(iter in this._.ele.clicks) {\n            if (this._.ele.clicks.hasOwnProperty(iter)) {\n               $(this._.ele.clicks[iter])[type]('click', null, {promoEvent: iter}, _.bind(this._fireEvent, this));\n            }\n        }\n    },\n\n    _handleVwTime: function(hash, ms) {\n        // subEv is our faked \"event\"\n        var subEv = {\n            hash: this.getSideImage(hash),\n            data: {\n                sec: Math.floor(ms / 1000),\n                promoEvent: 'VIEW_TIME_0'\n            }\n        };\n\n        if (subEv.data.sec <= 10) {\n            subEv.data.promoEvent = 'VIEW_TIME_'+subEv.data.sec;\n        } else if (subEv.data.sec <= 14) {\n            subEv.data.promoEvent = 'VIEW_TIME_10';\n        } else if (subEv.data.sec <= 19) {\n            subEv.data.promoEvent = 'VIEW_TIME_15';\n        } else if (subEv.data.sec <= 24) {\n            subEv.data.promoEvent = 'VIEW_TIME_20';\n        } else if (subEv.data.sec <= 29) {\n            subEv.data.promoEvent = 'VIEW_TIME_25';\n        } else {\n            subEv.data.promoEvent = 'VIEW_TIME_30_PLUS';\n        }\n\n        this._fireEvent(subEv);\n    },\n\n    _handleVwUnderImage: function(hash, pos, tPos) {\n        // subEv is our faked \"event\"\n        var subEv = {\n            hash: this.getSideImage(hash),\n            data: {\n                promoEvent: 'VIEW_UNDERIMAGE'\n            }\n        };\n\n        this._fireEvent(subEv);\n    },\n\n    _handleCommentSubmit: function(commentObj) {\n        // subEv is our faked \"event\"\n        var subEv = {\n            comment: commentObj,\n            data: {\n                promoEvent: 'ACTION_COMMENT'\n            }\n        };\n\n        if (commentObj.parent_id) {\n            subEv.data.promoEvent = 'ACTION_COMMENT_REPLY';\n        }\n\n        this._fireEvent(subEv);\n    },\n\n    _handleCommentVote: function(voteObj, direction) {\n        // voteEv is our faked \"event\"\n        var voteEv = {\n            comment: voteObj,\n            data: {\n                promoEvent: null\n            }\n        };\n\n        if (direction === 'veto') {\n            // don't record vetos\n            return;\n        }\n\n        if (direction === 'up') {\n            voteEv.data.promoEvent = 'ACTION_COMMENT_UPVOTE';\n        } else {\n            voteEv.data.promoEvent = 'ACTION_COMMENT_DOWNVOTE';\n        }\n\n        this._fireEvent(voteEv);\n    },\n\n    getSideImage: function(hash) {\n        return this._.inside._.sideGallery.getImage(hash);\n    },\n\n    _fireEvent: function(ev) {\n        this._.emitter.trigger('promoEvent', ev);\n    }\n\n});\n\n","(function(){\n    function PromotedPost(emitter) {\n        this.emitter = emitter;\n        this.parts = {\n            companion: null,\n            page: null,\n            thumb: null,\n            data: {}\n        };\n        this.pixels = {};\n    };\n\n    PromotedPost.prototype = {\n        addPixel: function(purpose, url) {\n            if('object' !== typeof this.pixels[purpose]) {\n                this.pixels[purpose] = [];\n            }\n\n            this.pixels[purpose].push(url);\n        },\n\n        addCompanionPlacement: function(data) {\n            this.parts.companion = _.extend({}, data);\n        },\n\n        addPagePlacement: function(data) {\n            this.parts.page = _.extend({}, data);\n        },\n\n        addThumbPlacement: function(data) {\n            this.parts.thumb = _.extend({}, data);\n        },\n\n        getHash: function() {\n            return Imgur.Util.dive(this.parts, 'data.hash');\n        },\n\n        setData: function(data) {\n            this.parts.data = _.extend(this.parts.data, data);\n            this.parts.data.starting_score = 0;\n        }\n    };\n\n    // alias it out\n    Imgur.Promoted.Post = PromotedPost;\n})();","Namespace('Imgur.Promoted.Source');\n\n// this should get extended\nImgur.Promoted.Source = Class.extend({\n    init: function(config, emitter, insideNav) {\n        throw 'Imgur.Promoted.Source is an abstract class.'\n    },\n\n    // get a given placement for Imgur.Promoted\n    getPlacement: function() {}\n});\n\n","Namespace('Imgur.Promoted.Source.Adzerk');\n\nImgur.Promoted.Source.Adzerk = Imgur.Promoted.Source.extend({\n    init: function(config, emitter) {\n        this._ = {\n            'blockedCreatives': [],\n            'emitter': emitter,\n            'espoused': false,\n            'config': config,\n            'user': {},\n            'cookieOpts': {\n                domain: '.'+Imgur.Environment.host,\n                path: '/',\n                expires: 365\n            },\n            'rgxDomain': /\\/\\/engine\\.[^.]+\\.net/,\n            'pgxProto': /^[^:]+:\\/\\//,\n            // our pixel IDs correllated to adzerk event IDs\n            // these are in order of functionality, not id\n            'evtToPx': {\n                10 : 'ACTION_IMAGE_UPVOTE',\n                11:  'ACTION_IMAGE_DOWNVOTE',\n                22:  'ACTION_COMMENT',\n                101: 'ACTION_COMMENT_REPLY',\n                102: 'ACTION_COMMENT_UPVOTE',\n                103: 'ACTION_COMMENT_DOWNVOTE',\n                20:  'ACTION_FAVORITE',\n                21:  'ACTION_SHARE',\n                50:  'ACTION_SHARE_FACEBOOK',\n                51:  'ACTION_SHARE_TWITTER',\n                52:  'ACTION_SHARE_PINTEREST',\n                53:  'ACTION_SHARE_REDDIT',\n                54:  'ACTION_SHARE_EMAIL',\n                104: 'VIEW_UNDERIMAGE',\n                400: 'VIEW_TIME_0',\n                401: 'VIEW_TIME_1',\n                402: 'VIEW_TIME_2',\n                403: 'VIEW_TIME_3',\n                404: 'VIEW_TIME_4',\n                405: 'VIEW_TIME_5',\n                406: 'VIEW_TIME_6',\n                407: 'VIEW_TIME_7',\n                408: 'VIEW_TIME_8',\n                409: 'VIEW_TIME_9',\n                410: 'VIEW_TIME_10',\n                415: 'VIEW_TIME_15',\n                420: 'VIEW_TIME_20',\n                425: 'VIEW_TIME_25',\n                430: 'VIEW_TIME_30_PLUS'\n            }\n        };\n\n        this._idFromCookie();\n\n        return this._;\n    },\n\n    getPlacement: function(payload) {\n        var reqData = {\n            user: this._getUser(),\n            placements: this._.config.adzerk.placementParms,\n            blockedCreatives: this._.blockedCreatives,\n            keywords: ['platform-desktop']\n        };\n\n        return $.ajax({\n            url  : this._.config.adzerk.apiLocation,\n            type : 'POST',\n            contentType: 'application/json',\n            data: JSON.stringify(reqData),\n            dataType: 'json',\n            success: _.bind(this._handleApiResponse, this),\n            error: _.bind(this._handleApiError, this)\n        });\n    },\n\n    _handleApiError: function(xhr, status, error) {\n        console.log('adzerk get fail', arguments);\n    },\n\n    // This expects raw response data from the Adzerk API call.\n    // will alter the passed object directly, but still passes it back\n    _decodeEncodedResponse: function(dataset) {\n        var dataRoot = 'contents.0.data.customData',\n            decisions = Imgur.Util.dive(dataset, 'decisions'),\n            iter, encs, encIter, encTmp;\n\n        if('object' === typeof decisions) {\n\n            for(iter in decisions) {\n\n                if(decisions.hasOwnProperty(iter)) {\n                    encs = Imgur.Util.dive(decisions[iter], dataRoot+'.encoded');\n\n                    if(_.isArray(encs)) {\n\n                        for(encIter = 0; encIter < encs.length; encIter++) {\n                            encTmp = Imgur.Util.dive(decisions[iter], dataRoot+'.'+encs[encIter]);\n\n                            if('string' === typeof encTmp) {\n                                dataset.decisions[iter].contents[0].data.customData[encs[encIter]] = decodeURIComponent(encTmp);\n                                dataset.decisions[iter].contents[0].data.customData[encs[encIter]+'_raw'] = encTmp;\n                            }\n                        }\n                    }\n\n                    encs = Imgur.Util.dive(decisions[iter], dataRoot+'.encodedObj');\n\n                    if(_.isArray(encs)) {\n\n                        for(encIter = 0; encIter < encs.length; encIter++) {\n                            encTmp = Imgur.Util.dive(decisions[iter], dataRoot+'.'+encs[encIter]);\n\n                            if('string' === typeof encTmp) {\n                                dataset.decisions[iter].contents[0].data.customData[encs[encIter]] = JSON.parse(decodeURIComponent(encTmp));\n                                dataset.decisions[iter].contents[0].data.customData[encs[encIter]+'_raw'] = encTmp;\n                            }\n                        }\n                    }\n                }\n            }\n        }\n\n        return dataset;\n    },\n\n    // used to affirm the adzerk userdb id and other things leveraged via cookies for promoted posts\n    // can just be blindly called\n    _espouse: function() {\n        if(this._.espoused) {\n            return;\n        }\n\n        if(Imgur.Environment.auth) {\n            $.ajax({\n                type: 'GET',\n                url: '/account/espouse',\n                complete: _.bind(function () {\n                    this._.espoused = true;\n                }, this)\n            });\n        }\n    },\n\n    // get the adzerk userdb id from cookie freshly\n    _idFromCookie: function() {\n        var cookied = $.cookie(this._.config.userCookie);\n\n        if(cookied) {\n            this._.user.key = cookied;\n        }\n    },\n\n    _handleApiResponse: function(data, status, xhr) {\n        var conf = this._.config.adzerk,\n            placeObj = null,\n            thumb = Imgur.Util.dive(data, 'decisions.'+conf.placementIds.thumb),\n            page = Imgur.Util.dive(data, 'decisions.'+conf.placementIds.page),\n            companion = Imgur.Util.dive(data, 'decisions.'+conf.placementIds.companion),\n            customPx;\n\n        if(typeof data === 'object' && typeof data.user === 'object' && data.user) {\n            this._setUserFromResponse(data);\n        }\n\n        if(typeof data === 'object' && typeof data.decisions === 'object' && data.decisions) {\n            data = this._decodeEncodedResponse(data);\n            placeObj = new Imgur.Promoted.Post(this._.emitter);\n\n            if(companion) {\n                // detects \"native\" vs \"adzerk hosted\" companions and formats a standard object\n                compFormatted = this._formatCompanionData(companion);\n\n                placeObj.addCompanionPlacement(compFormatted);\n                placeObj.addPixel('CLICK_COMPANION', this._cleanPx(companion.clickUrl));\n                placeObj.addPixel('IMPRESSION_COMPANION', this._cleanPx(companion.impressionUrl));\n            }\n\n            if(page) {\n                placeObj.addPagePlacement(page);\n                placeObj.addPixel('IMPRESSION_POST', this._cleanPx(page.impressionUrl));\n            }\n\n            if(thumb) {\n                adData = Imgur.Util.dive(thumb, 'contents.0.data.customData');\n                customPx = Imgur.Util.dive(thumb, 'contents.0.data.customData.customPx');\n\n                if(adData) {\n                    placeObj.addThumbPlacement(thumb);\n                    placeObj.addPixel('CLICK_THUMB', this._cleanPx(thumb.clickUrl));\n                    placeObj.addPixel('IMPRESSION_THUMB', this._cleanPx(thumb.impressionUrl));\n                    placeObj.setData(adData);\n                    this._.blockedCreatives.push(thumb.creativeId);\n\n                    if('object' === typeof(thumb.events)) {\n                        this._addEventPixels(placeObj, thumb.events);\n                    }\n\n                    if('object' === typeof(customPx)) {\n                        this._addCustomPixels(placeObj, customPx);\n                    }\n                }\n            }\n\n            this._.emitter.trigger('gotPromoted', placeObj);\n        } else {\n            console.warn('Empty or invalid promoted response.', arguments);\n        }\n    },\n\n    _cleanPx: function(pxUrl) {\n        if('string' === typeof pxUrl) {\n            if(this._.rgxDomain.test(pxUrl)) {\n                pxUrl = pxUrl.replace(this._.rgxDomain, 'https://zrk.'+Imgur.Environment.host);\n            }\n\n            if(this._.pgxProto.test(pxUrl)) {\n                pxUrl = pxUrl.replace(this._.pgxProto, '//');\n            }\n        }\n\n        return pxUrl;\n    },\n\n    _addCustomPixels: function(placeObj, events) {\n        var iter, len;\n\n        if('object' === typeof placeObj && _.isArray(events)) {\n            len = events.length;\n\n            for(iter = 0; iter < len; iter++) {\n                // get the right stuff back?\n                if('undefined' !== typeof events[iter].id && 'undefined' !== typeof events[iter].url) {\n                    // is this an event we care about?\n                    if('string' === typeof events[iter].id) {\n                       placeObj.addPixel(events[iter].id, this._cleanPx(events[iter].url));\n                    }\n                }\n            }\n        }\n    },\n\n    _addEventPixels: function(placeObj, events) {\n        var iter, len;\n\n        if('object' === typeof placeObj && _.isArray(events)) {\n            len = events.length;\n\n            for(iter = 0; iter < len; iter++) {\n                // get the right stuff back?\n                if('undefined' !== typeof events[iter].id && 'undefined' !== typeof events[iter].url) {\n                    // is this an event we care about?\n                    if('string' === typeof this._.evtToPx[events[iter].id]) {\n                       placeObj.addPixel(this._.evtToPx[events[iter].id], this._cleanPx(events[iter].url));\n                    }\n                }\n            }\n        }\n    },\n\n    _setUserFromResponse: function(responseData) {\n\n        if(typeof responseData === 'object' && typeof responseData.user === 'object' && responseData.user) {\n            this._.user = _.extend({}, responseData.user);\n\n            // let the possibly cookied ID get applied to the user object\n            this._idFromCookie();\n\n            // reaffirm or set the possibly new ID\n            $.cookie(this._.config.userCookie, this._.user.key, this._.cookieOpts);\n\n            // make a call to our back-end so the userdb id can persist for logged in users\n            // note that this may actually change the userdb id for someone who recently logged in\n            this._espouse();\n        }\n    },\n\n    _getUser: function() {\n        // re-affirm cookie just in case it's changed\n        this._idFromCookie();\n\n        return this._.user;\n    },\n\n    _formatCompanionData: function(compData) {\n        var compType = Imgur.Util.dive(compData, 'contents.0.data.customData.adType'),\n            ret = {\n                'type': compType,\n                'raw': compData,\n                'html': '',\n            },\n            imgSrc, link, title, html;\n\n        ret.raw = compData;\n\n        switch(compType) {\n            case 'hash':\n            case 'native':\n                imgSrc = Imgur.Environment.cdnUrl+'/'+Imgur.Util.dive(compData, 'contents.0.data.customData.hash')+'.jpg';\n                link = Imgur.Util.dive(compData, 'contents.0.data.customData.link');\n                title = Imgur.Util.dive(compData, 'contents.0.data.customData.title');\n\n                ret.html = '<a href=\"'+link+'\" rel=\"nofollow\" target=\"_blank\" title=\"'+title+'\"><img src=\"'+imgSrc+'\" title=\"'+title+'\" alt=\"'+title+'\" border=\"0\" width=\"300\" height=\"250\"></a>';\n                break;\n\n            case 'html':\n                ret.html = Imgur.Util.dive(compData, 'contents.0.data.customData.html');\n                break;\n\n            default:\n                html = Imgur.Util.dive(compData, 'contents.0.body');\n\n                if(html) {\n                    ret.html = html;\n                }\n                break;\n        }\n\n        return ret;\n    }\n\n});\n","Imgur.LinkGenerator = Class.extend({\n    init: function() {\n        this._ = {\n            item: null,\n            thumbsize: null,\n            threshold: null\n        };\n    },\n\n    setItem: function(item) {\n        this._.item = item;\n        return this;\n    },\n\n    setThumbSize: function(thumbsize) {\n        this._.thumbsize = thumbsize;\n        return this;\n    },\n\n    setThreshold: function(threshold) {\n        this._.threshold = threshold;\n        return this;\n    },\n\n    reset: function() {\n        this._.item = null;\n        this._.thumbsize = '';\n\n        return this;\n    },\n\n    imageLink: function(isAlbum) {\n        return 'http://' + Imgur.Environment.host + '/' + (isAlbum ? 'a/' : '') + this._.item.hash;\n    },\n\n    directishLink: function() {\n        var ext = (this._.thumbsize == '' && this._.item.ext == '.gif' && this._.item.animated) ? '.gifv' : this._.item.ext;\n        return 'http:' + Imgur.Environment.cdnUrl + '/' + this._.item.hash + this._.thumbsize + ext;\n    },\n\n    directLink: function() {\n        return 'http:' + Imgur.Environment.cdnUrl + '/' + this._.item.hash + this._.thumbsize + this._.item.ext;\n    },\n    \n    htmlImage: function() {\n        if(this._.thumbsize == '' && this._.item.ext == '.gif' && this._.item.animated && this._.item.size > this._.threshold) {\n            return '<iframe class=\"imgur-embed\" width=\"100%\" height=\"' + this._.item.height + '\" frameborder=\"0\" src=\"' + this.directishLink() + '#embed\"></iframe>';\n        }\n\n        return '<a href=\"'+this.imageLink()+'\"><img src=\"'+this.directLink()+'\" title=\"source: imgur.com\" /></a>';\n    },\n\n    markdown: function() {\n        var title;\n        var ext = (this._.thumbsize == '' && this._.item.ext == '.gif' && this._.item.animated) ? '.gifv' : this._.item.ext;\n\n        if(this._.item.title) {\n            title = this._.item.title;\n        } else {\n            title = 'Imgur';\n        }\n\n        return '[' + title + '](http:' + Imgur.Environment.cdnUrl + '/' + this._.item.hash + this._.thumbsize + ext + ')';\n    },\n\n    bbcode: function() {\n        return '[img]http:' + Imgur.Environment.cdnUrl + '/' + this._.item.hash + this._.thumbsize + this._.item.ext + '[/img]';\n    },\n\n    linkedBbcode: function() {\n        if(this._.thumbsize == '' && this._.item.ext == '.gif' && this._.item.animated && this._.item.size > this._.threshold) {\n            return '[url=http://' + Imgur.Environment.host + '/' + this._.item.hash + ']http:' + Imgur.Environment.cdnUrl + '/' + this._.item.hash + this._.thumbsize + '.gifv[/url]';\n        }\n\n        return '[url=http://' + Imgur.Environment.host + '/' + this._.item.hash + '][img]http:' + Imgur.Environment.cdnUrl + '/' + this._.item.hash + this._.thumbsize + this._.item.ext + '[/img][/url]';\n    },\n\n    deletion: function() {\n        return 'https://' + Imgur.Environment.host + '/delete/' + this._.item.deletehash;\n    },\n\n    embed: function() {\n        var source = (Imgur.Environment.host === 'imgur.com' ? 's.imgur.com/min' : Imgur.Environment.host + '/include/minified') + '/embed.js',\n            title  = this._.item.title;\n\n        if(!title) {\n            title = 'View post on imgur.com';\n        }\n\n        var prefix = this._.item.is_album ? 'a/' : '';\n\n        return '<blockquote class=\"imgur-embed-pub\" lang=\"en\" data-id=\"' + prefix + this._.item.hash + '\"><a href=\"//' +\n            Imgur.Environment.host + '/' + prefix + this._.item.hash + '\">' + _.escape(title) + '</a></blockquote><script async src=\"//' + source + '\" charset=\"utf-8\"></script>';\n    }\n});\n","Namespace('Imgur.Album.Images');\nImgur.Album.Images = Class.extend({\n    init : function(params) {\n        this._ = $.extend(true,\n            {\n            host                    : 'imgur.com',\n            cdnUrl                  : '//i.imgur.com',\n            postURL                 : '/ajaxalbums/images',\n            imagesPerPage           : 25,\n            album                   : null,\n            images                  : null,\n            changeCover             : false,\n            albumTitle              : null,\n            mode                    : null,\n            onSubmitComplete        : function() {},\n            sort                    : 0,\n            order                   : 1,\n            selected                : [],\n            offsetSelectionInterval : null,\n\n            imgurImages             : null,\n\n            operationQueue          : {},\n\n            el:\n                {\n                $thumbsContainer    : $('#album-images #image-thumbs'),\n                thumbsId            : '#album-images #image-thumbs',\n                messagesClass       : 'thumbs-message',\n                $loader             : $('#album-images #images-loader'),\n                imageDivClass       : 'thumb',\n                $modes              : $('#album-images #images-menu .mode'),\n                $operationLoader    : $('#album-images #small-loader'),\n                imageSelectedClass  : 'selected',\n                $submitButton       : $('#album-images #save')\n                },\n\n            messages:\n                {\n                    noImages        : '<span class=\"thumbs-message\">No images were found.</span>'\n                }\n\n            },\n            params);\n\n        this._.operationQueue.hashes = this._.images == null? []: this._.images;\n        this._.operationQueue.count  = this._.images == null? 0: Object.size(this._.images);\n\n        this.loadImages();\n        this.loadPageElements();\n    },\n\n    getPageOptions : function() {\n        if(isNaN(this._.album)) {\n            this._.sort  = 3;\n            this._.order = 0;\n        } else {\n            this._.sort  = 0;\n            this._.order = 1;\n        }\n\n        return {\n            sort  :  this._.sort,\n            order : this._.order,\n            album : this._.album\n        };\n    },\n\n    noImagesFound : function() {\n        var self = Imgur.Album.Images.getInstance();\n        self._.el.$thumbsContainer.html(self._.messages.noImages);\n    },\n\n    addImageToThumbs : function(item, nocache, append) {\n        var self = Imgur.Album.Images.getInstance();\n\n        if($(self._.el.thumbsId + ' #'+item.hash).length > 0) return;\n\n        var match = item.ext.match(/\\?(.*)/);\n        var sext  = 's.jpg'+(match != null? (match[0]): '');\n\n        var href  = self._.cdnUrl+'/'+item.hash+(item.ext == '.gif'? item.ext: 'h'+item.ext),\n            div   = $('<div class=\"'+self._.el.imageDivClass+'\" id=\"'+item.hash+'\" ext=\"'+item.ext+'\"></div>'),\n            sel   = $('<div class=\"selection\"></div>');\n            img   = $('<img src=\"'+self._.cdnUrl+'/'+item.hash+sext+'\" />');\n\n        $(div).append(img);\n        $(div).append(sel);\n\n        if(self._.operationQueue.hashes[item.hash]) {\n            div.addClass(self._.el.imageSelectedClass);\n        }\n\n        $('.'+self._.el.messagesClass).remove();\n\n        if(append) {\n            $(div).appendTo(self._.el.$thumbsContainer);\n        } else {\n            $(div).prependTo(self._.el.$thumbsContainer).hide().fadeIn('slow');\n        }\n    },\n\n    queueOperation : function(image) {\n        var hash = image.attr('id');\n\n        // If we're changing the cover\n        if(this._.changeCover) {\n            this._.operationQueue.count     = 1;\n            this._.operationQueue.hashes[0] = hash;\n\n            this._.el.$thumbsContainer.find('.'+this._.el.imageDivClass).removeClass(this._.el.imageSelectedClass);\n            image.addClass(this._.el.imageSelectedClass);\n\n        // If we're selecting multiple images\n        } else {\n            // Dequeue\n            if(this._.operationQueue.hashes[hash]) {\n                this._.operationQueue.count--;\n                this._.operationQueue.hashes[hash] = null;\n                image.removeClass(this._.el.imageSelectedClass);\n\n            //Queue\n            }  else {\n                this._.operationQueue.count++;\n                this._.operationQueue.hashes[hash] = true;\n                image.addClass(this._.el.imageSelectedClass);\n            }\n        }\n    },\n\n    isInQueue : function(hash) {\n        return this._.operationQueue.hashes[hash] == true;\n    },\n\n    startOperation : function() {\n        if(this._.operationQueue.count == 0) return null;\n\n        this._.images = [];\n\n        if(this._.changeCover) {\n            this._.images.push(this._.operationQueue.hashes[0]);\n        } else {\n            for(var i in this._.operationQueue.hashes) {\n                if(this._.operationQueue.hashes[i] != null) {\n                    this._.images.push(i);\n                }\n            }\n        }\n\n        return this._.images;\n    },\n\n    toggleOperationsLoader : function() {\n        this._.el.$operationLoader.toggle();\n    },\n\n    bindOperationClick : function(element) {\n        var self = this;\n\n        element.unbind('click');\n\n        element.click(function() {\n            self.queueOperation($(this).parent());\n            return false;\n        });\n    },\n\n    offsetSelection : function() {\n        var self = Imgur.Album.Images.getInstance();\n        var offset    = 5;\n        var parent    = self._.el.$thumbsContainer.parent();\n        var scrollPos = parent.scrollTop();\n        var pos       = parent.selectable();\n\n        if(pos.y < 0) {\n            parent.scrollTop(parent.scrollTop()-offset);\n\n            if(parent.scrollTop() < scrollPos) {\n                parent.selectable(\"recalc\", -offset);\n            }\n        } else if(pos.y > parent.height()) {\n            parent.scrollTop(parent.scrollTop()+offset);\n\n            if(parent.scrollTop() > scrollPos) {\n                parent.selectable(\"recalc\", offset)\n            }\n        }\n    },\n\n    makeSelectable : function() {\n        var self = Imgur.Album.Images.getInstance();\n\n        self._.el.$thumbsContainer.unbind('mousedown');\n\n        self._.el.$thumbsContainer.parent().selectable(\n            {\n            filter   : '.thumb',\n\n            selected: function(event, ui) {\n                self._.selected.push($(ui.selected));\n            },\n\n            stop: function(event, ui) {\n                var found  = 0;\n                var adding = false;\n                var count  = self._.selected.length;\n\n                for(var i in self._.selected) {\n                    if(self.isInQueue($(self._.selected[i]).attr('id'))) {\n                        found++;\n\n                        if(i == count-1 && found < count) {\n                            adding = true;\n                        }\n                    } else if(found) {\n                        adding = true;\n                        break;\n                    }\n                };\n\n                for(var i in self._.selected) {\n                    var selected = $(self._.selected[i]);\n\n                    if(adding) {\n                        if(!self.isInQueue(selected.attr('id'))) {\n                            self.queueOperation(selected);\n                        }\n                    } else {\n                        self.queueOperation(selected);\n                    }\n                };\n\n                self._.selected = [];\n            }\n        });\n\n        self._.el.$thumbsContainer.bind('mousedown', function() {\n            clearInterval(self._.offsetSelectionInterval);\n            self._.offsetSelectionInterval = setInterval(self.offsetSelection, 50);\n        });\n\n        $(document).bind('mouseup', function() {\n            clearInterval(self._.offsetSelectionInterval);\n        });\n    },\n\n    submit : function() {\n        this._.images = this.startOperation();\n\n        this._.el.$submitButton.disable();\n        this.toggleOperationsLoader();\n\n        var self = this;\n\n        $.post(\n            this._.postURL+'/'+this._.album, 'hashes='+this._.images+'&change_cover='+this._.changeCover,\n            function(response) {\n                if(response.success) {\n                    self._.el.$submitButton.enable();\n                    self.toggleOperationsLoader();\n                    self._.onSubmitComplete(response);\n                } else if(response.data.error.code == 4344) {\n                    self._.el.$submitButton.enable();\n                    self.toggleOperationsLoader();\n                    humanMsg.displayMsg('You are trying to add too many images to this album');\n                } else if(response.data.error.code == 403) {\n                    self._.onSubmitComplete(response);\n                    humanMsg.displayMsg('Cannot edit album images while album is in the Gallery');\n                } else {\n                    humanMsg.displayMsg('Unknown error occurred');\n                }\n            }\n        ).error(function(response) {\n            self._.el.$submitButton.enable();\n            self.toggleOperationsLoader();\n            var json = JSON.parse(response.responseText);\n            humanMsg.displayMsg(json.data.error);\n        });\n\n        return false;\n    },\n\n    loadImages : function() {\n        if(this._.album == null || typeof this._.album == 'undefined') return;\n\n        var imgurImages = Imgur.Images.getInstance();\n        imgurImages.init(\n            {\n            imagesPerPage   : this._.imagesPerPage,\n            addToThumbsFunc : this.addImageToThumbs,\n            noImagesFunc    : this.noImagesFound,\n            onComplete      : this.makeSelectable,\n            loader          : this._.el.$loader,\n            noPageHash      : true\n            }\n        );\n\n        imgurImages.setOptions(this.getPageOptions());\n\n        this.next = function() {\n            imgurImages.next();\n        };\n\n        this.prev = function() {\n            imgurImages.prev();\n        };\n\n        this.changePage = function(page) {\n            imgurImages.changePage(page);\n        };\n\n        imgurImages.bindScrollEvent();\n        imgurImages.reload();\n        this._.imgurImages = imgurImages;\n    },\n\n    loadPageElements : function() {\n        if(!this._.album) return;\n\n        this._.el.$modes.filter(':first').attr('data-value', this._.album);\n        this._.el.$modes.removeClass('selected');\n\n        if(!this._.mode) {\n            this._.el.$modes.siblings('.start').addClass('selected');\n        } else {\n            this._.el.$modes.siblings('div[data-value='+this._.mode+']').addClass('selected');\n            // If we initially have a mode, use it\n            this._.album = this._.mode;\n        }\n\n        // Init image selection pool with current settings\n        this._.imgurImages.setCurrentPage(1);\n        this._.imgurImages.setOptions(this.getPageOptions());\n        this._.imgurImages.reload();\n        this._.el.$modes.click(this.modeClickHandler);\n    },\n\n    modeClickHandler : function() {\n        var self = Imgur.Album.Images.getInstance();\n        self._.el.$modes.removeClass('selected');\n        $(this).addClass('selected');\n\n        var albumMode = $(this).attr('data-value');\n        self._.album = albumMode;\n\n        self._.imgurImages.setCurrentPage(1);\n        self._.imgurImages.setOptions(self.getPageOptions());\n        self._.imgurImages.reload();\n    },\n\n    destroy : function() {\n        this._.el.$thumbsContainer.empty();\n        this._.el.$modes.unbind('click');\n        this._.el.$modes.removeClass('selected');\n        this._.el.$loader.show();\n    }\n});\n\nClass.addSingleton(Imgur.Album.Images);\n","Namespace('Imgur.Images');\nImgur.Images = Class.extend({\n    init : function(params) {\n        this._ = $.extend(true,\n            {\n            imagesPerPage       :    20,\n            thisName            :    'app',\n            ajaxURL             :    '/ajax/images',\n            noPageHash          :    false,\n            addToThumbsFunc     :    function() { return null },\n            hiddenImagesFunc    :    function() { return null },\n            noImagesFunc        :    function() { return null },\n            onComplete          :    function() { return null },\n            currentPage         :    1,\n            totalPages          :    0,\n            totalImageCount     :    0,\n            numImages           :    0,\n            changingPage        :    false,\n            options             :    null,\n            imageLimit          :    225,\n            isPro               :    false,\n            cache               :    [],\n            stopOnPaging        :    true,\n            lastScrollPos       :    0,\n            ajax                :    null,\n\n            el: {\n                $navigationContainer:     $('.navigation'),\n                $loader             :    $('#images-loader'),\n                $totalCounter       :    $('.total-images'),\n                $totalCounterSuffix :     $('.total-images-suffix'),\n                $thumbsContainer    :    $('#image-thumbs'),\n                pageNumbersClass    :     'page-numbers',\n                prevID              :    'prev',\n                nextID              :    'next'\n                }\n            },\n\n            params);\n\n        this._.el.$totalCounter.text(0);\n        this._.el.$totalCounterSuffix.text('images');\n\n        if(!this._.noPageHash) {\n            this._.currentPage = this.getPage();\n        }\n    },\n\n    //*********************** GENERIC FUNCTIONS ***********************//\n    getHash : function() {\n        return window.location.hash.substring(1);\n    },\n\n    getPage : function() {\n        var page = parseInt(this.getHash());\n        if(page < 1) page = 1;\n        return page? page: 1;\n    },\n\n    //*********************** PAGING FUNCTIONS ***********************//\n\n    stopPaging : function() {\n        if(window.stop !== undefined) {\n            window.stop();\n        } else if(document.execCommand !== undefined) {\n             document.execCommand('Stop', false);\n        }\n    },\n\n    //*********************** NAVIGATION FUNCTIONS ***********************//\n\n    generatePageLink : function(container, i) {\n        if(i > 0 && i <= this._.totalPages) {\n            var link = $('<a href=\"javascript:;\">'+i+'</a>');\n            var self = this;\n            link.click(function() {\n                self._.el.$thumbsContainer.parent().scrollTop(0);\n                self.changePage(i);\n            });\n\n            container.append(link);\n\n            if(i == this._.currentPage) {\n                link.addClass('current-selected');\n            }\n        }\n    },\n\n    generateNavigationLinks : function() {\n        this._.el.$navigationContainer.empty();\n\n        if(this._.totalPages == 1) return;\n\n        var prevPage = this._.currentPage - 1,\n            nextPage = this._.currentPage + 1,\n            numbers  = $('<span class=\"'+this._.el.pageNumbersClass+'\"></span>'),\n            prev     = $('<a href=\"javascript:;\" id=\"'+this._.el.prevID+'\">Prev</a>'),\n            next     = $('<a href=\"javascript:;\" id=\"'+this._.el.nextID+'\">Next</a>');\n\n        prev.click(this.prev);\n        next.click(this.next);\n\n        for(var i = this._.currentPage - 5; i < this._.currentPage; ++i) {\n            this.generatePageLink(numbers, i);\n        }\n\n        for(var i = this._.currentPage; i < this._.currentPage + 6; ++i) {\n            this.generatePageLink(numbers, i);\n        }\n\n        this._.el.$navigationContainer.append(numbers);\n\n        if(this._.currentPage > 1) {\n            this._.el.$navigationContainer.append(prev);\n        }\n\n        if(this._.currentPage < this._.totalPages) {\n            this._.el.$navigationContainer.append(next);\n        }\n    },\n\n    recalcNavigation : function() {\n        var newPageCount = Math.ceil(this._.totalImageCount/this._.imagesPerPage);\n\n        if(newPageCount < 1) {\n            newPageCount = 1;\n        }\n\n        if(newPageCount != this._.totalPages) {\n            this._.totalPages = newPageCount;\n            this.generateNavigationLinks(this._.currentPage);\n        }\n\n        this._.el.$totalCounter.text(Imgur.Util.numberFormat(this._.totalImageCount));\n        this._.el.$totalCounterSuffix.text(Imgur.Util.pluralize(this._.totalImageCount, 'image'));\n    },\n\n    handleJSON : function(data) {\n        if(data != null) {\n            this._.cache[$.param(this._.options)] = data;\n            this._.isPro = data.isPro;\n\n            if(data.count != this._.totalImageCount) {\n                this._.totalImageCount = parseInt(data.count);\n                this.recalcNavigation();\n            }\n\n            if(data.count > 0 && data.images.length > 0) {\n                var self = this;\n\n                $.each(data.images, function(i, item) {\n                    self._.numImages++;\n                    self._.addToThumbsFunc(item, null, true);\n                });\n            } else {\n                this._.noImagesFunc();\n            }\n\n            this._.el.$thumbsContainer.append('<div class=\"clear\"></div>');\n        }\n\n        this._.changingPage = false;\n        this._.el.$loader.hide();\n\n        this._.onComplete();\n    },\n\n    //*********************** PUBLIC FUNCTIONS ***********************//\n\n    changePage : function(pageNumber, noHash, scroll) {\n        if(this._.options == null) return false;\n\n        if(this._.changingPage) {\n            if(scroll) {\n                return false;\n            } else {\n                this._.ajax.abort();\n            }\n        }\n\n        if(pageNumber > this._.totalPages && this._.totalPages > 0) {\n            return false;\n        }\n\n        this._.changingPage = true;\n        this._.currentPage  = pageNumber;\n\n        this._.numImages = (this._.imagesPerPage*(this._.currentPage-1));\n\n        this._.el.$loader.show();\n        this.generateNavigationLinks();\n\n        if(!scroll) {\n            this._.el.$thumbsContainer.empty();\n\n            if(!noHash && !this._.noPageHash) {\n                window.location = window.location.href.substring(0, window.location.href.indexOf('#')) + '#' + this._.currentPage;\n            }\n        }\n\n        this._.options.page    = pageNumber;\n        this._.options.perPage = this._.imagesPerPage;\n\n        var key     = $.param(this._.options);\n        var self     = this;\n\n        if(this._.cache[key]) {\n            this.handleJSON(this._.cache[key]);\n        } else {\n            if(this._.stopOnPaging && !noHash) this.stopPaging();\n\n            this._.ajax = $.getJSON(\n                this._.ajaxURL,\n                this._.options,\n                function(response) {\n                    if(response.success) {\n                        self.handleJSON(response.data);\n                    }\n                }\n            );\n        }\n\n        return true;\n    },\n\n    bindScrollEvent : function() {\n        var distance  = 80;\n        var parent    = this._.el.$thumbsContainer.parent();\n        var container = this._.el.$thumbsContainer;\n\n        var self = this;\n\n        this._.el.$thumbsContainer.parent().scroll(function() {\n            if(parent.scrollTop() > container.height() - parent.height() - distance) {\n                self.changePage(self._.currentPage+1, true, true);\n            }\n\n            self._.lastScrollPos = parent.scrollTop();\n        })\n    },\n\n    next : function() {\n        var self = Imgur.Images.getInstance();\n        self._.el.$thumbsContainer.parent().scrollTop(0);\n        return self.changePage(self._.currentPage+1);\n    },\n\n    prev : function() {\n        var self = Imgur.Images.getInstance();\n        self._.el.$thumbsContainer.parent().scrollTop(0);\n        return self.changePage(self._.currentPage-1);\n    },\n\n    reload : function() {\n        return this.changePage(this._.currentPage, true);\n    },\n\n    getCurrentPage : function() {\n        return this._.currentPage;\n    },\n\n    setCurrentPage : function(pageNum) {\n        this._.currentPage = pageNum;\n    },\n\n    setOptions : function(options) {\n        this._.options = options;\n    },\n\n    getTotalPages : function() {\n        return this._.totalPages;\n    },\n\n    getImageLimit : function() {\n        return this._.imageLimit;\n    },\n\n    getTotalImageCount : function() {\n        return this._.totalImageCount;\n    },\n\n    increaseImageCount : function() {\n        this._.totalImageCount++;\n    },\n\n    clearCache : function() {\n        this._.cache = [];\n    },\n\n    stopOnPaging : function(stop) {\n        this._.stopOnPaging = stop;\n    }\n});\n\nClass.addSingleton(Imgur.Images);\n","Namespace('Imgur.TitleDesc');\nImgur.TitleDesc = Imgur.extend({\n    init : function(params) {\n        this._ = $.extend(true, {\n            'el'         : {\n                'titleDescriptionForm'  : {\n                    'id'                : '#title-description',\n                    '$form'             : $('#title-description form'),\n                    '$titleInput'       : $('#title-input'),\n                    '$descriptionInput' : $('#description-input'),\n                    '$loader'           : $('#title-description-loader')\n                }\n            }\n        }, params);\n\n        this._ = this._super(this._);\n        return this._;\n    },\n\n    bindTitleDescriptionSubmit : function(callback, fillTitleDesc) {\n        if (fillTitleDesc){\n            this._.el.titleDescriptionForm.$titleInput.val(Imgur.Environment.hashes[0].title);\n            var textArea = document.createElement('textarea'); // description is sent html encoded.\n            textArea.innerHTML = Imgur.Environment.hashes[0].description;\n            this._.el.titleDescriptionForm.$descriptionInput.val(textArea.value);\n        }\n\n        var self = this;\n\n        this._.el.titleDescriptionForm.$form.submit(function() {\n            return self.titleDescriptionSubmitHandler(callback)\n        });\n    },\n\n    titleDescriptionSubmitHandler : function(callback) {\n        var title = this._.el.titleDescriptionForm.$titleInput.val() != this._.el.titleDescriptionForm.$titleInput.attr('title')?\n                    this._.el.titleDescriptionForm.$titleInput.val(): '';\n\n        var desc = this._.el.titleDescriptionForm.$descriptionInput.val() != this._.el.titleDescriptionForm.$descriptionInput.attr('title')?\n                   this._.el.titleDescriptionForm.$descriptionInput.val(): '';\n\n        this._.el.titleDescriptionForm.$loader.show();\n        this._.hash = Imgur.getInstance()._.hash;\n\n        var self    = this;\n        var deletehash = this._.hash.deletehash || Imgur.Environment.hashes[0].deletehash;\n        $.post('/ajax/titledesc/' + deletehash, {\n            title: title,\n            description:  desc\n        }, function(data) {\n            $.colorbox.close();\n            humanMsg.displayMsg(self._.messages.titledesc);\n            self._.el.titleDescriptionForm.$loader.hide();\n\n            if (callback){\n                callback({title: title, description: desc});\n            } else {\n                window.setTimeout(function(){\n                    location.reload();\n                }, 1000);\n            }\n        });\n\n        return false;\n    },\n\n    addTitleDescription : function() {\n        var self = this;\n\n\t\t$.colorbox({\n\t\t\thref: self._.el.titleDescriptionForm.id,\n\t\t\topen: true,\n\t\t\tinline: true,\n\t\t\ttop: '15%',\n\t\t\ttransition: 'none',\n\t\t\tscrolling: false,\n\t\t\tonComplete: function() {\n\t\t\t\tself._.el.titleDescriptionForm.$titleInput.focus();\n\t\t\t}\n\t\t});\n    },\n\n    getElements : function() {\n        return this._.el;\n    }\n});\n\nClass.addSingleton(Imgur.TitleDesc);\n","Imgur.GalleryBundleLoaded = true; // used for signifying that the gallery bundle has finished loading asyncronously and the post can now render"]}